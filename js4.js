(function(I,X){var aj,ad=Array.prototype.slice,T=decodeURIComponent,aq=I.param,ah,ao,ae,K,ap=I.bbq=I.bbq||{},V,L,ag,am=I.event.special,an="hashchange",Z="querystring",R="fragment",J="elemUrlAttr",af="href",N="src",ab=/^.*\?|#.*$/g,Q,M,ak,ai,W,S={};function P(a){return typeof a==="string"}function U(a){var b=ad.call(arguments,1);return function(){return a.apply(this,b.concat(ad.call(arguments)))}}function ac(a){return a.replace(M,"$2")}function Y(a){return a.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}function al(i,c,k,h,j){var a,e,f,b,g;if(h!==aj){f=k.match(i?M:/^([^#?]*)\??([^#]*)(#?.*)/);g=f[3]||"";if(j===2&&P(h)){e=h.replace(i?Q:ab,"")}else{b=ae(f[2]);h=P(h)?ae[i?R:Z](h):h;e=j===2?h:j===1?I.extend({},h,b):I.extend({},b,h);e=ah(e);if(i){e=e.replace(ak,T)}}a=f[1]+(i?W:e||!f[1]?"?":"")+e+g}else{a=c(k!==aj?k:location.href)}return a}aq[Z]=U(al,0,Y);aq[R]=ao=U(al,1,ac);aq.sorted=ah=function(c,b){var e=[],a={};I.each(aq(c,b).split("&"),function(f,i){var g=i.replace(/(?:%5B|=).*$/,""),h=a[g];if(!h){h=a[g]=[];e.push(g)}h.push(i)});return I.map(e.sort(),function(f){return a[f]}).join("&")};ao.noEscape=function(a){a=a||"";var b=I.map(a.split(""),encodeURIComponent);ak=new RegExp(b.join("|"),"g")};ao.noEscape(",/");ao.ajaxCrawlable=function(a){if(a!==aj){if(a){Q=/^.*(?:#!|#)/;M=/^([^#]*)(?:#!|#)?(.*)$/;W="#!"}else{Q=/^.*#/;M=/^([^#]*)#?(.*)$/;W="#"}ai=!!a}return ai};ao.ajaxCrawlable(0);I.deparam=ae=function(a,e){var b={},c={"true":!0,"false":!1,"null":null};I.each(a.replace(/\+/g," ").split("&"),function(l,g){var m=g.split("="),h=T(m[0]),n,i=b,k=0,f=h.split("]["),j=f.length-1;if(/\[/.test(f[0])&&/\]$/.test(f[j])){f[j]=f[j].replace(/\]$/,"");f=f.shift().split("[").concat(f);j=f.length-1}else{j=0}if(m.length===2){n=T(m[1]);if(e){n=n&&!isNaN(n)?+n:n==="undefined"?aj:c[n]!==aj?c[n]:n}if(j){for(;k<=j;k++){h=f[k]===""?i.length:f[k];i=i[h]=k<j?i[h]||(f[k+1]&&isNaN(f[k+1])?{}:[]):n}}else{if(I.isArray(b[h])){b[h].push(n)}else{if(b[h]!==aj){b[h]=[b[h],n]}else{b[h]=n}}}}else{if(h){b[h]=e?aj:""}}});return b};function aa(a,c,b){if(c===aj||typeof c==="boolean"){b=c;c=aq[a?R:Z]()}else{c=P(c)?c.replace(a?Q:ab,""):c}return ae(c,b)}ae[Z]=U(aa,0);ae[R]=K=U(aa,1);I[J]||(I[J]=function(a){return I.extend(S,a)})({a:af,base:af,iframe:N,img:N,input:N,form:"action",link:af,script:N});ag=I[J];function O(a,c,b,e){if(!P(b)&&typeof b!=="object"){e=b;b=c;c=aj}return this.each(function(){var f=I(this),h=c||ag()[(this.nodeName||"").toLowerCase()]||"",g=h&&f.attr(h)||"";f.attr(h,aq[a](g,b,e))})}I.fn[Z]=U(O,Z);I.fn[R]=U(O,R);ap.pushState=V=function(a,e){if(P(a)&&/^#/.test(a)&&e===aj){e=2}var b=a!==aj,c=ao(location.href,b?a:{},b?e:2);location.href=c};ap.getState=L=function(b,a){return b===aj||typeof b==="boolean"?K(b):K(a)[b]};ap.removeState=function(b){var a={};if(b!==aj){a=L();I.each(I.isArray(b)?b:arguments,function(c,e){delete a[e]})}V(a,2)};am[an]=I.extend(am[an],{add:function(c){var a;function b(f){var e=f[R]=ao();f.getState=function(h,g){return h===aj||typeof h==="boolean"?ae(e,h):ae(e,g)[h]};a.apply(this,arguments)}if(I.isFunction(c)){a=c;return b}else{a=c.handler;c.handler=b}}})})(jQuery,this);(function(j,o,r){var q="hashchange",l=document,n,m=j.event.special,k=l.documentMode,p="on"+q in o&&(k===r||k>7);function s(a){a=a||location.href;return"#"+a.replace(/^[^#]*#?(.*)$/,"$1")}j.fn[q]=function(a){return a?this.bind(q,a):this.trigger(q)};j.fn[q].delay=50;m[q]=j.extend(m[q],{setup:function(){if(p){return false}j(n.start)},teardown:function(){if(p){return false}j(n.stop)}});n=(function(){var e={},f,a=s(),c=function(i){return i},b=c,g=c;e.start=function(){f||h()};e.stop=function(){f&&clearTimeout(f);f=r};function h(){var i=s(),t=g(a);if(i!==a){b(a=i,t);j(o).trigger(q)}else{if(t!==a){location.href=location.href.replace(/#.*/,"")+t}}f=setTimeout(h,j.fn[q].delay)}!p&&(function(){var t,i;e.start=function(){if(!t){i=j.fn[q].src;i=i&&i+s();t=j('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){i||b(s());h()}).attr("src",i||"javascript:0").insertAfter("body")[0].contentWindow;l.onpropertychange=function(){try{if(event.propertyName==="title"){t.document.title=l.title}}catch(u){}}}};e.stop=c;g=function(){return s(t.location.href)};b=function(w,z){var x=t.document,y=j.fn[q].domain;if(w!==z){x.title=l.title;x.open();y&&x.write('<script>document.domain="'+y+'"<\/script>');x.close();t.location.hash=w}}})();return e})()})(jQuery,this);jQuery.cookie=function(b,k,n){if(typeof k!="undefined"){n=n||{};if(k===null){k="";n.expires=-1}var f="";if(n.expires&&(typeof n.expires=="number"||n.expires.toUTCString)){var g;if(typeof n.expires=="number"){g=new Date();g.setTime(g.getTime()+(n.expires*24*60*60*1000))}else{g=n.expires}f="; expires="+g.toUTCString()}var m=n.path?"; path="+n.path:"";var h=n.domain?"; domain="+n.domain:"";var a=n.secure?"; secure":"";document.cookie=[b,"=",encodeURIComponent(k),f,m,h,a].join("")}else{var e=null;if(document.cookie&&document.cookie!=""){var l=document.cookie.split(";");for(var j=0;j<l.length;j++){var c=jQuery.trim(l[j]);if(c.substring(0,b.length+1)==(b+"=")){e=decodeURIComponent(c.substring(b.length+1));break}}}return e}};(function(b){var a={};b.fn.yiiListView=function(c){return this.each(function(){var e=b.extend({},b.fn.yiiListView.defaults,c||{}),f=b(this),g=f.attr("id");if(e.updateSelector==undefined){e.updateSelector="#"+g+" ."+e.pagerClass.replace(/\s+/g,".")+" a, #"+g+" ."+e.sorterClass.replace(/\s+/g,".")+" a"}b.fn.yiiListView.settings[g]=e;if(e.ajaxUpdate.length>0){b(document).on("click.yiiListView",e.updateSelector,function(){if(e.enableHistory&&window.History.enabled){var h=b(this).attr("href");if(h){var i=h.split("?"),k=b.deparam.querystring("?"+(i[1]||""));delete k[e.ajaxVar];var j=b.param.querystring(i[0],k);window.History.pushState({url:j},document.title,j)}}else{b.fn.yiiListView.update(g,{url:b(this).attr("href")})}return false});if(e.enableHistory&&window.History.enabled){b(window).bind("statechange",function(){var h=window.History.getState();if(h.data.url===undefined){h.data.url=h.url}b.fn.yiiListView.update(g,h.data)})}}})};b.fn.yiiListView.defaults={ajaxUpdate:[],ajaxVar:"ajax",ajaxType:"GET",pagerClass:"pager",loadingClass:"loading",sorterClass:"sorter"};b.fn.yiiListView.settings={};b.fn.yiiListView.getKey=function(e,c){return b("#"+e+" > div.keys > span:eq("+c+")").text()};b.fn.yiiListView.getUrl=function(e){var c=b.fn.yiiListView.settings[e];return c.url||b("#"+e+" > div.keys").attr("title")};b.fn.yiiListView.update=function(g,e){var c,f=b.fn.yiiListView.settings[g];if(e&&e.error!==undefined){c=e.error;delete e.error}e=b.extend({type:f.ajaxType,url:b.fn.yiiListView.getUrl(g),success:function(i,h){b.each(f.ajaxUpdate,function(k,j){var l="#"+j;b(l).replaceWith(b(l,"<div>"+i+"</div>"))});if(f.afterAjaxUpdate!=undefined){f.afterAjaxUpdate(g,i)}},complete:function(){b("#"+g).removeClass(f.loadingClass);a[g]=null},error:function(j,l,k){var h,i;if(j.readyState===0||j.status===0){return}if(c!==undefined){h=c(j);if(h!==undefined&&!h){return}}switch(l){case"timeout":i="The request timed out!";break;case"parsererror":i="Parser error!";break;case"error":if(j.status&&!/^\s*$/.test(j.status)){i="Error "+j.status}else{i="Error"}if(j.responseText&&!/^\s*$/.test(j.responseText)){i=i+": "+j.responseText}break}if(f.ajaxUpdateError!==undefined){f.ajaxUpdateError(j,l,k,i,g)}else{if(i){alert(i)}}}},e||{});if(e.data!=undefined&&e.type=="GET"){e.url=b.param.querystring(e.url,e.data);e.data={}}if(f.ajaxVar){e.url=b.param.querystring(e.url,f.ajaxVar+"="+g)}if(a[g]!=null){a[g].abort()}b("#"+g).addClass(f.loadingClass);if(f.beforeAjaxUpdate!=undefined){f.beforeAjaxUpdate(g,e)}a[g]=b.ajax(e)}})(jQuery);(function(a){a.yii={version:"1.0",submitForm:function(e,c,h){var g=a(e).parents("form")[0];if(!g){g=document.createElement("form");g.style.display="none";e.parentNode.appendChild(g);g.method="POST"}if(typeof c=="string"&&c!=""){g.action=c}if(e.target!=null){g.target=e.target}var b=[];a.each(h,function(i,j){var f=document.createElement("input");f.setAttribute("type","hidden");f.setAttribute("name",i);f.setAttribute("value",j);g.appendChild(f);b.push(f)});a(g).data("submitObject",a(e));a(g).trigger("submit");a.each(b,function(){g.removeChild(this)})}}})(jQuery);(function(b){var a=function(f){var e,g=[];if(!f.length){return undefined}if(f[0].tagName.toLowerCase()==="span"){f.find(":checked").each(function(){g.push(this.value)});return g.join(",")}e=f.attr("type");if(e==="checkbox"||e==="radio"){return f.filter(":checked").val()}else{return f.val()}};b.fn.yiiactiveform=function(c){return this.each(function(){var f=b.extend({},b.fn.yiiactiveform.defaults,c||{}),e=b(this);if(f.validationUrl===undefined){f.validationUrl=e.attr("action")}b.each(f.attributes,function(j){this.value=a(e.find("#"+this.inputID));f.attributes[j]=b.extend({},{validationDelay:f.validationDelay,validateOnChange:f.validateOnChange,validateOnType:f.validateOnType,hideErrorMessage:f.hideErrorMessage,inputContainer:f.inputContainer,errorCssClass:f.errorCssClass,successCssClass:f.successCssClass,beforeValidateAttribute:f.beforeValidateAttribute,afterValidateAttribute:f.afterValidateAttribute,validatingCssClass:f.validatingCssClass,errorCallback:f.errorCallback},this)});e.data("settings",f);f.submitting=false;var h=function(j,i){if(i){j.status=2}b.each(f.attributes,function(){if(this.value!==a(e.find("#"+this.inputID))){this.status=2;i=true}});if(!i){return}if(f.timer!==undefined){clearTimeout(f.timer)}f.timer=setTimeout(function(){if(f.submitting||e.is(":hidden")){return}if(j.beforeValidateAttribute===undefined||j.beforeValidateAttribute(e,j)){b.each(f.attributes,function(){if(this.status===2){this.status=3;b.fn.yiiactiveform.getInputContainer(this,e).addClass(this.validatingCssClass)}});b.fn.yiiactiveform.validate(e,function(l){var k=false;b.each(f.attributes,function(){if(this.status===2||this.status===3){k=b.fn.yiiactiveform.updateInput(this,l,e)||k}});if(j.afterValidateAttribute!==undefined){j.afterValidateAttribute(e,j,l,k)}},f.errorCallback)}},j.validationDelay)};b.each(f.attributes,function(j,k){if(this.validateOnChange){e.find("#"+this.inputID).on("change",function(){h(k,false)}).on("blur",function(){if(k.status!==2&&k.status!==3){h(k,!k.status)}})}if(this.validateOnType){e.find("#"+this.inputID).keyup(function(){if(k.value!==a(b(this))){h(k,false)}})}});if(f.validateOnSubmit){e.on("mouseup keyup",":submit",function(){e.data("submitObject",b(this))});var g=false;e.on("submit",function(){if(g){g=false;return true}if(f.timer!==undefined){clearTimeout(f.timer)}f.submitting=true;if(f.beforeValidate===undefined||f.beforeValidate(e)){b.fn.yiiactiveform.validate(e,function(k){var i=false;b.each(f.attributes,function(){i=b.fn.yiiactiveform.updateInput(this,k,e)||i});b.fn.yiiactiveform.updateSummary(e,k);if(f.afterValidate===undefined||f.afterValidate(e,k,i)){if(!i){g=true;var j=e.data("submitObject")||e.find(":submit:first");if(j.length){j.trigger("click")}else{e.trigger("submit")}return}}f.submitting=false},f.errorCallback)}else{f.submitting=false}return false})}e.bind("reset",function(){setTimeout(function(){b.each(f.attributes,function(){this.status=0;var i=e.find("#"+this.errorID),j=b.fn.yiiactiveform.getInputContainer(this,e);j.removeClass(this.validatingCssClass+" "+this.errorCssClass+" "+this.successCssClass);i.html("").hide();this.value=a(e.find("#"+this.inputID))});e.find("label, :input").each(function(){b(this).removeClass(f.errorCss)});b("#"+f.summaryID).hide().find("ul").html("");if(f.focus!==undefined&&!window.location.hash){e.find(f.focus).trigger("focus")}},1)});if(f.focus!==undefined&&!window.location.hash){e.find(f.focus).trigger("focus")}})};b.fn.yiiactiveform.getInputContainer=function(e,c){if(e.inputContainer===undefined){return c.find("#"+e.inputID).closest("div")}else{return c.find(e.inputContainer).filter(':has("#'+e.inputID+'")')}};b.fn.yiiactiveform.updateInput=function(j,i,h){j.status=1;var e,k,c=false,g=h.find("#"+j.inputID),f=h.data("settings").errorCss;if(g.length){c=i!==null&&b.isArray(i[j.id])&&i[j.id].length>0;e=h.find("#"+j.errorID);k=b.fn.yiiactiveform.getInputContainer(j,h);k.removeClass(j.validatingCssClass+" "+j.errorCssClass+" "+j.successCssClass);k.find("label, :input").each(function(){b(this).removeClass(f)});if(c){e.html(i[j.id][0]);k.addClass(j.errorCssClass)}else{if(j.enableAjaxValidation||j.clientValidation){k.addClass(j.successCssClass)}}if(!j.hideErrorMessage){e.toggle(c)}j.value=a(g)}return c};b.fn.yiiactiveform.updateSummary=function(j,h){var f=b(j).data("settings"),g="";if(f.summaryID===undefined){return}if(h){var c=[];for(var e in f.attributes){if(f.attributes[e].summary){c.push(f.attributes[e].id)}}b.each(f.attributes,function(){if(b.inArray(this.id,c)!==-1&&b.isArray(h[this.id])){b.each(h[this.id],function(i,k){g=g+"<li>"+k+"</li>"})}})}b("#"+f.summaryID).toggle(g!=="").find("ul").html(g)};b.fn.yiiactiveform.validate=function(e,f,j){var l=b(e),g=l.data("settings"),k=false,i={};b.each(g.attributes,function(){var m,n=[];if(this.clientValidation!==undefined&&(g.submitting||this.status===2||this.status===3)){m=a(l.find("#"+this.inputID));this.clientValidation(m,n,this);if(n.length){i[this.id]=n}}if(this.enableAjaxValidation&&!n.length&&(g.submitting||this.status===2||this.status===3)){k=true}});if(!k||g.submitting&&!b.isEmptyObject(i)){if(g.submitting){setTimeout(function(){f(i)},200)}else{f(i)}return}var c=l.data("submitObject"),h="&"+g.ajaxVar+"="+l.attr("id");if(c&&c.length){h+="&"+c.attr("name")+"="+c.attr("value")}b.ajax({url:g.validationUrl,type:l.attr("method"),data:l.serialize()+h,dataType:"json",success:function(m){if(m!==null&&typeof m==="object"){b.each(g.attributes,function(){if(!this.enableAjaxValidation){delete m[this.id]}});f(b.extend({},i,m))}else{f(i)}},error:function(){if(j!==undefined){j()}}})};b.fn.yiiactiveform.getSettings=function(c){return b(c).data("settings")};b.fn.yiiactiveform.defaults={ajaxVar:"ajax",validationUrl:undefined,validationDelay:200,validateOnSubmit:false,validateOnChange:true,validateOnType:false,hideErrorMessage:false,inputContainer:undefined,errorCss:"error",errorCssClass:"error",successCssClass:"success",validatingCssClass:"validating",summaryID:undefined,timer:undefined,beforeValidateAttribute:undefined,afterValidateAttribute:undefined,beforeValidate:undefined,afterValidate:undefined,focus:undefined,attributes:[],errorCallback:undefined}})(jQuery);
/*!
 * Amplify Store - Persistent Client-Side Storage @VERSION
 * 
 * Copyright 2011 appendTo LLC. (http://appendto.com/team)
 * Dual licensed under the MIT or GPL licenses.
 * http://appendto.com/open-source-licenses
 * 
 * http://amplifyjs.com
 */
(function(a,h){var b=a.store=function(j,l,e,k){var k=b.type;if(e&&e.type&&e.type in b.types){k=e.type}return b.types[k](j,l,e||{})};b.types={};b.type=null;b.addType=function(e,j){if(!b.type){b.type=e}b.types[e]=j;b[e]=function(l,m,k){k=k||{};k.type=e;return b(l,m,k)}};b.error=function(){return"amplify.store quota exceeded"};var i=/^__amplify__/;function f(e,j){b.addType(e,function(s,r,t){var l,q,m,n,o=r,k=(new Date()).getTime();if(!s){o={};n=[];m=0;try{s=j.length;while(s=j.key(m++)){if(i.test(s)){q=JSON.parse(j.getItem(s));if(q.expires&&q.expires<=k){n.push(s)}else{o[s.replace(i,"")]=q.data}}}while(s=n.pop()){j.removeItem(s)}}catch(p){}return o}s="__amplify__"+s;if(r===h){l=j.getItem(s);q=l?JSON.parse(l):{expires:-1};if(q.expires&&q.expires<=k){j.removeItem(s)}else{return q.data}}else{if(r===null){j.removeItem(s)}else{q=JSON.stringify({data:r,expires:t.expires?k+t.expires:null});try{j.setItem(s,q)}catch(p){b[e]();try{j.setItem(s,q)}catch(p){throw b.error()}}}}return o})}for(var c in {localStorage:1,sessionStorage:1}){try{if(window[c].getItem){f(c,window[c])}}catch(g){}}if(!b.types.localStorage&&window.globalStorage){try{f("globalStorage",window.globalStorage[window.location.hostname]);if(b.type==="sessionStorage"){b.type="globalStorage"}}catch(g){}}(function(){if(b.types.localStorage){return}var l=document.createElement("div"),k="amplify";l.style.display="none";document.getElementsByTagName("head")[0].appendChild(l);try{l.addBehavior("#default#userdata");l.load(k)}catch(j){l.parentNode.removeChild(l);return}b.addType("userData",function(u,t,v){l.load(k);var q,s,o,m,n,p=t,e=(new Date()).getTime();if(!u){p={};n=[];m=0;while(q=l.XMLDocument.documentElement.attributes[m++]){s=JSON.parse(q.value);if(s.expires&&s.expires<=e){n.push(q.name)}else{p[q.name]=s.data}}while(u=n.pop()){l.removeAttribute(u)}l.save(k);return p}u=u.replace(/[^-._0-9A-Za-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u37f-\u1fff\u200c-\u200d\u203f\u2040\u2070-\u218f]/g,"-");u=u.replace(/^-/,"_-");if(t===h){q=l.getAttribute(u);s=q?JSON.parse(q):{expires:-1};if(s.expires&&s.expires<=e){l.removeAttribute(u)}else{return s.data}}else{if(t===null){l.removeAttribute(u)}else{o=l.getAttribute(u);s=JSON.stringify({data:t,expires:(v.expires?(e+v.expires):null)});l.setAttribute(u,s)}}try{l.save(k)}catch(r){if(o===null){l.removeAttribute(u)}else{l.setAttribute(u,o)}b.userData();try{l.setAttribute(u,s);l.save(k)}catch(r){if(o===null){l.removeAttribute(u)}else{l.setAttribute(u,o)}throw b.error()}}return p})}());(function(){var k={},e={};function j(l){return l===h?h:JSON.parse(JSON.stringify(l))}b.addType("memory",function(m,n,l){if(!m){return j(k)}if(n===h){return j(k[m])}if(e[m]){clearTimeout(e[m]);delete e[m]}if(n===null){delete k[m];return null}k[m]=n;if(l.expires){e[m]=setTimeout(function(){delete k[m];delete e[m]},l.expires)}return n})}())}(this.amplify=this.amplify||{}));window.bootbox=window.bootbox||(function init(j,c){var n={dialog:"<div class='bootbox modal' tabindex='-1' role='dialog'><div class='modal-dialog'><div class='modal-content'><div class='modal-body'><div class='bootbox-body'></div></div></div></div></div>",header:"<div class='modal-header'><h4 class='modal-title'></h4></div>",footer:"<div class='modal-footer'></div>",closeButton:"<button type='button' class='bootbox-close-button close'>&times;</button>",form:"<form class='bootbox-form'></form>",inputs:{text:"<input class='bootbox-input bootbox-input-text form-control' autocomplete=off type=text />",email:"<input class='bootbox-input bootbox-input-email form-control' autocomplete='off' type='email' />",select:"<select class='bootbox-input bootbox-input-select form-control'></select>",checkbox:"<div class='checkbox'><label><input class='bootbox-input bootbox-input-checkbox' type='checkbox' /></label></div>",password:"<input class='bootbox-input bootbox-input-password form-control' autocomplete='off' type='password' />"}};var g={locale:"en",backdrop:true,animate:true,className:null,keyboard:false,closeButton:true,show:true,container:"body"};var i={};function q(s){var r=a[g.locale];return r?r[s]:a.en[s]}function e(t,s,u){t.preventDefault();var r=j.isFunction(u)&&u(t)===false;if(!r){s.modal("hide")}}function k(u){var r,s=0;for(r in u){s++}return s}function l(t,s){var r=0;j.each(t,function(u,v){s(u,v,r++)})}function b(r){var t;var s;if(typeof r!=="object"){throw new Error("Please supply an object of options")}if(!r.message){throw new Error("Please specify a message")}r=j.extend({},g,r);if(!r.buttons){r.buttons={}}r.backdrop=r.backdrop?"static":false;t=r.buttons;s=k(t);l(t,function(w,v,u){if(j.isFunction(v)){v=t[w]={callback:v}}if(j.type(v)!=="object"){throw new Error("button with key "+w+" must be an object")}if(!v.label){v.label=w}if(!v.className){if(s<=2&&u===s-1){v.className="btn-primary"}else{v.className="btn-default"}}});return r}function h(s,t){var u=s.length;var r={};if(u<1||u>2){throw new Error("Invalid argument length")}if(u===2||typeof s[0]==="string"){r[t[0]]=s[0];r[t[1]]=s[1]}else{r=s[0]}return r}function m(t,r,s){return j.extend(true,{},t,h(r,s))}function f(u,v,t,s){var r={className:"bootbox-"+u,buttons:p.apply(null,v)};return o(m(r,s,t),v)}function p(){var v={};for(var t=0,r=arguments.length;t<r;t++){var u=arguments[t];var s=u.toLowerCase();var w=u.toUpperCase();v[s]={label:q(w)}}return v}function o(r,t){var s={};l(t,function(u,v){s[v]=true});l(r.buttons,function(u){if(s[u]===c){throw new Error("button key "+u+" is not allowed (options are "+t.join("\n")+")")}});return r}i.alert=function(){var r;r=f("alert",["ok"],["message","callback"],arguments);if(r.callback&&!j.isFunction(r.callback)){throw new Error("alert requires callback property to be a function when provided")}r.buttons.ok.callback=r.onEscape=function(){if(j.isFunction(r.callback)){return r.callback()}return true};return i.dialog(r)};i.confirm=function(){var r;r=f("confirm",["cancel","confirm"],["message","callback"],arguments);r.buttons.cancel.callback=r.onEscape=function(){return r.callback(false)};r.buttons.confirm.callback=function(){return r.callback(true)};if(!j.isFunction(r.callback)){throw new Error("confirm requires a callback")}return i.dialog(r)};i.prompt=function(){var z;var u;var w;var r;var x;var t;var v;r=j(n.form);u={className:"bootbox-prompt",buttons:p("cancel","confirm"),value:"",inputType:"text"};z=o(m(u,arguments,["title","callback"]),["cancel","confirm"]);t=(z.show===c)?true:z.show;z.message=r;z.buttons.cancel.callback=z.onEscape=function(){return z.callback(null)};z.buttons.confirm.callback=function(){var B;switch(z.inputType){case"text":case"email":case"select":case"password":B=x.val();break;case"checkbox":var A=x.find("input:checked");B=[];l(A,function(C,D){B.push(j(D).val())});break}return z.callback(B)};z.show=false;if(!z.title){throw new Error("prompt requires a title")}if(!j.isFunction(z.callback)){throw new Error("prompt requires a callback")}if(!n.inputs[z.inputType]){throw new Error("invalid prompt type")}x=j(n.inputs[z.inputType]);switch(z.inputType){case"text":case"email":case"password":x.val(z.value);break;case"select":var s={};v=z.inputOptions||[];if(!v.length){throw new Error("prompt with select requires options")}l(v,function(A,B){var C=x;if(B.value===c||B.text===c){throw new Error("given options in wrong format")}if(B.group){if(!s[B.group]){s[B.group]=j("<optgroup/>").attr("label",B.group)}C=s[B.group]}C.append("<option value='"+B.value+"'>"+B.text+"</option>")});l(s,function(A,B){x.append(B)});x.val(z.value);break;case"checkbox":var y=j.isArray(z.value)?z.value:[z.value];v=z.inputOptions||[];if(!v.length){throw new Error("prompt with checkbox requires options")}if(!v[0].value||!v[0].text){throw new Error("given options in wrong format")}x=j("<div/>");l(v,function(A,B){var C=j(n.inputs[z.inputType]);C.find("input").attr("value",B.value);C.find("label").append(B.text);l(y,function(D,E){if(E===B.value){C.find("input").prop("checked",true)}});x.append(C)});break}if(z.placeholder){x.attr("placeholder",z.placeholder)}r.append(x);r.on("submit",function(A){A.preventDefault();w.find(".btn-primary").click()});w=i.dialog(z);w.off("shown.bs.modal");w.on("shown.bs.modal",function(){x.focus()});if(t===true){w.modal("show")}return w};i.dialog=function(t){t=b(t);var u=j(n.dialog);var r=u.find(".modal-body");var x=t.buttons;var v="";var w={onEscape:t.onEscape};l(x,function(z,y){v+="<button data-bb-handler='"+z+"' type='button' class='btn "+y.className+"'>"+y.label+"</button>";w[z]=y.callback});r.find(".bootbox-body").html(t.message);if(t.animate===true){u.addClass("fade")}if(t.className){u.addClass(t.className)}if(t.title){r.before(n.header)}if(t.closeButton){var s=j(n.closeButton);if(t.title){u.find(".modal-header").prepend(s)}else{s.css("margin-top","-10px").prependTo(r)}}if(t.title){u.find(".modal-title").html(t.title)}if(v.length){r.after(n.footer);u.find(".modal-footer").html(v)}u.on("hidden.bs.modal",function(y){if(y.target===this){u.remove()}});u.on("shown.bs.modal",function(){u.find(".btn-primary:first").focus()});u.on("escape.close.bb",function(y){if(w.onEscape){e(y,u,w.onEscape)}});u.on("click",".modal-footer button",function(z){var y=j(this).data("bb-handler");e(z,u,w[y])});u.on("click",".bootbox-close-button",function(y){e(y,u,w.onEscape)});u.on("keyup",function(y){if(y.which===27){u.trigger("escape.close.bb")}});j(t.container).append(u);u.modal({backdrop:t.backdrop,keyboard:t.keyboard||false,show:false});if(t.show){u.modal("show")}return u};i.setDefaults=function(){var r={};if(arguments.length===2){r[arguments[0]]=arguments[1]}else{r=arguments[0]}j.extend(g,r)};i.hideAll=function(){j(".bootbox").modal("hide")};var a={br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},da:{OK:"OK",CANCEL:"Annuller",CONFIRM:"Accepter"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},fi:{OK:"OK",CANCEL:"Peruuta",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},no:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"Potwierdź"},ru:{OK:"OK",CANCEL:"Отмена",CONFIRM:"Применить"},sv:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},zh_CN:{OK:"OK",CANCEL:"取消",CONFIRM:"确认"},zh_TW:{OK:"OK",CANCEL:"取消",CONFIRM:"確認"}};i.init=function(r){window.bootbox=init(r||j)};return i}(window.jQuery));var swfobject=function(){var aq="undefined",aD="object",ab="Shockwave Flash",X="ShockwaveFlash.ShockwaveFlash",aE="application/x-shockwave-flash",ac="SWFObjectExprInst",ax="onreadystatechange",af=window,aL=document,aB=navigator,aa=false,Z=[aN],aG=[],ag=[],al=[],aJ,ad,ap,at,ak=false,aU=false,aH,an,aI=true,ah=function(){var a=typeof aL.getElementById!=aq&&typeof aL.getElementsByTagName!=aq&&typeof aL.createElement!=aq,f=aB.userAgent.toLowerCase(),c=aB.platform.toLowerCase(),i=c?/win/.test(c):/win/.test(f),k=c?/mac/.test(c):/mac/.test(f),h=/webkit/.test(f)?parseFloat(f.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,e=!+"\v1",g=[0,0,0],l=null;if(typeof aB.plugins!=aq&&typeof aB.plugins[ab]==aD){l=aB.plugins[ab].description;if(l&&!(typeof aB.mimeTypes!=aq&&aB.mimeTypes[aE]&&!aB.mimeTypes[aE].enabledPlugin)){aa=true;e=false;l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1");g[0]=parseInt(l.replace(/^(.*)\..*$/,"$1"),10);g[1]=parseInt(l.replace(/^.*\.(.*)\s.*$/,"$1"),10);g[2]=/[a-zA-Z]/.test(l)?parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof af.ActiveXObject!=aq){try{var j=new ActiveXObject(X);if(j){l=j.GetVariable("$version");if(l){e=true;l=l.split(" ")[1].split(",");g=[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)]}}}catch(b){}}}return{w3:a,pv:g,wk:h,ie:e,win:i,mac:k}}(),aK=function(){if(!ah.w3){return}if((typeof aL.readyState!=aq&&aL.readyState=="complete")||(typeof aL.readyState==aq&&(aL.getElementsByTagName("body")[0]||aL.body))){aP()}if(!ak){if(typeof aL.addEventListener!=aq){aL.addEventListener("DOMContentLoaded",aP,false)}if(ah.ie&&ah.win){aL.attachEvent(ax,function(){if(aL.readyState=="complete"){aL.detachEvent(ax,arguments.callee);aP()}});if(af==top){(function(){if(ak){return}try{aL.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}aP()})()}}if(ah.wk){(function(){if(ak){return}if(!/loaded|complete/.test(aL.readyState)){setTimeout(arguments.callee,0);return}aP()})()}aC(aP)}}();function aP(){if(ak){return}try{var b=aL.getElementsByTagName("body")[0].appendChild(ar("span"));b.parentNode.removeChild(b)}catch(a){return}ak=true;var e=Z.length;for(var c=0;c<e;c++){Z[c]()}}function aj(a){if(ak){a()}else{Z[Z.length]=a}}function aC(a){if(typeof af.addEventListener!=aq){af.addEventListener("load",a,false)}else{if(typeof aL.addEventListener!=aq){aL.addEventListener("load",a,false)}else{if(typeof af.attachEvent!=aq){aM(af,"onload",a)}else{if(typeof af.onload=="function"){var b=af.onload;af.onload=function(){b();a()}}else{af.onload=a}}}}}function aN(){if(aa){Y()}else{am()}}function Y(){var e=aL.getElementsByTagName("body")[0];var b=ar(aD);b.setAttribute("type",aE);var a=e.appendChild(b);if(a){var c=0;(function(){if(typeof a.GetVariable!=aq){var f=a.GetVariable("$version");if(f){f=f.split(" ")[1].split(",");ah.pv=[parseInt(f[0],10),parseInt(f[1],10),parseInt(f[2],10)]}}else{if(c<10){c++;setTimeout(arguments.callee,10);return}}e.removeChild(b);a=null;am()})()}else{am()}}function am(){var h=aG.length;if(h>0){for(var i=0;i<h;i++){var c=aG[i].id;var m=aG[i].callbackFn;var a={success:false,id:c};if(ah.pv[0]>0){var j=aS(c);if(j){if(ao(aG[i].swfVersion)&&!(ah.wk&&ah.wk<312)){ay(c,true);if(m){a.success=true;a.ref=av(c);m(a)}}else{if(aG[i].expressInstall&&au()){var f={};f.data=aG[i].expressInstall;f.width=j.getAttribute("width")||"0";f.height=j.getAttribute("height")||"0";if(j.getAttribute("class")){f.styleclass=j.getAttribute("class")}if(j.getAttribute("align")){f.align=j.getAttribute("align")}var g={};var e=j.getElementsByTagName("param");var l=e.length;for(var k=0;k<l;k++){if(e[k].getAttribute("name").toLowerCase()!="movie"){g[e[k].getAttribute("name")]=e[k].getAttribute("value")}}ae(f,g,c,m)}else{aF(j);if(m){m(a)}}}}}else{ay(c,true);if(m){var b=av(c);if(b&&typeof b.SetVariable!=aq){a.success=true;a.ref=b}m(a)}}}}}function av(b){var e=null;var c=aS(b);if(c&&c.nodeName=="OBJECT"){if(typeof c.SetVariable!=aq){e=c}else{var a=c.getElementsByTagName(aD)[0];if(a){e=a}}}return e}function au(){return !aU&&ao("6.0.65")&&(ah.win||ah.mac)&&!(ah.wk&&ah.wk<312)}function ae(g,e,i,f){aU=true;ap=f||null;at={success:false,id:i};var a=aS(i);if(a){if(a.nodeName=="OBJECT"){aJ=aO(a);ad=null}else{aJ=a;ad=i}g.id=ac;if(typeof g.width==aq||(!/%$/.test(g.width)&&parseInt(g.width,10)<310)){g.width="310"}if(typeof g.height==aq||(!/%$/.test(g.height)&&parseInt(g.height,10)<137)){g.height="137"}aL.title=aL.title.slice(0,47)+" - Flash Player Installation";var b=ah.ie&&ah.win?"ActiveX":"PlugIn",c="MMredirectURL="+af.location.toString().replace(/&/g,"%26")+"&MMplayerType="+b+"&MMdoctitle="+aL.title;if(typeof e.flashvars!=aq){e.flashvars+="&"+c}else{e.flashvars=c}if(ah.ie&&ah.win&&a.readyState!=4){var h=ar("div");i+="SWFObjectNew";h.setAttribute("id",i);a.parentNode.insertBefore(h,a);a.style.display="none";(function(){if(a.readyState==4){a.parentNode.removeChild(a)}else{setTimeout(arguments.callee,10)}})()}aA(g,e,i)}}function aF(a){if(ah.ie&&ah.win&&a.readyState!=4){var b=ar("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(aO(a),b);a.style.display="none";(function(){if(a.readyState==4){a.parentNode.removeChild(a)}else{setTimeout(arguments.callee,10)}})()}else{a.parentNode.replaceChild(aO(a),a)}}function aO(b){var e=ar("div");if(ah.win&&ah.ie){e.innerHTML=b.innerHTML}else{var f=b.getElementsByTagName(aD)[0];if(f){var a=f.childNodes;if(a){var g=a.length;for(var c=0;c<g;c++){if(!(a[c].nodeType==1&&a[c].nodeName=="PARAM")&&!(a[c].nodeType==8)){e.appendChild(a[c].cloneNode(true))}}}}}return e}function aA(f,h,c){var e,a=aS(c);if(ah.wk&&ah.wk<312){return e}if(a){if(typeof f.id==aq){f.id=c}if(ah.ie&&ah.win){var g="";for(var j in f){if(f[j]!=Object.prototype[j]){if(j.toLowerCase()=="data"){h.movie=f[j]}else{if(j.toLowerCase()=="styleclass"){g+=' class="'+f[j]+'"'}else{if(j.toLowerCase()!="classid"){g+=" "+j+'="'+f[j]+'"'}}}}}var i="";for(var k in h){if(h[k]!=Object.prototype[k]){i+='<param name="'+k+'" value="'+h[k]+'" />'}}a.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+g+">"+i+"</object>";ag[ag.length]=f.id;e=aS(f.id)}else{var b=ar(aD);b.setAttribute("type",aE);for(var l in f){if(f[l]!=Object.prototype[l]){if(l.toLowerCase()=="styleclass"){b.setAttribute("class",f[l])}else{if(l.toLowerCase()!="classid"){b.setAttribute(l,f[l])}}}}for(var m in h){if(h[m]!=Object.prototype[m]&&m.toLowerCase()!="movie"){aQ(b,m,h[m])}}a.parentNode.replaceChild(b,a);e=b}}return e}function aQ(b,e,c){var a=ar("param");a.setAttribute("name",e);a.setAttribute("value",c);b.appendChild(a)}function aw(a){var b=aS(a);if(b&&b.nodeName=="OBJECT"){if(ah.ie&&ah.win){b.style.display="none";(function(){if(b.readyState==4){aT(a)}else{setTimeout(arguments.callee,10)}})()}else{b.parentNode.removeChild(b)}}}function aT(a){var b=aS(a);if(b){for(var c in b){if(typeof b[c]=="function"){b[c]=null}}b.parentNode.removeChild(b)}}function aS(a){var c=null;try{c=aL.getElementById(a)}catch(b){}return c}function ar(a){return aL.createElement(a)}function aM(a,c,b){a.attachEvent(c,b);al[al.length]=[a,c,b]}function ao(a){var b=ah.pv,c=a.split(".");c[0]=parseInt(c[0],10);c[1]=parseInt(c[1],10)||0;c[2]=parseInt(c[2],10)||0;return(b[0]>c[0]||(b[0]==c[0]&&b[1]>c[1])||(b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]))?true:false}function az(b,g,a,c){if(ah.ie&&ah.mac){return}var f=aL.getElementsByTagName("head")[0];if(!f){return}var h=(a&&typeof a=="string")?a:"screen";if(c){aH=null;an=null}if(!aH||an!=h){var e=ar("style");e.setAttribute("type","text/css");e.setAttribute("media",h);aH=f.appendChild(e);if(ah.ie&&ah.win&&typeof aL.styleSheets!=aq&&aL.styleSheets.length>0){aH=aL.styleSheets[aL.styleSheets.length-1]}an=h}if(ah.ie&&ah.win){if(aH&&typeof aH.addRule==aD){aH.addRule(b,g)}}else{if(aH&&typeof aL.createTextNode!=aq){aH.appendChild(aL.createTextNode(b+" {"+g+"}"))}}}function ay(a,c){if(!aI){return}var b=c?"visible":"hidden";if(ak&&aS(a)){aS(a).style.visibility=b}else{az("#"+a,"visibility:"+b)}}function ai(b){var a=/[\\\"<>\.;]/;var c=a.exec(b)!=null;return c&&typeof encodeURIComponent!=aq?encodeURIComponent(b):b}var aR=function(){if(ah.ie&&ah.win){window.attachEvent("onunload",function(){var a=al.length;for(var b=0;b<a;b++){al[b][0].detachEvent(al[b][1],al[b][2])}var e=ag.length;for(var c=0;c<e;c++){aw(ag[c])}for(var f in ah){ah[f]=null}ah=null;for(var g in swfobject){swfobject[g]=null}swfobject=null})}}();return{registerObject:function(a,f,c,b){if(ah.w3&&a&&f){var e={};e.id=a;e.swfVersion=f;e.expressInstall=c;e.callbackFn=b;aG[aG.length]=e;ay(a,false)}else{if(b){b({success:false,id:a})}}},getObjectById:function(a){if(ah.w3){return av(a)}},embedSWF:function(l,f,i,g,c,a,b,j,h,k){var e={success:false,id:f};if(ah.w3&&!(ah.wk&&ah.wk<312)&&l&&f&&i&&g&&c){ay(f,false);aj(function(){i+="";g+="";var r={};if(h&&typeof h===aD){for(var p in h){r[p]=h[p]}}r.data=l;r.width=i;r.height=g;var o={};if(j&&typeof j===aD){for(var q in j){o[q]=j[q]}}if(b&&typeof b===aD){for(var m in b){if(typeof o.flashvars!=aq){o.flashvars+="&"+m+"="+b[m]}else{o.flashvars=m+"="+b[m]}}}if(ao(c)){var n=aA(r,o,f);if(r.id==f){ay(f,true)}e.success=true;e.ref=n}else{if(a&&au()){r.data=a;ae(r,o,f,k);return}else{ay(f,true)}}if(k){k(e)}})}else{if(k){k(e)}}},switchOffAutoHideShow:function(){aI=false},ua:ah,getFlashPlayerVersion:function(){return{major:ah.pv[0],minor:ah.pv[1],release:ah.pv[2]}},hasFlashPlayerVersion:ao,createSWF:function(a,b,c){if(ah.w3){return aA(a,b,c)}else{return undefined}},showExpressInstall:function(b,a,e,c){if(ah.w3&&au()){ae(b,a,e,c)}},removeSWF:function(a){if(ah.w3){aw(a)}},createCSS:function(b,a,c,e){if(ah.w3){az(b,a,c,e)}},addDomLoadEvent:aj,addLoadEvent:aC,getQueryParamValue:function(b){var a=aL.location.search||aL.location.hash;if(a){if(/\?/.test(a)){a=a.split("?")[1]}if(b==null){return ai(a)}var c=a.split("&");for(var e=0;e<c.length;e++){if(c[e].substring(0,c[e].indexOf("="))==b){return ai(c[e].substring((c[e].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(aU){var a=aS(ac);if(a&&aJ){a.parentNode.replaceChild(aJ,a);if(ad){ay(ad,true);if(ah.ie&&ah.win){aJ.style.display="block"}}if(ap){ap(at)}}aU=false}}}}();
/*!
 * typeahead.js 0.10.2
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2014 Twitter, Inc. and other contributors; Licensed MIT
 */
(function(b){var s={isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:false},isBlankString:function(u){return !u||/^\s*$/.test(u)},escapeRegExChars:function(u){return u.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(u){return typeof u==="string"},isNumber:function(u){return typeof u==="number"},isArray:b.isArray,isFunction:b.isFunction,isObject:b.isPlainObject,isUndefined:function(u){return typeof u==="undefined"},bind:b.proxy,each:function(w,u){b.each(w,v);function v(x,y){return u(y,x)}},map:b.map,filter:b.grep,every:function(v,w){var u=true;if(!v){return u}b.each(v,function(x,y){if(!(u=w.call(null,y,x,v))){return false}});return !!u},some:function(v,w){var u=false;if(!v){return u}b.each(v,function(x,y){if(u=w.call(null,y,x,v)){return false}});return !!u},mixin:b.extend,getUniqueId:function(){var u=0;return function(){return u++}}(),templatify:function f(v){return b.isFunction(v)?v:u;function u(){return String(v)}},defer:function(u){setTimeout(u,0)},debounce:function(w,y,v){var x,u;return function(){var C=this,B=arguments,A,z;A=function(){x=null;if(!v){u=w.apply(C,B)}};z=v&&!x;clearTimeout(x);x=setTimeout(A,y);if(z){u=w.apply(C,B)}return u}},throttle:function(z,B){var x,w,A,u,y,v;y=0;v=function(){y=new Date();A=null;u=z.apply(x,w)};return function(){var C=new Date(),D=B-(C-y);x=this;w=arguments;if(D<=0){clearTimeout(A);A=null;y=C;u=z.apply(x,w)}else{if(!A){A=setTimeout(v,D)}}return u}},noop:function(){}};var o="0.10.2";var p=function(v){return{nonword:u,whitespace:w,obj:{nonword:x(u),whitespace:x(w)}};function w(y){return y.split(/\s+/)}function u(y){return y.split(/\W+/)}function x(z){return function y(A){return function B(C){return z(C[A])}}}}();var e=function(){function v(B){this.maxSize=B||100;this.size=0;this.hash={};this.list=new y()}s.mixin(v.prototype,{set:function A(B,E){var D=this.list.tail,C;if(this.size>=this.maxSize){this.list.remove(D);delete this.hash[D.key]}if(C=this.hash[B]){C.val=E;this.list.moveToFront(C)}else{C=new w(B,E);this.list.add(C);this.hash[B]=C;this.size++}},get:function x(B){var C=this.hash[B];if(C){this.list.moveToFront(C);return C.val}}});function y(){this.head=this.tail=null}s.mixin(y.prototype,{add:function z(B){if(this.head){B.next=this.head;this.head.prev=B}this.head=B;this.tail=this.tail||B},remove:function u(B){B.prev?B.prev.next=B.next:this.head=B.next;B.next?B.next.prev=B.prev:this.tail=B.prev},moveToFront:function(B){this.remove(B);this.add(B)}});function w(B,C){this.key=B;this.val=C;this.prev=this.next=null}return v}();var q=function(){var u,v;try{u=window.localStorage;u.setItem("~~~","!");u.removeItem("~~~")}catch(z){u=null}function x(B){this.prefix=["__",B,"__"].join("");this.ttlKey="__ttl__";this.keyMatcher=new RegExp("^"+this.prefix)}if(u&&window.JSON){v={_prefix:function(B){return this.prefix+B},_ttlKey:function(B){return this._prefix(B)+this.ttlKey},get:function(B){if(this.isExpired(B)){this.remove(B)}return A(u.getItem(this._prefix(B)))},set:function(C,D,B){if(s.isNumber(B)){u.setItem(this._ttlKey(C),y(w()+B))}else{u.removeItem(this._ttlKey(C))}return u.setItem(this._prefix(C),y(D))},remove:function(B){u.removeItem(this._ttlKey(B));u.removeItem(this._prefix(B));return this},clear:function(){var D,C,E=[],B=u.length;for(D=0;D<B;D++){if((C=u.key(D)).match(this.keyMatcher)){E.push(C.replace(this.keyMatcher,""))}}for(D=E.length;D--;){this.remove(E[D])}return this},isExpired:function(C){var B=A(u.getItem(this._ttlKey(C)));return s.isNumber(B)&&w()>B?true:false}}}else{v={get:s.noop,set:s.noop,remove:s.noop,clear:s.noop,isExpired:s.noop}}s.mixin(x.prototype,v);return x;function w(){return new Date().getTime()}function y(B){return JSON.stringify(s.isUndefined(B)?null:B)}function A(B){return JSON.parse(B)}}();var r=function(){var w=0,x={},u=6,A=new e(10);function B(C){C=C||{};this._send=C.transport?y(C.transport):b.ajax;this._get=C.rateLimiter?C.rateLimiter(this._get):this._get}B.setMaxPendingRequests=function v(C){u=C};B.resetCache=function z(){A=new e(10)};s.mixin(B.prototype,{_get:function(G,J,D){var I=this,H;if(H=x[G]){H.done(F).fail(E)}else{if(w<u){w++;x[G]=this._send(G,J).done(F).fail(E).always(C)}else{this.onDeckRequestArgs=[].slice.call(arguments,0)}}function F(K){D&&D(null,K);A.set(G,K)}function E(){D&&D(true)}function C(){w--;delete x[G];if(I.onDeckRequestArgs){I._get.apply(I,I.onDeckRequestArgs);I.onDeckRequestArgs=null}}},get:function(D,F,C){var E;if(s.isFunction(F)){C=F;F={}}if(E=A.get(D)){s.defer(function(){C&&C(null,E)})}else{this._get(D,F,C)}return !!E}});return B;function y(C){return function D(F,I){var E=b.Deferred();C(F,I,H,G);return E;function H(J){s.defer(function(){E.resolve(J)})}function G(J){s.defer(function(){E.reject(J)})}}}}();var k=function(){function u(D){D=D||{};if(!D.datumTokenizer||!D.queryTokenizer){b.error("datumTokenizer and queryTokenizer are both required")}this.datumTokenizer=D.datumTokenizer;this.queryTokenizer=D.queryTokenizer;this.reset()}s.mixin(u.prototype,{bootstrap:function w(D){this.datums=D.datums;this.trie=D.trie},add:function(E){var D=this;E=s.isArray(E)?E:[E];s.each(E,function(F){var H,G;H=D.datums.push(F)-1;G=y(D.datumTokenizer(F));s.each(G,function(I){var L,K,J;L=D.trie;K=I.split("");while(J=K.shift()){L=L.children[J]||(L.children[J]=B());L.ids.push(H)}})})},get:function v(F){var D=this,G,E;G=y(this.queryTokenizer(F));s.each(G,function(H){var L,K,J,I;if(E&&E.length===0){return false}L=D.trie;K=H.split("");while(L&&(J=K.shift())){L=L.children[J]}if(L&&K.length===0){I=L.ids.slice(0);E=E?z(E,I):I}else{E=[];return false}});return E?s.map(x(E),function(H){return D.datums[H]}):[]},reset:function A(){this.datums=[];this.trie=B()},serialize:function C(){return{datums:this.datums,trie:this.trie}}});return u;function y(D){D=s.filter(D,function(E){return !!E});D=s.map(D,function(E){return E.toLowerCase()});return D}function B(){return{ids:[],children:{}}}function x(G){var D={},F=[];for(var E=0;E<G.length;E++){if(!D[G[E]]){D[G[E]]=true;F.push(G[E])}}return F}function z(G,E){var D=0,F=0,I=[];G=G.sort(H);E=E.sort(H);while(D<G.length&&F<E.length){if(G[D]<E[F]){D++}else{if(G[D]>E[F]){F++}else{I.push(G[D]);D++;F++}}}return I;function H(K,J){return K-J}}}();var h=function(){return{local:w,prefetch:u,remote:v};function w(x){return x.local||null}function u(z){var y,x;x={url:null,thumbprint:"",ttl:24*60*60*1000,filter:null,ajax:{}};if(y=z.prefetch||null){y=s.isString(y)?{url:y}:y;y=s.mixin(x,y);y.thumbprint=o+y.thumbprint;y.ajax.type=y.ajax.type||"GET";y.ajax.dataType=y.ajax.dataType||"json";!y.url&&b.error("prefetch requires url to be set")}return y}function v(B){var z,A;A={url:null,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}};if(z=B.remote||null){z=s.isString(z)?{url:z}:z;z=s.mixin(A,z);z.rateLimiter=/^throttle$/i.test(z.rateLimitBy)?y(z.rateLimitWait):x(z.rateLimitWait);z.ajax.type=z.ajax.type||"GET";z.ajax.dataType=z.ajax.dataType||"json";delete z.rateLimitBy;delete z.rateLimitWait;!z.url&&b.error("remote requires url to be set")}return z;function x(C){return function(D){return s.debounce(D,C)}}function y(C){return function(D){return s.throttle(D,C)}}}}();(function(F){var u,A;u=F.Bloodhound;A={data:"data",protocol:"protocol",thumbprint:"thumbprint"};F.Bloodhound=w;function w(M){if(!M||!M.local&&!M.prefetch&&!M.remote){b.error("one of local, prefetch, or remote is required")}this.limit=M.limit||5;this.sorter=D(M.sorter);this.dupDetector=M.dupDetector||C;this.local=h.local(M);this.prefetch=h.prefetch(M);this.remote=h.remote(M);this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null;this.index=new k({datumTokenizer:M.datumTokenizer,queryTokenizer:M.queryTokenizer});this.storage=this.cacheKey?new q(this.cacheKey):null}w.noConflict=function L(){F.Bloodhound=u;return w};w.tokenizers=p;s.mixin(w.prototype,{_loadPrefetch:function x(Q){var N=this,P,M;if(P=this._readFromStorage(Q.thumbprint)){this.index.bootstrap(P);M=b.Deferred().resolve()}else{M=b.ajax(Q.url,Q.ajax).done(O)}return M;function O(R){N.clear();N.add(Q.filter?Q.filter(R):R);N._saveToStorage(N.index.serialize(),Q.thumbprint,Q.ttl)}},_getFromRemote:function z(R,M){var Q=this,O,P;R=R||"";P=encodeURIComponent(R);O=this.remote.replace?this.remote.replace(this.remote.url,R):this.remote.url.replace(this.remote.wildcard,P);return this.transport.get(O,this.remote.ajax,N);function N(S,T){S?M([]):M(Q.remote.filter?Q.remote.filter(T):T)}},_saveToStorage:function G(O,N,M){if(this.storage){this.storage.set(A.data,O,M);this.storage.set(A.protocol,location.protocol,M);this.storage.set(A.thumbprint,N,M)}},_readFromStorage:function K(N){var M={},O;if(this.storage){M.data=this.storage.get(A.data);M.protocol=this.storage.get(A.protocol);M.thumbprint=this.storage.get(A.thumbprint)}O=M.thumbprint!==N||M.protocol!==location.protocol;return M.data&&!O?M.data:null},_initialize:function v(){var P=this,O=this.local,M;M=this.prefetch?this._loadPrefetch(this.prefetch):b.Deferred().resolve();O&&M.done(N);this.transport=this.remote?new r(this.remote):null;return this.initPromise=M.promise();function N(){P.add(s.isFunction(O)?O():O)}},initialize:function v(M){return !this.initPromise||M?this._initialize():this.initPromise},add:function B(M){this.index.add(M)},get:function I(Q,M){var O=this,P=[],N=false;P=this.index.get(Q);P=this.sorter(P).slice(0,this.limit);if(P.length<this.limit&&this.transport){N=this._getFromRemote(Q,R)}if(!N){(P.length>0||!this.transport)&&M&&M(P)}function R(T){var S=P.slice(0);s.each(T,function(V){var U;U=s.some(S,function(W){return O.dupDetector(V,W)});!U&&S.push(V);return S.length<O.limit});M&&M(O.sorter(S))}},clear:function E(){this.index.reset()},clearPrefetchCache:function y(){this.storage&&this.storage.clear()},clearRemoteCache:function H(){this.transport&&r.resetCache()},ttAdapter:function J(){return s.bind(this.get,this)}});return w;function D(N){return s.isFunction(N)?M:O;function M(P){return P.sort(N)}function O(P){return P}}function C(){return false}})(this);var j={wrapper:'<span class="twitter-typeahead"></span>',dropdown:'<span class="tt-dropdown-menu"></span>',dataset:'<div class="tt-dataset-%CLASS%"></div>',suggestions:'<span class="tt-suggestions"></span>',suggestion:'<div class="tt-suggestion"></div>'};var i={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};if(s.isMsie()){s.mixin(i.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"})}if(s.isMsie()&&s.isMsie()<=7){s.mixin(i.input,{marginTop:"-1px"})}var a=function(){var v="typeahead:";function u(w){if(!w||!w.el){b.error("EventBus initialized without el")}this.$el=b(w.el)}s.mixin(u.prototype,{trigger:function(x){var w=[].slice.call(arguments,1);this.$el.trigger(v+x,w)}});return u}();var g=function(){var w=/\s+/,A=u();return{onSync:B,onAsync:v,off:x,trigger:y};function C(I,G,E,F){var H;if(!E){return this}G=G.split(w);E=F?D(E,F):E;this._callbacks=this._callbacks||{};while(H=G.shift()){this._callbacks[H]=this._callbacks[H]||{sync:[],async:[]};this._callbacks[H][I].push(E)}return this}function v(G,E,F){return C.call(this,"async",G,E,F)}function B(G,E,F){return C.call(this,"sync",G,E,F)}function x(E){var F;if(!this._callbacks){return this}E=E.split(w);while(F=E.shift()){delete this._callbacks[F]}return this}function y(F){var G,H,E,I,J;if(!this._callbacks){return this}F=F.split(w);E=[].slice.call(arguments,1);while((G=F.shift())&&(H=this._callbacks[G])){I=z(H.sync,this,[G].concat(E));J=z(H.async,this,[G].concat(E));I()&&A(J)}return this}function z(H,G,F){return E;function E(){var J;for(var I=0;!J&&I<H.length;I+=1){J=H[I].apply(G,F)===false}return !J}}function u(){var F;if(window.setImmediate){F=function G(H){setImmediate(function(){H()})}}else{F=function E(H){setTimeout(function(){H()},0)}}return F}function D(F,E){return F.bind?F.bind(E):function(){F.apply(E,[].slice.call(arguments,0))}}}();var c=function(x){var w={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:false,caseSensitive:false};return function v(B){var y;B=s.mixin({},w,B);if(!B.node||!B.pattern){return}B.pattern=s.isArray(B.pattern)?B.pattern:[B.pattern];y=u(B.pattern,B.caseSensitive,B.wordsOnly);z(B.node,A);function A(E){var D,C;if(D=y.exec(E.data)){wrapperNode=x.createElement(B.tagName);B.className&&(wrapperNode.className=B.className);C=E.splitText(D.index);C.splitText(D[0].length);wrapperNode.appendChild(C.cloneNode(true));E.parentNode.replaceChild(wrapperNode,C)}return !!D}function z(F,G){var D,E=3;for(var C=0;C<F.childNodes.length;C++){D=F.childNodes[C];if(D.nodeType===E){C+=G(D)?1:0}else{z(D,G)}}}};function u(A,y,D){var C=[],B;for(var z=0;z<A.length;z++){C.push(s.escapeRegExChars(A[z]))}B=D?"\\b("+C.join("|")+")\\b":"("+C.join("|")+")";return y?new RegExp(B):new RegExp(B,"i")}}(window.document);var m=function(){var Q;Q={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"};function N(Z){var X=this,Y,U,W,V;Z=Z||{};if(!Z.input){b.error("input is missing")}Y=s.bind(this._onBlur,this);U=s.bind(this._onFocus,this);W=s.bind(this._onKeydown,this);V=s.bind(this._onInput,this);this.$hint=b(Z.hint);this.$input=b(Z.input).on("blur.tt",Y).on("focus.tt",U).on("keydown.tt",W);if(this.$hint.length===0){this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=s.noop}if(!s.isMsie()){this.$input.on("input.tt",V)}else{this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(aa){if(Q[aa.which||aa.keyCode]){return}s.defer(s.bind(X._onInput,X,aa))})}this.query=this.$input.val();this.$overflowHelper=G(this.$input)}N.normalizeQuery=function(U){return(U||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")};s.mixin(N.prototype,g,{_onBlur:function E(){this.resetInputValue();this.trigger("blurred")},_onFocus:function y(){this.trigger("focused")},_onKeydown:function S(U){var V=Q[U.which||U.keyCode];this._managePreventDefault(V,U);if(V&&this._shouldTrigger(V,U)){this.trigger(V+"Keyed",U)}},_onInput:function v(){this._checkInputValue()},_managePreventDefault:function A(Y,X){var W,V,U;switch(Y){case"tab":V=this.getHint();U=this.getInputValue();W=V&&V!==U&&!H(X);break;case"up":case"down":W=!H(X);break;default:W=false}W&&X.preventDefault()},_shouldTrigger:function T(W,V){var U;switch(W){case"tab":U=!H(V);break;default:U=true}return U},_checkInputValue:function B(){var U,V,W;U=this.getInputValue();V=D(U,this.query);W=V?this.query.length!==U.length:false;if(!V){this.trigger("queryChanged",this.query=U)}else{if(W){this.trigger("whitespaceChanged",this.query)}}},focus:function J(){this.$input.focus()},blur:function O(){this.$input.blur()},getQuery:function L(){return this.query},setQuery:function K(U){this.query=U},getInputValue:function z(){return this.$input.val()},setInputValue:function C(V,U){this.$input.val(V);U?this.clearHint():this._checkInputValue()},resetInputValue:function x(){this.setInputValue(this.query,true)},getHint:function w(){return this.$hint.val()},setHint:function P(U){this.$hint.val(U)},clearHint:function F(){this.setHint("")},clearHintIfInvalid:function u(){var X,W,U,V;X=this.getInputValue();W=this.getHint();U=X!==W&&W.indexOf(X)===0;V=X!==""&&U&&!this.hasOverflow();!V&&this.clearHint()},getLanguageDirection:function I(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function M(){var U=this.$input.width()-2;this.$overflowHelper.text(this.getInputValue());return this.$overflowHelper.width()>=U},isCursorAtEnd:function(){var V,W,U;V=this.$input.val().length;W=this.$input[0].selectionStart;if(s.isNumber(W)){return W===V}else{if(document.selection){U=document.selection.createRange();U.moveStart("character",-V);return V===U.text.length}}return true},destroy:function R(){this.$hint.off(".tt");this.$input.off(".tt");this.$hint=this.$input=this.$overflowHelper=null}});return N;function G(U){return b('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:U.css("font-family"),fontSize:U.css("font-size"),fontStyle:U.css("font-style"),fontVariant:U.css("font-variant"),fontWeight:U.css("font-weight"),wordSpacing:U.css("word-spacing"),letterSpacing:U.css("letter-spacing"),textIndent:U.css("text-indent"),textRendering:U.css("text-rendering"),textTransform:U.css("text-transform")}).insertAfter(U)}function D(V,U){return N.normalizeQuery(V)===N.normalizeQuery(U)}function H(U){return U.altKey||U.ctrlKey||U.metaKey||U.shiftKey}}();var t=function(){var v="ttDataset",J="ttValue",D="ttDatum";function u(K){K=K||{};K.templates=K.templates||{};if(!K.source){b.error("missing source")}if(K.name&&!x(K.name)){b.error("invalid dataset name: "+K.name)}this.query=null;this.highlight=!!K.highlight;this.name=K.name||s.getUniqueId();this.source=K.source;this.displayFn=y(K.display||K.displayKey);this.templates=z(K.templates,this.displayFn);this.$el=b(j.dataset.replace("%CLASS%",this.name))}u.extractDatasetName=function H(K){return b(K).data(v)};u.extractValue=function E(K){return b(K).data(J)};u.extractDatum=function E(K){return b(K).data(D)};s.mixin(u.prototype,g,{_render:function w(Q,K){if(!this.$el){return}var P=this,M;this.$el.empty();M=K&&K.length;if(!M&&this.templates.empty){this.$el.html(L()).prepend(P.templates.header?O():null).append(P.templates.footer?N():null)}else{if(M){this.$el.html(R()).prepend(P.templates.header?O():null).append(P.templates.footer?N():null)}}this.trigger("rendered");function L(){return P.templates.empty({query:Q,isEmpty:true})}function R(){var T,S;T=b(j.suggestions).css(i.suggestions);S=s.map(K,U);T.append.apply(T,S);P.highlight&&c({node:T[0],pattern:Q});return T;function U(V){var W;W=b(j.suggestion).append(P.templates.suggestion(V)).data(v,P.name).data(J,P.displayFn(V)).data(D,V);W.children().each(function(){b(this).css(i.suggestionChild)});return W}}function O(){return P.templates.header({query:Q,isEmpty:!M})}function N(){return P.templates.footer({query:Q,isEmpty:!M})}},getRoot:function F(){return this.$el},update:function A(M){var L=this;this.query=M;this.canceled=false;this.source(M,K);function K(N){if(!L.canceled&&M===L.query){L._render(M,N)}}},cancel:function I(){this.canceled=true},clear:function C(){this.cancel();this.$el.empty();this.trigger("rendered")},isEmpty:function B(){return this.$el.is(":empty")},destroy:function G(){this.$el=null}});return u;function y(K){K=K||"value";return s.isFunction(K)?K:L;function L(M){return M[K]}}function z(L,M){return{empty:L.empty&&s.templatify(L.empty),header:L.header&&s.templatify(L.header),footer:L.footer&&s.templatify(L.footer),suggestion:L.suggestion||K};function K(N){return"<p>"+M(N)+"</p>"}}function x(K){return/^[_a-zA-Z0-9-]+$/.test(K)}}();var n=function(){function N(W){var U=this,S,V,T;W=W||{};if(!W.menu){b.error("menu is required")}this.isOpen=false;this.isEmpty=true;this.datasets=s.map(W.datasets,E);S=s.bind(this._onSuggestionClick,this);V=s.bind(this._onSuggestionMouseEnter,this);T=s.bind(this._onSuggestionMouseLeave,this);this.$menu=b(W.menu).on("click.tt",".tt-suggestion",S).on("mouseenter.tt",".tt-suggestion",V).on("mouseleave.tt",".tt-suggestion",T);s.each(this.datasets,function(X){U.$menu.append(X.getRoot());X.onSync("rendered",U._onRendered,U)})}s.mixin(N.prototype,g,{_onSuggestionClick:function M(S){this.trigger("suggestionClicked",b(S.currentTarget))},_onSuggestionMouseEnter:function u(S){this._removeCursor();this._setCursor(b(S.currentTarget),true)},_onSuggestionMouseLeave:function H(){this._removeCursor()},_onRendered:function A(){this.isEmpty=s.every(this.datasets,S);this.isEmpty?this._hide():this.isOpen&&this._show();this.trigger("datasetRendered");function S(T){return T.isEmpty()}},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function z(){return this.$menu.find(".tt-suggestion")},_getCursor:function x(){return this.$menu.find(".tt-cursor").first()},_setCursor:function P(T,S){T.first().addClass("tt-cursor");!S&&this.trigger("cursorMoved")},_removeCursor:function w(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function v(S){var U,T,W,V;if(!this.isOpen){return}T=this._getCursor();U=this._getSuggestions();this._removeCursor();W=U.index(T)+S;W=(W+1)%(U.length+1)-1;if(W===-1){this.trigger("cursorRemoved");return}else{if(W<-1){W=U.length-1}}this._setCursor(V=U.eq(W));this._ensureVisible(V)},_ensureVisible:function L(V){var S,U,T,W;S=V.position().top;U=S+V.outerHeight(true);T=this.$menu.scrollTop();W=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10);if(S<0){this.$menu.scrollTop(T+S)}else{if(W<U){this.$menu.scrollTop(T+(U-W))}}},close:function I(){if(this.isOpen){this.isOpen=false;this._removeCursor();this._hide();this.trigger("closed")}},open:function G(){if(!this.isOpen){this.isOpen=true;!this.isEmpty&&this._show();this.trigger("opened")}},setLanguageDirection:function Q(S){this.$menu.css(S==="ltr"?i.ltr:i.rtl)},moveCursorUp:function B(){this._moveCursor(-1)},moveCursorDown:function R(){this._moveCursor(+1)},getDatumForSuggestion:function D(T){var S=null;if(T.length){S={raw:t.extractDatum(T),value:t.extractValue(T),datasetName:t.extractDatasetName(T)}}return S},getDatumForCursor:function y(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function K(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function C(S){s.each(this.datasets,T);function T(U){U.update(S)}},empty:function F(){s.each(this.datasets,S);this.isEmpty=true;function S(T){T.clear()}},isVisible:function J(){return this.isOpen&&!this.isEmpty},destroy:function O(){this.$menu.off(".tt");this.$menu=null;s.each(this.datasets,S);function S(T){T.destroy()}}});return N;function E(S){return new t(S)}}();var l=function(){var V="ttAttrs";function F(ab){var aa,ac,Z;ab=ab||{};if(!ab.input){b.error("missing input")}this.isActivated=false;this.autoselect=!!ab.autoselect;this.minLength=s.isNumber(ab.minLength)?ab.minLength:1;this.$node=I(ab.input,ab.withHint);aa=this.$node.find(".tt-dropdown-menu");ac=this.$node.find(".tt-input");Z=this.$node.find(".tt-hint");ac.on("blur.tt",function(ae){var ag,af,ad;ag=document.activeElement;af=aa.is(ag);ad=aa.has(ag).length>0;if(s.isMsie()&&(af||ad)){ae.preventDefault();ae.stopImmediatePropagation();s.defer(function(){ac.focus()})}});aa.on("mousedown.tt",function(ad){ad.preventDefault()});this.eventBus=ab.eventBus||new a({el:ac});this.dropdown=new n({menu:aa,datasets:ab.datasets}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onAsync("datasetRendered",this._onDatasetRendered,this);this.input=new m({input:ac,hint:Z}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this);this._setLanguageDirection()}s.mixin(F.prototype,{_onSuggestionClicked:function w(ab,aa){var Z;if(Z=this.dropdown.getDatumForSuggestion(aa)){this._select(Z)}},_onCursorMoved:function Q(){var Z=this.dropdown.getDatumForCursor();this.input.setInputValue(Z.value,true);this.eventBus.trigger("cursorchanged",Z.raw,Z.datasetName)},_onCursorRemoved:function z(){this.input.resetInputValue();this._updateHint()},_onDatasetRendered:function M(){this._updateHint()},_onOpened:function x(){this._updateHint();this.eventBus.trigger("opened")},_onClosed:function C(){this.input.clearHint();this.eventBus.trigger("closed")},_onFocused:function O(){this.isActivated=true;this.dropdown.open()},_onBlurred:function P(){this.isActivated=false;this.dropdown.empty();this.dropdown.close()},_onEnterKeyed:function K(aa,Z){var ab,ac;ab=this.dropdown.getDatumForCursor();ac=this.dropdown.getDatumForTopSuggestion();if(ab){this._select(ab);Z.preventDefault()}else{if(this.autoselect&&ac){this._select(ac);Z.preventDefault()}}},_onTabKeyed:function Y(ab,aa){var Z;if(Z=this.dropdown.getDatumForCursor()){this._select(Z);aa.preventDefault()}else{this._autocomplete(true)}},_onEscKeyed:function T(){this.dropdown.close();this.input.resetInputValue()},_onUpKeyed:function v(){var Z=this.input.getQuery();this.dropdown.isEmpty&&Z.length>=this.minLength?this.dropdown.update(Z):this.dropdown.moveCursorUp();this.dropdown.open()},_onDownKeyed:function A(){var Z=this.input.getQuery();this.dropdown.isEmpty&&Z.length>=this.minLength?this.dropdown.update(Z):this.dropdown.moveCursorDown();this.dropdown.open()},_onLeftKeyed:function X(){this.dir==="rtl"&&this._autocomplete()},_onRightKeyed:function L(){this.dir==="ltr"&&this._autocomplete()},_onQueryChanged:function H(aa,Z){this.input.clearHintIfInvalid();Z.length>=this.minLength?this.dropdown.update(Z):this.dropdown.empty();this.dropdown.open();this._setLanguageDirection()},_onWhitespaceChanged:function U(){this._updateHint();this.dropdown.open()},_setLanguageDirection:function S(){var Z;if(this.dir!==(Z=this.input.getLanguageDirection())){this.dir=Z;this.$node.css("direction",Z);this.dropdown.setLanguageDirection(Z)}},_updateHint:function N(){var aa,ae,ad,ac,Z,ab;aa=this.dropdown.getDatumForTopSuggestion();if(aa&&this.dropdown.isVisible()&&!this.input.hasOverflow()){ae=this.input.getInputValue();ad=m.normalizeQuery(ae);ac=s.escapeRegExChars(ad);Z=new RegExp("^(?:"+ac+")(.+$)","i");ab=Z.exec(aa.value);ab?this.input.setHint(ae+ab[1]):this.input.clearHint()}else{this.input.clearHint()}},_autocomplete:function W(ab){var ad,ac,Z,aa;ad=this.input.getHint();ac=this.input.getQuery();Z=ab||this.input.isCursorAtEnd();if(ad&&ac!==ad&&Z){aa=this.dropdown.getDatumForTopSuggestion();aa&&this.input.setInputValue(aa.value);this.eventBus.trigger("autocompleted",aa.raw,aa.datasetName)}},_select:function J(Z){this.input.setQuery(Z.value);this.input.setInputValue(Z.value,true);this._setLanguageDirection();this.eventBus.trigger("selected",Z.raw,Z.datasetName);this.dropdown.close();s.defer(s.bind(this.dropdown.empty,this.dropdown))},open:function E(){this.dropdown.open()},close:function G(){this.dropdown.close()},setVal:function u(Z){if(this.isActivated){this.input.setInputValue(Z)}else{this.input.setQuery(Z);this.input.setInputValue(Z,true)}this._setLanguageDirection()},getVal:function D(){return this.input.getQuery()},destroy:function R(){this.input.destroy();this.dropdown.destroy();y(this.$node);this.$node=null}});return F;function I(Z,ae){var af,ab,ad,aa;af=b(Z);ab=b(j.wrapper).css(i.wrapper);ad=b(j.dropdown).css(i.dropdown);aa=af.clone().css(i.hint).css(B(af));aa.val("").removeData().addClass("tt-hint").removeAttr("id name placeholder").prop("disabled",true).attr({autocomplete:"off",spellcheck:"false"});af.data(V,{dir:af.attr("dir"),autocomplete:af.attr("autocomplete"),spellcheck:af.attr("spellcheck"),style:af.attr("style")});af.addClass("tt-input").attr({autocomplete:"off",spellcheck:false}).css(ae?i.input:i.inputWithNoHint);try{!af.attr("dir")&&af.attr("dir","auto")}catch(ac){}return af.wrap(ab).parent().prepend(ae?aa:null).append(ad)}function B(Z){return{backgroundAttachment:Z.css("background-attachment"),backgroundClip:Z.css("background-clip"),backgroundColor:Z.css("background-color"),backgroundImage:Z.css("background-image"),backgroundOrigin:Z.css("background-origin"),backgroundPosition:Z.css("background-position"),backgroundRepeat:Z.css("background-repeat"),backgroundSize:Z.css("background-size")}}function y(Z){var aa=Z.find(".tt-input");s.each(aa.data(V),function(ac,ab){s.isUndefined(ac)?aa.removeAttr(ab):aa.attr(ab,ac)});aa.detach().removeData(V).removeClass("tt-input").insertAfter(Z);Z.remove()}}();(function(){var w,u,x;w=b.fn.typeahead;u="ttTypeahead";x={initialize:function y(F,E){E=s.isArray(E)?E:[].slice.call(arguments,1);F=F||{};return this.each(D);function D(){var I=b(this),G,H;s.each(E,function(J){J.highlight=!!F.highlight});H=new l({input:I,eventBus:G=new a({el:I}),withHint:s.isUndefined(F.hint)?true:!!F.hint,minLength:F.minLength,autoselect:F.autoselect,datasets:E});I.data(u,H)}},open:function z(){return this.each(D);function D(){var F=b(this),E;if(E=F.data(u)){E.open()}}},close:function C(){return this.each(D);function D(){var F=b(this),E;if(E=F.data(u)){E.close()}}},val:function v(D){return !arguments.length?F(this.first()):this.each(E);function E(){var H=b(this),G;if(G=H.data(u)){G.setVal(D)}}function F(I){var H,G;if(H=I.data(u)){G=H.getVal()}return G}},destroy:function B(){return this.each(D);function D(){var F=b(this),E;if(E=F.data(u)){E.destroy();F.removeData(u)}}}};b.fn.typeahead=function(D){if(x[D]){return x[D].apply(this,[].slice.call(arguments,1))}else{return x.initialize.apply(this,arguments)}};b.fn.typeahead.noConflict=function A(){b.fn.typeahead=w;return this}})()})(window.jQuery);var TemplateEngine={};(function(a){a.compile=function(b){return{render:function(e){var c=b.replace(/\{\{(\w+)\}\}/g,function(f,g){return e[g]});c=c.replace(/\{\{(\w+)\.(\w+)\}\}/g,function(g,f,h){if(typeof f!=undefined&&typeof h!=undefined&&typeof e[f][h]!=undefined){return e[f][h]}});return c}}};a.init=function(){return a}}(TemplateEngine||{}));
/*!
 * Bootstrap v3.2.0 (http://getbootstrap.com)
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */
;if(typeof jQuery==="undefined"){throw new Error("Bootstrap's JavaScript requires jQuery")}+function(b){function a(){var f=document.createElement("bootstrap");var e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in e){if(f.style[c]!==undefined){return{end:e[c]}}}return false}b.fn.emulateTransitionEnd=function(f){var e=false;var c=this;b(this).one("bsTransitionEnd",function(){e=true});var g=function(){if(!e){b(c).trigger(b.support.transition.end)}};setTimeout(g,f);return this};b(function(){b.support.transition=a();if(!b.support.transition){return}b.event.special.bsTransitionEnd={bindType:b.support.transition.end,delegateType:b.support.transition.end,handle:function(c){if(b(c.target).is(this)){return c.handleObj.handler.apply(this,arguments)}}}})}(jQuery);+function(f){var e='[data-dismiss="alert"]';var b=function(g){f(g).on("click",e,this.close)};b.VERSION="3.2.0";b.prototype.close=function(k){var j=f(this);var h=j.attr("data-target");if(!h){h=j.attr("href");h=h&&h.replace(/.*(?=#[^\s]*$)/,"")}var i=f(h);if(k){k.preventDefault()}if(!i.length){i=j.hasClass("alert")?j:j.parent()}i.trigger(k=f.Event("close.bs.alert"));if(k.isDefaultPrevented()){return}i.removeClass("in");function g(){i.detach().trigger("closed.bs.alert").remove()}f.support.transition&&i.hasClass("fade")?i.one("bsTransitionEnd",g).emulateTransitionEnd(150):g()};function c(g){return this.each(function(){var i=f(this);var h=i.data("bs.alert");if(!h){i.data("bs.alert",(h=new b(this)))}if(typeof g=="string"){h[g].call(i)}})}var a=f.fn.alert;f.fn.alert=c;f.fn.alert.Constructor=b;f.fn.alert.noConflict=function(){f.fn.alert=a;return this};f(document).on("click.bs.alert.data-api",e,b.prototype.close)}(jQuery);+function(e){var b=function(g,f){this.$element=e(g);this.options=e.extend({},b.DEFAULTS,f);this.isLoading=false};b.VERSION="3.2.0";b.DEFAULTS={loadingText:"loading..."};b.prototype.setState=function(h){var j="disabled";var f=this.$element;var i=f.is("input")?"val":"html";var g=f.data();h=h+"Text";if(g.resetText==null){f.data("resetText",f[i]())}f[i](g[h]==null?this.options[h]:g[h]);setTimeout(e.proxy(function(){if(h=="loadingText"){this.isLoading=true;f.addClass(j).attr(j,j)}else{if(this.isLoading){this.isLoading=false;f.removeClass(j).removeAttr(j)}}},this),0)};b.prototype.toggle=function(){var g=true;var f=this.$element.closest('[data-toggle="buttons"]');if(f.length){var h=this.$element.find("input");if(h.prop("type")=="radio"){if(h.prop("checked")&&this.$element.hasClass("active")){g=false}else{f.find(".active").removeClass("active")}}if(g){h.prop("checked",!this.$element.hasClass("active")).trigger("change")}}if(g){this.$element.toggleClass("active")}};function c(f){return this.each(function(){var i=e(this);var h=i.data("bs.button");var g=typeof f=="object"&&f;if(!h){i.data("bs.button",(h=new b(this,g)))}if(f=="toggle"){h.toggle()}else{if(f){h.setState(f)}}})}var a=e.fn.button;e.fn.button=c;e.fn.button.Constructor=b;e.fn.button.noConflict=function(){e.fn.button=a;return this};e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(g){var f=e(g.target);if(!f.hasClass("btn")){f=f.closest(".btn")}c.call(f,"toggle");g.preventDefault()})}(jQuery);+function(c){var e=function(g,f){this.$element=c(g).on("keydown.bs.carousel",c.proxy(this.keydown,this));this.$indicators=this.$element.find(".carousel-indicators");this.options=f;this.paused=this.sliding=this.interval=this.$active=this.$items=null;this.options.pause=="hover"&&this.$element.on("mouseenter.bs.carousel",c.proxy(this.pause,this)).on("mouseleave.bs.carousel",c.proxy(this.cycle,this))};e.VERSION="3.2.0";e.DEFAULTS={interval:5000,pause:"hover",wrap:true};e.prototype.keydown=function(f){switch(f.which){case 37:this.prev();break;case 39:this.next();break;default:return}f.preventDefault()};e.prototype.cycle=function(f){f||(this.paused=false);this.interval&&clearInterval(this.interval);this.options.interval&&!this.paused&&(this.interval=setInterval(c.proxy(this.next,this),this.options.interval));return this};e.prototype.getItemIndex=function(f){this.$items=f.parent().children(".item");return this.$items.index(f||this.$active)};e.prototype.to=function(h){var g=this;var f=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(h>(this.$items.length-1)||h<0){return}if(this.sliding){return this.$element.one("slid.bs.carousel",function(){g.to(h)})}if(f==h){return this.pause().cycle()}return this.slide(h>f?"next":"prev",c(this.$items[h]))};e.prototype.pause=function(f){f||(this.paused=true);if(this.$element.find(".next, .prev").length&&c.support.transition){this.$element.trigger(c.support.transition.end);this.cycle(true)}this.interval=clearInterval(this.interval);return this};e.prototype.next=function(){if(this.sliding){return}return this.slide("next")};e.prototype.prev=function(){if(this.sliding){return}return this.slide("prev")};e.prototype.slide=function(n,i){var q=this.$element.find(".item.active");var g=i||q[n]();var l=this.interval;var o=n=="next"?"left":"right";var j=n=="next"?"first":"last";var k=this;if(!g.length){if(!this.options.wrap){return}g=this.$element.find(".item")[j]()}if(g.hasClass("active")){return(this.sliding=false)}var m=g[0];var f=c.Event("slide.bs.carousel",{relatedTarget:m,direction:o});this.$element.trigger(f);if(f.isDefaultPrevented()){return}this.sliding=true;l&&this.pause();if(this.$indicators.length){this.$indicators.find(".active").removeClass("active");var h=c(this.$indicators.children()[this.getItemIndex(g)]);h&&h.addClass("active")}var p=c.Event("slid.bs.carousel",{relatedTarget:m,direction:o});if(c.support.transition&&this.$element.hasClass("slide")){g.addClass(n);g[0].offsetWidth;q.addClass(o);g.addClass(o);q.one("bsTransitionEnd",function(){g.removeClass([n,o].join(" ")).addClass("active");q.removeClass(["active",o].join(" "));k.sliding=false;setTimeout(function(){k.$element.trigger(p)},0)}).emulateTransitionEnd(q.css("transition-duration").slice(0,-1)*1000)}else{q.removeClass("active");g.addClass("active");this.sliding=false;this.$element.trigger(p)}l&&this.cycle();return this};function b(f){return this.each(function(){var j=c(this);var i=j.data("bs.carousel");var g=c.extend({},e.DEFAULTS,j.data(),typeof f=="object"&&f);var h=typeof f=="string"?f:g.slide;if(!i){j.data("bs.carousel",(i=new e(this,g)))}if(typeof f=="number"){i.to(f)}else{if(h){i[h]()}else{if(g.interval){i.pause().cycle()}}}})}var a=c.fn.carousel;c.fn.carousel=b;c.fn.carousel.Constructor=e;c.fn.carousel.noConflict=function(){c.fn.carousel=a;return this};c(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(k){var g;var j=c(this);var f=c(j.attr("data-target")||(g=j.attr("href"))&&g.replace(/.*(?=#[^\s]+$)/,""));if(!f.hasClass("carousel")){return}var h=c.extend({},f.data(),j.data());var i=j.attr("data-slide-to");if(i){h.interval=false}b.call(f,h);if(i){f.data("bs.carousel").to(i)}k.preventDefault()});c(window).on("load",function(){c('[data-ride="carousel"]').each(function(){var f=c(this);b.call(f,f.data())})})}(jQuery);+function(c){var e=function(g,f){this.$element=c(g);this.options=c.extend({},e.DEFAULTS,f);this.transitioning=null;if(this.options.parent){this.$parent=c(this.options.parent)}if(this.options.toggle){this.toggle()}};e.VERSION="3.2.0";e.DEFAULTS={toggle:true};e.prototype.dimension=function(){var f=this.$element.hasClass("width");return f?"width":"height"};e.prototype.show=function(){if(this.transitioning||this.$element.hasClass("in")){return}var g=c.Event("show.bs.collapse");this.$element.trigger(g);if(g.isDefaultPrevented()){return}var j=this.$parent&&this.$parent.find("> .panel > .in");if(j&&j.length){var h=j.data("bs.collapse");if(h&&h.transitioning){return}b.call(j,"hide");h||j.data("bs.collapse",null)}var k=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[k](0);this.transitioning=1;var f=function(){this.$element.removeClass("collapsing").addClass("collapse in")[k]("");this.transitioning=0;this.$element.trigger("shown.bs.collapse")};if(!c.support.transition){return f.call(this)}var i=c.camelCase(["scroll",k].join("-"));this.$element.one("bsTransitionEnd",c.proxy(f,this)).emulateTransitionEnd(350)[k](this.$element[0][i])};e.prototype.hide=function(){if(this.transitioning||!this.$element.hasClass("in")){return}var g=c.Event("hide.bs.collapse");this.$element.trigger(g);if(g.isDefaultPrevented()){return}var h=this.dimension();this.$element[h](this.$element[h]())[0].offsetHeight;this.$element.addClass("collapsing").removeClass("collapse").removeClass("in");this.transitioning=1;var f=function(){this.transitioning=0;this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};if(!c.support.transition){return f.call(this)}this.$element[h](0).one("bsTransitionEnd",c.proxy(f,this)).emulateTransitionEnd(350)};e.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};function b(f){return this.each(function(){var i=c(this);var h=i.data("bs.collapse");var g=c.extend({},e.DEFAULTS,i.data(),typeof f=="object"&&f);if(!h&&g.toggle&&f=="show"){f=!f}if(!h){i.data("bs.collapse",(h=new e(this,g)))}if(typeof f=="string"){h[f]()}})}var a=c.fn.collapse;c.fn.collapse=b;c.fn.collapse.Constructor=e;c.fn.collapse.noConflict=function(){c.fn.collapse=a;return this};c(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(k){var f;var m=c(this);var l=m.attr("data-target")||k.preventDefault()||(f=m.attr("href"))&&f.replace(/.*(?=#[^\s]+$)/,"");var g=c(l);var i=g.data("bs.collapse");var j=i?"toggle":m.data();var n=m.attr("data-parent");var h=n&&c(n);if(!i||!i.transitioning){if(h){h.find('[data-toggle="collapse"][data-parent="'+n+'"]').not(m).addClass("collapsed")}m[g.hasClass("in")?"addClass":"removeClass"]("collapsed")}b.call(g,j)})}(jQuery);+function(i){var f=".dropdown-backdrop";var b='[data-toggle="dropdown"]';var a=function(j){i(j).on("click.bs.dropdown",this.toggle)};a.VERSION="3.2.0";a.prototype.toggle=function(n){var m=i(this);if(m.is(".disabled, :disabled")){return}var l=g(m);var k=l.hasClass("open");e();if(!k){if("ontouchstart" in document.documentElement&&!l.closest(".navbar-nav").length){i('<div class="dropdown-backdrop"/>').insertAfter(i(this)).on("click",e)}var j={relatedTarget:this};l.trigger(n=i.Event("show.bs.dropdown",j));if(n.isDefaultPrevented()){return}m.trigger("focus");l.toggleClass("open").trigger("shown.bs.dropdown",j)}return false};a.prototype.keydown=function(n){if(!/(38|40|27)/.test(n.keyCode)){return}var m=i(this);n.preventDefault();n.stopPropagation();if(m.is(".disabled, :disabled")){return}var l=g(m);var k=l.hasClass("open");if(!k||(k&&n.keyCode==27)){if(n.which==27){l.find(b).trigger("focus")}return m.trigger("click")}var o=" li:not(.divider):visible a";var p=l.find('[role="menu"]'+o+', [role="listbox"]'+o);if(!p.length){return}var j=p.index(p.filter(":focus"));if(n.keyCode==38&&j>0){j--}if(n.keyCode==40&&j<p.length-1){j++}if(!~j){j=0}p.eq(j).trigger("focus")};function e(j){if(j&&j.which===3){return}i(f).remove();i(b).each(function(){var l=g(i(this));var k={relatedTarget:this};if(!l.hasClass("open")){return}l.trigger(j=i.Event("hide.bs.dropdown",k));if(j.isDefaultPrevented()){return}l.removeClass("open").trigger("hidden.bs.dropdown",k)})}function g(l){var j=l.attr("data-target");if(!j){j=l.attr("href");j=j&&/#[A-Za-z]/.test(j)&&j.replace(/.*(?=#[^\s]*$)/,"")}var k=j&&i(j);return k&&k.length?k:l.parent()}function h(j){return this.each(function(){var l=i(this);var k=l.data("bs.dropdown");if(!k){l.data("bs.dropdown",(k=new a(this)))}if(typeof j=="string"){k[j].call(l)}})}var c=i.fn.dropdown;i.fn.dropdown=h;i.fn.dropdown.Constructor=a;i.fn.dropdown.noConflict=function(){i.fn.dropdown=c;return this};i(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(j){j.stopPropagation()}).on("click.bs.dropdown.data-api",b,a.prototype.toggle).on("keydown.bs.dropdown.data-api",b+', [role="menu"], [role="listbox"]',a.prototype.keydown)}(jQuery);+function(e){var b=function(g,f){this.options=f;this.$body=e(document.body);this.$element=e(g);this.$backdrop=this.isShown=null;this.scrollbarWidth=0;if(this.options.remote){this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))}};b.VERSION="3.2.0";b.DEFAULTS={backdrop:true,keyboard:true,show:true};b.prototype.toggle=function(f){return this.isShown?this.hide():this.show(f)};b.prototype.show=function(h){var f=this;var g=e.Event("show.bs.modal",{relatedTarget:h});this.$element.trigger(g);if(this.isShown||g.isDefaultPrevented()){return}this.isShown=true;this.checkScrollbar();this.$body.addClass("modal-open");this.setScrollbar();this.escape();this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this));this.backdrop(function(){var j=e.support.transition&&f.$element.hasClass("fade");if(!f.$element.parent().length){f.$element.appendTo(f.$body)}f.$element.show().scrollTop(0);if(j){f.$element[0].offsetWidth}f.$element.addClass("in").attr("aria-hidden",false);f.enforceFocus();var i=e.Event("shown.bs.modal",{relatedTarget:h});j?f.$element.find(".modal-dialog").one("bsTransitionEnd",function(){f.$element.trigger("focus").trigger(i)}).emulateTransitionEnd(300):f.$element.trigger("focus").trigger(i)})};b.prototype.hide=function(f){if(f){f.preventDefault()}f=e.Event("hide.bs.modal");this.$element.trigger(f);if(!this.isShown||f.isDefaultPrevented()){return}this.isShown=false;this.$body.removeClass("modal-open");this.resetScrollbar();this.escape();e(document).off("focusin.bs.modal");this.$element.removeClass("in").attr("aria-hidden",true).off("click.dismiss.bs.modal");e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal()};b.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(f){if(this.$element[0]!==f.target&&!this.$element.has(f.target).length){this.$element.trigger("focus")}},this))};b.prototype.escape=function(){if(this.isShown&&this.options.keyboard){this.$element.on("keyup.dismiss.bs.modal",e.proxy(function(f){f.which==27&&this.hide()},this))}else{if(!this.isShown){this.$element.off("keyup.dismiss.bs.modal")}}};b.prototype.hideModal=function(){var f=this;this.$element.hide();this.backdrop(function(){f.$element.trigger("hidden.bs.modal")})};b.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};b.prototype.backdrop=function(j){var i=this;var g=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=e.support.transition&&g;this.$backdrop=e('<div class="modal-backdrop '+g+'" />').appendTo(this.$body);this.$element.on("click.dismiss.bs.modal",e.proxy(function(k){if(k.target!==k.currentTarget){return}this.options.backdrop=="static"?this.$element[0].focus.call(this.$element[0]):this.hide.call(this)},this));if(f){this.$backdrop[0].offsetWidth}this.$backdrop.addClass("in");if(!j){return}f?this.$backdrop.one("bsTransitionEnd",j).emulateTransitionEnd(150):j()}else{if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var h=function(){i.removeBackdrop();j&&j()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",h).emulateTransitionEnd(150):h()}else{if(j){j()}}}};b.prototype.checkScrollbar=function(){if(document.body.clientWidth>=window.innerWidth){return}this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar()};b.prototype.setScrollbar=function(){var f=parseInt((this.$body.css("padding-right")||0),10);if(this.scrollbarWidth){this.$body.css("padding-right",f+this.scrollbarWidth)}};b.prototype.resetScrollbar=function(){this.$body.css("padding-right","")};b.prototype.measureScrollbar=function(){var g=document.createElement("div");g.className="modal-scrollbar-measure";this.$body.append(g);var f=g.offsetWidth-g.clientWidth;this.$body[0].removeChild(g);return f};function c(f,g){return this.each(function(){var j=e(this);var i=j.data("bs.modal");var h=e.extend({},b.DEFAULTS,j.data(),typeof f=="object"&&f);if(!i){j.data("bs.modal",(i=new b(this,h)))}if(typeof f=="string"){i[f](g)}else{if(h.show){i.show(g)}}})}var a=e.fn.modal;e.fn.modal=c;e.fn.modal.Constructor=b;e.fn.modal.noConflict=function(){e.fn.modal=a;return this};e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(j){var i=e(this);var g=i.attr("href");var f=e(i.attr("data-target")||(g&&g.replace(/.*(?=#[^\s]+$)/,"")));var h=f.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(g)&&g},f.data(),i.data());if(i.is("a")){j.preventDefault()}f.one("show.bs.modal",function(k){if(k.isDefaultPrevented()){return}f.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})});c.call(f,h,this)})}(jQuery);+function(e){var c=function(g,f){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null;this.init("tooltip",g,f)};c.VERSION="3.2.0";c.DEFAULTS={animation:true,placement:"top",selector:false,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:false,container:false,viewport:{selector:"body",padding:0}};c.prototype.init=function(m,k,h){this.enabled=true;this.type=m;this.$element=e(k);this.options=this.getOptions(h);this.$viewport=this.options.viewport&&e(this.options.viewport.selector||this.options.viewport);var l=this.options.trigger.split(" ");for(var j=l.length;j--;){var g=l[j];if(g=="click"){this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this))}else{if(g!="manual"){var n=g=="hover"?"mouseenter":"focusin";var f=g=="hover"?"mouseleave":"focusout";this.$element.on(n+"."+this.type,this.options.selector,e.proxy(this.enter,this));this.$element.on(f+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}}this.options.selector?(this._options=e.extend({},this.options,{trigger:"manual",selector:""})):this.fixTitle()};c.prototype.getDefaults=function(){return c.DEFAULTS};c.prototype.getOptions=function(f){f=e.extend({},this.getDefaults(),this.$element.data(),f);if(f.delay&&typeof f.delay=="number"){f.delay={show:f.delay,hide:f.delay}}return f};c.prototype.getDelegateOptions=function(){var f={};var g=this.getDefaults();this._options&&e.each(this._options,function(h,i){if(g[h]!=i){f[h]=i}});return f};c.prototype.enter=function(g){var f=g instanceof this.constructor?g:e(g.currentTarget).data("bs."+this.type);if(!f){f=new this.constructor(g.currentTarget,this.getDelegateOptions());e(g.currentTarget).data("bs."+this.type,f)}clearTimeout(f.timeout);f.hoverState="in";if(!f.options.delay||!f.options.delay.show){return f.show()}f.timeout=setTimeout(function(){if(f.hoverState=="in"){f.show()}},f.options.delay.show)};c.prototype.leave=function(g){var f=g instanceof this.constructor?g:e(g.currentTarget).data("bs."+this.type);if(!f){f=new this.constructor(g.currentTarget,this.getDelegateOptions());e(g.currentTarget).data("bs."+this.type,f)}clearTimeout(f.timeout);f.hoverState="out";if(!f.options.delay||!f.options.delay.hide){return f.hide()}f.timeout=setTimeout(function(){if(f.hoverState=="out"){f.hide()}},f.options.delay.hide)};c.prototype.show=function(){var q=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(q);var r=e.contains(document.documentElement,this.$element[0]);if(q.isDefaultPrevented()||!r){return}var p=this;var n=this.tip();var h=this.getUID(this.type);this.setContent();n.attr("id",h);this.$element.attr("aria-describedby",h);if(this.options.animation){n.addClass("fade")}var l=typeof this.options.placement=="function"?this.options.placement.call(this,n[0],this.$element[0]):this.options.placement;var t=/\s?auto?\s?/i;var u=t.test(l);if(u){l=l.replace(t,"")||"top"}n.detach().css({top:0,left:0,display:"block"}).addClass(l).data("bs."+this.type,this);this.options.container?n.appendTo(this.options.container):n.insertAfter(this.$element);var s=this.getPosition();var f=n[0].offsetWidth;var o=n[0].offsetHeight;if(u){var j=l;var k=this.$element.parent();var m=this.getPosition(k);l=l=="bottom"&&s.top+s.height+o-m.scroll>m.height?"top":l=="top"&&s.top-m.scroll-o<0?"bottom":l=="right"&&s.right+f>m.width?"left":l=="left"&&s.left-f<m.left?"right":l;n.removeClass(j).addClass(l)}var i=this.getCalculatedOffset(l,s,f,o);this.applyPlacement(i,l);var g=function(){p.$element.trigger("shown.bs."+p.type);p.hoverState=null};e.support.transition&&this.$tip.hasClass("fade")?n.one("bsTransitionEnd",g).emulateTransitionEnd(150):g()}};c.prototype.applyPlacement=function(l,m){var n=this.tip();var h=n[0].offsetWidth;var r=n[0].offsetHeight;var g=parseInt(n.css("margin-top"),10);var j=parseInt(n.css("margin-left"),10);if(isNaN(g)){g=0}if(isNaN(j)){j=0}l.top=l.top+g;l.left=l.left+j;e.offset.setOffset(n[0],e.extend({using:function(s){n.css({top:Math.round(s.top),left:Math.round(s.left)})}},l),0);n.addClass("in");var f=n[0].offsetWidth;var o=n[0].offsetHeight;if(m=="top"&&o!=r){l.top=l.top+r-o}var q=this.getViewportAdjustedDelta(m,l,f,o);if(q.left){l.left+=q.left}else{l.top+=q.top}var i=q.left?q.left*2-h+f:q.top*2-r+o;var k=q.left?"left":"top";var p=q.left?"offsetWidth":"offsetHeight";n.offset(l);this.replaceArrow(i,n[0][p],k)};c.prototype.replaceArrow=function(h,g,f){this.arrow().css(f,h?(50*(1-h/g)+"%"):"")};c.prototype.setContent=function(){var g=this.tip();var f=this.getTitle();g.find(".tooltip-inner")[this.options.html?"html":"text"](f);g.removeClass("fade in top bottom left right")};c.prototype.hide=function(){var g=this;var i=this.tip();var h=e.Event("hide.bs."+this.type);this.$element.removeAttr("aria-describedby");function f(){if(g.hoverState!="in"){i.detach()}g.$element.trigger("hidden.bs."+g.type)}this.$element.trigger(h);if(h.isDefaultPrevented()){return}i.removeClass("in");e.support.transition&&this.$tip.hasClass("fade")?i.one("bsTransitionEnd",f).emulateTransitionEnd(150):f();this.hoverState=null;return this};c.prototype.fixTitle=function(){var f=this.$element;if(f.attr("title")||typeof(f.attr("data-original-title"))!="string"){f.attr("data-original-title",f.attr("title")||"").attr("title","")}};c.prototype.hasContent=function(){return this.getTitle()};c.prototype.getPosition=function(g){g=g||this.$element;var h=g[0];var f=h.tagName=="BODY";return e.extend({},(typeof h.getBoundingClientRect=="function")?h.getBoundingClientRect():null,{scroll:f?document.documentElement.scrollTop||document.body.scrollTop:g.scrollTop(),width:f?e(window).width():g.outerWidth(),height:f?e(window).height():g.outerHeight()},f?{top:0,left:0}:g.offset())};c.prototype.getCalculatedOffset=function(f,i,g,h){return f=="bottom"?{top:i.top+i.height,left:i.left+i.width/2-g/2}:f=="top"?{top:i.top-h,left:i.left+i.width/2-g/2}:f=="left"?{top:i.top+i.height/2-h/2,left:i.left-g}:{top:i.top+i.height/2-h/2,left:i.left+i.width}};c.prototype.getViewportAdjustedDelta=function(i,l,f,k){var n={top:0,left:0};if(!this.$viewport){return n}var h=this.options.viewport&&this.options.viewport.padding||0;var m=this.getPosition(this.$viewport);if(/right|left/.test(i)){var o=l.top-h-m.scroll;var j=l.top+h-m.scroll+k;if(o<m.top){n.top=m.top-o}else{if(j>m.top+m.height){n.top=m.top+m.height-j}}}else{var p=l.left-h;var g=l.left+h+f;if(p<m.left){n.left=m.left-p}else{if(g>m.width){n.left=m.left+m.width-g}}}return n};c.prototype.getTitle=function(){var h;var f=this.$element;var g=this.options;h=f.attr("data-original-title")||(typeof g.title=="function"?g.title.call(f[0]):g.title);return h};c.prototype.getUID=function(f){do{f+=~~(Math.random()*1000000)}while(document.getElementById(f));return f};c.prototype.tip=function(){return(this.$tip=this.$tip||e(this.options.template))};c.prototype.arrow=function(){return(this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow"))};c.prototype.validate=function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null}};c.prototype.enable=function(){this.enabled=true};c.prototype.disable=function(){this.enabled=false};c.prototype.toggleEnabled=function(){this.enabled=!this.enabled};c.prototype.toggle=function(g){var f=this;if(g){f=e(g.currentTarget).data("bs."+this.type);if(!f){f=new this.constructor(g.currentTarget,this.getDelegateOptions());e(g.currentTarget).data("bs."+this.type,f)}}f.tip().hasClass("in")?f.leave(f):f.enter(f)};c.prototype.destroy=function(){clearTimeout(this.timeout);this.hide().$element.off("."+this.type).removeData("bs."+this.type)};function b(f){return this.each(function(){var i=e(this);var h=i.data("bs.tooltip");var g=typeof f=="object"&&f;if(!h&&f=="destroy"){return}if(!h){i.data("bs.tooltip",(h=new c(this,g)))}if(typeof f=="string"){h[f]()}})}var a=e.fn.tooltip;e.fn.tooltip=b;e.fn.tooltip.Constructor=c;e.fn.tooltip.noConflict=function(){e.fn.tooltip=a;return this}}(jQuery);+function(e){var c=function(g,f){this.init("popover",g,f)};if(!e.fn.tooltip){throw new Error("Popover requires tooltip.js")}c.VERSION="3.2.0";c.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});c.prototype=e.extend({},e.fn.tooltip.Constructor.prototype);c.prototype.constructor=c;c.prototype.getDefaults=function(){return c.DEFAULTS};c.prototype.setContent=function(){var h=this.tip();var g=this.getTitle();var f=this.getContent();h.find(".popover-title")[this.options.html?"html":"text"](g);h.find(".popover-content").empty()[this.options.html?(typeof f=="string"?"html":"append"):"text"](f);h.removeClass("fade top bottom left right in");if(!h.find(".popover-title").html()){h.find(".popover-title").hide()}};c.prototype.hasContent=function(){return this.getTitle()||this.getContent()};c.prototype.getContent=function(){var f=this.$element;var g=this.options;return f.attr("data-content")||(typeof g.content=="function"?g.content.call(f[0]):g.content)};c.prototype.arrow=function(){return(this.$arrow=this.$arrow||this.tip().find(".arrow"))};c.prototype.tip=function(){if(!this.$tip){this.$tip=e(this.options.template)}return this.$tip};function b(f){return this.each(function(){var i=e(this);var h=i.data("bs.popover");var g=typeof f=="object"&&f;if(!h&&f=="destroy"){return}if(!h){i.data("bs.popover",(h=new c(this,g)))}if(typeof f=="string"){h[f]()}})}var a=e.fn.popover;e.fn.popover=b;e.fn.popover.Constructor=c;e.fn.popover.noConflict=function(){e.fn.popover=a;return this}}(jQuery);+function(e){function c(g,f){var h=e.proxy(this.process,this);this.$body=e("body");this.$scrollElement=e(g).is("body")?e(window):e(g);this.options=e.extend({},c.DEFAULTS,f);this.selector=(this.options.target||"")+" .nav li > a";this.offsets=[];this.targets=[];this.activeTarget=null;this.scrollHeight=0;this.$scrollElement.on("scroll.bs.scrollspy",h);this.refresh();this.process()}c.VERSION="3.2.0";c.DEFAULTS={offset:10};c.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)};c.prototype.refresh=function(){var f="offset";var h=0;if(!e.isWindow(this.$scrollElement[0])){f="position";h=this.$scrollElement.scrollTop()}this.offsets=[];this.targets=[];this.scrollHeight=this.getScrollHeight();var g=this;this.$body.find(this.selector).map(function(){var j=e(this);var i=j.data("target")||j.attr("href");var k=/^#./.test(i)&&e(i);return(k&&k.length&&k.is(":visible")&&[[k[f]().top+h,i]])||null}).sort(function(j,i){return j[0]-i[0]}).each(function(){g.offsets.push(this[0]);g.targets.push(this[1])})};c.prototype.process=function(){var l=this.$scrollElement.scrollTop()+this.options.offset;var h=this.getScrollHeight();var k=this.options.offset+h-this.$scrollElement.height();var j=this.offsets;var f=this.targets;var m=this.activeTarget;var g;if(this.scrollHeight!=h){this.refresh()}if(l>=k){return m!=(g=f[f.length-1])&&this.activate(g)}if(m&&l<=j[0]){return m!=(g=f[0])&&this.activate(g)}for(g=j.length;g--;){m!=f[g]&&l>=j[g]&&(!j[g+1]||l<=j[g+1])&&this.activate(f[g])}};c.prototype.activate=function(h){this.activeTarget=h;e(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var f=this.selector+'[data-target="'+h+'"],'+this.selector+'[href="'+h+'"]';var g=e(f).parents("li").addClass("active");if(g.parent(".dropdown-menu").length){g=g.closest("li.dropdown").addClass("active")}g.trigger("activate.bs.scrollspy")};function b(f){return this.each(function(){var i=e(this);var h=i.data("bs.scrollspy");var g=typeof f=="object"&&f;if(!h){i.data("bs.scrollspy",(h=new c(this,g)))}if(typeof f=="string"){h[f]()}})}var a=e.fn.scrollspy;e.fn.scrollspy=b;e.fn.scrollspy.Constructor=c;e.fn.scrollspy.noConflict=function(){e.fn.scrollspy=a;return this};e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var f=e(this);b.call(f,f.data())})})}(jQuery);+function(e){var b=function(f){this.element=e(f)};b.VERSION="3.2.0";b.prototype.show=function(){var k=this.element;var h=k.closest("ul:not(.dropdown-menu)");var g=k.data("target");if(!g){g=k.attr("href");g=g&&g.replace(/.*(?=#[^\s]*$)/,"")}if(k.parent("li").hasClass("active")){return}var i=h.find(".active:last a")[0];var j=e.Event("show.bs.tab",{relatedTarget:i});k.trigger(j);if(j.isDefaultPrevented()){return}var f=e(g);this.activate(k.closest("li"),h);this.activate(f,f.parent(),function(){k.trigger({type:"shown.bs.tab",relatedTarget:i})})};b.prototype.activate=function(h,g,k){var f=g.find("> .active");var j=k&&e.support.transition&&f.hasClass("fade");function i(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");h.addClass("active");if(j){h[0].offsetWidth;h.addClass("in")}else{h.removeClass("fade")}if(h.parent(".dropdown-menu")){h.closest("li.dropdown").addClass("active")}k&&k()}j?f.one("bsTransitionEnd",i).emulateTransitionEnd(150):i();f.removeClass("in")};function c(f){return this.each(function(){var h=e(this);var g=h.data("bs.tab");if(!g){h.data("bs.tab",(g=new b(this)))}if(typeof f=="string"){g[f]()}})}var a=e.fn.tab;e.fn.tab=c;e.fn.tab.Constructor=b;e.fn.tab.noConflict=function(){e.fn.tab=a;return this};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(f){f.preventDefault();c.call(e(this),"show")})}(jQuery);+function(e){var c=function(g,f){this.options=e.extend({},c.DEFAULTS,f);this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this));this.$element=e(g);this.affixed=this.unpin=this.pinnedOffset=null;this.checkPosition()};c.VERSION="3.2.0";c.RESET="affix affix-top affix-bottom";c.DEFAULTS={offset:0,target:window};c.prototype.getPinnedOffset=function(){if(this.pinnedOffset){return this.pinnedOffset}this.$element.removeClass(c.RESET).addClass("affix");var g=this.$target.scrollTop();var f=this.$element.offset();return(this.pinnedOffset=f.top-g)};c.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)};c.prototype.checkPosition=function(){if(!this.$element.is(":visible")){return}var n=e(document).height();var f=this.$target.scrollTop();var k=this.$element.offset();var i=this.options.offset;var g=i.top;var h=i.bottom;if(typeof i!="object"){h=g=i}if(typeof g=="function"){g=i.top(this.$element)}if(typeof h=="function"){h=i.bottom(this.$element)}var j=this.unpin!=null&&(f+this.unpin<=k.top)?false:h!=null&&(k.top+this.$element.height()>=n-h)?"bottom":g!=null&&(f<=g)?"top":false;if(this.affixed===j){return}if(this.unpin!=null){this.$element.css("top","")}var m="affix"+(j?"-"+j:"");var l=e.Event(m+".bs.affix");this.$element.trigger(l);if(l.isDefaultPrevented()){return}this.affixed=j;this.unpin=j=="bottom"?this.getPinnedOffset():null;this.$element.removeClass(c.RESET).addClass(m).trigger(e.Event(m.replace("affix","affixed")));if(j=="bottom"){this.$element.offset({top:n-this.$element.height()-h})}};function b(f){return this.each(function(){var i=e(this);var h=i.data("bs.affix");var g=typeof f=="object"&&f;if(!h){i.data("bs.affix",(h=new c(this,g)))}if(typeof f=="string"){h[f]()}})}var a=e.fn.affix;e.fn.affix=b;e.fn.affix.Constructor=c;e.fn.affix.noConflict=function(){e.fn.affix=a;return this};e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var g=e(this);var f=g.data();f.offset=f.offset||{};if(f.offsetBottom){f.offset.bottom=f.offsetBottom}if(f.offsetTop){f.offset.top=f.offsetTop}b.call(g,f)})})}(jQuery);+function(f){f.fn.modal.Constructor.prototype.addClass=function(g){f(this.$element).addClass(g);return this};f.fn.modal.Constructor.prototype.removeClass=function(g){f(this.$element).removeClass(g);return this};f.fn.modal.Constructor.prototype.loading=function(g){g=g||{};c();a(this).loader("open",f.extend(true,{},{top:150},g));return this};f.fn.modal.Constructor.prototype.append=function(g){this.stopLoading();f(g).appendTo(this.$element)};f.fn.modal.Constructor.prototype.stopLoading=function(){c();a(this).loader("close")};f.fn.modal.Constructor.prototype.content=function(g){this.stopLoading();a(this).html(g);return this};f.fn.modal.Constructor.prototype.title=function(g){b(this).html(g);return this};function e(g,i){i=i||"body";var h=f(g.$element).find(".modal-"+i);if(!h.length){throw"Modal panic: Modal "+i+" cannot be found"}return h}function a(g){return e(g,"body")}function b(g){var h="title";return e(g,h)}function c(){if(!f.fn.loader){throw"Modal panic: Loader plugin not found"}}}(jQuery);(function(I){var W,aL="2.8.4",bb=typeof global!=="undefined"?global:this,aw,ae=Math.round,aQ=Object.prototype.hasOwnProperty,al,B=0,k=1,a3=2,A=3,aI=4,y=5,aa=6,au={},aW=[],av=(typeof module!=="undefined"&&module&&module.exports),f=/^\/?Date\((\-?\d+)/i,be=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,aN=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,az=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,ak=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,l=/\d\d?/,am=/\d{1,3}/,J=/\d{1,4}/,bk=/[+\-]?\d{1,6}/,a9=/\d+/,O=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,s=/Z|[\+\-]\d\d:?\d\d/gi,o=/T/i,w=/[\+\-]?\d+/,aY=/[\+\-]?\d+(\.\d{1,3})?/,aj=/\d/,v=/\d\d/,bd=/\d{3}/,aX=/\d{4}/,aq=/[+-]?\d{6}/,ah=/[+-]?\d+/,aU=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ab="YYYY-MM-DDTHH:mm:ssZ",bc=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],M=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],ai=/([\+\-]|\d\d)/gi,aP="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),H={Milliseconds:1,Seconds:1000,Minutes:60000,Hours:3600000,Days:86400000,Months:2592000000,Years:31536000000},g={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},a8={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},at={},C={s:45,m:45,h:22,d:26,M:11},a2="DDD w W M D d".split(" "),ax="M D H h m s w W".split(" "),a4={M:function(){return this.month()+1},MMM:function(i){return this.localeData().monthsShort(this,i)},MMMM:function(i){return this.localeData().months(this,i)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(i){return this.localeData().weekdaysMin(this,i)},ddd:function(i){return this.localeData().weekdaysShort(this,i)},dddd:function(i){return this.localeData().weekdays(this,i)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return P(this.year()%100,2)},YYYY:function(){return P(this.year(),4)},YYYYY:function(){return P(this.year(),5)},YYYYYY:function(){var bq=this.year(),i=bq>=0?"+":"-";return i+P(Math.abs(bq),6)},gg:function(){return P(this.weekYear()%100,2)},gggg:function(){return P(this.weekYear(),4)},ggggg:function(){return P(this.weekYear(),5)},GG:function(){return P(this.isoWeekYear()%100,2)},GGGG:function(){return P(this.isoWeekYear(),4)},GGGGG:function(){return P(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),true)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),false)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return R(this.milliseconds()/100)},SS:function(){return P(R(this.milliseconds()/10),2)},SSS:function(){return P(this.milliseconds(),3)},SSSS:function(){return P(this.milliseconds(),3)},Z:function(){var bq=-this.zone(),i="+";if(bq<0){bq=-bq;i="-"}return i+P(R(bq/60),2)+":"+P(R(bq)%60,2)},ZZ:function(){var bq=-this.zone(),i="+";if(bq<0){bq=-bq;i="-"}return i+P(R(bq/60),2)+P(R(bq)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},a={},ac=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];function aZ(bq,i,br){switch(arguments.length){case 2:return bq!=null?bq:i;case 3:return bq!=null?bq:i!=null?i:br;default:throw new Error("Implement me")}}function a5(bq,i){return aQ.call(bq,i)}function ao(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false}}function bp(i){if(W.suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+i)}}function bn(bq,i){var br=true;return aJ(function(){if(br){bp(bq);br=false}return i.apply(this,arguments)},i)}function h(i,bq){if(!a[i]){bp(bq);a[i]=true}}function T(bq,i){return function(br){return P(bq.call(this,br),i)}}function m(i,bq){return function(br){return this.localeData().ordinal(i.call(this,br),bq)}}while(a2.length){al=a2.pop();a4[al+"o"]=m(a4[al],al)}while(ax.length){al=ax.pop();a4[al+al]=T(a4[al],2)}a4.DDDD=T(a4.DDD,3);function ag(){}function Q(bq,i){if(i!==false){bh(bq)}aS(this,bq);this._d=new Date(+bq._d)}function an(bu){var bw=p(bu),bv=bw.year||0,bq=bw.quarter||0,br=bw.month||0,i=bw.week||0,bz=bw.day||0,bx=bw.hour||0,bt=bw.minute||0,by=bw.second||0,bs=bw.millisecond||0;this._milliseconds=+bs+by*1000+bt*60000+bx*3600000;this._days=+bz+i*7;this._months=+br+bq*3+bv*12;this._data={};this._locale=W.localeData();this._bubble()}function aJ(br,bq){for(var bs in bq){if(a5(bq,bs)){br[bs]=bq[bs]}}if(a5(bq,"toString")){br.toString=bq.toString}if(a5(bq,"valueOf")){br.valueOf=bq.valueOf}return br}function aS(bu,bt){var bq,bs,br;if(typeof bt._isAMomentObject!=="undefined"){bu._isAMomentObject=bt._isAMomentObject}if(typeof bt._i!=="undefined"){bu._i=bt._i}if(typeof bt._f!=="undefined"){bu._f=bt._f}if(typeof bt._l!=="undefined"){bu._l=bt._l}if(typeof bt._strict!=="undefined"){bu._strict=bt._strict}if(typeof bt._tzm!=="undefined"){bu._tzm=bt._tzm}if(typeof bt._isUTC!=="undefined"){bu._isUTC=bt._isUTC}if(typeof bt._offset!=="undefined"){bu._offset=bt._offset}if(typeof bt._pf!=="undefined"){bu._pf=bt._pf}if(typeof bt._locale!=="undefined"){bu._locale=bt._locale}if(aW.length>0){for(bq in aW){bs=aW[bq];br=bt[bs];if(typeof br!=="undefined"){bu[bs]=br}}}return bu}function q(i){if(i<0){return Math.ceil(i)}else{return Math.floor(i)}}function P(bt,bs,br){var bq=""+Math.abs(bt),i=bt>=0;while(bq.length<bs){bq="0"+bq}return(i?(br?"+":""):"-")+bq}function e(br,i){var bq={milliseconds:0,months:0};bq.months=i.month()-br.month()+(i.year()-br.year())*12;if(br.clone().add(bq.months,"M").isAfter(i)){--bq.months}bq.milliseconds=+i-+(br.clone().add(bq.months,"M"));return bq}function ad(br,i){var bq;i=D(i,br);if(br.isBefore(i)){bq=e(br,i)}else{bq=e(i,br);bq.milliseconds=-bq.milliseconds;bq.months=-bq.months}return bq}function X(bq,i){return function(bu,bt){var bs,br;if(bt!==null&&!isNaN(+bt)){h(i,"moment()."+i+"(period, number) is deprecated. Please use moment()."+i+"(number, period).");br=bu;bu=bt;bt=br}bu=typeof bu==="string"?+bu:bu;bs=W.duration(bu,bt);L(this,bs,bq);return this}}function L(br,bu,bt,bs){var bq=bu._milliseconds,bv=bu._days,i=bu._months;bs=bs==null?true:bs;if(bq){br._d.setTime(+br._d+bq*bt)}if(bv){a0(br,"Date",bo(br,"Date")+bv*bt)}if(i){bj(br,bo(br,"Month")+i*bt)}if(bs){W.updateOffset(br,bv||i)}}function b(i){return Object.prototype.toString.call(i)==="[object Array]"}function j(i){return Object.prototype.toString.call(i)==="[object Date]"||i instanceof Date}function a1(bv,bu,br){var bq=Math.min(bv.length,bu.length),bs=Math.abs(bv.length-bu.length),bw=0,bt;for(bt=0;bt<bq;bt++){if((br&&bv[bt]!==bu[bt])||(!br&&R(bv[bt])!==R(bu[bt]))){bw++}}return bw+bs}function a7(bq){if(bq){var i=bq.toLowerCase().replace(/(.)s$/,"$1");bq=g[bq]||a8[i]||i}return bq}function p(br){var bq={},i,bs;for(bs in br){if(a5(br,bs)){i=a7(bs);if(i){bq[i]=br[bs]}}}return bq}function aF(bq){var i,br;if(bq.indexOf("week")===0){i=7;br="day"}else{if(bq.indexOf("month")===0){i=12;br="month"}else{return}}W[bq]=function(bw,bt){var bv,bs,bx=W._locale[bq],bu=[];if(typeof bw==="number"){bt=bw;bw=I}bs=function(bz){var by=W().utc().set(br,bz);return bx.call(W._locale,by,bw||"")};if(bt!=null){return bs(bt)}else{for(bv=0;bv<i;bv++){bu.push(bs(bv))}return bu}}}function R(i){var br=+i,bq=0;if(br!==0&&isFinite(br)){if(br>=0){bq=Math.floor(br)}else{bq=Math.ceil(br)}}return bq}function bf(i,bq){return new Date(Date.UTC(i,bq+1,0)).getUTCDate()}function aO(i,br,bq){return G(W([i,11,31+br-bq]),br,bq).week}function ba(i){return aT(i)?366:365}function aT(i){return(i%4===0&&i%100!==0)||i%400===0}function bh(i){var bq;if(i._a&&i._pf.overflow===-2){bq=i._a[k]<0||i._a[k]>11?k:i._a[a3]<1||i._a[a3]>bf(i._a[B],i._a[k])?a3:i._a[A]<0||i._a[A]>24||(i._a[A]===24&&(i._a[aI]!==0||i._a[y]!==0||i._a[aa]!==0))?A:i._a[aI]<0||i._a[aI]>59?aI:i._a[y]<0||i._a[y]>59?y:i._a[aa]<0||i._a[aa]>999?aa:-1;if(i._pf._overflowDayOfYear&&(bq<B||bq>a3)){bq=a3}i._pf.overflow=bq}}function aK(i){if(i._isValid==null){i._isValid=!isNaN(i._d.getTime())&&i._pf.overflow<0&&!i._pf.empty&&!i._pf.invalidMonth&&!i._pf.nullInput&&!i._pf.invalidFormat&&!i._pf.userInvalidated;if(i._strict){i._isValid=i._isValid&&i._pf.charsLeftOver===0&&i._pf.unusedTokens.length===0&&i._pf.bigHour===I}}return i._isValid}function aV(i){return i?i.toLowerCase().replace("_","-"):i}function aC(bv){var bt=0,br,bu,bq,bs;while(bt<bv.length){bs=aV(bv[bt]).split("-");br=bs.length;bu=aV(bv[bt+1]);bu=bu?bu.split("-"):null;while(br>0){bq=c(bs.slice(0,br).join("-"));if(bq){return bq}if(bu&&bu.length>=br&&a1(bs,bu,true)>=br-1){break}br--}bt++}return null}function c(i){var br=null;if(!au[i]&&av){try{br=W.locale();require("./locale/"+i);W.locale(br)}catch(bq){}}return au[i]}function D(i,bq){var br,bs;if(bq._isUTC){br=bq.clone();bs=(W.isMoment(i)||j(i)?+i:+W(i))-(+br);br._d.setTime(+br._d+bs);W.updateOffset(br,false);return br}else{return W(i).local()}}aJ(ag.prototype,{set:function(bq){var bs,br;for(br in bq){bs=bq[br];if(typeof bs==="function"){this[br]=bs}else{this["_"+br]=bs}}this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(i){return this._months[i.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(i){return this._monthsShort[i.month()]},monthsParse:function(br,bv,bq){var bs,bu,bt;if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[]}for(bs=0;bs<12;bs++){bu=W.utc([2000,bs]);if(bq&&!this._longMonthsParse[bs]){this._longMonthsParse[bs]=new RegExp("^"+this.months(bu,"").replace(".","")+"$","i");this._shortMonthsParse[bs]=new RegExp("^"+this.monthsShort(bu,"").replace(".","")+"$","i")}if(!bq&&!this._monthsParse[bs]){bt="^"+this.months(bu,"")+"|^"+this.monthsShort(bu,"");this._monthsParse[bs]=new RegExp(bt.replace(".",""),"i")}if(bq&&bv==="MMMM"&&this._longMonthsParse[bs].test(br)){return bs}else{if(bq&&bv==="MMM"&&this._shortMonthsParse[bs].test(br)){return bs}else{if(!bq&&this._monthsParse[bs].test(br)){return bs}}}}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(i){return this._weekdays[i.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(i){return this._weekdaysShort[i.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(i){return this._weekdaysMin[i.day()]},weekdaysParse:function(bt){var bq,bs,br;if(!this._weekdaysParse){this._weekdaysParse=[]}for(bq=0;bq<7;bq++){if(!this._weekdaysParse[bq]){bs=W([2000,1]).day(bq);br="^"+this.weekdays(bs,"")+"|^"+this.weekdaysShort(bs,"")+"|^"+this.weekdaysMin(bs,"");this._weekdaysParse[bq]=new RegExp(br.replace(".",""),"i")}if(this._weekdaysParse[bq].test(bt)){return bq}}},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(bq){var i=this._longDateFormat[bq];if(!i&&this._longDateFormat[bq.toUpperCase()]){i=this._longDateFormat[bq.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(br){return br.slice(1)});this._longDateFormat[bq]=i}return i},isPM:function(i){return((i+"").toLowerCase().charAt(0)==="p")},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(i,bq,br){if(i>11){return br?"pm":"PM"}else{return br?"am":"AM"}},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(br,bs,bq){var i=this._calendar[br];return typeof i==="function"?i.apply(bs,[bq]):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(bs,br,bq,bt){var i=this._relativeTime[bq];return(typeof i==="function")?i(bs,br,bq,bt):i.replace(/%d/i,bs)},pastFuture:function(br,i){var bq=this._relativeTime[br>0?"future":"past"];return typeof bq==="function"?bq(i):bq.replace(/%s/i,i)},ordinal:function(i){return this._ordinal.replace("%d",i)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(i){return i},postformat:function(i){return i},week:function(i){return G(i,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}});function ar(i){if(i.match(/\[[\s\S]/)){return i.replace(/^\[|\]$/g,"")}return i.replace(/\\/g,"")}function x(bs){var bt=bs.match(az),bq,br;for(bq=0,br=bt.length;bq<br;bq++){if(a4[bt[bq]]){bt[bq]=a4[bt[bq]]}else{bt[bq]=ar(bt[bq])}}return function(bu){var i="";for(bq=0;bq<br;bq++){i+=bt[bq] instanceof Function?bt[bq].call(bu,bs):bt[bq]}return i}}function ay(i,bq){if(!i.isValid()){return i.localeData().invalidDate()}bq=bl(bq,i.localeData());if(!at[bq]){at[bq]=x(bq)}return at[bq](i)}function bl(bt,bq){var br=5;function bs(i){return bq.longDateFormat(i)||i}ak.lastIndex=0;while(br>=0&&ak.test(bt)){bt=bt.replace(ak,bs);ak.lastIndex=0;br-=1}return bt}function aD(bs,br){var bq,i=br._strict;switch(bs){case"Q":return aj;case"DDDD":return bd;case"YYYY":case"GGGG":case"gggg":return i?aX:J;case"Y":case"G":case"g":return ah;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return i?aq:bk;case"S":if(i){return aj}case"SS":if(i){return v}case"SSS":if(i){return bd}case"DDD":return am;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return O;case"a":case"A":return br._locale._meridiemParse;case"x":return w;case"X":return aY;case"Z":case"ZZ":return s;case"T":return o;case"SSSS":return a9;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return i?v:l;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return l;case"Do":return i?br._locale._ordinalParse:br._locale._ordinalParseLenient;default:bq=new RegExp(bi(aH(bs.replace("\\","")),"i"));return bq}}function E(bq){bq=bq||"";var i=(bq.match(s)||[]),bt=i[i.length-1]||[],bs=(bt+"").match(ai)||["-",0,0],br=+(bs[1]*60)+R(bs[2]);return bs[0]==="+"?-br:br}function aG(bt,br,bs){var bq,i=bs._a;switch(bt){case"Q":if(br!=null){i[k]=(R(br)-1)*3}break;case"M":case"MM":if(br!=null){i[k]=R(br)-1}break;case"MMM":case"MMMM":bq=bs._locale.monthsParse(br,bt,bs._strict);if(bq!=null){i[k]=bq}else{bs._pf.invalidMonth=br}break;case"D":case"DD":if(br!=null){i[a3]=R(br)}break;case"Do":if(br!=null){i[a3]=R(parseInt(br.match(/\d{1,2}/)[0],10))}break;case"DDD":case"DDDD":if(br!=null){bs._dayOfYear=R(br)}break;case"YY":i[B]=W.parseTwoDigitYear(br);break;case"YYYY":case"YYYYY":case"YYYYYY":i[B]=R(br);break;case"a":case"A":bs._isPm=bs._locale.isPM(br);break;case"h":case"hh":bs._pf.bigHour=true;case"H":case"HH":i[A]=R(br);break;case"m":case"mm":i[aI]=R(br);break;case"s":case"ss":i[y]=R(br);break;case"S":case"SS":case"SSS":case"SSSS":i[aa]=R(("0."+br)*1000);break;case"x":bs._d=new Date(R(br));break;case"X":bs._d=new Date(parseFloat(br)*1000);break;case"Z":case"ZZ":bs._useUTC=true;bs._tzm=E(br);break;case"dd":case"ddd":case"dddd":bq=bs._locale.weekdaysParse(br);if(bq!=null){bs._w=bs._w||{};bs._w.d=bq}else{bs._pf.invalidWeekday=br}break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":bt=bt.substr(0,1);case"gggg":case"GGGG":case"GGGGG":bt=bt.substr(0,2);if(br){bs._w=bs._w||{};bs._w[bt]=R(br)}break;case"gg":case"GG":bs._w=bs._w||{};bs._w[bt]=W.parseTwoDigitYear(br)}}function Y(br){var i,bt,bs,bu,bw,bv,bq;i=br._w;if(i.GG!=null||i.W!=null||i.E!=null){bw=1;bv=4;bt=aZ(i.GG,br._a[B],G(W(),1,4).year);bs=aZ(i.W,1);bu=aZ(i.E,1)}else{bw=br._locale._week.dow;bv=br._locale._week.doy;bt=aZ(i.gg,br._a[B],G(W(),bw,bv).year);bs=aZ(i.w,1);if(i.d!=null){bu=i.d;if(bu<bw){++bs}}else{if(i.e!=null){bu=i.e+bw}else{bu=bw}}}bq=z(bt,bs,bu,bv,bw);br._a[B]=bq.year;br._dayOfYear=bq.dayOfYear}function ap(bu){var bv,bt,bs=[],br,bq;if(bu._d){return}br=r(bu);if(bu._w&&bu._a[a3]==null&&bu._a[k]==null){Y(bu)}if(bu._dayOfYear){bq=aZ(bu._a[B],br[B]);if(bu._dayOfYear>ba(bq)){bu._pf._overflowDayOfYear=true}bt=N(bq,0,bu._dayOfYear);bu._a[k]=bt.getUTCMonth();bu._a[a3]=bt.getUTCDate()}for(bv=0;bv<3&&bu._a[bv]==null;++bv){bu._a[bv]=bs[bv]=br[bv]}for(;bv<7;bv++){bu._a[bv]=bs[bv]=(bu._a[bv]==null)?(bv===2?1:0):bu._a[bv]}if(bu._a[A]===24&&bu._a[aI]===0&&bu._a[y]===0&&bu._a[aa]===0){bu._nextDay=true;bu._a[A]=0}bu._d=(bu._useUTC?N:aA).apply(null,bs);if(bu._tzm!=null){bu._d.setUTCMinutes(bu._d.getUTCMinutes()+bu._tzm)}if(bu._nextDay){bu._a[A]=24}}function aM(bq){var i;if(bq._d){return}i=p(bq._i);bq._a=[i.year,i.month,i.day||i.date,i.hour,i.minute,i.second,i.millisecond];ap(bq)}function r(bq){var i=new Date();if(bq._useUTC){return[i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()]}else{return[i.getFullYear(),i.getMonth(),i.getDate()]}}function V(bs){if(bs._f===W.ISO_8601){aB(bs);return}bs._a=[];bs._pf.empty=true;var bv=""+bs._i,bu,br,by,bt,bx,bq=bv.length,bw=0;by=bl(bs._f,bs._locale).match(az)||[];for(bu=0;bu<by.length;bu++){bt=by[bu];br=(bv.match(aD(bt,bs))||[])[0];if(br){bx=bv.substr(0,bv.indexOf(br));if(bx.length>0){bs._pf.unusedInput.push(bx)}bv=bv.slice(bv.indexOf(br)+br.length);bw+=br.length}if(a4[bt]){if(br){bs._pf.empty=false}else{bs._pf.unusedTokens.push(bt)}aG(bt,br,bs)}else{if(bs._strict&&!br){bs._pf.unusedTokens.push(bt)}}}bs._pf.charsLeftOver=bq-bw;if(bv.length>0){bs._pf.unusedInput.push(bv)}if(bs._pf.bigHour===true&&bs._a[A]<=12){bs._pf.bigHour=I}if(bs._isPm&&bs._a[A]<12){bs._a[A]+=12}if(bs._isPm===false&&bs._a[A]===12){bs._a[A]=0}ap(bs);bh(bs)}function aH(i){return i.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(bq,bu,bt,bs,br){return bu||bt||bs||br})}function bi(i){return i.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function a6(bq){var bu,bs,bt,br,bv;if(bq._f.length===0){bq._pf.invalidFormat=true;bq._d=new Date(NaN);return}for(br=0;br<bq._f.length;br++){bv=0;bu=aS({},bq);if(bq._useUTC!=null){bu._useUTC=bq._useUTC}bu._pf=ao();bu._f=bq._f[br];V(bu);if(!aK(bu)){continue}bv+=bu._pf.charsLeftOver;bv+=bu._pf.unusedTokens.length*10;bu._pf.score=bv;if(bt==null||bv<bt){bt=bv;bs=bu}}aJ(bq,bs||bu)}function aB(bt){var bu,bq,bs=bt._i,br=aU.exec(bs);if(br){bt._pf.iso=true;for(bu=0,bq=bc.length;bu<bq;bu++){if(bc[bu][1].exec(bs)){bt._f=bc[bu][0]+(br[6]||" ");break}}for(bu=0,bq=M.length;bu<bq;bu++){if(M[bu][1].exec(bs)){bt._f+=M[bu][0];break}}if(bs.match(s)){bt._f+="Z"}V(bt)}else{bt._isValid=false}}function n(i){aB(i);if(i._isValid===false){delete i._isValid;W.createFromInputFallback(i)}}function K(bq,bt){var bs=[],br;for(br=0;br<bq.length;++br){bs.push(bt(bq[br],br))}return bs}function U(br){var bq=br._i,i;if(bq===I){br._d=new Date()}else{if(j(bq)){br._d=new Date(+bq)}else{if((i=f.exec(bq))!==null){br._d=new Date(+i[1])}else{if(typeof bq==="string"){n(br)}else{if(b(bq)){br._a=K(bq.slice(0),function(bs){return parseInt(bs,10)});ap(br)}else{if(typeof(bq)==="object"){aM(br)}else{if(typeof(bq)==="number"){br._d=new Date(bq)}else{W.createFromInputFallback(br)}}}}}}}}function aA(bw,i,bu,bt,bv,bs,br){var bq=new Date(bw,i,bu,bt,bv,bs,br);if(bw<1970){bq.setFullYear(bw)}return bq}function N(bq){var i=new Date(Date.UTC.apply(null,arguments));if(bq<1970){i.setUTCFullYear(bq)}return i}function bg(bq,i){if(typeof bq==="string"){if(!isNaN(bq)){bq=parseInt(bq,10)}else{bq=i.weekdaysParse(bq);if(typeof bq!=="number"){return null}}}return bq}function aR(bq,bs,br,bt,i){return i.relativeTime(bs||1,!!br,bq,bt)}function F(bt,bq,bx){var br=W.duration(bt).abs(),by=ae(br.as("s")),bs=ae(br.as("m")),bw=ae(br.as("h")),bz=ae(br.as("d")),i=ae(br.as("M")),bu=ae(br.as("y")),bv=by<C.s&&["s",by]||bs===1&&["m"]||bs<C.m&&["mm",bs]||bw===1&&["h"]||bw<C.h&&["hh",bw]||bz===1&&["d"]||bz<C.d&&["dd",bz]||i===1&&["M"]||i<C.M&&["MM",i]||bu===1&&["y"]||["yy",bu];bv[2]=bq;bv[3]=+bt>0;bv[4]=bx;return aR.apply({},bv)}function G(bt,br,bu){var bq=bu-br,i=bu-bt.day(),bs;if(i>bq){i-=7}if(i<bq-7){i+=7}bs=W(bt).add(i,"d");return{week:Math.ceil(bs.dayOfYear()/7),year:bs.year()}}function z(bt,bs,bu,bw,i){var bv=N(bt,0,1).getUTCDay(),br,bq;bv=bv===0?7:bv;bu=bu!=null?bu:i;br=i-bv+(bv>bw?7:0)-(bv<i?7:0);bq=7*(bs-1)+(bu-i)+br+1;return{year:bq>0?bt:bt-1,dayOfYear:bq>0?bq:ba(bt-1)+bq}}function S(bq){var i=bq._i,bs=bq._f,br;bq._locale=bq._locale||W.localeData(bq._l);if(i===null||(bs===I&&i==="")){return W.invalid({nullInput:true})}if(typeof i==="string"){bq._i=i=bq._locale.preparse(i)}if(W.isMoment(i)){return new Q(i,true)}else{if(bs){if(b(bs)){a6(bq)}else{V(bq)}}else{U(bq)}}br=new Q(bq);if(br._nextDay){br.add(1,"d");br._nextDay=I}return br}W=function(br,bs,i,bq){var bt;if(typeof(i)==="boolean"){bq=i;i=I}bt={};bt._isAMomentObject=true;bt._i=br;bt._f=bs;bt._l=i;bt._strict=bq;bt._isUTC=false;bt._pf=ao();return S(bt)};W.suppressDeprecationWarnings=false;W.createFromInputFallback=bn("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(i){i._d=new Date(i._i+(i._useUTC?" UTC":""))});function aE(bs,bt){var br,bq;if(bt.length===1&&b(bt[0])){bt=bt[0]}if(!bt.length){return W()}br=bt[0];for(bq=1;bq<bt.length;++bq){if(bt[bq][bs](br)){br=bt[bq]}}return br}W.min=function(){var i=[].slice.call(arguments,0);return aE("isBefore",i)};W.max=function(){var i=[].slice.call(arguments,0);return aE("isAfter",i)};W.utc=function(br,bs,i,bq){var bt;if(typeof(i)==="boolean"){bq=i;i=I}bt={};bt._isAMomentObject=true;bt._useUTC=true;bt._isUTC=true;bt._l=i;bt._i=br;bt._f=bs;bt._strict=bq;bt._pf=ao();return S(bt).utc()};W.unix=function(i){return W(i*1000)};W.duration=function(br,bv){var bw=br,bu=null,bq,bt,bs,i;if(W.isDuration(br)){bw={ms:br._milliseconds,d:br._days,M:br._months}}else{if(typeof br==="number"){bw={};if(bv){bw[bv]=br}else{bw.milliseconds=br}}else{if(!!(bu=be.exec(br))){bq=(bu[1]==="-")?-1:1;bw={y:0,d:R(bu[a3])*bq,h:R(bu[A])*bq,m:R(bu[aI])*bq,s:R(bu[y])*bq,ms:R(bu[aa])*bq}}else{if(!!(bu=aN.exec(br))){bq=(bu[1]==="-")?-1:1;bs=function(by){var bx=by&&parseFloat(by.replace(",","."));return(isNaN(bx)?0:bx)*bq};bw={y:bs(bu[2]),M:bs(bu[3]),d:bs(bu[4]),h:bs(bu[5]),m:bs(bu[6]),s:bs(bu[7]),w:bs(bu[8])}}else{if(typeof bw==="object"&&("from" in bw||"to" in bw)){i=ad(W(bw.from),W(bw.to));bw={};bw.ms=i.milliseconds;bw.M=i.months}}}}}bt=new an(bw);if(W.isDuration(br)&&a5(br,"_locale")){bt._locale=br._locale}return bt};W.version=aL;W.defaultFormat=ab;W.ISO_8601=function(){};W.momentProperties=aW;W.updateOffset=function(){};W.relativeTimeThreshold=function(i,bq){if(C[i]===I){return false}if(bq===I){return C[i]}C[i]=bq;return true};W.lang=bn("moment.lang is deprecated. Use moment.locale instead.",function(i,bq){return W.locale(i,bq)});W.locale=function(bq,i){var br;if(bq){if(typeof(i)!=="undefined"){br=W.defineLocale(bq,i)}else{br=W.localeData(bq)}if(br){W.duration._locale=W._locale=br}}return W._locale._abbr};W.defineLocale=function(bq,i){if(i!==null){i.abbr=bq;if(!au[bq]){au[bq]=new ag()}au[bq].set(i);W.locale(bq);return au[bq]}else{delete au[bq];return null}};W.langData=bn("moment.langData is deprecated. Use moment.localeData instead.",function(i){return W.localeData(i)});W.localeData=function(bq){var i;if(bq&&bq._locale&&bq._locale._abbr){bq=bq._locale._abbr}if(!bq){return W._locale}if(!b(bq)){i=c(bq);if(i){return i}bq=[bq]}return aC(bq)};W.isMoment=function(i){return i instanceof Q||(i!=null&&a5(i,"_isAMomentObject"))};W.isDuration=function(i){return i instanceof an};for(al=ac.length-1;al>=0;--al){aF(ac[al])}W.normalizeUnits=function(i){return a7(i)};W.invalid=function(bq){var i=W.utc(NaN);if(bq!=null){aJ(i._pf,bq)}else{i._pf.userInvalidated=true}return i};W.parseZone=function(){return W.apply(null,arguments).parseZone()};W.parseTwoDigitYear=function(i){return R(i)+(R(i)>68?1900:2000)};aJ(W.fn=Q.prototype,{clone:function(){return W(this)},valueOf:function(){return +this._d+((this._offset||0)*60000)},unix:function(){return Math.floor(+this/1000)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var i=W(this).utc();if(0<i.year()&&i.year()<=9999){if("function"===typeof Date.prototype.toISOString){return this.toDate().toISOString()}else{return ay(i,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}}else{return ay(i,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}},toArray:function(){var i=this;return[i.year(),i.month(),i.date(),i.hours(),i.minutes(),i.seconds(),i.milliseconds()]},isValid:function(){return aK(this)},isDSTShifted:function(){if(this._a){return this.isValid()&&a1(this._a,(this._isUTC?W.utc(this._a):W(this._a)).toArray())>0}return false},parsingFlags:function(){return aJ({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(i){return this.zone(0,i)},local:function(i){if(this._isUTC){this.zone(0,i);this._isUTC=false;if(i){this.add(this._dateTzOffset(),"m")}}return this},format:function(bq){var i=ay(this,bq||W.defaultFormat);return this.localeData().postformat(i)},add:X(1,"add"),subtract:X(-1,"subtract"),diff:function(bt,bs,i){var bv=D(bt,this),bq=(this.zone()-bv.zone())*60000,bw,br,bu;bs=a7(bs);if(bs==="year"||bs==="month"){bw=(this.daysInMonth()+bv.daysInMonth())*43200000;br=((this.year()-bv.year())*12)+(this.month()-bv.month());bu=(this-W(this).startOf("month"))-(bv-W(bv).startOf("month"));bu-=((this.zone()-W(this).startOf("month").zone())-(bv.zone()-W(bv).startOf("month").zone()))*60000;br+=bu/bw;if(bs==="year"){br=br/12}}else{bw=(this-bv);br=bs==="second"?bw/1000:bs==="minute"?bw/60000:bs==="hour"?bw/3600000:bs==="day"?(bw-bq)/86400000:bs==="week"?(bw-bq)/604800000:bw}return i?br:q(br)},from:function(bq,i){return W.duration({to:this,from:bq}).locale(this.locale()).humanize(!i)},fromNow:function(i){return this.from(W(),i)},calendar:function(bt){var bq=bt||W(),i=D(bq,this).startOf("day"),bs=this.diff(i,"days",true),br=bs<-6?"sameElse":bs<-1?"lastWeek":bs<0?"lastDay":bs<1?"sameDay":bs<2?"nextDay":bs<7?"nextWeek":"sameElse";return this.format(this.localeData().calendar(br,this,W(bq)))},isLeapYear:function(){return aT(this.year())},isDST:function(){return(this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone())},day:function(bq){var i=this._isUTC?this._d.getUTCDay():this._d.getDay();if(bq!=null){bq=bg(bq,this.localeData());return this.add(bq-i,"d")}else{return i}},month:u("Month",true),startOf:function(i){i=a7(i);switch(i){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(i==="week"){this.weekday(0)}else{if(i==="isoWeek"){this.isoWeekday(1)}}if(i==="quarter"){this.month(Math.floor(this.month()/3)*3)}return this},endOf:function(i){i=a7(i);if(i===I||i==="millisecond"){return this}return this.startOf(i).add(1,(i==="isoWeek"?"week":i)).subtract(1,"ms")},isAfter:function(bq,i){var br;i=a7(typeof i!=="undefined"?i:"millisecond");if(i==="millisecond"){bq=W.isMoment(bq)?bq:W(bq);return +this>+bq}else{br=W.isMoment(bq)?+bq:+W(bq);return br<+this.clone().startOf(i)}},isBefore:function(bq,i){var br;i=a7(typeof i!=="undefined"?i:"millisecond");if(i==="millisecond"){bq=W.isMoment(bq)?bq:W(bq);return +this<+bq}else{br=W.isMoment(bq)?+bq:+W(bq);return +this.clone().endOf(i)<br}},isSame:function(bq,i){var br;i=a7(i||"millisecond");if(i==="millisecond"){bq=W.isMoment(bq)?bq:W(bq);return +this===+bq}else{br=+W(bq);return +(this.clone().startOf(i))<=br&&br<=+(this.clone().endOf(i))}},min:bn("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(i){i=W.apply(null,arguments);return i<this?this:i}),max:bn("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(i){i=W.apply(null,arguments);return i>this?this:i}),zone:function(i,bs){var br=this._offset||0,bq;if(i!=null){if(typeof i==="string"){i=E(i)}if(Math.abs(i)<16){i=i*60}if(!this._isUTC&&bs){bq=this._dateTzOffset()}this._offset=i;this._isUTC=true;if(bq!=null){this.subtract(bq,"m")}if(br!==i){if(!bs||this._changeInProgress){L(this,W.duration(br-i,"m"),1,false)}else{if(!this._changeInProgress){this._changeInProgress=true;W.updateOffset(this,true);this._changeInProgress=null}}}}else{return this._isUTC?br:this._dateTzOffset()}return this},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){if(this._tzm){this.zone(this._tzm)}else{if(typeof this._i==="string"){this.zone(this._i)}}return this},hasAlignedHourOffset:function(i){if(!i){i=0}else{i=W(i).zone()}return(this.zone()-i)%60===0},daysInMonth:function(){return bf(this.year(),this.month())},dayOfYear:function(i){var bq=ae((W(this).startOf("day")-W(this).startOf("year"))/86400000)+1;return i==null?bq:this.add((i-bq),"d")},quarter:function(i){return i==null?Math.ceil((this.month()+1)/3):this.month((i-1)*3+this.month()%3)},weekYear:function(i){var bq=G(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return i==null?bq:this.add((i-bq),"y")},isoWeekYear:function(i){var bq=G(this,1,4).year;return i==null?bq:this.add((i-bq),"y")},week:function(i){var bq=this.localeData().week(this);return i==null?bq:this.add((i-bq)*7,"d")},isoWeek:function(i){var bq=G(this,1,4).week;return i==null?bq:this.add((i-bq)*7,"d")},weekday:function(i){var bq=(this.day()+7-this.localeData()._week.dow)%7;return i==null?bq:this.add(i-bq,"d")},isoWeekday:function(i){return i==null?this.day()||7:this.day(this.day()%7?i:i-7)},isoWeeksInYear:function(){return aO(this.year(),1,4)},weeksInYear:function(){var i=this.localeData()._week;return aO(this.year(),i.dow,i.doy)},get:function(i){i=a7(i);return this[i]()},set:function(i,bq){i=a7(i);if(typeof this[i]==="function"){this[i](bq)}return this},locale:function(bq){var i;if(bq===I){return this._locale._abbr}else{i=W.localeData(bq);if(i!=null){this._locale=i}return this}},lang:bn("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(i){if(i===I){return this.localeData()}else{return this.locale(i)}}),localeData:function(){return this._locale},_dateTzOffset:function(){return Math.round(this._d.getTimezoneOffset()/15)*15}});function bj(i,bq){var br;if(typeof bq==="string"){bq=i.localeData().monthsParse(bq);if(typeof bq!=="number"){return i}}br=Math.min(i.date(),bf(i.year(),bq));i._d["set"+(i._isUTC?"UTC":"")+"Month"](bq,br);return i}function bo(bq,i){return bq._d["get"+(bq._isUTC?"UTC":"")+i]()}function a0(bq,i,br){if(i==="Month"){return bj(bq,br)}else{return bq._d["set"+(bq._isUTC?"UTC":"")+i](br)}}function u(i,bq){return function(br){if(br!=null){a0(this,i,br);W.updateOffset(this,bq);return this}else{return bo(this,i)}}}W.fn.millisecond=W.fn.milliseconds=u("Milliseconds",false);W.fn.second=W.fn.seconds=u("Seconds",false);W.fn.minute=W.fn.minutes=u("Minutes",false);W.fn.hour=W.fn.hours=u("Hours",true);W.fn.date=u("Date",true);W.fn.dates=bn("dates accessor is deprecated. Use date instead.",u("Date",true));W.fn.year=u("FullYear",true);W.fn.years=bn("years accessor is deprecated. Use year instead.",u("FullYear",true));W.fn.days=W.fn.day;W.fn.months=W.fn.month;W.fn.weeks=W.fn.week;W.fn.isoWeeks=W.fn.isoWeek;W.fn.quarters=W.fn.quarter;W.fn.toJSON=W.fn.toISOString;function t(i){return i*400/146097}function bm(i){return i*146097/400}aJ(W.duration.fn=an.prototype,{_bubble:function(){var br=this._milliseconds,bw=this._days,i=this._months,bu=this._data,bv,bt,bq,bs=0;bu.milliseconds=br%1000;bv=q(br/1000);bu.seconds=bv%60;bt=q(bv/60);bu.minutes=bt%60;bq=q(bt/60);bu.hours=bq%24;bw+=q(bq/24);bs=q(t(bw));bw-=q(bm(bs));i+=q(bw/30);bw%=30;bs+=q(i/12);i%=12;bu.days=bw;bu.months=i;bu.years=bs},abs:function(){this._milliseconds=Math.abs(this._milliseconds);this._days=Math.abs(this._days);this._months=Math.abs(this._months);this._data.milliseconds=Math.abs(this._data.milliseconds);this._data.seconds=Math.abs(this._data.seconds);this._data.minutes=Math.abs(this._data.minutes);this._data.hours=Math.abs(this._data.hours);this._data.months=Math.abs(this._data.months);this._data.years=Math.abs(this._data.years);return this},weeks:function(){return q(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*86400000+(this._months%12)*2592000000+R(this._months/12)*31536000000},humanize:function(bq){var i=F(this,!bq,this.localeData());if(bq){i=this.localeData().pastFuture(+this,i)}return this.localeData().postformat(i)},add:function(i,br){var bq=W.duration(i,br);this._milliseconds+=bq._milliseconds;this._days+=bq._days;this._months+=bq._months;this._bubble();return this},subtract:function(i,br){var bq=W.duration(i,br);this._milliseconds-=bq._milliseconds;this._days-=bq._days;this._months-=bq._months;this._bubble();return this},get:function(i){i=a7(i);return this[i.toLowerCase()+"s"]()},as:function(bq){var br,i;bq=a7(bq);if(bq==="month"||bq==="year"){br=this._days+this._milliseconds/86400000;i=this._months+t(br)*12;return bq==="month"?i:i/12}else{br=this._days+Math.round(bm(this._months/12));switch(bq){case"week":return br/7+this._milliseconds/604800000;case"day":return br+this._milliseconds/86400000;case"hour":return br*24+this._milliseconds/3600000;case"minute":return br*24*60+this._milliseconds/60000;case"second":return br*24*60*60+this._milliseconds/1000;case"millisecond":return Math.floor(br*24*60*60*1000)+this._milliseconds;default:throw new Error("Unknown unit "+bq)}}},lang:W.fn.lang,locale:W.fn.locale,toIsoString:bn("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var bs=Math.abs(this.years()),i=Math.abs(this.months()),bu=Math.abs(this.days()),bq=Math.abs(this.hours()),br=Math.abs(this.minutes()),bt=Math.abs(this.seconds()+this.milliseconds()/1000);if(!this.asSeconds()){return"P0D"}return(this.asSeconds()<0?"-":"")+"P"+(bs?bs+"Y":"")+(i?i+"M":"")+(bu?bu+"D":"")+((bq||br||bt)?"T":"")+(bq?bq+"H":"")+(br?br+"M":"")+(bt?bt+"S":"")},localeData:function(){return this._locale}});W.duration.fn.toString=W.duration.fn.toISOString;function af(i){W.duration.fn[i]=function(){return this._data[i]}}for(al in H){if(a5(H,al)){af(al.toLowerCase())}}W.duration.fn.asMilliseconds=function(){return this.as("ms")};W.duration.fn.asSeconds=function(){return this.as("s")};W.duration.fn.asMinutes=function(){return this.as("m")};W.duration.fn.asHours=function(){return this.as("h")};W.duration.fn.asDays=function(){return this.as("d")};W.duration.fn.asWeeks=function(){return this.as("weeks")};W.duration.fn.asMonths=function(){return this.as("M")};W.duration.fn.asYears=function(){return this.as("y")};W.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(br){var i=br%10,bq=(R(br%100/10)===1)?"th":(i===1)?"st":(i===2)?"nd":(i===3)?"rd":"th";return br+bq}});function Z(i){if(typeof ender!=="undefined"){return}aw=bb.moment;if(i){bb.moment=bn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",W)}else{bb.moment=W}}if(av){module.exports=W}else{if(typeof define==="function"&&define.amd){define("moment",function(bq,i,br){if(br.config&&br.config()&&br.config().noGlobal===true){bb.moment=aw}return W});Z(true)}else{Z()}}}).call(this);(function(a,b){if(typeof exports==="object"){b(exports)}else{if(typeof define==="function"&&define.amd){define(["exports"],b)}else{b(a)}}}(this,function(z){var o="1.1.1";function h(A){this._targetElement=A;this._options={nextLabel:"Next &rarr;",prevLabel:"&larr; Back",skipLabel:"Skip",doneLabel:"Done",tooltipPosition:"bottom",tooltipClass:"",highlightClass:"",exitOnEsc:true,exitOnOverlayClick:true,showStepNumbers:true,keyboardNavigation:true,showButtons:true,showBullets:true,showProgress:false,scrollToElement:true,overlayOpacity:0.8,positionPrecedence:["bottom","top","right","left"],disableInteraction:false}}function p(K){var B=[],O=this;if(this._options.steps){for(var F=0,M=this._options.steps.length;F<M;F++){var L=q(this._options.steps[F]);L.step=B.length+1;if(typeof(L.element)==="string"){L.element=document.querySelector(L.element)}if(typeof(L.element)==="undefined"||L.element==null){var P=document.querySelector(".introjsFloatingElement");if(P==null){P=document.createElement("div");P.className="introjsFloatingElement";document.body.appendChild(P)}L.element=P;L.position="floating"}if(L.element!=null){B.push(L)}}}else{var G=K.querySelectorAll("*[data-intro]");if(G.length<1){return false}for(var F=0,C=G.length;F<C;F++){var H=G[F];var A=parseInt(H.getAttribute("data-step"),10);if(A>0){B[A-1]={element:H,intro:H.getAttribute("data-intro"),step:parseInt(H.getAttribute("data-step"),10),tooltipClass:H.getAttribute("data-tooltipClass"),highlightClass:H.getAttribute("data-highlightClass"),position:H.getAttribute("data-position")||this._options.tooltipPosition}}}var D=0;for(var F=0,C=G.length;F<C;F++){var H=G[F];if(H.getAttribute("data-step")==null){while(true){if(typeof B[D]=="undefined"){break}else{D++}}B[D]={element:H,intro:H.getAttribute("data-intro"),step:D+1,tooltipClass:H.getAttribute("data-tooltipClass"),highlightClass:H.getAttribute("data-highlightClass"),position:H.getAttribute("data-position")||this._options.tooltipPosition}}}}var J=[];for(var I=0;I<B.length;I++){B[I]&&J.push(B[I])}B=J;B.sort(function(R,Q){return R.step-Q.step});O._introItems=B;if(n.call(O,K)){y.call(O);var N=K.querySelector(".introjs-skipbutton"),E=K.querySelector(".introjs-nextbutton");O._onKeyDown=function(R){if(R.keyCode===27&&O._options.exitOnEsc==true){if(O._introExitCallback!=undefined){O._introExitCallback.call(O)}r.call(O,K)}else{if(R.keyCode===37){j.call(O)}else{if(R.keyCode===39){y.call(O)}else{if(R.keyCode===13){var Q=R.target||R.srcElement;if(Q&&Q.className.indexOf("introjs-prevbutton")>0){j.call(O)}else{if(Q&&Q.className.indexOf("introjs-skipbutton")>0){if(O._introItems.length-1==O._currentStep&&typeof(O._introCompleteCallback)==="function"){O._introCompleteCallback.call(O)}if(O._introExitCallback!=undefined){O._introExitCallback.call(O)}r.call(O,K)}else{y.call(O)}}if(R.preventDefault){R.preventDefault()}else{R.returnValue=false}}}}}};O._onResize=function(Q){e.call(O,document.querySelector(".introjs-helperLayer"));e.call(O,document.querySelector(".introjs-tooltipReferenceLayer"))};if(window.addEventListener){if(this._options.keyboardNavigation){window.addEventListener("keydown",O._onKeyDown,true)}window.addEventListener("resize",O._onResize,true)}else{if(document.attachEvent){if(this._options.keyboardNavigation){document.attachEvent("onkeydown",O._onKeyDown)}document.attachEvent("onresize",O._onResize)}}}return false}function q(B){if(B==null||typeof(B)!="object"||typeof(B.nodeType)!="undefined"){return B}var A={};for(var C in B){if(typeof(jQuery)!="undefined"&&B[C] instanceof jQuery){A[C]=B[C]}else{A[C]=q(B[C])}}return A}function l(A){this._currentStep=A-2;if(typeof(this._introItems)!=="undefined"){y.call(this)}}function y(){this._direction="forward";if(typeof(this._currentStep)==="undefined"){this._currentStep=0}else{++this._currentStep}if((this._introItems.length)<=this._currentStep){if(typeof(this._introCompleteCallback)==="function"){this._introCompleteCallback.call(this)}r.call(this,this._targetElement);return}var A=this._introItems[this._currentStep];if(typeof(this._introBeforeChangeCallback)!=="undefined"){this._introBeforeChangeCallback.call(this,A.element)}t.call(this,A)}function j(){this._direction="backward";if(this._currentStep===0){return false}var A=this._introItems[--this._currentStep];if(typeof(this._introBeforeChangeCallback)!=="undefined"){this._introBeforeChangeCallback.call(this,A.element)}t.call(this,A)}function r(G){var I=G.querySelector(".introjs-overlay");if(I==null){return}I.style.opacity=0;setTimeout(function(){if(I.parentNode){I.parentNode.removeChild(I)}},500);var A=G.querySelector(".introjs-helperLayer");if(A){A.parentNode.removeChild(A)}var H=G.querySelector(".introjs-tooltipReferenceLayer");if(H){H.parentNode.removeChild(H)}var F=G.querySelector(".introjs-disableInteraction");if(F){F.parentNode.removeChild(F)}var B=document.querySelector(".introjsFloatingElement");if(B){B.parentNode.removeChild(B)}var C=document.querySelector(".introjs-showElement");if(C){C.className=C.className.replace(/introjs-[a-zA-Z]+/g,"").replace(/^\s+|\s+$/g,"")}var D=document.querySelectorAll(".introjs-fixParent");if(D&&D.length>0){for(var E=D.length-1;E>=0;E--){D[E].className=D[E].className.replace(/introjs-fixParent/g,"").replace(/^\s+|\s+$/g,"")}}if(window.removeEventListener){window.removeEventListener("keydown",this._onKeyDown,true)}else{if(document.detachEvent){document.detachEvent("onkeydown",this._onKeyDown)}}this._currentStep=undefined}function f(E,L,J,I){var B="",F,G,M,H,C;L.style.top=null;L.style.right=null;L.style.bottom=null;L.style.left=null;L.style.marginLeft=null;L.style.marginTop=null;J.style.display="inherit";if(typeof(I)!="undefined"&&I!=null){I.style.top=null;I.style.left=null}if(!this._introItems[this._currentStep]){return}F=this._introItems[this._currentStep];if(typeof(F.tooltipClass)==="string"){B=F.tooltipClass}else{B=this._options.tooltipClass}L.className=("introjs-tooltip "+B).replace(/^\s+|\s+$/g,"");C=this._introItems[this._currentStep].position;if((C=="auto"||this._options.tooltipPosition=="auto")){if(C!="floating"){C=a.call(this,E,L,C)}}M=i(E);G=i(L);H=v();switch(C){case"top":J.className="introjs-arrow bottom";var D=15;k(M,D,G,H,L);L.style.bottom=(M.height+20)+"px";break;case"right":L.style.left=(M.width+20)+"px";if(M.top+G.height>H.height){J.className="introjs-arrow left-bottom";L.style.top="-"+(G.height-M.height-20)+"px"}else{J.className="introjs-arrow left"}break;case"left":if(this._options.showStepNumbers==true){L.style.top="15px"}if(M.top+G.height>H.height){L.style.top="-"+(G.height-M.height-20)+"px";J.className="introjs-arrow right-bottom"}else{J.className="introjs-arrow right"}L.style.right=(M.width+20)+"px";break;case"floating":J.style.display="none";L.style.left="50%";L.style.top="50%";L.style.marginLeft="-"+(G.width/2)+"px";L.style.marginTop="-"+(G.height/2)+"px";if(typeof(I)!="undefined"&&I!=null){I.style.left="-"+((G.width/2)+18)+"px";I.style.top="-"+((G.height/2)+18)+"px"}break;case"bottom-right-aligned":J.className="introjs-arrow top-right";var K=0;w(M,K,G,L);L.style.top=(M.height+20)+"px";break;case"bottom-middle-aligned":J.className="introjs-arrow top-middle";var A=M.width/2-G.width/2;if(w(M,A,G,L)){L.style.right=null;k(M,A,G,H,L)}L.style.top=(M.height+20)+"px";break;case"bottom-left-aligned":case"bottom":default:J.className="introjs-arrow top";var D=0;k(M,D,G,H,L);L.style.top=(M.height+20)+"px";break}}function k(E,C,D,A,B){if(E.left+C+D.width>A.width){B.style.left=(A.width-D.width-E.left)+"px";return false}B.style.left=C+"px";return true}function w(D,B,C,A){if(D.left+D.width-B-C.width<0){A.style.left=(-D.left)+"px";return false}A.style.right=B+"px";return true}function a(D,G,E){var B=this._options.positionPrecedence.slice();var F=v();var H=i(G).height+10;var C=i(G).width+20;var I=i(D);var A="floating";if(I.left+C>F.width||((I.left+(I.width/2))-C)<0){x(B,"bottom");x(B,"top")}else{if((I.height+I.top+H)>F.height){x(B,"bottom")}if(I.top-H<0){x(B,"top")}}if(I.width+I.left+C>F.width){x(B,"right")}if(I.left-C<0){x(B,"left")}if(B.length>0){A=B[0]}if(E&&E!="auto"){if(B.indexOf(E)>-1){A=E}}return A}function x(A,B){if(A.indexOf(B)>-1){A.splice(A.indexOf(B),1)}}function e(A){if(A){if(!this._introItems[this._currentStep]){return}var B=this._introItems[this._currentStep],C=i(B.element),D=10;if(B.position=="floating"){D=0}A.setAttribute("style","width: "+(C.width+D)+"px; height:"+(C.height+D)+"px; top:"+(C.top-5)+"px;left: "+(C.left-5)+"px;")}}function c(){var A=document.querySelector(".introjs-disableInteraction");if(A===null){A=document.createElement("div");A.className="introjs-disableInteraction";this._targetElement.appendChild(A)}e.call(this,A)}function t(E){if(typeof(this._introChangeCallback)!=="undefined"){this._introChangeCallback.call(this,E.element)}var N=this,ab=document.querySelector(".introjs-helperLayer"),aa=document.querySelector(".introjs-tooltipReferenceLayer"),ag="introjs-helperLayer",ac=i(E.element);if(typeof(E.highlightClass)==="string"){ag+=(" "+E.highlightClass)}if(typeof(this._options.highlightClass)==="string"){ag+=(" "+this._options.highlightClass)}if(ab!=null){var an=aa.querySelector(".introjs-helperNumberLayer"),ai=aa.querySelector(".introjs-tooltiptext"),L=aa.querySelector(".introjs-arrow"),ak=aa.querySelector(".introjs-tooltip"),af=aa.querySelector(".introjs-skipbutton"),B=aa.querySelector(".introjs-prevbutton"),G=aa.querySelector(".introjs-nextbutton");ab.className=ag;ak.style.opacity=0;ak.style.display="none";if(an!=null){var I=this._introItems[(E.step-2>=0?E.step-2:0)];if(I!=null&&(this._direction=="forward"&&I.position=="floating")||(this._direction=="backward"&&E.position=="floating")){an.style.opacity=0}}e.call(N,ab);e.call(N,aa);var D=document.querySelectorAll(".introjs-fixParent");if(D&&D.length>0){for(var al=D.length-1;al>=0;al--){D[al].className=D[al].className.replace(/introjs-fixParent/g,"").replace(/^\s+|\s+$/g,"")}}var M=document.querySelector(".introjs-showElement");M.className=M.className.replace(/introjs-[a-zA-Z]+/g,"").replace(/^\s+|\s+$/g,"");if(N._lastShowElementTimer){clearTimeout(N._lastShowElementTimer)}N._lastShowElementTimer=setTimeout(function(){if(an!=null){an.innerHTML=E.step}ai.innerHTML=E.intro;ak.style.display="block";f.call(N,E.element,ak,L,an);aa.querySelector(".introjs-bullets li > a.active").className="";aa.querySelector('.introjs-bullets li > a[data-stepnumber="'+E.step+'"]').className="active";aa.querySelector(".introjs-progress .introjs-progressbar").setAttribute("style","width:"+b.call(N)+"%;");ak.style.opacity=1;if(an){an.style.opacity=1}if(G.tabIndex===-1){af.focus()}else{G.focus()}},350)}else{var F=document.createElement("div"),W=document.createElement("div"),K=document.createElement("div"),C=document.createElement("div"),R=document.createElement("div"),ae=document.createElement("div"),ah=document.createElement("div"),X=document.createElement("div");F.className=ag;W.className="introjs-tooltipReferenceLayer";e.call(N,F);e.call(N,W);this._targetElement.appendChild(F);this._targetElement.appendChild(W);K.className="introjs-arrow";R.className="introjs-tooltiptext";R.innerHTML=E.intro;ae.className="introjs-bullets";if(this._options.showBullets===false){ae.style.display="none"}var U=document.createElement("ul");for(var al=0,O=this._introItems.length;al<O;al++){var P=document.createElement("li");var H=document.createElement("a");H.onclick=function(){N.goToStep(this.getAttribute("data-stepnumber"))};if(al===(E.step-1)){H.className="active"}H.href="javascript:void(0);";H.innerHTML="&nbsp;";H.setAttribute("data-stepnumber",this._introItems[al].step);P.appendChild(H);U.appendChild(P)}ae.appendChild(U);ah.className="introjs-progress";if(this._options.showProgress===false){ah.style.display="none"}var Z=document.createElement("div");Z.className="introjs-progressbar";Z.setAttribute("style","width:"+b.call(this)+"%;");ah.appendChild(Z);X.className="introjs-tooltipbuttons";if(this._options.showButtons===false){X.style.display="none"}C.className="introjs-tooltip";C.appendChild(R);C.appendChild(ae);C.appendChild(ah);if(this._options.showStepNumbers==true){var S=document.createElement("span");S.className="introjs-helperNumberLayer";S.innerHTML=E.step;W.appendChild(S)}C.appendChild(K);W.appendChild(C);var G=document.createElement("a");G.onclick=function(){if(N._introItems.length-1!=N._currentStep){y.call(N)}};G.href="javascript:void(0);";G.innerHTML=this._options.nextLabel;var B=document.createElement("a");B.onclick=function(){if(N._currentStep!=0){j.call(N)}};B.href="javascript:void(0);";B.innerHTML=this._options.prevLabel;var af=document.createElement("a");af.className="introjs-button introjs-skipbutton";af.href="javascript:void(0);";af.innerHTML=this._options.skipLabel;af.onclick=function(){if(N._introItems.length-1==N._currentStep&&typeof(N._introCompleteCallback)==="function"){N._introCompleteCallback.call(N)}if(N._introItems.length-1!=N._currentStep&&typeof(N._introExitCallback)==="function"){N._introExitCallback.call(N)}r.call(N,N._targetElement)};X.appendChild(af);if(this._introItems.length>1){X.appendChild(B);X.appendChild(G)}C.appendChild(X);f.call(N,E.element,C,K,S)}if(this._options.disableInteraction===true){c.call(N)}B.removeAttribute("tabIndex");G.removeAttribute("tabIndex");if(this._currentStep==0&&this._introItems.length>1){B.className="introjs-button introjs-prevbutton introjs-disabled";B.tabIndex="-1";G.className="introjs-button introjs-nextbutton";af.innerHTML=this._options.skipLabel}else{if(this._introItems.length-1==this._currentStep||this._introItems.length==1){af.innerHTML=this._options.doneLabel;B.className="introjs-button introjs-prevbutton";G.className="introjs-button introjs-nextbutton introjs-disabled";G.tabIndex="-1"}else{B.className="introjs-button introjs-prevbutton";G.className="introjs-button introjs-nextbutton";af.innerHTML=this._options.skipLabel}}G.focus();E.element.className+=" introjs-showElement";var T=s(E.element,"position");if(T!=="absolute"&&T!=="relative"){E.element.className+=" introjs-relativePosition"}var aj=E.element.parentNode;while(aj!=null){if(aj.tagName.toLowerCase()==="body"){break}var Q=s(aj,"z-index");var am=parseFloat(s(aj,"opacity"));var V=s(aj,"transform")||s(aj,"-webkit-transform")||s(aj,"-moz-transform")||s(aj,"-ms-transform")||s(aj,"-o-transform");if(/[0-9]+/.test(Q)||am<1||(V!=="none"&&V!==undefined)){aj.className+=" introjs-fixParent"}aj=aj.parentNode}if(!m(E.element)&&this._options.scrollToElement===true){var Y=E.element.getBoundingClientRect(),ad=v().height,J=Y.bottom-(Y.bottom-Y.top),A=Y.bottom-ad;if(J<0||E.element.clientHeight>ad){window.scrollBy(0,J-30)}else{window.scrollBy(0,A+100)}}if(typeof(this._introAfterChangeCallback)!=="undefined"){this._introAfterChangeCallback.call(this,E.element)}}function s(A,B){var C="";if(A.currentStyle){C=A.currentStyle[B]}else{if(document.defaultView&&document.defaultView.getComputedStyle){C=document.defaultView.getComputedStyle(A,null).getPropertyValue(B)}}if(C&&C.toLowerCase){return C.toLowerCase()}else{return C}}function v(){if(window.innerWidth!=undefined){return{width:window.innerWidth,height:window.innerHeight}}else{var A=document.documentElement;return{width:A.clientWidth,height:A.clientHeight}}}function m(A){var B=A.getBoundingClientRect();return(B.top>=0&&B.left>=0&&(B.bottom+80)<=window.innerHeight&&B.right<=window.innerWidth)}function n(D){var A=document.createElement("div"),E="",B=this;A.className="introjs-overlay";if(D.tagName.toLowerCase()==="body"){E+="top: 0;bottom: 0; left: 0;right: 0;position: fixed;";A.setAttribute("style",E)}else{var C=i(D);if(C){E+="width: "+C.width+"px; height:"+C.height+"px; top:"+C.top+"px;left: "+C.left+"px;";A.setAttribute("style",E)}}D.appendChild(A);A.onclick=function(){if(B._options.exitOnOverlayClick==true){if(B._introExitCallback!=undefined){B._introExitCallback.call(B)}r.call(B,D)}};setTimeout(function(){E+="opacity: "+B._options.overlayOpacity.toString()+";";A.setAttribute("style",E)},10);return true}function i(C){var D={};D.width=C.offsetWidth;D.height=C.offsetHeight;var B=0;var A=0;while(C&&!isNaN(C.offsetLeft)&&!isNaN(C.offsetTop)){B+=C.offsetLeft;A+=C.offsetTop;C=C.offsetParent}D.top=A;D.left=B;return D}function b(){var A=parseInt((this._currentStep+1),10);return((A/this._introItems.length)*100)}function g(D,C){var B={};for(var A in D){B[A]=D[A]}for(var A in C){B[A]=C[A]}return B}var u=function(B){if(typeof(B)==="object"){return new h(B)}else{if(typeof(B)==="string"){var A=document.querySelector(B);if(A){return new h(A)}else{throw new Error("There is no element with given selector.")}}else{return new h(document.body)}}};u.version=o;u.fn=h.prototype={clone:function(){return new h(this)},setOption:function(A,B){this._options[A]=B;return this},setOptions:function(A){this._options=g(this._options,A);return this},start:function(){p.call(this,this._targetElement);return this},goToStep:function(A){l.call(this,A);return this},nextStep:function(){y.call(this);return this},previousStep:function(){j.call(this);return this},exit:function(){r.call(this,this._targetElement);return this},refresh:function(){e.call(this,document.querySelector(".introjs-helperLayer"));e.call(this,document.querySelector(".introjs-tooltipReferenceLayer"));return this},onbeforechange:function(A){if(typeof(A)==="function"){this._introBeforeChangeCallback=A}else{throw new Error("Provided callback for onbeforechange was not a function")}return this},onchange:function(A){if(typeof(A)==="function"){this._introChangeCallback=A}else{throw new Error("Provided callback for onchange was not a function.")}return this},onafterchange:function(A){if(typeof(A)==="function"){this._introAfterChangeCallback=A}else{throw new Error("Provided callback for onafterchange was not a function")}return this},oncomplete:function(A){if(typeof(A)==="function"){this._introCompleteCallback=A}else{throw new Error("Provided callback for oncomplete was not a function.")}return this},onexit:function(A){if(typeof(A)==="function"){this._introExitCallback=A}else{throw new Error("Provided callback for onexit was not a function.")}return this}};z.introJs=u;return u}));
/*! nouislider - 10.1.0 - 2017-07-28 13:09:54 */
;!function(b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():window.noUiSlider=b()}(function(){function a3(b){return"object"==typeof b&&"function"==typeof b.to&&"function"==typeof b.from}function a2(b){b.parentElement.removeChild(b)}function a1(b){b.preventDefault()}function a0(b){return b.filter(function(c){return !this[c]&&(this[c]=!0)},{})}function aZ(e,c){return Math.round(e/c)*c}function aY(h,g){var l=h.getBoundingClientRect(),k=h.ownerDocument,j=k.documentElement,i=aP(k);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(i.x=0),g?l.top+i.y-j.clientTop:l.left+i.x-j.clientLeft}function aX(b){return"number"==typeof b&&!isNaN(b)&&isFinite(b)}function aW(f,e,g){g>0&&(aS(f,e),setTimeout(function(){aR(f,e)},g))}function aV(b){return Math.max(Math.min(b,100),0)}function aU(b){return Array.isArray(b)?b:[b]}function aT(e){e=String(e);var c=e.split(".");return c.length>1?c[1].length:0}function aS(e,c){e.classList?e.classList.add(c):e.className+=" "+c}function aR(e,c){e.classList?e.classList.remove(c):e.className=e.className.replace(new RegExp("(^|\\b)"+c.split(" ").join("|")+"(\\b|$)","gi")," ")}function aQ(e,c){return e.classList?e.classList.contains(c):new RegExp("\\b"+c+"\\b").test(e.className)}function aP(f){var e=void 0!==window.pageXOffset,g="CSS1Compat"===(f.compatMode||"");return{x:e?window.pageXOffset:g?f.documentElement.scrollLeft:f.body.scrollLeft,y:e?window.pageYOffset:g?f.documentElement.scrollTop:f.body.scrollTop}}function aO(){return window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"}}function aN(){var e=!1;try{var c=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,c)}catch(e){}return e}function aM(){return window.CSS&&CSS.supports&&CSS.supports("touch-action","none")}function aL(e,c){return 100/(c-e)}function aK(e,c){return 100*c/(e[1]-e[0])}function aJ(e,c){return aK(e,e[0]<0?c+Math.abs(e[0]):c-e[0])}function aI(e,c){return c*(e[1]-e[0])/100+e[0]}function aH(f,e){for(var g=1;f>=e[g];){g+=1}return g}function aG(j,i,p){if(p>=j.slice(-1)[0]){return 100}var o,n,m,l,k=aH(p,j);return o=j[k-1],n=j[k],m=i[k-1],l=i[k],m+aJ([o,n],p)/aL(m,l)}function aF(j,i,p){if(p>=100){return j.slice(-1)[0]}var o,n,m,l,k=aH(p,i);return o=j[k-1],n=j[k],m=i[k-1],l=i[k],aI([o,n],(p-m)*aL(m,l))}function aE(i,e,n,m){if(100===m){return m}var l,k,j=aH(m,i);return n?(l=i[j-1],k=i[j],m-l>(k-l)/2?k:l):e[j-1]?i[j-1]+aZ(m-i[j-1],e[j-1]):m}function aB(f,e,h){var g;if("number"==typeof e&&(e=[e]),"[object Array]"!==Object.prototype.toString.call(e)){throw new Error("noUiSlider ("+a4+"): 'range' contains invalid value.")}if(g="min"===f?0:"max"===f?100:parseFloat(f),!aX(g)||!aX(e[0])){throw new Error("noUiSlider ("+a4+"): 'range' value isn't numeric.")}h.xPct.push(g),h.xVal.push(e[0]),g?h.xSteps.push(!isNaN(e[1])&&e[1]):isNaN(e[1])||(h.xSteps[0]=e[1]),h.xHighestCompleteStep.push(0)}function aA(h,g,l){if(!g){return !0}l.xSteps[h]=aK([l.xVal[h],l.xVal[h+1]],g)/aL(l.xPct[h],l.xPct[h+1]);var k=(l.xVal[h+1]-l.xVal[h])/l.xNumSteps[h],j=Math.ceil(Number(k.toFixed(3))-1),i=l.xVal[h]+l.xNumSteps[h]*j;l.xHighestCompleteStep[h]=i}function az(g,f,j){this.xPct=[],this.xVal=[],this.xSteps=[j||!1],this.xNumSteps=[!1],this.xHighestCompleteStep=[],this.snap=f;var i,h=[];for(i in g){g.hasOwnProperty(i)&&h.push([g[i],i])}for(h.length&&"object"==typeof h[0][0]?h.sort(function(e,c){return e[0][0]-c[0][0]}):h.sort(function(e,c){return e[0]-c[0]}),i=0;i<h.length;i++){aB(h[i][1],h[i][0],this)}for(this.xNumSteps=this.xSteps.slice(0),i=0;i<this.xNumSteps.length;i++){aA(i,this.xNumSteps[i],this)}}function ay(a){if(a3(a)){return !0}throw new Error("noUiSlider ("+a4+"): 'format' requires 'to' and 'from' methods.")}function ax(e,c){if(!aX(c)){throw new Error("noUiSlider ("+a4+"): 'step' is not numeric.")}e.singleStep=c}function aw(e,c){if("object"!=typeof c||Array.isArray(c)){throw new Error("noUiSlider ("+a4+"): 'range' is not an object.")}if(void 0===c.min||void 0===c.max){throw new Error("noUiSlider ("+a4+"): Missing 'min' or 'max' in 'range'.")}if(c.min===c.max){throw new Error("noUiSlider ("+a4+"): 'range' 'min' and 'max' cannot be equal.")}e.spectrum=new az(c,e.snap,e.singleStep)}function av(e,c){if(c=aU(c),!Array.isArray(c)||!c.length){throw new Error("noUiSlider ("+a4+"): 'start' option is incorrect.")}e.handles=c.length,e.start=c}function au(e,c){if(e.snap=c,"boolean"!=typeof c){throw new Error("noUiSlider ("+a4+"): 'snap' option must be a boolean.")}}function at(e,c){if(e.animate=c,"boolean"!=typeof c){throw new Error("noUiSlider ("+a4+"): 'animate' option must be a boolean.")}}function ar(e,c){if(e.animationDuration=c,"number"!=typeof c){throw new Error("noUiSlider ("+a4+"): 'animationDuration' option must be a number.")}}function aq(f,e){var h,g=[!1];if("lower"===e?e=[!0,!1]:"upper"===e&&(e=[!1,!0]),!0===e||!1===e){for(h=1;h<f.handles;h++){g.push(e)}g.push(!1)}else{if(!Array.isArray(e)||!e.length||e.length!==f.handles+1){throw new Error("noUiSlider ("+a4+"): 'connect' option doesn't match handle count.")}g=e}f.connect=g}function ap(e,c){switch(c){case"horizontal":e.ort=0;break;case"vertical":e.ort=1;break;default:throw new Error("noUiSlider ("+a4+"): 'orientation' option is invalid.")}}function ao(e,c){if(!aX(c)){throw new Error("noUiSlider ("+a4+"): 'margin' option must be numeric.")}if(0!==c&&(e.margin=e.spectrum.getMargin(c),!e.margin)){throw new Error("noUiSlider ("+a4+"): 'margin' option is only supported on linear sliders.")}}function an(e,c){if(!aX(c)){throw new Error("noUiSlider ("+a4+"): 'limit' option must be numeric.")}if(e.limit=e.spectrum.getMargin(c),!e.limit||e.handles<2){throw new Error("noUiSlider ("+a4+"): 'limit' option is only supported on linear sliders with 2 or more handles.")}}function am(e,c){if(!aX(c)){throw new Error("noUiSlider ("+a4+"): 'padding' option must be numeric.")}if(0!==c){if(e.padding=e.spectrum.getMargin(c),!e.padding){throw new Error("noUiSlider ("+a4+"): 'padding' option is only supported on linear sliders.")}if(e.padding<0){throw new Error("noUiSlider ("+a4+"): 'padding' option must be a positive number.")}if(e.padding>=50){throw new Error("noUiSlider ("+a4+"): 'padding' option must be less than half the range.")}}}function al(e,c){switch(c){case"ltr":e.dir=0;break;case"rtl":e.dir=1;break;default:throw new Error("noUiSlider ("+a4+"): 'direction' option was not recognized.")}}function ak(i,h){if("string"!=typeof h){throw new Error("noUiSlider ("+a4+"): 'behaviour' must be a string containing options.")}var n=h.indexOf("tap")>=0,m=h.indexOf("drag")>=0,l=h.indexOf("fixed")>=0,k=h.indexOf("snap")>=0,j=h.indexOf("hover")>=0;if(l){if(2!==i.handles){throw new Error("noUiSlider ("+a4+"): 'fixed' behaviour must be used with 2 handles")}ao(i,i.start[1]-i.start[0])}i.events={tap:n||k,drag:m,fixed:l,snap:k,hover:j}}function aj(e,c){if(e.multitouch=c,"boolean"!=typeof c){throw new Error("noUiSlider ("+a4+"): 'multitouch' option must be a boolean.")}}function ai(f,e){if(!1!==e){if(!0===e){f.tooltips=[];for(var g=0;g<f.handles;g++){f.tooltips.push(!0)}}else{if(f.tooltips=aU(e),f.tooltips.length!==f.handles){throw new Error("noUiSlider ("+a4+"): must pass a formatter for all handles.")}f.tooltips.forEach(function(b){if("boolean"!=typeof b&&("object"!=typeof b||"function"!=typeof b.to)){throw new Error("noUiSlider ("+a4+"): 'tooltips' must be passed a formatter or 'false'.")}})}}}function ah(e,c){e.ariaFormat=c,ay(c)}function ag(e,c){e.format=c,ay(c)}function af(e,c){if(void 0!==c&&"string"!=typeof c&&!1!==c){throw new Error("noUiSlider ("+a4+"): 'cssPrefix' must be a string or `false`.")}e.cssPrefix=c}function ae(f,e){if(void 0!==e&&"object"!=typeof e){throw new Error("noUiSlider ("+a4+"): 'cssClasses' must be an object.")}if("string"==typeof f.cssPrefix){f.cssClasses={};for(var g in e){e.hasOwnProperty(g)&&(f.cssClasses[g]=f.cssPrefix+e[g])}}else{f.cssClasses=e}}function ad(e,c){if(!0!==c&&!1!==c){throw new Error("noUiSlider ("+a4+"): 'useRequestAnimationFrame' option should be true (default) or false.")}e.useRequestAnimationFrame=c}function ac(g){var f={margin:0,limit:0,padding:0,animate:!0,animationDuration:300,ariaFormat:aC,format:aC},j={step:{r:!1,t:ax},start:{r:!0,t:av},connect:{r:!0,t:aq},direction:{r:!0,t:al},snap:{r:!1,t:au},animate:{r:!1,t:at},animationDuration:{r:!1,t:ar},range:{r:!0,t:aw},orientation:{r:!1,t:ap},margin:{r:!1,t:ao},limit:{r:!1,t:an},padding:{r:!1,t:am},behaviour:{r:!0,t:ak},multitouch:{r:!0,t:aj},ariaFormat:{r:!1,t:ah},format:{r:!1,t:ag},tooltips:{r:!1,t:ai},cssPrefix:{r:!1,t:af},cssClasses:{r:!1,t:ae},useRequestAnimationFrame:{r:!1,t:ad}},i={connect:!1,direction:"ltr",behaviour:"tap",multitouch:!1,orientation:"horizontal",cssPrefix:"noUi-",cssClasses:{target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",ltr:"ltr",rtl:"rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},useRequestAnimationFrame:!0};g.format&&!g.ariaFormat&&(g.ariaFormat=g.format),Object.keys(j).forEach(function(a){if(void 0===g[a]&&void 0===i[a]){if(j[a].r){throw new Error("noUiSlider ("+a4+"): '"+a+"' is required.")}return !0}j[a].t(f,void 0===g[a]?i[a]:g[a])}),f.pips=g.pips;var h=[["left","top"],["right","bottom"]];return f.style=h[f.dir][f.ort],f.styleOposite=h[f.dir?0:1][f.ort],f}function ab(bR,bQ,bP){function bO(g,e){var k=a5.createElement("div");return e&&aS(k,e),g.appendChild(k),k}function bL(g,e){var s=bO(g,bQ.cssClasses.origin),k=bO(s,bQ.cssClasses.handle);return k.setAttribute("data-handle",e),k.setAttribute("tabindex","0"),k.setAttribute("role","slider"),k.setAttribute("aria-orientation",bQ.ort?"vertical":"horizontal"),0===e?aS(k,bQ.cssClasses.handleLower):e===bQ.handles-1&&aS(k,bQ.cssClasses.handleUpper),s}function bK(g,e){return !!e&&bO(g,bQ.cssClasses.connect)}function bI(g,e){bA=[],br=[],br.push(bK(e,g[0]));for(var k=0;k<bQ.handles;k++){bA.push(bL(e,k)),bJ[k]=k,br.push(bK(e,g[k+1]))}}function bH(e){aS(e,bQ.cssClasses.target),0===bQ.dir?aS(e,bQ.cssClasses.ltr):aS(e,bQ.cssClasses.rtl),0===bQ.ort?aS(e,bQ.cssClasses.horizontal):aS(e,bQ.cssClasses.vertical),c=bO(e,bQ.cssClasses.base)}function bF(g,e){return !!bQ.tooltips[e]&&bO(g.firstChild,bQ.cssClasses.tooltip)}function bE(){var e=bA.map(bF);b("update",function(a,s,k){if(e[s]){var g=a[s];!0!==bQ.tooltips[s]&&(g=bQ.tooltips[s].to(k[s])),e[s].innerHTML=g}})}function bC(){b("update",function(g,e,t,s,k){bJ.forEach(function(v){var u=bA[v],z=r(n,v,0,!0,!0,!0),y=r(n,v,100,!0,!0,!0),x=k[v],w=bQ.ariaFormat.to(t[v]);u.children[0].setAttribute("aria-valuemin",z.toFixed(1)),u.children[0].setAttribute("aria-valuemax",y.toFixed(1)),u.children[0].setAttribute("aria-valuenow",x.toFixed(1)),u.children[0].setAttribute("aria-valuetext",w)})})}function bB(k,g,v){if("range"===k||"steps"===k){return q.xVal}if("count"===k){if(!g){throw new Error("noUiSlider ("+a4+"): 'values' required for mode 'count'.")}var u,t=100/(g-1),s=0;for(g=[];(u=s++*t)<=100;){g.push(u)}k="positions"}return"positions"===k?g.map(function(e){return q.fromStepping(v?q.getStep(e):e)}):"values"===k?v?g.map(function(e){return q.fromStepping(q.getStep(q.toStepping(e)))}):g:void 0}function bn(B,A,z){function y(g,e){return(g+e).toFixed(7)/1}var x={},w=q.xVal[0],v=q.xVal[q.xVal.length-1],u=!1,t=!1,s=0;return z=a0(z.slice().sort(function(g,e){return g-e})),z[0]!==w&&(z.unshift(w),u=!0),z[z.length-1]!==v&&(z.push(v),t=!0),z.forEach(function(I,H){var G,F,E,D,C,k,e,a,M,L,K=I,J=z[H+1];if("steps"===A&&(G=q.xNumSteps[H]),G||(G=J-K),!1!==K&&void 0!==J){for(G=Math.max(G,1e-7),F=K;F<=J;F=y(F,G)){for(D=q.toStepping(F),C=D-s,a=C/B,M=Math.round(a),L=C/M,E=1;E<=M;E+=1){k=s+E*L,x[k.toFixed(5)]=["x",0]}e=z.indexOf(F)>-1?1:"steps"===A?2:0,!H&&u&&(e=0),F===J&&t||(x[D.toFixed(5)]=[F,e]),s=D}}}),x}function bm(z,y,x){function w(A,g){var D=g===bQ.cssClasses.value,C=D?k:e,B=D?t:s;return g+" "+C[bQ.ort]+" "+B[A]}function v(g,B){B[1]=B[1]&&y?y(B[0],B[1]):B[1];var A=bO(u,!1);A.className=w(B[1],bQ.cssClasses.marker),A.style[bQ.style]=g+"%",B[1]&&(A=bO(u,!1),A.className=w(B[1],bQ.cssClasses.value),A.style[bQ.style]=g+"%",A.innerText=x.to(B[0]))}var u=a5.createElement("div"),t=[bQ.cssClasses.valueNormal,bQ.cssClasses.valueLarge,bQ.cssClasses.valueSub],s=[bQ.cssClasses.markerNormal,bQ.cssClasses.markerLarge,bQ.cssClasses.markerSub],k=[bQ.cssClasses.valueHorizontal,bQ.cssClasses.valueVertical],e=[bQ.cssClasses.markerHorizontal,bQ.cssClasses.markerVertical];return aS(u,bQ.cssClasses.pips),aS(u,0===bQ.ort?bQ.cssClasses.pipsHorizontal:bQ.cssClasses.pipsVertical),Object.keys(z).forEach(function(a){v(a,z[a])}),u}function bl(){bD&&(a2(bD),bD=null)}function bk(z){bl();var y=z.mode,x=z.density||1,w=z.filter||!1,v=z.values||!1,u=z.stepped||!1,t=bB(y,v,u),s=bn(x,y,t),k=z.format||{to:Math.round};return bD=bt.appendChild(bm(s,w,k))}function bj(){var g=c.getBoundingClientRect(),e="offset"+["Width","Height"][bQ.ort];return 0===bQ.ort?g.width||c[e]:g.height||c[e]}function bi(k,e,v,u){var t=function(a){return !bt.hasAttribute("disabled")&&(!aQ(bt,bQ.cssClasses.tap)&&(!!(a=bh(a,u.pageOffset,u.target||e))&&(!(k===bs.start&&void 0!==a.buttons&&a.buttons>1)&&((!u.hover||!a.buttons)&&(bG||a.preventDefault(),a.calcPoint=a.points[bQ.ort],void v(a,u))))))},s=[];return k.split(" ").forEach(function(g){e.addEventListener(g,t,!!bG&&{passive:!0}),s.push([g,t])}),s}function bh(B,A,z){var y,x,w=0===B.type.indexOf("touch"),v=0===B.type.indexOf("mouse"),u=0===B.type.indexOf("pointer");if(0===B.type.indexOf("MSPointer")&&(u=!0),w&&bQ.multitouch){var t=function(g){return g.target===z||z.contains(g.target)};if("touchstart"===B.type){var s=Array.prototype.filter.call(B.touches,t);if(s.length>1){return !1}y=s[0].pageX,x=s[0].pageY}else{var e=Array.prototype.find.call(B.changedTouches,t);if(!e){return !1}y=e.pageX,x=e.pageY}}else{if(w){if(B.touches.length>1){return !1}y=B.changedTouches[0].pageX,x=B.changedTouches[0].pageY}}return A=A||aP(a5),(v||u)&&(y=B.clientX+A.x,x=B.clientY+A.y),B.pageOffset=A,B.points=[y,x],B.cursor=v||u,B}function bg(g){var e=g-aY(c,bQ.ort),k=100*e/bj();return bQ.dir?100-k:k}function bf(g){var e=100,k=!1;return bA.forEach(function(t,s){if(!t.hasAttribute("disabled")){var a=Math.abs(n[s]-g);a<e&&(k=s,e=a)}}),k}function be(s,k,y,x){var w=y.slice(),v=[!s,s],u=[s,!s];x=x.slice(),s&&x.reverse(),x.length>1?x.forEach(function(e,z){var g=r(w,e,w[e]+k,v[z],u[z],!1);!1===g?k=0:(k=g-w[e],w[e]=g)}):v=u=[!0];var t=!1;x.forEach(function(e,g){t=l(e,y[e]+k,v[g],u[g])||t}),t&&x.forEach(function(e){bd("update",e),bd("slide",e)})}function bd(g,e,k){Object.keys(bv).forEach(function(s){var a=s.split(".")[0];g===a&&bv[s].forEach(function(t){t.call(h,bM.map(bQ.format.to),e,bM.slice(),k||!1,n.slice())})})}function bc(g,e){"mouseout"===g.type&&"HTML"===g.target.nodeName&&null===g.relatedTarget&&a9(g,e)}function bb(g,e){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===g.buttons&&0!==e.buttonsProperty){return a9(g,e)}var k=(bQ.dir?-1:1)*(g.calcPoint-e.startCalcPoint);be(k>0,100*k/e.baseSize,e.locations,e.handleNumbers)}function a9(g,e){e.handle&&(aR(e.handle,bQ.cssClasses.active),bu-=1),e.listeners.forEach(function(k){bN.removeEventListener(k[0],k[1])}),0===bu&&(aR(bt,bQ.cssClasses.drag),m(),g.cursor&&(bw.style.cursor="",bw.removeEventListener("selectstart",a1))),e.handleNumbers.forEach(function(k){bd("change",k),bd("set",k),bd("end",k)})}function a8(k,e){var x;if(1===e.handleNumbers.length){var w=bA[e.handleNumbers[0]];if(w.hasAttribute("disabled")){return !1}x=w.children[0],bu+=1,aS(x,bQ.cssClasses.active)}k.stopPropagation();var v=[],u=bi(bs.move,bN,bb,{target:k.target,handle:x,listeners:v,startCalcPoint:k.calcPoint,baseSize:bj(),pageOffset:k.pageOffset,handleNumbers:e.handleNumbers,buttonsProperty:k.buttons,locations:n.slice()}),t=bi(bs.end,bN,a9,{target:k.target,handle:x,listeners:v,handleNumbers:e.handleNumbers}),s=bi("mouseout",bN,bc,{target:k.target,handle:x,listeners:v,handleNumbers:e.handleNumbers});v.push.apply(v,u.concat(t,s)),k.cursor&&(bw.style.cursor=getComputedStyle(k.target).cursor,bA.length>1&&aS(bt,bQ.cssClasses.drag),bw.addEventListener("selectstart",a1,!1)),e.handleNumbers.forEach(function(g){bd("start",g)})}function a7(g){g.stopPropagation();var e=bg(g.calcPoint),k=bf(e);if(!1===k){return !1}bQ.events.snap||aW(bt,bQ.cssClasses.tap,bQ.animationDuration),l(k,e,!0,!0),m(),bd("slide",k,!0),bd("update",k,!0),bd("change",k,!0),bd("set",k,!0),bQ.events.snap&&a8(g,{handleNumbers:[k]})}function a6(g){var e=bg(g.calcPoint),s=q.getStep(e),k=q.fromStepping(s);Object.keys(bv).forEach(function(t){"hover"===t.split(".")[0]&&bv[t].forEach(function(u){u.call(h,k)})})}function Y(e){e.fixed||bA.forEach(function(k,g){bi(bs.start,k.children[0],a8,{handleNumbers:[g]})}),e.tap&&bi(bs.start,c,a7,{}),e.hover&&bi(bs.move,c,a6,{hover:!0}),e.drag&&br.forEach(function(a,u){if(!1!==a&&0!==u&&u!==br.length-1){var t=bA[u-1],s=bA[u],k=[a];aS(a,bQ.cssClasses.draggable),e.fixed&&(k.push(t.children[0]),k.push(s.children[0])),k.forEach(function(g){bi(bs.start,g,a8,{handles:[t,s],handleNumbers:[u-1,u]})})}})}function r(k,e,v,u,t,s){return bA.length>1&&(u&&e>0&&(v=Math.max(v,k[e-1]+bQ.margin)),t&&e<bA.length-1&&(v=Math.min(v,k[e+1]-bQ.margin))),bA.length>1&&bQ.limit&&(u&&e>0&&(v=Math.min(v,k[e-1]+bQ.limit)),t&&e<bA.length-1&&(v=Math.max(v,k[e+1]-bQ.limit))),bQ.padding&&(0===e&&(v=Math.max(v,bQ.padding)),e===bA.length-1&&(v=Math.min(v,100-bQ.padding))),v=q.getStep(v),!((v=aV(v))===k[e]&&!s)&&v}function p(e){return e+"%"}function o(g,e){n[g]=e,bM[g]=q.fromStepping(e);var k=function(){bA[g].style[bQ.style]=p(e),i(g),i(g+1)};window.requestAnimationFrame&&bQ.useRequestAnimationFrame?window.requestAnimationFrame(k):k()}function m(){bJ.forEach(function(g){var e=n[g]>50?-1:1,k=3+(bA.length+e*g);bA[g].childNodes[0].style.zIndex=k})}function l(g,e,s,k){return !1!==(e=r(n,g,e,s,k,!1))&&(o(g,e),!0)}function i(g){if(br[g]){var e=0,k=100;0!==g&&(e=n[g-1]),g!==br.length-1&&(k=n[g]),br[g].style[bQ.style]=p(e),br[g].style[bQ.styleOposite]=p(100-k)}}function f(g,e){null!==g&&!1!==g&&("number"==typeof g&&(g=String(g)),!1===(g=bQ.format.from(g))||isNaN(g)||l(e,q.toStepping(g),!1,!1))}function bx(g,e){var s=aU(g),k=void 0===n[0];e=void 0===e||!!e,s.forEach(f),bQ.animate&&!k&&aW(bt,bQ.cssClasses.tap,bQ.animationDuration),bJ.forEach(function(t){l(t,n[t],!0,!1)}),m(),bJ.forEach(function(t){bd("update",t),null!==s[t]&&e&&bd("set",t)})}function bo(e){bx(bQ.start,e)}function bS(){var e=bM.map(bQ.format.to);return 1===e.length?e[0]:e}function by(){for(var e in bQ.cssClasses){bQ.cssClasses.hasOwnProperty(e)&&aR(bt,bQ.cssClasses[e])}for(;bt.firstChild;){bt.removeChild(bt.firstChild)}delete bt.noUiSlider}function bp(){return n.map(function(s,k){var x=q.getNearbySteps(s),w=bM[k],v=x.thisStep.step,u=null;!1!==v&&w+v>x.stepAfter.startValue&&(v=x.stepAfter.startValue-w),u=w>x.thisStep.startValue?x.thisStep.step:!1!==x.stepBefore.step&&w-x.stepBefore.highestStep,100===s?v=null:0===s&&(u=null);var t=q.countStepDecimals();return null!==v&&!1!==v&&(v=Number(v.toFixed(t))),null!==u&&!1!==u&&(u=Number(u.toFixed(t))),[u,v]})}function b(g,e){bv[g]=bv[g]||[],bv[g].push(e),"update"===g.split(".")[0]&&bA.forEach(function(s,k){bd("update",k)})}function bz(g){var e=g&&g.split(".")[0],k=e&&g.substring(e.length);Object.keys(bv).forEach(function(s){var u=s.split(".")[0],t=s.substring(u.length);e&&e!==u||k&&k!==t||delete bv[s]})}function bq(g,e){var t=bS(),s=["margin","limit","padding","range","animate","snap","step","format"];s.forEach(function(a){void 0!==g[a]&&(bP[a]=g[a])});var k=ac(bP);s.forEach(function(a){void 0!==g[a]&&(bQ[a]=k[a])}),q=k.spectrum,bQ.margin=k.margin,bQ.limit=k.limit,bQ.padding=k.padding,bQ.pips&&bk(bQ.pips),n=[],bx(g.start||t,e)}var c,bA,br,h,bD,bs=aO(),j=aM(),bG=j&&aN(),bt=bR,n=[],bJ=[],bu=0,q=bQ.spectrum,bM=[],bv={},a5=bR.ownerDocument,bN=a5.documentElement,bw=a5.body;if(bt.noUiSlider){throw new Error("noUiSlider ("+a4+"): Slider was already initialized.")}return bH(bt),bI(bQ.connect,c),h={destroy:by,steps:bp,on:b,off:bz,get:bS,set:bx,reset:bo,__moveHandles:function(g,e,k){be(g,e,n,k)},options:bP,updateOptions:bq,target:bt,removePips:bl,pips:bk},Y(bQ.events),bx(bQ.start),bQ.pips&&bk(bQ.pips),bQ.tooltips&&bE(),bC(),h}function aD(f,e){if(!f||!f.nodeName){throw new Error("noUiSlider ("+a4+"): create requires a single element, got: "+f)}var h=ac(e,f),g=ab(f,h,e);return f.noUiSlider=g,g}var a4="10.1.0";az.prototype.getMargin=function(e){var c=this.xNumSteps[0];if(c&&e/c%1!=0){throw new Error("noUiSlider ("+a4+"): 'limit', 'margin' and 'padding' must be divisible by step.")}return 2===this.xPct.length&&aK(this.xVal,e)},az.prototype.toStepping=function(b){return b=aG(this.xVal,this.xPct,b)},az.prototype.fromStepping=function(b){return aF(this.xVal,this.xPct,b)},az.prototype.getStep=function(b){return b=aE(this.xPct,this.xSteps,this.snap,b)},az.prototype.getNearbySteps=function(e){var c=aH(e,this.xPct);return{stepBefore:{startValue:this.xVal[c-2],step:this.xNumSteps[c-2],highestStep:this.xHighestCompleteStep[c-2]},thisStep:{startValue:this.xVal[c-1],step:this.xNumSteps[c-1],highestStep:this.xHighestCompleteStep[c-1]},stepAfter:{startValue:this.xVal[c-0],step:this.xNumSteps[c-0],highestStep:this.xHighestCompleteStep[c-0]}}},az.prototype.countStepDecimals=function(){var b=this.xNumSteps.map(aT);return Math.max.apply(null,b)},az.prototype.convert=function(b){return this.getStep(this.toStepping(b))};var aC={to:function(b){return void 0!==b&&b.toFixed(2)},from:Number};return{version:a4,create:aD}});(function(a){if(typeof define==="function"&&define.amd){define([],a)}else{if(typeof exports==="object"){module.exports=a()}else{window.wNumb=a()}}})(function(){var m=["decimals","thousand","mark","prefix","suffix","encoder","decoder","negativeBefore","negative","edit","undo"];function b(n){return n.split("").reverse().join("")}function h(n,o){return n.substring(0,o.length)===o}function c(n,o){return n.slice(-1*o.length)===o}function i(p,o,n){if((p[o]||p[n])&&p[o]===p[n]){throw new Error(o)}}function e(n){return typeof n==="number"&&isFinite(n)}function a(n,o){n=n.toString().split("e");n=Math.round(+(n[0]+"e"+(n[1]?+n[1]+o:o)));n=n.toString().split("e");return(+(n[0]+"e"+(n[1]?+n[1]-o:-o))).toFixed(o)}function g(E,w,u,A,n,C,q,t,B,x,D,v){var z=v,s,p,y,o="",r="";if(C){v=C(v)}if(!e(v)){return false}if(E!==false&&parseFloat(v.toFixed(E))===0){v=0}if(v<0){s=true;v=Math.abs(v)}if(E!==false){v=a(v,E)}v=v.toString();if(v.indexOf(".")!==-1){p=v.split(".");y=p[0];if(u){o=u+p[1]}}else{y=v}if(w){y=b(y).match(/.{1,3}/g);y=b(y.join(b(w)))}if(s&&t){r+=t}if(A){r+=A}if(s&&B){r+=B}r+=y;r+=o;if(n){r+=n}if(x){r=x(r,z)}return r}function j(o,A,r,u,B,v,p,s,q,z,y,x){var w=x,t,n="";if(y){x=y(x)}if(!x||typeof x!=="string"){return false}if(s&&h(x,s)){x=x.replace(s,"");t=true}if(u&&h(x,u)){x=x.replace(u,"")}if(q&&h(x,q)){x=x.replace(q,"");t=true}if(B&&c(x,B)){x=x.slice(0,-1*B.length)}if(A){x=x.split(A).join("")}if(r){x=x.replace(r,".")}if(t){n+="-"}n+=x;n=n.replace(/[^0-9\.\-.]/g,"");if(n===""){return false}n=Number(n);if(p){n=p(n)}if(!e(n)){return false}return n}function l(q){var p,o,r,n={};if(q.suffix===undefined){q.suffix=q.postfix}for(p=0;p<m.length;p+=1){o=m[p];r=q[o];if(r===undefined){if(o==="negative"&&!n.negativeBefore){n[o]="-"}else{if(o==="mark"&&n.thousand!=="."){n[o]="."}else{n[o]=false}}}else{if(o==="decimals"){if(r>=0&&r<8){n[o]=r}else{throw new Error(o)}}else{if(o==="encoder"||o==="decoder"||o==="edit"||o==="undo"){if(typeof r==="function"){n[o]=r}else{throw new Error(o)}}else{if(typeof r==="string"){n[o]=r}else{throw new Error(o)}}}}}i(n,"mark","thousand");i(n,"prefix","negative");i(n,"prefix","negativeBefore");return n}function f(p,r,n){var q,o=[];for(q=0;q<m.length;q+=1){o.push(p[m[q]])}o.push(n);return r.apply("",o)}function k(n){if(!(this instanceof k)){return new k(n)}if(typeof n!=="object"){return}n=l(n);this.to=function(o){return f(n,g,o)};this.from=function(o){return f(n,j,o)}}return k});(function(c,a){var f=c.History=c.History||{},b=c.jQuery;if(typeof f.Adapter!="undefined"){throw new Error("History.js Adapter has already been loaded...")}f.Adapter={bind:function(h,g,i){b(h).bind(g,i)},trigger:function(h,g,i){b(h).trigger(g,i)},extractEventData:function(j,k,h){var g=k&&k.originalEvent&&k.originalEvent[j]||h&&h[j]||a;return g},onDomLoad:function(g){b(g)}},typeof f.init!="undefined"&&f.init()})(window),function(x,C){var k=x.console||C,b=x.document,q=x.navigator,D=!1,j=x.setTimeout,B=x.clearTimeout,A=x.setInterval,w=x.clearInterval,m=x.JSON,z=x.alert,v=x.History=x.History||{},g=x.history;try{D=x.sessionStorage,D.setItem("TEST","1"),D.removeItem("TEST")}catch(y){D=!1}m.stringify=m.stringify||m.encode,m.parse=m.parse||m.decode;if(typeof v.init!="undefined"){throw new Error("History.js Core has already been loaded...")}v.init=function(a){return typeof v.Adapter=="undefined"?!1:(typeof v.initCore!="undefined"&&v.initCore(),typeof v.initHtml4!="undefined"&&v.initHtml4(),!0)},v.initCore=function(e){if(typeof v.initCore.initialized!="undefined"){return !1}v.initCore.initialized=!0,v.options=v.options||{},v.options.hashChangeInterval=v.options.hashChangeInterval||100,v.options.safariPollInterval=v.options.safariPollInterval||500,v.options.doubleCheckInterval=v.options.doubleCheckInterval||500,v.options.disableSuid=v.options.disableSuid||!1,v.options.storeInterval=v.options.storeInterval||1000,v.options.busyDelay=v.options.busyDelay||250,v.options.debug=v.options.debug||!1,v.options.initialTitle=v.options.initialTitle||b.title,v.options.html4Mode=v.options.html4Mode||!1,v.options.delayInit=v.options.delayInit||!1,v.intervalList=[],v.clearAllIntervals=function(){var h,f=v.intervalList;if(typeof f!="undefined"&&f!==null){for(h=0;h<f.length;h++){w(f[h])}v.intervalList=null}},v.debug=function(){(v.options.debug||!1)&&v.log.apply(v,arguments)},v.log=function(){var F=typeof k!="undefined"&&typeof k.log!="undefined"&&typeof k.log.apply!="undefined",p=b.getElementById("log"),n,r,G,l,h;F?(l=Array.prototype.slice.call(arguments),n=l.shift(),typeof k.debug!="undefined"?k.debug.apply(k,[n,l]):k.log.apply(k,[n,l])):n="\n"+arguments[0]+"\n";for(r=1,G=arguments.length;r<G;++r){h=arguments[r];if(typeof h=="object"&&typeof m!="undefined"){try{h=m.stringify(h)}catch(E){}}n+="\n"+h+"\n"}return p?(p.value+=n+"\n-----\n",p.scrollTop=p.scrollHeight-p.clientHeight):F||z(n),!0},v.getInternetExplorerMajorVersion=function(){var f=v.getInternetExplorerMajorVersion.cached=typeof v.getInternetExplorerMajorVersion.cached!="undefined"?v.getInternetExplorerMajorVersion.cached:function(){var i=3,h=b.createElement("div"),l=h.getElementsByTagName("i");while((h.innerHTML="<!--[if gt IE "+ ++i+"]><i></i><![endif]-->")&&l[0]){}return i>4?i:!1}();return f},v.isInternetExplorer=function(){var f=v.isInternetExplorer.cached=typeof v.isInternetExplorer.cached!="undefined"?v.isInternetExplorer.cached:Boolean(v.getInternetExplorerMajorVersion());return f},v.options.html4Mode?v.emulated={pushState:!0,hashChange:!0}:v.emulated={pushState:!Boolean(x.history&&x.history.pushState&&x.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(q.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(q.userAgent)),hashChange:Boolean(!("onhashchange" in x||"onhashchange" in b)||v.isInternetExplorer()&&v.getInternetExplorerMajorVersion()<8)},v.enabled=!v.emulated.pushState,v.bugs={setHash:Boolean(!v.emulated.pushState&&q.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(q.userAgent)),safariPoll:Boolean(!v.emulated.pushState&&q.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(q.userAgent)),ieDoubleCheck:Boolean(v.isInternetExplorer()&&v.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(v.isInternetExplorer()&&v.getInternetExplorerMajorVersion()<7)},v.isEmptyObject=function(h){for(var f in h){if(h.hasOwnProperty(f)){return !1}}return !0},v.cloneObject=function(h){var f,i;return h?(f=m.stringify(h),i=m.parse(f)):i={},i},v.getRootUrl=function(){var f=b.location.protocol+"//"+(b.location.hostname||b.location.host);if(b.location.port||!1){f+=":"+b.location.port}return f+="/",f},v.getBaseHref=function(){var h=b.getElementsByTagName("base"),f=null,i="";return h.length===1&&(f=h[0],i=f.href.replace(/[^\/]+$/,"")),i=i.replace(/\/+$/,""),i&&(i+="/"),i},v.getBaseUrl=function(){var f=v.getBaseHref()||v.getBasePageUrl()||v.getRootUrl();return f},v.getPageUrl=function(){var h=v.getState(!1,!1),f=(h||{}).url||v.getLocationHref(),i;return i=f.replace(/\/+$/,"").replace(/[^\/]+$/,function(o,l,p){return/\./.test(o)?o:o+"/"}),i},v.getBasePageUrl=function(){var f=v.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(i,h,l){return/[^\/]$/.test(i)?"":i}).replace(/\/+$/,"")+"/";return f},v.getFullUrl=function(i,f){var l=i,h=i.substring(0,1);return f=typeof f=="undefined"?!0:f,/[a-z]+\:\/\//.test(i)||(h==="/"?l=v.getRootUrl()+i.replace(/^\/+/,""):h==="#"?l=v.getPageUrl().replace(/#.*/,"")+i:h==="?"?l=v.getPageUrl().replace(/[\?#].*/,"")+i:f?l=v.getBaseUrl()+i.replace(/^(\.\/)+/,""):l=v.getBasePageUrl()+i.replace(/^(\.\/)+/,"")),l.replace(/\#$/,"")},v.getShortUrl=function(i){var f=i,l=v.getBaseUrl(),h=v.getRootUrl();return v.emulated.pushState&&(f=f.replace(l,"")),f=f.replace(h,"/"),v.isTraditionalAnchor(f)&&(f="./"+f),f=f.replace(/^(\.\/)+/g,"./").replace(/\#$/,""),f},v.getLocationHref=function(f){return f=f||b,f.URL===f.location.href?f.location.href:f.location.href===decodeURIComponent(f.URL)?f.URL:f.location.hash&&decodeURIComponent(f.location.href.replace(/^[^#]+/,""))===f.location.hash?f.location.href:f.URL.indexOf("#")==-1&&f.location.href.indexOf("#")!=-1?f.location.href:f.URL||f.location.href},v.store={},v.idToState=v.idToState||{},v.stateToId=v.stateToId||{},v.urlToId=v.urlToId||{},v.storedStates=v.storedStates||[],v.savedStates=v.savedStates||[],v.normalizeStore=function(){v.store.idToState=v.store.idToState||{},v.store.urlToId=v.store.urlToId||{},v.store.stateToId=v.store.stateToId||{}},v.getState=function(h,f){typeof h=="undefined"&&(h=!0),typeof f=="undefined"&&(f=!0);var i=v.getLastSavedState();return !i&&f&&(i=v.createStateObject()),h&&(i=v.cloneObject(i),i.url=i.cleanUrl||i.url),i},v.getIdByState=function(h){var f=v.extractId(h.url),i;if(!f){i=v.getStateString(h);if(typeof v.stateToId[i]!="undefined"){f=v.stateToId[i]}else{if(typeof v.store.stateToId[i]!="undefined"){f=v.store.stateToId[i]}else{for(;;){f=(new Date).getTime()+String(Math.random()).replace(/\D/g,"");if(typeof v.idToState[f]=="undefined"&&typeof v.store.idToState[f]=="undefined"){break}}v.stateToId[i]=f,v.idToState[f]=h}}}return f},v.normalizeState=function(h){var f,i;if(!h||typeof h!="object"){h={}}if(typeof h.normalized!="undefined"){return h}if(!h.data||typeof h.data!="object"){h.data={}}return f={},f.normalized=!0,f.title=h.title||"",f.url=v.getFullUrl(h.url?h.url:v.getLocationHref()),f.hash=v.getShortUrl(f.url),f.data=v.cloneObject(h.data),f.id=v.getIdByState(f),f.cleanUrl=f.url.replace(/\??\&_suid.*/,""),f.url=f.cleanUrl,i=!v.isEmptyObject(f.data),(f.title||i)&&v.options.disableSuid!==!0&&(f.hash=v.getShortUrl(f.url).replace(/\??\&_suid.*/,""),/\?/.test(f.hash)||(f.hash+="?"),f.hash+="&_suid="+f.id),f.hashedUrl=v.getFullUrl(f.hash),(v.emulated.pushState||v.bugs.safariPoll)&&v.hasUrlDuplicate(f)&&(f.url=f.hashedUrl),f},v.createStateObject=function(i,f,l){var h={data:i,title:f,url:l};return h=v.normalizeState(h),h},v.getStateById=function(f){f=String(f);var h=v.idToState[f]||v.store.idToState[f]||C;return h},v.getStateString=function(i){var f,l,h;return f=v.normalizeState(i),l={data:f.data,title:i.title,url:i.url},h=m.stringify(l),h},v.getStateId=function(h){var f,i;return f=v.normalizeState(h),i=f.id,i},v.getHashByState=function(h){var f,i;return f=v.normalizeState(h),i=f.hash,i},v.extractId=function(o){var h,p,l,f;return o.indexOf("#")!=-1?f=o.split("#")[0]:f=o,p=/(.*)\&_suid=([0-9]+)$/.exec(f),l=p?p[1]||o:o,h=p?String(p[2]||""):"",h||!1},v.isTraditionalAnchor=function(h){var f=!/[\/\?\.]/.test(h);return f},v.extractState=function(o,h){var p=null,l,f;return h=h||!1,l=v.extractId(o),l&&(p=v.getStateById(l)),p||(f=v.getFullUrl(o),l=v.getIdByUrl(f)||!1,l&&(p=v.getStateById(l)),!p&&h&&!v.isTraditionalAnchor(o)&&(p=v.createStateObject(null,null,f))),p},v.getIdByUrl=function(f){var h=v.urlToId[f]||v.store.urlToId[f]||C;return h},v.getLastSavedState=function(){return v.savedStates[v.savedStates.length-1]||C},v.getLastStoredState=function(){return v.storedStates[v.storedStates.length-1]||C},v.hasUrlDuplicate=function(h){var f=!1,i;return i=v.extractState(h.url),f=i&&i.id!==h.id,f},v.storeState=function(f){return v.urlToId[f.url]=f.id,v.storedStates.push(v.cloneObject(f)),f},v.isLastSavedState=function(o){var h=!1,p,l,f;return v.savedStates.length&&(p=o.id,l=v.getLastSavedState(),f=l.id,h=p===f),h},v.saveState=function(f){return v.isLastSavedState(f)?!1:(v.savedStates.push(v.cloneObject(f)),!0)},v.getStateByIndex=function(h){var f=null;return typeof h=="undefined"?f=v.savedStates[v.savedStates.length-1]:h<0?f=v.savedStates[v.savedStates.length+h]:f=v.savedStates[h],f},v.getCurrentIndex=function(){var f=null;return v.savedStates.length<1?f=0:f=v.savedStates.length-1,f},v.getHash=function(h){var f=v.getLocationHref(h),i;return i=v.getHashByUrl(f),i},v.unescapeHash=function(h){var f=v.normalizeHash(h);return f=decodeURIComponent(f),f},v.normalizeHash=function(h){var f=h.replace(/[^#]*#/,"").replace(/#.*/,"");return f},v.setHash=function(l,h){var o,f;return h!==!1&&v.busy()?(v.pushQueue({scope:v,callback:v.setHash,args:arguments,queue:h}),!1):(v.busy(!0),o=v.extractState(l,!0),o&&!v.emulated.pushState?v.pushState(o.data,o.title,o.url,!1):v.getHash()!==l&&(v.bugs.setHash?(f=v.getPageUrl(),v.pushState(null,null,f+"#"+l,!1)):b.location.hash=l),v)},v.escapeHash=function(f){var h=v.normalizeHash(f);return h=x.encodeURIComponent(h),v.bugs.hashEscape||(h=h.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),h},v.getHashByUrl=function(h){var f=String(h).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return f=v.unescapeHash(f),f},v.setTitle=function(l){var h=l.title,o;h||(o=v.getStateByIndex(0),o&&o.url===l.url&&(h=o.title||v.options.initialTitle));try{b.getElementsByTagName("title")[0].innerHTML=h.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(f){}return b.title=h,v},v.queues=[],v.busy=function(h){typeof h!="undefined"?v.busy.flag=h:typeof v.busy.flag=="undefined"&&(v.busy.flag=!1);if(!v.busy.flag){B(v.busy.timeout);var f=function(){var l,o,i;if(v.busy.flag){return}for(l=v.queues.length-1;l>=0;--l){o=v.queues[l];if(o.length===0){continue}i=o.shift(),v.fireQueueItem(i),v.busy.timeout=j(f,v.options.busyDelay)}};v.busy.timeout=j(f,v.options.busyDelay)}return v.busy.flag},v.busy.flag=!1,v.fireQueueItem=function(f){return f.callback.apply(f.scope||v,f.args||[])},v.pushQueue=function(f){return v.queues[f.queue||0]=v.queues[f.queue||0]||[],v.queues[f.queue||0].push(f),v},v.queue=function(h,f){return typeof h=="function"&&(h={callback:h}),typeof f!="undefined"&&(h.queue=f),v.busy()?v.pushQueue(h):v.fireQueueItem(h),v},v.clearQueue=function(){return v.busy.flag=!1,v.queues=[],v},v.stateChanged=!1,v.doubleChecker=!1,v.doubleCheckComplete=function(){return v.stateChanged=!0,v.doubleCheckClear(),v},v.doubleCheckClear=function(){return v.doubleChecker&&(B(v.doubleChecker),v.doubleChecker=!1),v},v.doubleCheck=function(f){return v.stateChanged=!1,v.doubleCheckClear(),v.bugs.ieDoubleCheck&&(v.doubleChecker=j(function(){return v.doubleCheckClear(),v.stateChanged||f(),!0},v.options.doubleCheckInterval)),v},v.safariStatePoll=function(){var f=v.extractState(v.getLocationHref()),h;if(!v.isLastSavedState(f)){return h=f,h||(h=v.createStateObject()),v.Adapter.trigger(x,"popstate"),v}return},v.back=function(f){return f!==!1&&v.busy()?(v.pushQueue({scope:v,callback:v.back,args:arguments,queue:f}),!1):(v.busy(!0),v.doubleCheck(function(){v.back(!1)}),g.go(-1),!0)},v.forward=function(f){return f!==!1&&v.busy()?(v.pushQueue({scope:v,callback:v.forward,args:arguments,queue:f}),!1):(v.busy(!0),v.doubleCheck(function(){v.forward(!1)}),g.go(1),!0)},v.go=function(h,f){var i;if(h>0){for(i=1;i<=h;++i){v.forward(f)}}else{if(!(h<0)){throw new Error("History.go: History.go requires a positive or negative integer passed.")}for(i=-1;i>=h;--i){v.back(f)}}return v};if(v.emulated.pushState){var c=function(){};v.pushState=v.pushState||c,v.replaceState=v.replaceState||c}else{v.onPopState=function(h,E){var p=!1,f=!1,l,u;return v.doubleCheckComplete(),l=v.getHash(),l?(u=v.extractState(l||v.getLocationHref(),!0),u?v.replaceState(u.data,u.title,u.url,!1):(v.Adapter.trigger(x,"anchorchange"),v.busy(!1)),v.expectedStateId=!1,!1):(p=v.Adapter.extractEventData("state",h,E)||!1,p?f=v.getStateById(p):v.expectedStateId?f=v.getStateById(v.expectedStateId):f=v.extractState(v.getLocationHref()),f||(f=v.createStateObject(null,null,v.getLocationHref())),v.expectedStateId=!1,v.isLastSavedState(f)?(v.busy(!1),!1):(v.storeState(f),v.saveState(f),v.setTitle(f),v.Adapter.trigger(x,"statechange"),v.busy(!1),!0))},v.Adapter.bind(x,"popstate",v.onPopState),v.pushState=function(h,p,o,f){if(v.getHashByUrl(o)&&v.emulated.pushState){throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).")}if(f!==!1&&v.busy()){return v.pushQueue({scope:v,callback:v.pushState,args:arguments,queue:f}),!1}v.busy(!0);var l=v.createStateObject(h,p,o);return v.isLastSavedState(l)?v.busy(!1):(v.storeState(l),v.expectedStateId=l.id,g.pushState(l.id,l.title,l.url),v.Adapter.trigger(x,"popstate")),!0},v.replaceState=function(h,p,o,f){if(v.getHashByUrl(o)&&v.emulated.pushState){throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).")}if(f!==!1&&v.busy()){return v.pushQueue({scope:v,callback:v.replaceState,args:arguments,queue:f}),!1}v.busy(!0);var l=v.createStateObject(h,p,o);return v.isLastSavedState(l)?v.busy(!1):(v.storeState(l),v.expectedStateId=l.id,g.replaceState(l.id,l.title,l.url),v.Adapter.trigger(x,"popstate")),!0}}if(D){try{v.store=m.parse(D.getItem("History.store"))||{}}catch(a){v.store={}}v.normalizeStore()}else{v.store={},v.normalizeStore()}v.Adapter.bind(x,"unload",v.clearAllIntervals),v.saveState(v.storeState(v.extractState(v.getLocationHref(),!0))),D&&(v.onUnload=function(){var o,h,p;try{o=m.parse(D.getItem("History.store"))||{}}catch(l){o={}}o.idToState=o.idToState||{},o.urlToId=o.urlToId||{},o.stateToId=o.stateToId||{};for(h in v.idToState){if(!v.idToState.hasOwnProperty(h)){continue}o.idToState[h]=v.idToState[h]}for(h in v.urlToId){if(!v.urlToId.hasOwnProperty(h)){continue}o.urlToId[h]=v.urlToId[h]}for(h in v.stateToId){if(!v.stateToId.hasOwnProperty(h)){continue}o.stateToId[h]=v.stateToId[h]}v.store=o,v.normalizeStore(),p=m.stringify(o);try{D.setItem("History.store",p)}catch(f){if(f.code!==DOMException.QUOTA_EXCEEDED_ERR){throw f}D.length&&(D.removeItem("History.store"),D.setItem("History.store",p))}},v.intervalList.push(A(v.onUnload,v.options.storeInterval)),v.Adapter.bind(x,"beforeunload",v.onUnload),v.Adapter.bind(x,"unload",v.onUnload));if(!v.emulated.pushState){v.bugs.safariPoll&&v.intervalList.push(A(v.safariStatePoll,v.options.safariPollInterval));if(q.vendor==="Apple Computer, Inc."||(q.appCodeName||"")==="Mozilla"){v.Adapter.bind(x,"hashchange",function(){v.Adapter.trigger(x,"popstate")}),v.getHash()&&v.Adapter.onDomLoad(function(){v.Adapter.trigger(x,"hashchange")})}}},(!v.options||!v.options.delayInit)&&v.init()}(window);"use strict";jQuery.base64=(function(g){var e="=",b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c="1.0";function h(l,k){var j=b.indexOf(l.charAt(k));if(j===-1){throw"Cannot decode base64"}return j}function a(m){var o=0,l,n,k=m.length,j=[];m=String(m);if(k===0){return m}if(k%4!==0){throw"Cannot decode base64"}if(m.charAt(k-1)===e){o=1;if(m.charAt(k-2)===e){o=2}k-=4}for(l=0;l<k;l+=4){n=(h(m,l)<<18)|(h(m,l+1)<<12)|(h(m,l+2)<<6)|h(m,l+3);j.push(String.fromCharCode(n>>16,(n>>8)&255,n&255))}switch(o){case 1:n=(h(m,l)<<18)|(h(m,l+1)<<12)|(h(m,l+2)<<6);j.push(String.fromCharCode(n>>16,(n>>8)&255));break;case 2:n=(h(m,l)<<18)|(h(m,l+1)<<12);j.push(String.fromCharCode(n>>16));break}return j.join("")}function f(l,k){var j=l.charCodeAt(k);if(j>255){throw"INVALID_CHARACTER_ERR: DOM Exception 5"}return j}function i(m){if(arguments.length!==1){throw"SyntaxError: exactly one argument required"}m=String(m);var l,n,j=[],k=m.length-m.length%3;if(m.length===0){return m}for(l=0;l<k;l+=3){n=(f(m,l)<<16)|(f(m,l+1)<<8)|f(m,l+2);j.push(b.charAt(n>>18));j.push(b.charAt((n>>12)&63));j.push(b.charAt((n>>6)&63));j.push(b.charAt(n&63))}switch(m.length-k){case 1:n=f(m,l)<<16;j.push(b.charAt(n>>18)+b.charAt((n>>12)&63)+e+e);break;case 2:n=(f(m,l)<<16)|(f(m,l+1)<<8);j.push(b.charAt(n>>18)+b.charAt((n>>12)&63)+b.charAt((n>>6)&63)+e);break}return j.join("")}return{decode:a,encode:i,VERSION:c}}(jQuery));(function(a,b){if(typeof define==="function"&&define.amd){define(["moment","jquery","exports"],function(i,h,g){a.daterangepicker=b(a,g,i,h)})}else{if(typeof exports!=="undefined"){var e=require("moment");var f;try{f=require("jquery")}catch(c){f=window.jQuery;if(!f){throw new Error("jQuery dependency not found")}}b(a,exports,e,f)}else{a.daterangepicker=b(a,{},a.moment,(a.jQuery||a.Zepto||a.ender||a.$))}}}(this,function(b,c,f,e){var a=function(j,i,g){this.parentEl="body";this.element=e(j);this.isShowing=false;var h='<div class="daterangepicker dropdown-menu"><div class="calendar left"></div><div class="calendar right"></div><div class="ranges"><div class="range_inputs"><div class="daterangepicker_start_input"><label for="daterangepicker_start"></label><input class="input-mini" type="text" name="daterangepicker_start" value="" /></div><div class="daterangepicker_end_input"><label for="daterangepicker_end"></label><input class="input-mini" type="text" name="daterangepicker_end" value="" /></div><button class="applyBtn" disabled="disabled"></button>&nbsp;<button class="cancelBtn"></button></div></div></div>';if(typeof i!=="object"||i===null){i={}}this.parentEl=(typeof i==="object"&&i.parentEl&&e(i.parentEl).length)?e(i.parentEl):e(this.parentEl);this.container=e(h).appendTo(this.parentEl);this.setOptions(i,g);var k=this.container;e.each(this.buttonClasses,function(l,m){k.find("button").addClass(m)});this.container.find(".daterangepicker_start_input label").html(this.locale.fromLabel);this.container.find(".daterangepicker_end_input label").html(this.locale.toLabel);if(this.applyClass.length){this.container.find(".applyBtn").addClass(this.applyClass)}if(this.cancelClass.length){this.container.find(".cancelBtn").addClass(this.cancelClass)}this.container.find(".applyBtn").html(this.locale.applyLabel);this.container.find(".cancelBtn").html(this.locale.cancelLabel);this.container.find(".calendar").on("click.daterangepicker",".prev",e.proxy(this.clickPrev,this)).on("click.daterangepicker",".next",e.proxy(this.clickNext,this)).on("click.daterangepicker","td.available",e.proxy(this.clickDate,this)).on("mouseenter.daterangepicker","td.available",e.proxy(this.hoverDate,this)).on("mouseleave.daterangepicker","td.available",e.proxy(this.updateFormInputs,this)).on("change.daterangepicker","select.yearselect",e.proxy(this.updateMonthYear,this)).on("change.daterangepicker","select.monthselect",e.proxy(this.updateMonthYear,this)).on("change.daterangepicker","select.hourselect,select.minuteselect,select.ampmselect",e.proxy(this.updateTime,this));this.container.find(".ranges").on("click.daterangepicker","button.applyBtn",e.proxy(this.clickApply,this)).on("click.daterangepicker","button.cancelBtn",e.proxy(this.clickCancel,this)).on("click.daterangepicker",".daterangepicker_start_input,.daterangepicker_end_input",e.proxy(this.showCalendars,this)).on("change.daterangepicker",".daterangepicker_start_input,.daterangepicker_end_input",e.proxy(this.inputsChanged,this)).on("keydown.daterangepicker",".daterangepicker_start_input,.daterangepicker_end_input",e.proxy(this.inputsKeydown,this)).on("click.daterangepicker","li",e.proxy(this.clickRange,this)).on("mouseenter.daterangepicker","li",e.proxy(this.enterRange,this)).on("mouseleave.daterangepicker","li",e.proxy(this.updateFormInputs,this));if(this.element.is("input")){this.element.on({"click.daterangepicker":e.proxy(this.show,this),"focus.daterangepicker":e.proxy(this.show,this),"keyup.daterangepicker":e.proxy(this.updateFromControl,this)})}else{this.element.on("click.daterangepicker",e.proxy(this.toggle,this))}};a.prototype={constructor:a,setOptions:function(q,p){this.startDate=f().startOf("day");this.endDate=f().endOf("day");this.minDate=false;this.maxDate=false;this.dateLimit=false;this.showDropdowns=false;this.showWeekNumbers=false;this.timePicker=false;this.timePickerIncrement=30;this.timePicker12Hour=true;this.singleDatePicker=false;this.ranges={};this.opens="right";if(this.element.hasClass("pull-right")){this.opens="left"}this.buttonClasses=["btn","btn-small btn-sm"];this.applyClass="btn-success";this.cancelClass="btn-default";this.format="MM/DD/YYYY";this.separator=" - ";this.locale={applyLabel:"Apply",cancelLabel:"Cancel",fromLabel:"From",toLabel:"To",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:f.weekdaysMin(),monthNames:f.monthsShort(),firstDay:f.localeData()._week.dow};this.cb=function(){};if(typeof q.format==="string"){this.format=q.format}if(typeof q.separator==="string"){this.separator=q.separator}if(typeof q.startDate==="string"){this.startDate=f(q.startDate,this.format)}if(typeof q.endDate==="string"){this.endDate=f(q.endDate,this.format)}if(typeof q.minDate==="string"){this.minDate=f(q.minDate,this.format)}if(typeof q.maxDate==="string"){this.maxDate=f(q.maxDate,this.format)}if(typeof q.startDate==="object"){this.startDate=f(q.startDate)}if(typeof q.endDate==="object"){this.endDate=f(q.endDate)}if(typeof q.minDate==="object"){this.minDate=f(q.minDate)}if(typeof q.maxDate==="object"){this.maxDate=f(q.maxDate)}if(typeof q.applyClass==="string"){this.applyClass=q.applyClass}if(typeof q.cancelClass==="string"){this.cancelClass=q.cancelClass}if(typeof q.dateLimit==="object"){this.dateLimit=q.dateLimit}if(typeof q.locale==="object"){if(typeof q.locale.daysOfWeek==="object"){this.locale.daysOfWeek=q.locale.daysOfWeek.slice()}if(typeof q.locale.monthNames==="object"){this.locale.monthNames=q.locale.monthNames.slice()}if(typeof q.locale.firstDay==="number"){this.locale.firstDay=q.locale.firstDay}if(typeof q.locale.applyLabel==="string"){this.locale.applyLabel=q.locale.applyLabel}if(typeof q.locale.cancelLabel==="string"){this.locale.cancelLabel=q.locale.cancelLabel}if(typeof q.locale.fromLabel==="string"){this.locale.fromLabel=q.locale.fromLabel}if(typeof q.locale.toLabel==="string"){this.locale.toLabel=q.locale.toLabel}if(typeof q.locale.weekLabel==="string"){this.locale.weekLabel=q.locale.weekLabel}if(typeof q.locale.customRangeLabel==="string"){this.locale.customRangeLabel=q.locale.customRangeLabel}}if(typeof q.opens==="string"){this.opens=q.opens}if(typeof q.showWeekNumbers==="boolean"){this.showWeekNumbers=q.showWeekNumbers}if(typeof q.buttonClasses==="string"){this.buttonClasses=[q.buttonClasses]}if(typeof q.buttonClasses==="object"){this.buttonClasses=q.buttonClasses}if(typeof q.showDropdowns==="boolean"){this.showDropdowns=q.showDropdowns}if(typeof q.singleDatePicker==="boolean"){this.singleDatePicker=q.singleDatePicker;if(this.singleDatePicker){this.endDate=this.startDate.clone()}}if(typeof q.timePicker==="boolean"){this.timePicker=q.timePicker}if(typeof q.timePickerIncrement==="number"){this.timePickerIncrement=q.timePickerIncrement}if(typeof q.timePicker12Hour==="boolean"){this.timePicker12Hour=q.timePicker12Hour}if(this.locale.firstDay!=0){var k=this.locale.firstDay;while(k>0){this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift());k--}}var g,j,l;if(typeof q.startDate==="undefined"&&typeof q.endDate==="undefined"){if(e(this.element).is("input[type=text]")){var h=e(this.element).val();var n=h.split(this.separator);g=j=null;if(n.length==2){g=f(n[0],this.format);j=f(n[1],this.format)}else{if(this.singleDatePicker){g=f(h,this.format);j=f(h,this.format)}}if(g!==null&&j!==null){this.startDate=g;this.endDate=j}}}if(typeof q.ranges==="object"){for(l in q.ranges){g=f(q.ranges[l][0]);j=f(q.ranges[l][1]);if(this.minDate&&g.isBefore(this.minDate)){g=f(this.minDate)}if(this.maxDate&&j.isAfter(this.maxDate)){j=f(this.maxDate)}if((this.minDate&&j.isBefore(this.minDate))||(this.maxDate&&g.isAfter(this.maxDate))){continue}this.ranges[l]=[g,j]}var m="<ul>";for(l in this.ranges){m+="<li>"+l+"</li>"}m+="<li>"+this.locale.customRangeLabel+"</li>";m+="</ul>";this.container.find(".ranges ul").remove();this.container.find(".ranges").prepend(m)}if(typeof p==="function"){this.cb=p}if(!this.timePicker){this.startDate=this.startDate.startOf("day");this.endDate=this.endDate.endOf("day")}if(this.singleDatePicker){this.opens="right";this.container.addClass("single");this.container.find(".calendar.right").show();this.container.find(".calendar.left").hide();if(!this.timePicker){this.container.find(".ranges").hide()}else{this.container.find(".ranges .daterangepicker_start_input, .ranges .daterangepicker_end_input").hide()}if(!this.container.find(".calendar.right").hasClass("single")){this.container.find(".calendar.right").addClass("single")}}else{this.container.removeClass("single");this.container.find(".calendar.right").removeClass("single");this.container.find(".ranges").show()}this.oldStartDate=this.startDate.clone();this.oldEndDate=this.endDate.clone();this.oldChosenLabel=this.chosenLabel;this.leftCalendar={month:f([this.startDate.year(),this.startDate.month(),1,this.startDate.hour(),this.startDate.minute()]),calendar:[]};this.rightCalendar={month:f([this.endDate.year(),this.endDate.month(),1,this.endDate.hour(),this.endDate.minute()]),calendar:[]};if(this.opens=="right"){var i=this.container.find(".calendar.left");var o=this.container.find(".calendar.right");if(o.hasClass("single")){o.removeClass("single");i.addClass("single")}i.removeClass("left").addClass("right");o.removeClass("right").addClass("left");if(this.singleDatePicker){i.show();o.hide()}}if(typeof q.ranges==="undefined"&&!this.singleDatePicker){this.container.addClass("show-calendar")}this.container.addClass("opens"+this.opens);this.updateView();this.updateCalendars()},setStartDate:function(g){if(typeof g==="string"){this.startDate=f(g,this.format)}if(typeof g==="object"){this.startDate=f(g)}if(!this.timePicker){this.startDate=this.startDate.startOf("day")}this.oldStartDate=this.startDate.clone();this.updateView();this.updateCalendars();this.updateInputText()},setEndDate:function(g){if(typeof g==="string"){this.endDate=f(g,this.format)}if(typeof g==="object"){this.endDate=f(g)}if(!this.timePicker){this.endDate=this.endDate.endOf("day")}this.oldEndDate=this.endDate.clone();this.updateView();this.updateCalendars();this.updateInputText()},updateView:function(){this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()).hour(this.startDate.hour()).minute(this.startDate.minute());this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()).hour(this.endDate.hour()).minute(this.endDate.minute());this.updateFormInputs()},updateFormInputs:function(){this.container.find("input[name=daterangepicker_start]").val(this.startDate.format(this.format));this.container.find("input[name=daterangepicker_end]").val(this.endDate.format(this.format));if(this.startDate.isSame(this.endDate)||this.startDate.isBefore(this.endDate)){this.container.find("button.applyBtn").removeAttr("disabled")}else{this.container.find("button.applyBtn").attr("disabled","disabled")}},updateFromControl:function(){if(!this.element.is("input")){return}if(!this.element.val().length){return}var h=this.element.val().split(this.separator),i=null,g=null;if(h.length===2){i=f(h[0],this.format);g=f(h[1],this.format)}if(this.singleDatePicker||i===null||g===null){i=f(this.element.val(),this.format);g=i}if(g.isBefore(i)){return}this.oldStartDate=this.startDate.clone();this.oldEndDate=this.endDate.clone();this.startDate=i;this.endDate=g;if(!this.startDate.isSame(this.oldStartDate)||!this.endDate.isSame(this.oldEndDate)){this.notify()}this.updateCalendars()},notify:function(){this.updateView();this.cb(this.startDate,this.endDate,this.chosenLabel)},move:function(){var g={top:0,left:0};var h=e(window).width();if(!this.parentEl.is("body")){g={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()};h=this.parentEl[0].clientWidth+this.parentEl.offset().left}if(this.opens=="left"){this.container.css({top:this.element.offset().top+this.element.outerHeight()-g.top,right:h-this.element.offset().left-this.element.outerWidth(),left:"auto"});if(this.container.offset().left<0){this.container.css({right:"auto",left:9})}}else{this.container.css({top:this.element.offset().top+this.element.outerHeight()-g.top,left:this.element.offset().left-g.left,right:"auto"});if(this.container.offset().left+this.container.outerWidth()>e(window).width()){this.container.css({left:"auto",right:0})}}},toggle:function(g){if(this.element.hasClass("active")){this.hide()}else{this.show()}},show:function(g){if(this.isShowing){return}this.element.addClass("active");this.container.show();this.move();this._outsideClickProxy=e.proxy(function(h){this.outsideClick(h)},this);e(document).on("mousedown.daterangepicker",this._outsideClickProxy).on("click.daterangepicker","[data-toggle=dropdown]",this._outsideClickProxy).on("focusin.daterangepicker",this._outsideClickProxy);this.isShowing=true;this.element.trigger("show.daterangepicker",this)},outsideClick:function(h){var g=e(h.target);if(g.closest(this.element).length||g.closest(this.container).length||g.closest(".calendar-date").length){return}this.hide()},hide:function(g){if(!this.isShowing){return}e(document).off("mousedown.daterangepicker").off("click.daterangepicker","[data-toggle=dropdown]").off("focusin.daterangepicker");this.element.removeClass("active");this.container.hide();if(!this.startDate.isSame(this.oldStartDate)||!this.endDate.isSame(this.oldEndDate)){this.notify()}this.oldStartDate=this.startDate.clone();this.oldEndDate=this.endDate.clone();this.isShowing=false;this.element.trigger("hide.daterangepicker",this)},enterRange:function(i){var g=i.target.innerHTML;if(g==this.locale.customRangeLabel){this.updateView()}else{var h=this.ranges[g];this.container.find("input[name=daterangepicker_start]").val(h[0].format(this.format));this.container.find("input[name=daterangepicker_end]").val(h[1].format(this.format))}},showCalendars:function(){this.container.addClass("show-calendar");this.move();this.element.trigger("showCalendar.daterangepicker",this)},hideCalendars:function(){this.container.removeClass("show-calendar");this.element.trigger("hideCalendar.daterangepicker",this)},inputsChanged:function(k){var i=e(k.target);var h=f(i.val(),this.format);if(!h.isValid()){return}var g,j;if(i.attr("name")==="daterangepicker_start"){g=h;j=this.endDate}else{g=this.startDate;j=h}this.setCustomDates(g,j)},inputsKeydown:function(g){if(g.keyCode===13){this.inputsChanged(g);this.notify()}},updateInputText:function(){if(this.element.is("input")&&!this.singleDatePicker){this.element.val(this.startDate.format(this.format)+this.separator+this.endDate.format(this.format))}else{if(this.element.is("input")){this.element.val(this.endDate.format(this.format))}}},clickRange:function(i){var g=i.target.innerHTML;this.chosenLabel=g;if(g==this.locale.customRangeLabel){this.showCalendars()}else{var h=this.ranges[g];this.startDate=h[0];this.endDate=h[1];if(!this.timePicker){this.startDate.startOf("day");this.endDate.endOf("day")}this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()).hour(this.startDate.hour()).minute(this.startDate.minute());this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()).hour(this.endDate.hour()).minute(this.endDate.minute());this.updateCalendars();this.updateInputText();this.hideCalendars();this.hide();this.element.trigger("apply.daterangepicker",this)}},clickPrev:function(h){var g=e(h.target).parents(".calendar");if(g.hasClass("left")){this.leftCalendar.month.subtract(1,"month")}else{this.rightCalendar.month.subtract(1,"month")}this.updateCalendars()},clickNext:function(h){var g=e(h.target).parents(".calendar");if(g.hasClass("left")){this.leftCalendar.month.add(1,"month")}else{this.rightCalendar.month.add(1,"month")}this.updateCalendars()},hoverDate:function(i){var k=e(i.target).attr("data-title");var j=k.substr(1,1);var g=k.substr(3,1);var h=e(i.target).parents(".calendar");if(h.hasClass("left")){this.container.find("input[name=daterangepicker_start]").val(this.leftCalendar.calendar[j][g].format(this.format))}else{this.container.find("input[name=daterangepicker_end]").val(this.rightCalendar.calendar[j][g].format(this.format))}},setCustomDates:function(g,h){this.chosenLabel=this.locale.customRangeLabel;if(g.isAfter(h)){var i=this.endDate.diff(this.startDate);h=f(g).add(i,"ms")}this.startDate=g;this.endDate=h;this.updateView();this.updateCalendars()},clickDate:function(m){var n=e(m.target).attr("data-title");var o=n.substr(1,1);var j=n.substr(3,1);var h=e(m.target).parents(".calendar");var i,l;if(h.hasClass("left")){i=this.leftCalendar.calendar[o][j];l=this.endDate;if(typeof this.dateLimit==="object"){var g=f(i).add(this.dateLimit).startOf("day");if(l.isAfter(g)){l=g}}}else{i=this.startDate;l=this.rightCalendar.calendar[o][j];if(typeof this.dateLimit==="object"){var k=f(l).subtract(this.dateLimit).startOf("day");if(i.isBefore(k)){i=k}}}if(this.singleDatePicker&&h.hasClass("left")){l=i.clone()}else{if(this.singleDatePicker&&h.hasClass("right")){i=l.clone()}}h.find("td").removeClass("active");e(m.target).addClass("active");this.setCustomDates(i,l);if(!this.timePicker){l.endOf("day")}if(this.singleDatePicker&&!this.timePicker){this.clickApply()}},clickApply:function(g){this.updateInputText();this.hide();this.element.trigger("apply.daterangepicker",this)},clickCancel:function(g){this.startDate=this.oldStartDate;this.endDate=this.oldEndDate;this.chosenLabel=this.oldChosenLabel;this.updateView();this.updateCalendars();this.hide();this.element.trigger("cancel.daterangepicker",this)},updateMonthYear:function(j){var l=e(j.target).closest(".calendar").hasClass("left"),k=l?"left":"right",i=this.container.find(".calendar."+k);var h=parseInt(i.find(".monthselect").val(),10);var g=i.find(".yearselect").val();this[k+"Calendar"].month.month(h).year(g);this.updateCalendars()},updateTime:function(k){var j=e(k.target).closest(".calendar"),m=j.hasClass("left");var h=parseInt(j.find(".hourselect").val(),10);var l=parseInt(j.find(".minuteselect").val(),10);if(this.timePicker12Hour){var i=j.find(".ampmselect").val();if(i==="PM"&&h<12){h+=12}if(i==="AM"&&h===12){h=0}}if(m){var n=this.startDate.clone();n.hour(h);n.minute(l);this.startDate=n;this.leftCalendar.month.hour(h).minute(l)}else{var g=this.endDate.clone();g.hour(h);g.minute(l);this.endDate=g;this.rightCalendar.month.hour(h).minute(l)}this.updateCalendars()},updateCalendars:function(){this.leftCalendar.calendar=this.buildCalendar(this.leftCalendar.month.month(),this.leftCalendar.month.year(),this.leftCalendar.month.hour(),this.leftCalendar.month.minute(),"left");this.rightCalendar.calendar=this.buildCalendar(this.rightCalendar.month.month(),this.rightCalendar.month.year(),this.rightCalendar.month.hour(),this.rightCalendar.month.minute(),"right");this.container.find(".calendar.left").empty().html(this.renderCalendar(this.leftCalendar.calendar,this.startDate,this.minDate,this.maxDate));this.container.find(".calendar.right").empty().html(this.renderCalendar(this.rightCalendar.calendar,this.endDate,this.singleDatePicker?this.minDate:this.startDate,this.maxDate));this.container.find(".ranges li").removeClass("active");var g=true;var j=0;for(var h in this.ranges){if(this.timePicker){if(this.startDate.isSame(this.ranges[h][0])&&this.endDate.isSame(this.ranges[h][1])){g=false;this.chosenLabel=this.container.find(".ranges li:eq("+j+")").addClass("active").html()}}else{if(this.startDate.format("YYYY-MM-DD")==this.ranges[h][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[h][1].format("YYYY-MM-DD")){g=false;this.chosenLabel=this.container.find(".ranges li:eq("+j+")").addClass("active").html()}}j++}if(g){this.chosenLabel=this.container.find(".ranges li:last").addClass("active").html();this.showCalendars()}},buildCalendar:function(x,s,n,u,k){var h=f([s,x]).daysInMonth();var r=f([s,x,1]);var l=f([s,x,h]);var p=f(r).subtract(1,"month").month();var j=f(r).subtract(1,"month").year();var g=f([j,p]).daysInMonth();var v=r.day();var w;var t=[];t.firstDay=r;t.lastDay=l;for(w=0;w<6;w++){t[w]=[]}var q=g-v+this.locale.firstDay+1;if(q>g){q-=7}if(v==this.locale.firstDay){q=g-6}var y=f([j,p,q,12,u]);var m,o;for(w=0,m=0,o=0;w<42;w++,m++,y=f(y).add(24,"hour")){if(w>0&&m%7===0){m=0;o++}t[o][m]=y.clone().hour(n);y.hour(12)}return t},renderDropdowns:function(l,k,g){var p=l.month();var j='<select class="monthselect">';var h=false;var t=false;for(var i=0;i<12;i++){if((!h||i>=k.month())&&(!t||i<=g.month())){j+="<option value='"+i+"'"+(i===p?" selected='selected'":"")+">"+this.locale.monthNames[i]+"</option>"}}j+="</select>";var o=l.year();var n=(g&&g.year())||(o+5);var s=(k&&k.year())||(o-50);var r='<select class="yearselect">';for(var q=s;q<=n;q++){r+='<option value="'+q+'"'+(q===o?' selected="selected"':"")+">"+q+"</option>"}r+="</select>";return j+r},renderCalendar:function(q,o,n,h){var t='<div class="calendar-date">';t+='<table class="table-condensed">';t+="<thead>";t+="<tr>";if(this.showWeekNumbers){t+="<th></th>"}if(!n||n.isBefore(q.firstDay)){t+='<th class="prev available"><i class="fa fa-arrow-left icon-arrow-left glyphicon glyphicon-arrow-left"></i></th>'}else{t+="<th></th>"}var k=this.locale.monthNames[q[1][1].month()]+q[1][1].format(" YYYY");if(this.showDropdowns){k=this.renderDropdowns(q[1][1],n,h)}t+='<th colspan="5" class="month">'+k+"</th>";if(!h||h.isAfter(q.lastDay)){t+='<th class="next available"><i class="fa fa-arrow-right icon-arrow-right glyphicon glyphicon-arrow-right"></i></th>'}else{t+="<th></th>"}t+="</tr>";t+="<tr>";if(this.showWeekNumbers){t+='<th class="week">'+this.locale.weekLabel+"</th>"}e.each(this.locale.daysOfWeek,function(w,i){t+="<th>"+i+"</th>"});t+="</tr>";t+="</thead>";t+="<tbody>";for(var v=0;v<6;v++){t+="<tr>";if(this.showWeekNumbers){t+='<td class="week">'+q[v][0].week()+"</td>"}for(var l=0;l<7;l++){var s="available ";s+=(q[v][l].month()==q[1][1].month())?"":"off";if((n&&q[v][l].isBefore(n,"day"))||(h&&q[v][l].isAfter(h,"day"))){s=" off disabled "}else{if(q[v][l].format("YYYY-MM-DD")==o.format("YYYY-MM-DD")){s+=" active ";if(q[v][l].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")){s+=" start-date "}if(q[v][l].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")){s+=" end-date "}}else{if(q[v][l]>=this.startDate&&q[v][l]<=this.endDate){s+=" in-range ";if(q[v][l].isSame(this.startDate)){s+=" start-date "}if(q[v][l].isSame(this.endDate)){s+=" end-date "}}}}var u="r"+v+"c"+l;t+='<td class="'+s.replace(/\s+/g," ").replace(/^\s?(.*?)\s?$/,"$1")+'" data-title="'+u+'">'+q[v][l].date()+"</td>"}t+="</tr>"}t+="</tbody>";t+="</table>";t+="</div>";var p;if(this.timePicker){t+='<div class="calendar-time">';t+='<select class="hourselect">';var j=0;var m=23;var g=o.hour();if(this.timePicker12Hour){j=1;m=12;if(g>=12){g-=12}if(g===0){g=12}}for(p=j;p<=m;p++){if(p==g){t+='<option value="'+p+'" selected="selected">'+p+"</option>"}else{t+='<option value="'+p+'">'+p+"</option>"}}t+="</select> : ";t+='<select class="minuteselect">';for(p=0;p<60;p+=this.timePickerIncrement){var r=p;if(r<10){r="0"+r}if(p==o.minute()){t+='<option value="'+p+'" selected="selected">'+r+"</option>"}else{t+='<option value="'+p+'">'+r+"</option>"}}t+="</select> ";if(this.timePicker12Hour){t+='<select class="ampmselect">';if(o.hour()>=12){t+='<option value="AM">AM</option><option value="PM" selected="selected">PM</option>'}else{t+='<option value="AM" selected="selected">AM</option><option value="PM">PM</option>'}t+="</select>"}t+="</div>"}return t},remove:function(){this.container.remove();this.element.off(".daterangepicker");this.element.removeData("daterangepicker")}};e.fn.daterangepicker=function(h,g){this.each(function(){var i=e(this);if(i.data("daterangepicker")){i.data("daterangepicker").remove()}i.data("daterangepicker",new a(i,h,g))});return this}}));(function(k,e){if(k.fn.dotdotdot){return}k.fn.dotdotdot=function(y){if(this.length==0){k.fn.dotdotdot.debug('No element found for "'+this.selector+'".');return this}if(this.length>1){return this.each(function(){k(this).dotdotdot(y)})}var u=this;if(u.data("dotdotdot")){u.trigger("destroy.dot")}u.data("dotdotdot-style",u.attr("style")||"");u.css("word-wrap","break-word");if(u.css("white-space")==="nowrap"){u.css("white-space","normal")}u.bind_events=function(){u.bind("update.dot",function(B,D){B.preventDefault();B.stopPropagation();w.maxHeight=(typeof w.height=="number")?w.height:r(u);w.maxHeight+=w.tolerance;if(typeof D!="undefined"){if(typeof D=="string"||D instanceof HTMLElement){D=k("<div />").append(D).contents()}if(D instanceof k){z=D}}v=u.wrapInner('<div class="dotdotdot" />').children();v.contents().detach().end().append(z.clone(true)).find("br").replaceWith("  <br />  ").end().css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var C=false,A=false;if(t.afterElement){C=t.afterElement.clone(true);C.show();t.afterElement.detach()}if(n(v,w)){if(w.wrap=="children"){A=c(v,w,C)}else{A=p(v,u,v,w,C)}}v.replaceWith(v.contents());v=null;if(k.isFunction(w.callback)){w.callback.call(u[0],A,z)}t.isTruncated=A;return A}).bind("isTruncated.dot",function(B,A){B.preventDefault();B.stopPropagation();if(typeof A=="function"){A.call(u[0],t.isTruncated)}return t.isTruncated}).bind("originalContent.dot",function(B,A){B.preventDefault();B.stopPropagation();if(typeof A=="function"){A.call(u[0],z)}return z}).bind("destroy.dot",function(A){A.preventDefault();A.stopPropagation();u.unwatch().unbind_events().contents().detach().end().append(z).attr("style",u.data("dotdotdot-style")||"").data("dotdotdot",false)});return u};u.unbind_events=function(){u.unbind(".dot");return u};u.watch=function(){u.unwatch();if(w.watch=="window"){var C=k(window),B=C.width(),A=C.height();C.bind("resize.dot"+t.dotId,function(){if(B!=C.width()||A!=C.height()||!w.windowResizeFix){B=C.width();A=C.height();if(s){clearInterval(s)}s=setTimeout(function(){u.trigger("update.dot")},10)}})}else{x=m(u);s=setInterval(function(){var D=m(u);if(x.width!=D.width||x.height!=D.height){u.trigger("update.dot");x=m(u)}},100)}return u};u.unwatch=function(){k(window).unbind("resize.dot"+t.dotId);if(s){clearInterval(s)}return u};var z=u.contents(),w=k.extend(true,{},k.fn.dotdotdot.defaults,y),t={},x={},s=null,v=null;if(!(w.lastCharacter.remove instanceof Array)){w.lastCharacter.remove=k.fn.dotdotdot.defaultArrays.lastCharacter.remove}if(!(w.lastCharacter.noEllipsis instanceof Array)){w.lastCharacter.noEllipsis=k.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis}t.afterElement=b(w.after,u);t.isTruncated=false;t.dotId=o++;u.data("dotdotdot",true).bind_events().trigger("update.dot");if(w.watch){u.watch()}return u};k.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",fallbackToLetter:true,lastCharacter:{},tolerance:0,callback:null,after:null,height:null,watch:false,windowResizeFix:true};k.fn.dotdotdot.defaultArrays={lastCharacter:{remove:[" ","\u3000",",",";",".","!","?"],noEllipsis:[]}};k.fn.dotdotdot.debug=function(s){};var o=1;function c(v,z,y){var x=v.children(),s=false;v.empty();for(var u=0,t=x.length;u<t;u++){var w=x.eq(u);v.append(w);if(y){v.append(y)}if(n(v,z)){w.remove();s=true;break}else{if(y){y.detach()}}}return s}function p(t,u,z,y,x){var s=false;var w="table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style";var v="script";t.contents().detach().each(function(){var B=this,A=k(B);if(typeof B=="undefined"||(B.nodeType==3&&k.trim(B.data).length==0)){return true}else{if(A.is(v)){t.append(A)}else{if(s){return true}else{t.append(A);if(x){t[t.is(w)?"after":"append"](x)}if(n(z,y)){if(B.nodeType==3){s=f(A,u,z,y,x)}else{s=p(A,u,z,y,x)}if(!s){A.detach();s=true}}if(!s){if(x){x.detach()}}}}}});return s}function f(u,w,H,x,t){var E=u[0];if(!E){return false}var A=j(E),s=(A.indexOf(" ")!==-1)?" ":"\u3000",C=(x.wrap=="letter")?"":s,F=A.split(C),B=-1,I=-1,D=0,v=F.length-1;if(x.fallbackToLetter&&D==0&&v==0){C="";F=A.split(C);v=F.length-1}while(D<=v&&!(D==0&&v==0)){var y=Math.floor((D+v)/2);if(y==I){break}I=y;a(E,F.slice(0,I+1).join(C)+x.ellipsis);if(!n(H,x)){B=I;D=I}else{v=I;if(x.fallbackToLetter&&D==0&&v==0){C="";F=F[0].split(C);B=-1;I=-1;D=0;v=F.length-1}}}if(B!=-1&&!(F.length==1&&F[0].length==0)){A=h(F.slice(0,B+1).join(C),x);a(E,A)}else{var z=u.parent();u.detach();var G=(t&&t.closest(z).length)?t.length:0;if(z.contents().length>G){E=g(z.contents().eq(-1-G),w)}else{E=g(z,w,true);if(!G){z.detach()}}if(E){A=h(j(E),x);a(E,A);if(G&&t){k(E).parent().append(t)}}}return true}function n(t,s){return t.innerHeight()>s.maxHeight}function h(s,t){while(k.inArray(s.slice(-1),t.lastCharacter.remove)>-1){s=s.slice(0,-1)}if(k.inArray(s.slice(-1),t.lastCharacter.noEllipsis)<0){s+=t.ellipsis}return s}function m(s){return{width:s.innerWidth(),height:s.innerHeight()}}function a(t,s){if(t.innerText){t.innerText=s}else{if(t.nodeValue){t.nodeValue=s}else{if(t.textContent){t.textContent=s}}}}function j(s){if(s.innerText){return s.innerText}else{if(s.nodeValue){return s.nodeValue}else{if(s.textContent){return s.textContent}else{return""}}}}function l(s){do{s=s.previousSibling}while(s&&s.nodeType!==1&&s.nodeType!==3);return s}function g(t,w,s){var v=t&&t[0],u;if(v){if(!s){if(v.nodeType===3){return v}if(k.trim(t.text())){return g(t.contents().last(),w)}}u=l(v);while(!u){t=t.parent();if(t.is(w)||!t.length){return false}u=l(t[0])}if(u){return g(k(u),w)}}return false}function b(s,t){if(!s){return false}if(typeof s==="string"){s=k(s,t);return(s.length)?s:false}return !s.jquery?false:s}function r(v){var w=v.innerHeight(),u=["paddingTop","paddingBottom"];for(var x=0,t=u.length;x<t;x++){var s=parseInt(v.css(u[x]),10);if(isNaN(s)){s=0}w-=s}return w}var q=k.fn.html;k.fn.html=function(s){if(s!=e&&!k.isFunction(s)&&this.data("dotdotdot")){return this.trigger("update",[s])}return q.apply(this,arguments)};var i=k.fn.text;k.fn.text=function(s){if(s!=e&&!k.isFunction(s)&&this.data("dotdotdot")){s=k("<div />").text(s).html();return this.trigger("update",[s])}return i.apply(this,arguments)}})(jQuery);
/*!
 * fancyBox - jQuery Plugin
 * version: 2.1.5 (Fri, 14 Jun 2013)
 * requires jQuery v1.6 or later
 *
 * Examples at http://fancyapps.com/fancybox/
 * License: www.fancyapps.com/fancybox/#license
 *
 * Copyright 2012 Janis Skarnelis - janis@fancyapps.com
 *
 */
;(function(m,p,j,f){var q=j("html"),e=j(m),a=j(p),r=j.fancybox=function(){r.open.apply(this,arguments)},l=navigator.userAgent.match(/msie/i),c=null,g=p.createTouch!==f,k=function(s){return s&&s.hasOwnProperty&&s instanceof j},b=function(s){return s&&j.type(s)==="string"},n=function(s){return b(s)&&s.indexOf("%")>0},i=function(s){return(s&&!(s.style.overflow&&s.style.overflow==="hidden")&&((s.clientWidth&&s.scrollWidth>s.clientWidth)||(s.clientHeight&&s.scrollHeight>s.clientHeight)))},o=function(u,t){var s=parseInt(u,10)||0;if(t&&n(u)){s=r.getViewport()[t]/100*s}return Math.ceil(s)},h=function(s,t){return o(s,t)+"px"};j.extend(r,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:true,autoHeight:false,autoWidth:false,autoResize:true,autoCenter:!g,fitToView:true,aspectRatio:false,topRatio:0.5,leftRatio:0.5,scrolling:"auto",wrapCSS:"",arrows:true,closeBtn:true,closeClick:false,nextClick:false,mouseWheel:true,autoPlay:false,playSpeed:3000,preload:3,modal:false,loop:true,ajax:{dataType:"html",headers:{"X-fancyBox":true}},iframe:{scrolling:"auto",preload:true},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:true,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(l?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:true,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:true,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:true,title:true},onCancel:j.noop,beforeLoad:j.noop,afterLoad:j.noop,beforeShow:j.noop,afterShow:j.noop,beforeChange:j.noop,beforeClose:j.noop,afterClose:j.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:false,isOpen:false,isOpened:false,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:false},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(t,s){if(!t){return}if(!j.isPlainObject(s)){s={}}if(false===r.close(true)){return}if(!j.isArray(t)){t=k(t)?j(t).get():[t]}j.each(t,function(y,z){var x={},u,C,A,B,w,D,v;if(j.type(z)==="object"){if(z.nodeType){z=j(z)}if(k(z)){x={href:z.data("fancybox-href")||z.attr("href"),title:j("<div/>").text(z.data("fancybox-title")||z.attr("title")).html(),isDom:true,element:z};if(j.metadata){j.extend(true,x,z.metadata())}}else{x=z}}u=s.href||x.href||(b(z)?z:null);C=s.title!==f?s.title:x.title||"";A=s.content||x.content;B=A?"html":(s.type||x.type);if(!B&&x.isDom){B=z.data("fancybox-type");if(!B){w=z.prop("class").match(/fancybox\.(\w+)/);B=w?w[1]:null}}if(b(u)){if(!B){if(r.isImage(u)){B="image"}else{if(r.isSWF(u)){B="swf"}else{if(u.charAt(0)==="#"){B="inline"}else{if(b(z)){B="html";A=z}}}}}if(B==="ajax"){D=u.split(/\s+/,2);u=D.shift();v=D.shift()}}if(!A){if(B==="inline"){if(u){A=j(b(u)?u.replace(/.*(?=#[^\s]+$)/,""):u)}else{if(x.isDom){A=z}}}else{if(B==="html"){A=u}else{if(!B&&!u&&x.isDom){B="inline";A=z}}}}j.extend(x,{href:u,type:B,content:A,title:C,selector:v});t[y]=x});r.opts=j.extend(true,{},r.defaults,s);if(s.keys!==f){r.opts.keys=s.keys?j.extend({},r.defaults.keys,s.keys):false}r.group=t;return r._start(r.opts.index)},cancel:function(){var s=r.coming;if(s&&false===r.trigger("onCancel")){return}r.hideLoading();if(!s){return}if(r.ajaxLoad){r.ajaxLoad.abort()}r.ajaxLoad=null;if(r.imgPreload){r.imgPreload.onload=r.imgPreload.onerror=null}if(s.wrap){s.wrap.stop(true,true).trigger("onReset").remove()}r.coming=null;if(!r.current){r._afterZoomOut(s)}},close:function(s){r.cancel();if(false===r.trigger("beforeClose")){return}r.unbindEvents();if(!r.isActive){return}if(!r.isOpen||s===true){j(".fancybox-wrap").stop(true).trigger("onReset").remove();r._afterZoomOut()}else{r.isOpen=r.isOpened=false;r.isClosing=true;j(".fancybox-item, .fancybox-nav").remove();r.wrap.stop(true,true).removeClass("fancybox-opened");r.transitions[r.current.closeMethod]()}},play:function(u){var s=function(){clearTimeout(r.player.timer)},w=function(){s();if(r.current&&r.player.isActive){r.player.timer=setTimeout(r.next,r.current.playSpeed)}},t=function(){s();a.unbind(".player");r.player.isActive=false;r.trigger("onPlayEnd")},v=function(){if(r.current&&(r.current.loop||r.current.index<r.group.length-1)){r.player.isActive=true;a.bind({"onCancel.player beforeClose.player":t,"onUpdate.player":w,"beforeLoad.player":s});w();r.trigger("onPlayStart")}};if(u===true||(!r.player.isActive&&u!==false)){v()}else{t()}},next:function(t){var s=r.current;if(s){if(!b(t)){t=s.direction.next}r.jumpto(s.index+1,t,"next")}},prev:function(t){var s=r.current;if(s){if(!b(t)){t=s.direction.prev}r.jumpto(s.index-1,t,"prev")}},jumpto:function(t,v,s){var u=r.current;if(!u){return}t=o(t);r.direction=v||u.direction[(t>=u.index?"next":"prev")];r.router=s||"jumpto";if(u.loop){if(t<0){t=u.group.length+(t%u.group.length)}t=t%u.group.length}if(u.group[t]!==f){r.cancel();r._start(t)}},reposition:function(v,s){var u=r.current,t=u?u.wrap:null,w;if(t){w=r._getPosition(s);if(v&&v.type==="scroll"){delete w.position;t.stop(true,true).animate(w,200)}else{t.css(w);u.pos=j.extend({},u.dim,w)}}},update:function(u){var s=(u&&u.originalEvent&&u.originalEvent.type),t=!s||s==="orientationchange";if(t){clearTimeout(c);c=null}if(!r.isOpen||c){return}c=setTimeout(function(){var v=r.current;if(!v||r.isClosing){return}r.wrap.removeClass("fancybox-tmp");if(t||s==="load"||(s==="resize"&&v.autoResize)){r._setDimension()}if(!(s==="scroll"&&v.canShrink)){r.reposition(u)}r.trigger("onUpdate");c=null},(t&&!g?0:300))},toggle:function(s){if(r.isOpen){r.current.fitToView=j.type(s)==="boolean"?s:!r.current.fitToView;if(g){r.wrap.removeAttr("style").addClass("fancybox-tmp");r.trigger("onUpdate")}r.update()}},hideLoading:function(){a.unbind(".loading");j("#fancybox-loading").remove()},showLoading:function(){var t,s;r.hideLoading();t=j('<div id="fancybox-loading"><div></div></div>').click(r.cancel).appendTo("body");a.bind("keydown.loading",function(u){if((u.which||u.keyCode)===27){u.preventDefault();r.cancel()}});if(!r.defaults.fixed){s=r.getViewport();t.css({position:"absolute",top:(s.h*0.5)+s.y,left:(s.w*0.5)+s.x})}r.trigger("onLoading")},getViewport:function(){var s=(r.current&&r.current.locked)||false,t={x:e.scrollLeft(),y:e.scrollTop()};if(s&&s.length){t.w=s[0].clientWidth;t.h=s[0].clientHeight}else{t.w=g&&m.innerWidth?m.innerWidth:e.width();t.h=g&&m.innerHeight?m.innerHeight:e.height()}return t},unbindEvents:function(){if(r.wrap&&k(r.wrap)){r.wrap.unbind(".fb")}a.unbind(".fb");e.unbind(".fb")},bindEvents:function(){var t=r.current,s;if(!t){return}e.bind("orientationchange.fb"+(g?"":" resize.fb")+(t.autoCenter&&!t.locked?" scroll.fb":""),r.update);s=t.keys;if(s){a.bind("keydown.fb",function(w){var u=w.which||w.keyCode,v=w.target||w.srcElement;if(u===27&&r.coming){return false}if(!w.ctrlKey&&!w.altKey&&!w.shiftKey&&!w.metaKey&&!(v&&(v.type||j(v).is("[contenteditable]")))){j.each(s,function(x,y){if(t.group.length>1&&y[u]!==f){r[x](y[u]);w.preventDefault();return false}if(j.inArray(u,y)>-1){r[x]();w.preventDefault();return false}})}})}if(j.fn.mousewheel&&t.mouseWheel){r.wrap.bind("mousewheel.fb",function(z,A,v,u){var y=z.target||null,w=j(y),x=false;while(w.length){if(x||w.is(".fancybox-skin")||w.is(".fancybox-wrap")){break}x=i(w[0]);w=j(w).parent()}if(A!==0&&!x){if(r.group.length>1&&!t.canShrink){if(u>0||v>0){r.prev(u>0?"down":"left")}else{if(u<0||v<0){r.next(u<0?"up":"right")}}z.preventDefault()}}})}},trigger:function(t,v){var s,u=v||r.coming||r.current;if(u){if(j.isFunction(u[t])){s=u[t].apply(u,Array.prototype.slice.call(arguments,1))}if(s===false){return false}if(u.helpers){j.each(u.helpers,function(x,w){if(w&&r.helpers[x]&&j.isFunction(r.helpers[x][t])){r.helpers[x][t](j.extend(true,{},r.helpers[x].defaults,w),u)}})}}a.trigger(t)},isImage:function(s){return b(s)&&s.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(s){return b(s)&&s.match(/\.(swf)((\?|#).*)?$/i)},_start:function(t){var u={},y,s,v,w,x;t=o(t);y=r.group[t]||null;if(!y){return false}u=j.extend(true,{},r.opts,y);w=u.margin;x=u.padding;if(j.type(w)==="number"){u.margin=[w,w,w,w]}if(j.type(x)==="number"){u.padding=[x,x,x,x]}if(u.modal){j.extend(true,u,{closeBtn:false,closeClick:false,nextClick:false,arrows:false,mouseWheel:false,keys:null,helpers:{overlay:{closeClick:false}}})}if(u.autoSize){u.autoWidth=u.autoHeight=true}if(u.width==="auto"){u.autoWidth=true}if(u.height==="auto"){u.autoHeight=true}u.group=r.group;u.index=t;r.coming=u;if(false===r.trigger("beforeLoad")){r.coming=null;return}v=u.type;s=u.href;if(!v){r.coming=null;if(r.current&&r.router&&r.router!=="jumpto"){r.current.index=t;return r[r.router](r.direction)}return false}r.isActive=true;if(v==="image"||v==="swf"){u.autoHeight=u.autoWidth=false;u.scrolling="visible"}if(v==="image"){u.aspectRatio=true}if(v==="iframe"&&g){u.scrolling="scroll"}u.wrap=j(u.tpl.wrap).addClass("fancybox-"+(g?"mobile":"desktop")+" fancybox-type-"+v+" fancybox-tmp "+u.wrapCSS).appendTo(u.parent||"body");j.extend(u,{skin:j(".fancybox-skin",u.wrap),outer:j(".fancybox-outer",u.wrap),inner:j(".fancybox-inner",u.wrap)});j.each(["Top","Right","Bottom","Left"],function(A,z){u.skin.css("padding"+z,h(u.padding[A]))});r.trigger("onReady");if(v==="inline"||v==="html"){if(!u.content||!u.content.length){return r._error("content")}}else{if(!s){return r._error("href")}}if(v==="image"){r._loadImage()}else{if(v==="ajax"){r._loadAjax()}else{if(v==="iframe"){r._loadIframe()}else{r._afterLoad()}}}},_error:function(s){j.extend(r.coming,{type:"html",autoWidth:true,autoHeight:true,minWidth:0,minHeight:0,scrolling:"no",hasError:s,content:r.coming.tpl.error});r._afterLoad()},_loadImage:function(){var s=r.imgPreload=new Image();s.onload=function(){this.onload=this.onerror=null;r.coming.width=this.width/r.opts.pixelRatio;r.coming.height=this.height/r.opts.pixelRatio;r._afterLoad()};s.onerror=function(){this.onload=this.onerror=null;r._error("image")};s.src=r.coming.href;if(s.complete!==true){r.showLoading()}},_loadAjax:function(){var s=r.coming;r.showLoading();r.ajaxLoad=j.ajax(j.extend({},s.ajax,{url:s.href,error:function(t,u){if(r.coming&&u!=="abort"){r._error("ajax",t)}else{r.hideLoading()}},success:function(t,u){if(u==="success"){s.content=t;r._afterLoad()}}}))},_loadIframe:function(){var s=r.coming,t=j(s.tpl.iframe.replace(/\{rnd\}/g,new Date().getTime())).attr("scrolling",g?"auto":s.iframe.scrolling).attr("src",s.href);j(s.wrap).bind("onReset",function(){try{j(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(u){}});if(s.iframe.preload){r.showLoading();t.one("load",function(){j(this).data("ready",1);if(!g){j(this).bind("load.fb",r.update)}j(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show();r._afterLoad()})}s.content=t.appendTo(s.inner);if(!s.iframe.preload){r._afterLoad()}},_preloadImages:function(){var x=r.group,w=r.current,s=x.length,u=w.preload?Math.min(w.preload,s-1):0,v,t;for(t=1;t<=u;t+=1){v=x[(w.index+t)%s];if(v.type==="image"&&v.href){new Image().src=v.href}}},_afterLoad:function(){var t=r.coming,v=r.current,A="fancybox-placeholder",x,y,z,u,s,w;r.hideLoading();if(!t||r.isActive===false){return}if(false===r.trigger("afterLoad",t,v)){t.wrap.stop(true).trigger("onReset").remove();r.coming=null;return}if(v){r.trigger("beforeChange",v);v.wrap.stop(true).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()}r.unbindEvents();x=t;y=t.content;z=t.type;u=t.scrolling;j.extend(r,{wrap:x.wrap,skin:x.skin,outer:x.outer,inner:x.inner,current:x,previous:v});s=x.href;switch(z){case"inline":case"ajax":case"html":if(x.selector){y=j("<div>").html(y).find(x.selector)}else{if(k(y)){if(!y.data(A)){y.data(A,j('<div class="'+A+'"></div>').insertAfter(y).hide())}y=y.show().detach();x.wrap.bind("onReset",function(){if(j(this).find(y).length){y.hide().replaceAll(y.data(A)).data(A,false)}})}}break;case"image":y=x.tpl.image.replace(/\{href\}/g,s);break;case"swf":y='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+s+'"></param>';w="";j.each(x.swf,function(B,C){y+='<param name="'+B+'" value="'+C+'"></param>';w+=" "+B+'="'+C+'"'});y+='<embed src="'+s+'" type="application/x-shockwave-flash" width="100%" height="100%"'+w+"></embed></object>";break}if(!(k(y)&&y.parent().is(x.inner))){x.inner.append(y)}r.trigger("beforeShow");x.inner.css("overflow",u==="yes"?"scroll":(u==="no"?"hidden":u));r._setDimension();r.reposition();r.isOpen=false;r.coming=null;r.bindEvents();if(!r.isOpened){j(".fancybox-wrap").not(x.wrap).stop(true).trigger("onReset").remove()}else{if(v.prevMethod){r.transitions[v.prevMethod]()}}r.transitions[r.isOpened?x.nextMethod:x.openMethod]();r._preloadImages()},_setDimension:function(){var V=r.getViewport(),R=0,X=false,Z=false,D=r.wrap,P=r.skin,aa=r.inner,M=r.current,N=M.width,K=M.height,G=M.minWidth,z=M.minHeight,T=M.maxWidth,L=M.maxHeight,F=M.scrolling,x=M.scrollOutside?M.scrollbarWidth:0,J=M.margin,y=o(J[1]+J[3]),w=o(J[0]+J[2]),u,t,Q,S,I,H,O,B,A,W,v,Y,s,C,E;D.add(P).add(aa).width("auto").height("auto").removeClass("fancybox-tmp");u=o(P.outerWidth(true)-P.width());t=o(P.outerHeight(true)-P.height());Q=y+u;S=w+t;I=n(N)?(V.w-Q)*o(N)/100:N;H=n(K)?(V.h-S)*o(K)/100:K;if(M.type==="iframe"){C=M.content;if(M.autoHeight&&C.data("ready")===1){try{if(C[0].contentWindow.document.location){aa.width(I).height(9999);E=C.contents().find("body");if(x){E.css("overflow-x","hidden")}H=E.outerHeight(true)}}catch(U){}}}else{if(M.autoWidth||M.autoHeight){aa.addClass("fancybox-tmp");if(!M.autoWidth){aa.width(I)}if(!M.autoHeight){aa.height(H)}if(M.autoWidth){I=aa.width()}if(M.autoHeight){H=aa.height()}aa.removeClass("fancybox-tmp")}}N=o(I);K=o(H);A=I/H;G=o(n(G)?o(G,"w")-Q:G);T=o(n(T)?o(T,"w")-Q:T);z=o(n(z)?o(z,"h")-S:z);L=o(n(L)?o(L,"h")-S:L);O=T;B=L;if(M.fitToView){T=Math.min(V.w-Q,T);L=Math.min(V.h-S,L)}Y=V.w-y;s=V.h-w;if(M.aspectRatio){if(N>T){N=T;K=o(N/A)}if(K>L){K=L;N=o(K*A)}if(N<G){N=G;K=o(N/A)}if(K<z){K=z;N=o(K*A)}}else{N=Math.max(G,Math.min(N,T));if(M.autoHeight&&M.type!=="iframe"){aa.width(N);K=aa.height()}K=Math.max(z,Math.min(K,L))}if(M.fitToView){aa.width(N).height(K);D.width(N+u);W=D.width();v=D.height();if(M.aspectRatio){while((W>Y||v>s)&&N>G&&K>z){if(R++>19){break}K=Math.max(z,Math.min(L,K-10));N=o(K*A);if(N<G){N=G;K=o(N/A)}if(N>T){N=T;K=o(N/A)}aa.width(N).height(K);D.width(N+u);W=D.width();v=D.height()}}else{N=Math.max(G,Math.min(N,N-(W-Y)));K=Math.max(z,Math.min(K,K-(v-s)))}}if(x&&F==="auto"&&K<H&&(N+u+x)<Y){N+=x}aa.width(N).height(K);D.width(N+u);W=D.width();v=D.height();X=(W>Y||v>s)&&N>G&&K>z;Z=M.aspectRatio?(N<O&&K<B&&N<I&&K<H):((N<O||K<B)&&(N<I||K<H));j.extend(M,{dim:{width:h(W),height:h(v)},origWidth:I,origHeight:H,canShrink:X,canExpand:Z,wPadding:u,hPadding:t,wrapSpace:v-P.outerHeight(true),skinSpace:P.height()-K});if(!C&&M.autoHeight&&K>z&&K<L&&!Z){aa.height("auto")}},_getPosition:function(u){var y=r.current,t=r.getViewport(),w=y.margin,v=r.wrap.width()+w[1]+w[3],s=r.wrap.height()+w[0]+w[2],x={position:"absolute",top:w[0],left:w[3]};if(y.autoCenter&&y.fixed&&!u&&s<=t.h&&v<=t.w){x.position="fixed"}else{if(!y.locked){x.top+=t.y;x.left+=t.x}}x.top=h(Math.max(x.top,x.top+((t.h-s)*y.topRatio)));x.left=h(Math.max(x.left,x.left+((t.w-v)*y.leftRatio)));return x},_afterZoomIn:function(){var s=r.current;if(!s){return}r.isOpen=r.isOpened=true;r.wrap.css("overflow","visible").addClass("fancybox-opened");r.update();if(s.closeClick||(s.nextClick&&r.group.length>1)){r.inner.css("cursor","pointer").bind("click.fb",function(t){if(!j(t.target).is("a")&&!j(t.target).parent().is("a")){t.preventDefault();r[s.closeClick?"close":"next"]()}})}if(s.closeBtn){j(s.tpl.closeBtn).appendTo(r.skin).bind("click.fb",function(t){t.preventDefault();r.close()})}if(s.arrows&&r.group.length>1){if(s.loop||s.index>0){j(s.tpl.prev).appendTo(r.outer).bind("click.fb",r.prev)}if(s.loop||s.index<r.group.length-1){j(s.tpl.next).appendTo(r.outer).bind("click.fb",r.next)}}r.trigger("afterShow");if(!s.loop&&s.index===s.group.length-1){r.play(false)}else{if(r.opts.autoPlay&&!r.player.isActive){r.opts.autoPlay=false;r.play(true)}}},_afterZoomOut:function(s){s=s||r.current;j(".fancybox-wrap").trigger("onReset").remove();j.extend(r,{group:{},opts:{},router:false,current:null,isActive:false,isOpened:false,isOpen:false,isClosing:false,wrap:null,skin:null,outer:null,inner:null});r.trigger("afterClose",s)}});r.transitions={getOrigPosition:function(){var v=r.current,t=v.element,y=v.orig,x={},s=50,z=50,w=v.hPadding,A=v.wPadding,u=r.getViewport();if(!y&&v.isDom&&t.is(":visible")){y=t.find("img:first");if(!y.length){y=t}}if(k(y)){x=y.offset();if(y.is("img")){s=y.outerWidth();z=y.outerHeight()}}else{x.top=u.y+(u.h-z)*v.topRatio;x.left=u.x+(u.w-s)*v.leftRatio}if(r.wrap.css("position")==="fixed"||v.locked){x.top-=u.y;x.left-=u.x}x={top:h(x.top-w*v.topRatio),left:h(x.left-A*v.leftRatio),width:h(s+A),height:h(z+w)};return x},step:function(t,u){var w,y,z,s=u.prop,v=r.current,x=v.wrapSpace,A=v.skinSpace;if(s==="width"||s==="height"){w=u.end===u.start?1:(t-u.start)/(u.end-u.start);if(r.isClosing){w=1-w}y=s==="width"?v.wPadding:v.hPadding;z=t-y;r.skin[s](o(s==="width"?z:z-(x*w)));r.inner[s](o(s==="width"?z:z-(x*w)-(A*w)))}},zoomIn:function(){var w=r.current,t=w.pos,u=w.openEffect,v=u==="elastic",s=j.extend({opacity:1},t);delete s.position;if(v){t=this.getOrigPosition();if(w.openOpacity){t.opacity=0.1}}else{if(u==="fade"){t.opacity=0.1}}r.wrap.css(t).animate(s,{duration:u==="none"?0:w.openSpeed,easing:w.openEasing,step:v?this.step:null,complete:r._afterZoomIn})},zoomOut:function(){var v=r.current,t=v.closeEffect,u=t==="elastic",s={opacity:0.1};if(u){s=this.getOrigPosition();if(v.closeOpacity){s.opacity=0.1}}r.wrap.animate(s,{duration:t==="none"?0:v.closeSpeed,easing:v.closeEasing,step:u?this.step:null,complete:r._afterZoomOut})},changeIn:function(){var x=r.current,u=x.nextEffect,t=x.pos,s={opacity:1},w=r.direction,y=200,v;t.opacity=0.1;if(u==="elastic"){v=w==="down"||w==="up"?"top":"left";if(w==="down"||w==="right"){t[v]=h(o(t[v])-y);s[v]="+="+y+"px"}else{t[v]=h(o(t[v])+y);s[v]="-="+y+"px"}}if(u==="none"){r._afterZoomIn()}else{r.wrap.css(t).animate(s,{duration:x.nextSpeed,easing:x.nextEasing,complete:r._afterZoomIn})}},changeOut:function(){var u=r.previous,t=u.prevEffect,s={opacity:0.1},v=r.direction,w=200;if(t==="elastic"){s[v==="down"||v==="up"?"top":"left"]=(v==="up"||v==="left"?"-":"+")+"="+w+"px"}u.wrap.animate(s,{duration:t==="none"?0:u.prevSpeed,easing:u.prevEasing,complete:function(){j(this).trigger("onReset").remove()}})}};r.helpers.overlay={defaults:{closeClick:true,speedOut:200,showEarly:true,css:{},locked:!g,fixed:true},overlay:null,fixed:false,el:j("html"),create:function(t){var s;t=j.extend({},this.defaults,t);if(this.overlay){this.close()}s=r.coming?r.coming.parent:t.parent;this.overlay=j('<div class="fancybox-overlay"></div>').appendTo(s&&s.lenth?s:"body");this.fixed=false;if(t.fixed&&r.defaults.fixed){this.overlay.addClass("fancybox-overlay-fixed");this.fixed=true}},open:function(t){var s=this;t=j.extend({},this.defaults,t);if(this.overlay){this.overlay.unbind(".overlay").width("auto").height("auto")}else{this.create(t)}if(!this.fixed){e.bind("resize.overlay",j.proxy(this.update,this));this.update()}if(t.closeClick){this.overlay.bind("click.overlay",function(u){if(j(u.target).hasClass("fancybox-overlay")){if(r.isActive){r.close()}else{s.close()}return false}})}this.overlay.css(t.css).show()},close:function(){e.unbind("resize.overlay");if(this.el.hasClass("fancybox-lock")){j(".fancybox-margin").removeClass("fancybox-margin");this.el.removeClass("fancybox-lock");e.scrollTop(this.scrollV).scrollLeft(this.scrollH)}j(".fancybox-overlay").remove().hide();j.extend(this,{overlay:null,fixed:false})},update:function(){var t="100%",s;this.overlay.width(t).height("100%");if(l){s=Math.max(p.documentElement.offsetWidth,p.body.offsetWidth);if(a.width()>s){t=a.width()}}else{if(a.width()>e.width()){t=a.width()}}this.overlay.width(t).height(a.height())},onReady:function(t,u){var s=this.overlay;j(".fancybox-overlay").stop(true,true);if(!s){this.create(t)}if(t.locked&&this.fixed&&u.fixed){u.locked=this.overlay.append(u.wrap);u.fixed=false}if(t.showEarly===true){this.beforeShow.apply(this,arguments)}},beforeShow:function(s,t){if(t.locked&&!this.el.hasClass("fancybox-lock")){if(this.fixPosition!==false){j("*").filter(function(){return(j(this).css("position")==="fixed"&&!j(this).hasClass("fancybox-overlay")&&!j(this).hasClass("fancybox-wrap"))}).addClass("fancybox-margin")}this.el.addClass("fancybox-margin");this.scrollV=e.scrollTop();this.scrollH=e.scrollLeft();this.el.addClass("fancybox-lock");e.scrollTop(this.scrollV).scrollLeft(this.scrollH)}this.open(s)},onUpdate:function(){if(!this.fixed){this.update()}},afterClose:function(s){if(this.overlay&&!r.coming){this.overlay.fadeOut(s.speedOut,j.proxy(this.close,this))}}};r.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(t){var v=r.current,x=v.title,s=t.type,w,u;if(j.isFunction(x)){x=x.call(v.element,v)}if(!b(x)||j.trim(x)===""){return}w=j('<div class="fancybox-title fancybox-title-'+s+'-wrap">'+x+"</div>");switch(s){case"inside":u=r.skin;break;case"outside":u=r.wrap;break;case"over":u=r.inner;break;default:u=r.skin;w.appendTo("body");if(l){w.width(w.width())}w.wrapInner('<span class="child"></span>');r.current.margin[2]+=Math.abs(o(w.css("margin-bottom")));break}w[(t.position==="top"?"prependTo":"appendTo")](u)}};j.fn.fancybox=function(u){var t,v=j(this),s=this.selector||"",w=function(A){var z=j(this).blur(),x=t,y,B;if(!(A.ctrlKey||A.altKey||A.shiftKey||A.metaKey)&&!z.is(".fancybox-wrap")){y=u.groupAttr||"data-fancybox-group";B=z.attr(y);if(!B){y="rel";B=z.get(0)[y]}if(B&&B!==""&&B!=="nofollow"){z=s.length?j(s):v;z=z.filter("["+y+'="'+B+'"]');x=z.index(this)}u.index=x;if(r.open(z,u)!==false){A.preventDefault()}}};u=u||{};t=u.index||0;if(!s||u.live===false){v.unbind("click.fb-start").bind("click.fb-start",w)}else{a.undelegate(s,"click.fb-start").delegate(s+":not('.fancybox-item, .fancybox-nav')","click.fb-start",w)}this.filter("[data-fancybox-start=1]").trigger("click");return this};a.ready(function(){if(j.scrollbarWidth===f){j.scrollbarWidth=function(){var t=j('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),u=t.children(),s=u.innerWidth()-u.height(99).innerWidth();t.remove();return s}}if(j.support.fixedPosition===f){j.support.fixedPosition=(function(){var t=j('<div style="position:fixed;top:20px;"></div>').appendTo("body"),s=(t[0].offsetTop===20||t[0].offsetTop===15);t.remove();return s}())}j.extend(r.defaults,{scrollbarWidth:j.scrollbarWidth(),fixed:j.support.fixedPosition,parent:j("body")})});a.load(function(){var t,s;t=j(m).width();q.addClass("fancybox-lock-test");s=j(m).width();q.removeClass("fancybox-lock-test");j("<style type='text/css'>.fancybox-margin{margin-right:"+(s-t)+"px !important;}</style>").appendTo("head")})}(window,document,jQuery));(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(a){a.fn.keepInView=function(b){return this.each(function(h,c){var c=a(c),j=c.clone(true),g=a('<div class="keepInViewMarker"></div>');c.before(g);if(!b){b={}}var f=g.offset().top,n=k(),l=m();function e(){c.before(j);var o={W:j.outerWidth(),H:j.outerHeight(),P:j.css("padding")};j.remove();return o}function m(o){if(o==undefined){o=e()}return{display:"block",height:o.H,padding:o.P,position:"relative",top:"initial",width:o.W,zIndex:"initial"}}function k(q){if(q==undefined){q=e()}var p=a.extend({},b,{height:q.H,position:"fixed",top:0,width:q.W,zIndex:1001});var o=parseInt(p.height);if(p.padding!==undefined){o+=2*parseInt(p.padding);o=o+"px"}else{if(p.paddingTop!==undefined){o+=parseInt(p.paddingTop)}if(p.paddingBottom!==undefined){o+=parseInt(p.paddingBottom)}o=o+"px"}p.height=o;return p}var i=function(p){var o="stickyElem",r=(p.data&&p.data.forceReload);if(r){var q=e();l=m(q);n=k(q)}if(a(window).scrollTop()>f){if(!c.hasClass(o)||r){c.addClass(o).css(n)}}else{if(c.hasClass(o)||r){c.removeClass(o).css(l)}}};a(window).on("resize.sticky",{forceReload:true},i).on("scroll.sticky",i).trigger("scroll")})}}));
/*!jQuery Knob*/
(function(e){var b={},a=Math.max,c=Math.min;b.c={};b.c.d=e(document);b.c.t=function(f){return f.originalEvent.touches.length-1};b.o=function(){var f=this;this.o=null;this.$=null;this.i=null;this.g=null;this.v=null;this.cv=null;this.x=0;this.y=0;this.$c=null;this.c=null;this.t=0;this.isInit=false;this.fgColor=null;this.pColor=null;this.dH=null;this.cH=null;this.eH=null;this.rH=null;this.run=function(){var g=function(j,i){var h;for(h in i){f.o[h]=i[h]}f.init();f._configure()._draw()};if(this.$.data("kontroled")){return}this.$.data("kontroled",true);this.extend();this.o=e.extend({min:this.$.data("min")||0,max:this.$.data("max")||100,stopper:true,readOnly:this.$.data("readonly"),cursor:(this.$.data("cursor")===true&&30)||this.$.data("cursor")||0,thickness:this.$.data("thickness")||0.35,width:this.$.data("width")||200,height:this.$.data("height")||200,displayInput:this.$.data("displayinput")==null||this.$.data("displayinput"),displayPrevious:this.$.data("displayprevious"),fgColor:this.$.data("fgcolor")||"#87CEEB",inline:false,draw:null,change:null,cancel:null,release:null},this.o);if(this.$.is("fieldset")){this.v={};this.i=this.$.find("input");this.i.each(function(h){var i=e(this);f.i[h]=i;f.v[h]=i.val();i.bind("change",function(){var j={};j[h]=i.val();f.val(j)})});this.$.find("legend").remove()}else{this.i=this.$;this.v=this.$.val();(this.v=="")&&(this.v=this.o.min);this.$.bind("change",function(){f.val(f.$.val())})}(!this.o.displayInput)&&this.$.hide();this.$c=e('<canvas width="'+this.o.width+'px" height="'+this.o.height+'px"></canvas>');this.c=this.$c[0].getContext("2d");this.$.wrap(e('<div style="'+(this.o.inline?"display:inline;":"")+"width:"+this.o.width+"px;height:"+this.o.height+'px;"></div>')).before(this.$c);if(this.v instanceof Object){this.cv={};this.copy(this.v,this.cv)}else{this.cv=this.v}this.$.bind("configure",g).parent().bind("configure",g);this._listen()._configure()._xy().init();this.isInit=true;this._draw();return this};this._draw=function(){var g=true,h=document.createElement("canvas");h.width=f.o.width;h.height=f.o.height;f.g=h.getContext("2d");f.clear();f.dH&&(g=f.dH());(g!==false)&&f.draw();f.c.drawImage(h,0,0);h=null};this._touch=function(g){var h=function(j){var i=f.xy2val(j.originalEvent.touches[f.t].pageX,j.originalEvent.touches[f.t].pageY);if(i==f.cv){return}if(f.cH&&(f.cH(i)===false)){return}f.change(i);f._draw()};this.t=b.c.t(g);h(g);b.c.d.bind("touchmove.k",h).bind("touchend.k",function(){b.c.d.unbind("touchmove.k touchend.k");if(f.rH&&(f.rH(f.cv)===false)){return}f.val(f.cv)});return this};this._mouse=function(h){var g=function(j){var i=f.xy2val(j.pageX,j.pageY);if(i==f.cv){return}if(f.cH&&(f.cH(i)===false)){return}f.change(i);f._draw()};g(h);b.c.d.bind("mousemove.k",g).bind("keyup.k",function(i){if(i.keyCode===27){b.c.d.unbind("mouseup.k mousemove.k keyup.k");if(f.eH&&(f.eH()===false)){return}f.cancel()}}).bind("mouseup.k",function(i){b.c.d.unbind("mousemove.k mouseup.k keyup.k");if(f.rH&&(f.rH(f.cv)===false)){return}f.val(f.cv)});return this};this._xy=function(){var g=this.$c.offset();this.x=g.left;this.y=g.top;return this};this._listen=function(){if(!this.o.readOnly){this.$c.bind("mousedown",function(g){g.preventDefault();f._xy()._mouse(g)}).bind("touchstart",function(g){g.preventDefault();f._xy()._touch(g)});this.listen()}else{this.$.attr("readonly","readonly")}return this};this._configure=function(){if(this.o.draw){this.dH=this.o.draw}if(this.o.change){this.cH=this.o.change}if(this.o.cancel){this.eH=this.o.cancel}if(this.o.release){this.rH=this.o.release}if(this.o.displayPrevious){this.pColor=this.h2rgba(this.o.fgColor,"0.4");this.fgColor=this.h2rgba(this.o.fgColor,"0.6")}else{this.fgColor=this.o.fgColor}return this};this._clear=function(){this.$c[0].width=this.$c[0].width};this.listen=function(){};this.extend=function(){};this.init=function(){};this.change=function(g){};this.val=function(g){};this.xy2val=function(g,h){};this.draw=function(){};this.clear=function(){this._clear()};this.h2rgba=function(j,g){var i;j=j.substring(1,7);i=[parseInt(j.substring(0,2),16),parseInt(j.substring(2,4),16),parseInt(j.substring(4,6),16)];return"rgba("+i[0]+","+i[1]+","+i[2]+","+g+")"};this.copy=function(j,h){for(var g in j){h[g]=j[g]}}};b.Dial=function(){b.o.call(this);this.startAngle=null;this.xy=null;this.radius=null;this.lineWidth=null;this.cursorExt=null;this.w2=null;this.PI2=2*Math.PI;this.extend=function(){this.o=e.extend({bgColor:this.$.data("bgcolor")||"#EEEEEE",angleOffset:this.$.data("angleoffset")||0,angleArc:this.$.data("anglearc")||360,inline:true},this.o)};this.val=function(f){if(null!=f){this.cv=this.o.stopper?a(c(f,this.o.max),this.o.min):f;this.v=this.cv;this.$.val(this.v);this._draw()}else{return this.v}};this.xy2val=function(f,i){var g,h;g=Math.atan2(f-(this.x+this.w2),-(i-this.y-this.w2))-this.angleOffset;if(this.angleArc!=this.PI2&&(g<0)&&(g>-0.5)){g=0}else{if(g<0){g+=this.PI2}}h=~~(0.5+(g*(this.o.max-this.o.min)/this.angleArc))+this.o.min;this.o.stopper&&(h=a(c(h,this.o.max),this.o.min));return h};this.listen=function(){var g=this,k=function(p){p.preventDefault();var o=p.originalEvent,m=o.detail||o.wheelDeltaX,l=o.detail||o.wheelDeltaY,n=parseInt(g.$.val())+(m>0||l>0?1:m<0||l<0?-1:0);if(g.cH&&(g.cH(n)===false)){return}g.val(n)},i,j,f=1,h={37:-1,38:1,39:1,40:-1};this.$.bind("keydown",function(n){var m=n.keyCode;if(m>=96&&m<=105){m=n.keyCode=m-48}i=parseInt(String.fromCharCode(m));if(isNaN(i)){(m!==13)&&(m!==8)&&(m!==9)&&(m!==189)&&n.preventDefault();if(e.inArray(m,[37,38,39,40])>-1){n.preventDefault();var l=parseInt(g.$.val())+h[m]*f;g.o.stopper&&(l=a(c(l,g.o.max),g.o.min));g.change(l);g._draw();j=window.setTimeout(function(){f*=2},30)}}}).bind("keyup",function(l){if(isNaN(i)){if(j){window.clearTimeout(j);j=null;f=1;g.val(g.$.val())}}else{(g.$.val()>g.o.max&&g.$.val(g.o.max))||(g.$.val()<g.o.min&&g.$.val(g.o.min))}});this.$c.bind("mousewheel DOMMouseScroll",k);this.$.bind("mousewheel DOMMouseScroll",k)};this.init=function(){if(this.v<this.o.min||this.v>this.o.max){this.v=this.o.min}this.$.val(this.v);this.w2=this.o.width/2;this.cursorExt=this.o.cursor/100;this.xy=this.w2;this.lineWidth=this.xy*this.o.thickness;this.radius=this.xy-this.lineWidth/2;this.o.angleOffset&&(this.o.angleOffset=isNaN(this.o.angleOffset)?0:this.o.angleOffset);this.o.angleArc&&(this.o.angleArc=isNaN(this.o.angleArc)?this.PI2:this.o.angleArc);this.angleOffset=this.o.angleOffset*Math.PI/180;this.angleArc=this.o.angleArc*Math.PI/180;this.startAngle=1.5*Math.PI+this.angleOffset;this.endAngle=1.5*Math.PI+this.angleOffset+this.angleArc;var f=a(String(Math.abs(this.o.max)).length,String(Math.abs(this.o.min)).length,2)+2;this.o.displayInput&&this.i.css({width:((this.o.width/2+4)>>0)+"px",height:((this.o.width/3)>>0)+"px",position:"absolute","vertical-align":"middle","margin-top":((this.o.width/3)>>0)+"px","margin-left":"-"+((this.o.width*3/4+2)>>0)+"px",border:0,background:"none",font:"bold "+((this.o.width/f)>>0)+"px Arial","text-align":"center",color:this.o.fgColor,padding:"0px","-webkit-appearance":"none"})||this.i.css({width:"0px",visibility:"hidden"})};this.change=function(f){this.cv=f;this.$.val(f)};this.angle=function(f){return(f-this.o.min)*this.angleArc/(this.o.max-this.o.min)};this.draw=function(){var l=this.g,g=this.angle(this.cv),h=this.startAngle,i=h+g,f,j,k=1;l.lineWidth=this.lineWidth;this.o.cursor&&(h=i-this.cursorExt)&&(i=i+this.cursorExt);l.beginPath();l.strokeStyle=this.o.bgColor;l.arc(this.xy,this.xy,this.radius,this.endAngle,this.startAngle,true);l.stroke();if(this.o.displayPrevious){j=this.startAngle+this.angle(this.v);f=this.startAngle;this.o.cursor&&(f=j-this.cursorExt)&&(j=j+this.cursorExt);l.beginPath();l.strokeStyle=this.pColor;l.arc(this.xy,this.xy,this.radius,f,j,false);l.stroke();k=(this.cv==this.v)}l.beginPath();l.strokeStyle=k?this.o.fgColor:this.fgColor;l.arc(this.xy,this.xy,this.radius,h,i,false);l.stroke()};this.cancel=function(){this.val(this.v)}};e.fn.dial=e.fn.knob=function(f){return this.each(function(){var g=new b.Dial();g.o=f;g.$=e(this);g.run()}).parent()}})(jQuery);if($.fn&&$.fn.dialog){$.fn.extend($.ui.dialog.prototype,{_parentInit:$.ui.dialog.prototype._init,uiDialogExtClasses:{spinner:"ui-dialog-spinner"},_init:function(){this._parentInit();if(typeof(this.options.spinnerOnAjax)=="undefined"){this.options.spinnerOnAjax=true}},content:function(a){$(this.element).html(a);var b=$(a).attr("title")||$(a).data("title");$(this.element).dialog("option","title",b);$(this.element).dialog("option","position","center")},append:function(a){$(a).appendTo($(this.element))},title:function(a){$(this.uiDialogTitlebar).children(".ui-dialog-title").html(a)},loading:function(f){var b=$(this.element).css("padding-left");var c=$(this.element).css("padding-top");var a=$(this.element).width();var e=$(this.element).height();if(a<this.options.minWidth){a=this.options.minWidth}if(a<this.options.width){a=this.options.width}if(e<this.options.minWidth){e=this.options.minHeight}if(e<this.options.width){e=this.options.height}f=$.extend({},{title:"Loading",spinnerClass:this.uiDialogExtClasses.spinner},f);if(this.options.spinnerOnAjax){var g=$("<div title='Processing...'><div class='"+f.spinnerClass+"' style='min-width: "+a+"px; min-height: "+e+"px;'></div></div>");$(this.element).dialog("content",g)}},ajax:function(c){var b=$(this.element);b.dialog("loading");var a=c.success?c.success:null;var e=c.error?c.error:null;c.success=function(g){try{$.parseJSON(g)}catch(f){b.dialog("content",g)}if(a){a(g)}};c.error=function(h){try{if(typeof(h)=="object"){b.dialog("content",h.responseText)}else{var g=$.parseJSON(h);b.dialog("content",g.responseText)}}catch(f){if(typeof(h)!==object){b.dialog("content",h)}}if(e){e(h)}};$.ajax(c)}})}(function(a,e){if(a.ui&&a.ui.dialog&&a.browser.webkit){a.ui.dialog.overlay.events=a.map("focus,keydown,keypress".split(","),function(f){return f+".dialog-overlay"}).join(" ")}var b=a.ui.dialog.prototype.open;a.ui.dialog.prototype.open=function(){a("html").css("overflow-y","hidden");var h=a(this.uiDialog),g=h.parent(".ui-dialog-wrapper");if(g.length===0){h.wrap('<div class="ui-dialog-wrapper" tabindex="-2"></div>').show()}else{g.show()}b.apply(this,arguments);var f=parseInt(h.css("z-index"),10);if(!isNaN(f)){h.parent(".ui-dialog-wrapper").css("z-index",f);h.css("z-index",(f+1))}};var c=a.ui.dialog.prototype.close;a.ui.dialog.prototype.close=function(){a("html").css("overflow-y","initial");var f=a(this.uiDialog).parent(".ui-dialog-wrapper");c.apply(this,arguments);if(f.length&&!f.find(".ui-dialog").length){f.remove()}else{f.hide()}}}(jQuery));(function(c){var b={left:"50%",top:100,smartPositioning:true,smartPositioningOptions:{minimumHeight:450,loadingHeigth:120},modal:true,loaderStyle:{},blockerStyle:{background:"#fff",opacity:0.8},text:"",textStyle:{color:"#565656",fontWeight:"bold"},zIndex:4,loaderClass:"loader",blockerClass:"blocker",textClass:"loader-text",additionalLoaderClass:"",additionalBlockClass:""};var a;c.fn.loader=function(f,o){a=c.extend({},b,o);var k=c(this);k.children("."+a.loaderClass).remove();k.children("."+a.blockerClass).remove();if(f=="open"){if(a.smartPositioning&&k.height()<a.smartPositioningOptions.minimumHeight){a.top=((k.height()-a.smartPositioningOptions.loadingHeigth)/2)}var j=a.top;a.top=a.top+"px";if(k.css("position")!="absolute"&&k.css("position")!="fixed"){k.css({position:"relative"})}var m=c("<div></div>");m.addClass(a.loaderClass).css({zIndex:a.zIndex+1,position:"absolute",textAlign:"center",cursor:"wait"}).css(a.loaderStyle).addClass(a.additionalLoaderClass);var l="50%";var e="50%";if(a.top.length!=0){l=a.top;e=a.left.length!=0?a.left:e}else{if(a.left.length!=0){e=a.left;l=a.left.top!=0?a.top:l;m.css({backgroundPosition:e+" "+l})}}m.css({backgroundPosition:e+" "+l});k.append(m);if(a.text.length!=0){var n=c("<div></div>").html(a.text).addClass(a.textClass).css({position:"absolute"}).css(a.textStyle);m.append(n);n.css({left:((k.width()-n.width())/2),top:(j-n.height()-10)})}if(a.modal){var h=c.extend(true,{},a.blockerStyle);if(typeof h!="undefined"){var i=h.opacity;delete h.opacity}var g=c("<div></div>");g.addClass(a.blockerClass);g.css({position:"absolute",top:"0px",left:"0px",zIndex:a.zIndex,width:"100%",height:"100%",cursor:"wait"}).css(h);g.addClass(a.additionalBlockClass);if(typeof i!="undefined"){g.fadeTo(0,i)}k.append(g)}}return k.each(function(){})}})(jQuery);(function(e){var l=false;var j={identifier:null,input:null,target:{label:"Extra notes",hidden:false},hideButton:{labelHide:"&laquo; Switch to short form",labelShow:"&raquo; Switch to long form",classButton:false,active:false,toggle:true},format:{label:"DETAILS",labelDelimeter:": ",rowDelimeter:"\n",emptyValue:"not set"},prefix:"mergeinput-",classSuccess:"success",classError:"error",callback:{init:function(t,u){},show:function(t,u){t.stop(true,true).show("slow",function(){e(this).css({overflow:"inherit"})})},showTarget:function(t,u){t.filter(":hidden").stop(true,true).show("slow",function(){e(this).css({overflow:"inherit"})})},hide:function(t,u){t.stop(true,true).hide("slow");t.children().remove();f("Input deactivation completed")},hideTarget:function(t,u){t.filter(":visible").val("").stop(true,true).hide("slow")},initHideButton:function(t,v){var u=e("<div></div>").html(v.hideButton.labelHide).css({cursor:"pointer"});if(v.hideButton.classButton){u.addClass(v.hideButton.classButton)}u.on("click.mergeinput",function(){v.callback.clickHideButton(t,v)});t.prepend(u)},initShowButton:function(t,v){var u=e("<div></div>").html(v.hideButton.labelShow).css({cursor:"pointer"});if(v.hideButton.classButton){u.addClass(v.hideButton.classButton)}u.on("click.mergeinput",function(){v.callback.clickShowButton(t,v)});t.prepend(u)},clickHideButton:function(t,u){t.data(u.prefix+"id",null);u.callback.setactive(t,false);t.children().remove();if(u.target.hidden){u.callback.showTarget(e(u.target.selector),u)}u.callback.reset(t,u);if(u.hideButton.toggle){u.callback.initShowButton(t,u)}},clickShowButton:function(t,u){t.mergeinput("init",u)},reset:function(t,u){t.data(u.prefix+"id",null);if(e.yvalidate.isNotEmpty(u.target.selector)&&e(u.target.selector).length>0){e(u.target.selector).data(u.prefix+"set",null)}},focus:function(u,v){var t=e(this);if(v.classSuccess){t.removeClass(v.classSuccess)}if(v.classError){t.removeClass(v.classError)}},tip:function(w,u,t,v,x){u.append(w)},error:function(u,t,v){alert(t)},format:function(v,w){var t="";if(e.yvalidate.isString(w.format.label)){t+=w.format.label+w.format.rowDelimeter;e.each(w.format.label,function(){t+="-"});t+=w.format.rowDelimeter}if(e.yvalidate.isNotEmpty(w.target.selector)&&e(w.target.selector).length>0&&!w.target.hidden){var u=e("<div></div>").html(w.target.label).clone().children().remove().end().text().trim();v.mergeinputtarget={label:u,value:e(w.target.selector).val()}}e.each(v,function(y,x){if(x.value!==false){t+=p(x.label)+": "+x.value+w.format.rowDelimeter}});return t},setactive:function(t,u){t.data("active",u)}}};var q;e.fn.mergeinput=function(w,v){var u=e(this);var t=t;if(e.isFunction(o[w])){t=o[w].call(this,u,v)}return e.inArray(w,["validate","values","formattedValues","isActive"])!==-1?t:u};var o={init:function(t,u){q=m(u);s(t,false);f(q);if(!i()){return}if(e.yvalidate.isNotEmpty(q.target.selector)&&e(q.target.selector).length>0&&e(q.target.selector).data(q.prefix+"set")){return}s(t,true);if(t.data(q.prefix+"id")&&q.identifier&&t.data(q.prefix+"id")==q.identifier){return}var v=true;if(q.startHidden){s(t,false);v=false;delete q.startHidden;t.children().remove()}if(q.hideButton.active&&v){q.callback.initHideButton(t,q)}if(v){a(t);q.callback.init(t,q)}if(q.hideButton.active){if(v){q.callback.initHideButton(t,q)}else{q.callback.initShowButton(t,q)}}if(q.target.hidden){q.callback.hideTarget(e(q.target.selector),q)}},validate:function(t){if(!n(t)){return f("Plugin not initialised.")}return k(t)},values:function(t){if(!n(t)){return f("Plugin not initialised.")}return b(t)},formattedValues:function(t){if(!n(t)){return f("Plugin not initialised.")}return q.callback.format(b(t),q)},setTargetWithFormattedValues:function(t){if(!n(t)){return f("Plugin not initialised.")}if(e.yvalidate.isNotEmpty(q.target.selector)&&e(q.target.selector).length>0&&!e(q.target.selector).data(q.prefix+"set")){e(q.target.selector).val(q.callback.format(b(t),q)).data(q.prefix+"set",true);if(q.target.hidden){q.callback.showTarget(e(q.target.selector),q)}}else{return f("Target selector is not valid.")}},hide:function(t){if(!n(t)){return}s(t,false);t.data(q.prefix+"id",null);q.callback.hide(t,q);if(q.target.hidden){q.callback.showTarget(e(q.target.selector),q)}},reset:function(t){q.callback.reset(t,q)},isActive:function(t,u){return n(t)}};var m=function(t){e.each(["callback","target","hideButton","format"],function(w,u){if(t[u]){t[u]=e.extend(true,{},j[u],t[u])}});return e.extend(true,{},j,t)};var n=function(t,u){return(typeof t.data("active")!="undefined")&&t.data("active")?true:false};var s=function(t,u){t.data("active",u)};var i=function(){var t=true;if(!g(e.yvalidate.exists(q.input,"Input param"))){return false}if(!g(e.yvalidate.isObject(q.input,"Input param"))){t=false}e.each(q.input,function(u,v){if(!r(u,v,'Input item "'+u+'": ')){t=false}});if(!g(e.yvalidate.isObject(q.target,"Target param"))){t=false}if(!g(e.yvalidate.exists(q.target.selector,"Target param: selector "))){t=false}if(e.yvalidate.exists(q.target.label)&&!g(e.yvalidate.isString(q.target.label,"Target param: label "))){t=false}if(!g(e.yvalidate.isObject(q.callback,"Callback param"))){t=false}else{e.each(q.callback,function(u,v){if(!g(e.yvalidate.isFunction(v,'Callback param "'+u+'": '))){t=false}})}if(t){f("Plugin initialised successfully")}return t};var r=function(v,x,t){var w=true;if(!g(e.yvalidate.isObject(x,t))){w=false}if(v.indexOf("spacer")==0){q.input[v].type=x.type="spacer"}var u=["text","dropdown","checkbox","textarea","spacer"];if(!g(e.yvalidate.exists(x.type,t+"type"))){w=false}else{if(!g(e.yvalidate.inArray(x.type,u,t+"type"))){w=false}}if(x.type==="dropdown"){if(!g(e.yvalidate.exists(x.values,t+"values"))){w=false}else{if(e.yvalidate.exists(x.values)&&!g(e.yvalidate.isObject(x.values,t+"values"))){w=false}}if(e.yvalidate.exists(x.emptyValue)&&!g(e.yvalidate.isString(x.emptyValue,t+"emptyValue"))){w=false}}if(x.type==="checkbox"){if(!g(e.yvalidate.exists(x.values,t+"values"))){w=false}else{if(e.yvalidate.exists(x.values)&&!g(e.yvalidate.isObject(x.values,t+"values"))){w=false}}if(e.yvalidate.exists(x.emptyValue)&&!g(e.yvalidate.isString(x.emptyValue,t+"emptyValue"))){w=false}e.each(x.values,function(z,y){if(e.yvalidate.isString(y)){y={label:y,value:y}}if(!g(e.yvalidate.exists(y.label,t+"values"))){w=false}if(!g(e.yvalidate.exists(y.value,t+"values"))){w=false}if(e.yvalidate.exists(y.checkClass)&&!g(e.yvalidate.isString(y.checkClass,t+"emptyValue"))){w=false}if(e.yvalidate.exists(y.labelClass)&&!g(e.yvalidate.isString(y.labelClass,t+"emptyValue"))){w=false}})}if(e.yvalidate.exists(x.label)&&!g(e.yvalidate.isString(x.label,t+"label"))){w=false}if(e.yvalidate.exists(x.value)&&!g(e.yvalidate.isString(x.value,t+"value"))){w=false}if(e.yvalidate.exists(x.wrapperClass)&&!g(e.yvalidate.isString(x.wrapperClass,t+"wrapperClass"))){w=false}if(e.yvalidate.exists(x.labelClass)&&!g(e.yvalidate.isString(x.labelClass,t+"labelClass"))){w=false}if(e.yvalidate.exists(x.inputClass)&&!g(e.yvalidate.isString(x.inputClass,t+"inputClass"))){w=false}if(e.yvalidate.exists(x.tip)&&!g(e.yvalidate.isString(x.tip,t+"tip"))){w=false}if(e.yvalidate.exists(x.placeholder)&&!g(e.yvalidate.isString(x.placeholder,t+"placeholder"))){w=false}if(e.yvalidate.exists(x.validation)){if(!g(e.yvalidate.isObject(x.validation,t+"validation"))){w=false}else{e.each(x.validation,function(z,y){if(!h(z,y,t+"validation")){w=false}})}}if(x.type==="spacer"){if(e.yvalidate.exists(x.css)&&!g(e.yvalidate.isString(x.css,t+"css"))){w=false}if(e.yvalidate.exists(x.cssClass)&&!g(e.yvalidate.isString(x.cssClass,t+"class"))){w=false}}return w};var h=function(w,u,t){var v=true;if(!g(e.yvalidate.isFunction(e.yvalidate[w],t+"type"))){v=false}if(e.yvalidate.inArray(w,["isLessThan","isMoreThan","isLessCharThan","isMoreCharThan"])){if(!e.yvalidate.isInt(u,t+" "+w)){v=false}}else{if(w==="isNotEmpty"){if(!g(e.yvalidate.isBoolean(u,t+" "+w))){v=false}}}return v};var a=function(t){var u=e("<div></div>");e.each(q.input,function(y,z){var A=e("<div></div>");var x;var w;var v=q.prefix+y;if(z.type==="spacer"){if(z.css){A.css(z.css)}if(z.wrapperClass){A.addClass(z.wrapperClass)}if(z.cssClass){A.addClass(z.cssClass)}A.addClass(q.prefix+"spacer")}else{if(z.label){x=e("<label>").html(z.label)}if(z.type==="text"){w=e("<input>").attr("type","text");if(z.value){w.val(z.value)}if(z.placeholder){w.attr("placeholder",z.placeholder)}}else{if(z.type==="textarea"){w=e("<textarea></textarea>").attr("rows",7);if(z.value){w.html(z.value)}if(z.placeholder){w.attr("placeholder",z.placeholder)}}else{if(z.type==="dropdown"){w=e("<select></select>");if(z.emptyValue){w.append(e("<option></option>").val("").html(z.emptyValue))}e.each(z.values,function(D,C){var B=e("<option></option>").val(C).html(C);if(z.value===C){B.attr("selected","selected")}w.append(B)})}else{if(z.type==="checkbox"){w=e("<div></div>");e.each(z.values,function(F,D){var E=c(D.value);var C=e('<input type="checkbox"></checkbox>').val(D.value).attr("name",D.value).attr("id",E);var B=e("<label></label>").attr("for",E).html(D.label);if(z.value===D.value){C.attr("checked","checked");C.addClass("selected")}if(D.checkClass){C.addClass(D.checkClass)}if(D.labelClass){B.addClass(D.labelClass)}C.on("change",function(I){I.preventDefault();var H=e(this);var G=H.siblings('label[for="'+H.attr("id")+'"]');if(H.is(":checked")){G.addClass("selected")}else{G.removeClass("selected")}});B.on("click",function(G){G.preventDefault();C.click()});w.append(C).append(B);if(D.breakline){w.append("<br>")}})}}}}w.addClass(v).on("focus.mergeinput",function(){var B=e(this);q.callback.focus(B,q)});if(z.wrapperClass){A.addClass(z.wrapperClass)}if(w&&z.inputClass){w.addClass(z.inputClass)}if(z.tip){q.callback.tip(z.tip,x,w,z.type,q)}if(x&&z.labelClass){x.addClass(z.labelClass)}if(w&&t.find("."+v).length>0&&t.find("."+v).val().length>0){w.val(t.find("."+v).val())}A.append(x).append(w)}u.append(A)});t.hide("fast");t.children().remove();if(q.identifier){t.data(q.prefix+"id",q.identifier)}t.append(u.children());q.callback.show(t,q);f("Input initialisation completed")};var k=function(t){var u=false;e.each(q.input,function(y,B){var v="."+q.prefix+y;var x=t.find(v);x.val(e.trim(x.val()));var z=/<(\w+)[^>]*>.*<\/\1>/gi;var w=B.label;if(typeof w!="undefined"){w=w.replace(z,"").trim()}var A=x.val();if(B.validation){e.each(B.validation,function(D,E){var C=false;if(D=="isNotEmpty"&&B.type=="dropdown"&&!e.yvalidate.inArray(A,B.values)){C=e.yvalidate.isNotEmpty("",w)}else{if(e.yvalidate.inArray(D,["inArray","isLessThan","isMoreThan","isLessCharThan","isMoreCharThan"])){C=e.yvalidate[D].call(this,A,E,w)}else{C=e.yvalidate[D].call(this,A,w)}}if(C===true){if(q.classSuccess){x.addClass(q.classSuccess)}}else{if(q.classError){x.addClass(q.classError)}q.callback.error(x,C,q);u=true;return false}})}});return !u};var b=function(t){var u={};e.each(q.input,function(y,A){if(A.type!="spacer"){var v="."+q.prefix+y;var x=t.find(v);var z;if(A.type=="checkbox"){z=[];e.each(x.find(":checked"),function(B,C){z.push(e(C).val())});z=z.join(", ")}else{z=x.val()}var w=e("<div></div>").html(A.label).clone().children().remove().end().text().trim();if(e.yvalidate.isNotEmpty(z)&&(!A.ignoreValues||e.inArray(z,A.ignoreValues)==-1)){u[y]={label:w,value:z}}}});return u};function g(t){if(t===true){return true}f(t);return false}function f(t){if(l){console.log("MERGE INPUT - ",t)}return false}function p(t){return t.charAt(0).toUpperCase()+t.slice(1)}function c(t){return t.replace("[]","").replace("][","_").replace("[","_").replace("]","").replace(" ","_")}})(jQuery);(function(b){function a(e){this.input=e;if(e.attr("type")=="password"){this.handlePassword()}b(e[0].form).submit(function(){if(e.hasClass("placeholder")&&e[0].value==e.attr("placeholder")){e[0].value=""}})}a.prototype={show:function(g){if(this.input[0].value===""||(g&&this.valueIsPlaceholder())){if(this.isPassword){try{this.input[0].setAttribute("type","text")}catch(f){this.input.before(this.fakePassword.show()).hide()}}this.input.addClass("placeholder");this.input[0].value=this.input.attr("placeholder")}},hide:function(){if(this.valueIsPlaceholder()&&this.input.hasClass("placeholder")){this.input.removeClass("placeholder");this.input[0].value="";if(this.isPassword){try{this.input[0].setAttribute("type","password")}catch(f){}this.input.show();this.input[0].focus()}}},valueIsPlaceholder:function(){return this.input[0].value==this.input.attr("placeholder")},handlePassword:function(){var e=this.input;e.attr("realType","password");this.isPassword=true;if(b.browser.msie&&e[0].outerHTML){var f=b(e[0].outerHTML.replace(/type=(['"])?password\1/gi,"type=$1text$1"));this.fakePassword=f.val(e.attr("placeholder")).addClass("placeholder").focus(function(){e.trigger("focus");b(this).hide()});b(e[0].form).submit(function(){f.remove();e.show()})}}};var c=!!("placeholder" in document.createElement("input"));b.fn.placeholder=function(){return c?this:this.each(function(){var e=b(this);if(typeof e.attr("placeholder")=="undefined"){return}var f=new a(e);f.show(true);e.focus(function(){f.hide()});e.blur(function(){f.show(false)});if(b.browser.msie){b(window).load(function(){if(e.val()){e.removeClass("placeholder")}f.show(true)});e.focus(function(){if(this.value==""){var g=this.createTextRange();g.collapse(true);g.moveStart("character",0);g.select()}})}})}})(jQuery);!function(bb,aT){function a0(f,b){for(var g,a=[],c=0;c<f.length;++c){if(g=aU[f[c]]||aZ(f[c]),!g){throw"module definition dependecy not found: "+f[c]}a.push(g)}b.apply(null,a)}function a6(c,a,b){if("string"!=typeof c){throw"invalid module definition, module id must be defined and be a string"}if(a===aT){throw"invalid module definition, dependencies must be specified"}if(b===aT){throw"invalid module definition, definition function must be specified"}a0(a,function(){aU[c]=b.apply(null,arguments)})}function aV(a){return !!aU[a]}function aZ(b){for(var e=bb,a=b.split(/[.\/]/),c=0;c<a.length;++c){if(!e[a[c]]){return}e=e[a[c]]}return e}function bf(h){for(var e=0;e<h.length;e++){for(var f=bb,g=h[e],b=g.split(/[.\/]/),c=0;c<b.length-1;++c){f[b[c]]===aT&&(f[b[c]]={}),f=f[b[c]]}f[b[b.length-1]]=aU[g]}}var aU={},aS="moxie/core/utils/Basic",bd="moxie/core/I18n",a2="moxie/core/utils/Mime",bc="moxie/core/utils/Env",ba="moxie/core/utils/Dom",a7="moxie/core/Exceptions",aY="moxie/core/EventTarget",a1="moxie/core/utils/Encode",a8="moxie/runtime/Runtime",aR="moxie/runtime/RuntimeClient",aO="moxie/file/Blob",aQ="moxie/file/File",aA="moxie/file/FileInput",bg="moxie/file/FileDrop",aP="moxie/runtime/RuntimeTarget",be="moxie/file/FileReader",aj="moxie/core/utils/Url",ag="moxie/file/FileReaderSync",aE="moxie/xhr/FormData",ai="moxie/xhr/XMLHttpRequest",an="moxie/runtime/Transporter",av="moxie/image/Image",aB="moxie/runtime/html5/Runtime",ao="moxie/runtime/html5/file/Blob",aq="moxie/core/utils/Events",ap="moxie/runtime/html5/file/FileInput",aC="moxie/runtime/html5/file/FileDrop",az="moxie/runtime/html5/file/FileReader",aw="moxie/runtime/html5/xhr/XMLHttpRequest",am="moxie/runtime/html5/utils/BinaryReader",a3="moxie/runtime/html5/image/JPEGHeaders",af="moxie/runtime/html5/image/ExifParser",aD="moxie/runtime/html5/image/JPEG",aN="moxie/runtime/html5/image/PNG",ay="moxie/runtime/html5/image/ImageInfo",aW="moxie/runtime/html5/image/MegaPixel",ac="moxie/runtime/html5/image/Image",a5="moxie/runtime/flash/Runtime",ae="moxie/runtime/flash/file/Blob",ad="moxie/runtime/flash/file/FileInput",ab="moxie/runtime/flash/file/FileReader",aM="moxie/runtime/flash/file/FileReaderSync",au="moxie/runtime/flash/xhr/XMLHttpRequest",aa="moxie/runtime/flash/runtime/Transporter",ar="moxie/runtime/flash/image/Image",al="moxie/runtime/silverlight/Runtime",aX="moxie/runtime/silverlight/file/Blob",a9="moxie/runtime/silverlight/file/FileInput",a4="moxie/runtime/silverlight/file/FileDrop",aH="moxie/runtime/silverlight/file/FileReader",aK="moxie/runtime/silverlight/file/FileReaderSync",aJ="moxie/runtime/silverlight/xhr/XMLHttpRequest",ah="moxie/runtime/silverlight/runtime/Transporter",ax="moxie/runtime/silverlight/image/Image",aL="moxie/runtime/html4/Runtime",aF="moxie/runtime/html4/file/FileInput",aI="moxie/runtime/html4/file/FileReader",ak="moxie/runtime/html4/xhr/XMLHttpRequest",aG="moxie/runtime/html4/image/Image";a6(aS,[],function(){var p=function(c){var a;return c===a?"undefined":null===c?"null":c.nodeType?"node":{}.toString.call(c).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()},y=function(a){var c;return h(arguments,function(f,e){e>0&&h(f,function(l,i){l!==c&&(p(a[i])===p(l)&&~w(p(l),["array","object"])?y(a[i],l):a[i]=l)})}),a},h=function(u,l){var B,f,s,A;if(u){try{B=u.length}catch(c){B=A}if(B===A){for(f in u){if(u.hasOwnProperty(f)&&l(u[f],f)===!1){return}}}else{for(s=0;B>s;s++){if(l(u[s],s)===!1){return}}}}},k=function(a){var c;if(!a||"object"!==p(a)){return !0}for(c in a){return !1}return !0},b=function(c,l){function a(i){"function"===p(c[i])&&c[i](function(n){++i<f&&!n?a(i):l(n)})}var e=0,f=c.length;"function"!==p(l)&&(l=function(){}),c&&c.length||l(),a(e)},g=function(l,c){var a=0,f=l.length,n=new Array(f);h(l,function(i,o){i(function(s){if(s){return c(s)}var r=[].slice.call(arguments);r.shift(),n[o]=r,a++,a===f&&(n.unshift(null),c.apply(this,n))})})},w=function(f,c){if(c){if(Array.prototype.indexOf){return Array.prototype.indexOf.call(c,f)}for(var l=0,a=c.length;a>l;l++){if(c[l]===f){return l}}}return -1},z=function(c,f){var a=[];"array"!==p(c)&&(c=[c]),"array"!==p(f)&&(f=[f]);for(var e in c){-1===w(c[e],f)&&a.push(c[e])}return a.length?a:!1},x=function(f,c){var a=[];return h(f,function(i){-1!==w(i,c)&&a.push(i)}),a.length?a:null},v=function(c){var a,f=[];for(a=0;a<c.length;a++){f[a]=c[a]}return f},j=function(){var a=0;return function(e){var f=(new Date).getTime().toString(32),c;for(c=0;5>c;c++){f+=Math.floor(65535*Math.random()).toString(32)}return(e||"o_")+f+(a++).toString(32)}}(),q=function(a){return a?String.prototype.trim?String.prototype.trim.call(a):a.toString().replace(/^\s*/,"").replace(/\s*$/,""):a},m=function(c){if("string"!=typeof c){return c}var a={t:1099511627776,g:1073741824,m:1048576,k:1024},f;return c=/^([0-9]+)([mgk]?)$/.exec(c.toLowerCase().replace(/[^0-9mkg]/g,"")),f=c[2],c=+c[1],a.hasOwnProperty(f)&&(c*=a[f]),c};return{guid:j,typeOf:p,extend:y,each:h,isEmptyObj:k,inSeries:b,inParallel:g,inArray:w,arrayDiff:z,arrayIntersect:x,toArray:v,trim:q,parseSizeStr:m}}),a6(bd,[aS],function(b){var a={};return{addI18n:function(c){return b.extend(a,c)},translate:function(c){return a[c]||c},_:function(c){return this.translate(c)},sprintf:function(c){var e=[].slice.call(arguments,1);return c.replace(/%[a-z]/g,function(){var f=e.shift();return"undefined"!==b.typeOf(f)?f:""})}}}),a6(a2,[aS,bd],function(c,b){var f="application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mp3 mpga mpega mp2,audio/x-wav,wav,audio/x-m4a,m4a,audio/ogg,oga ogg,audio/aiff,aiff aif,audio/flac,flac,audio/aac,aac,audio/ac3,ac3,audio/x-ms-wma,wma,image/bmp,bmp,image/gif,gif,image/jpeg,jpg jpeg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gpp 3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,video/ogg,ogv,video/x-matroska,mkv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe",a={mimes:{},extensions:{},addMimeType:function(k){var h=k.split(/,/),l,g,j;for(l=0;l<h.length;l+=2){for(j=h[l+1].split(/ /),g=0;g<j.length;g++){this.mimes[j[g]]=h[l]}this.extensions[h[l]]=j}},extList2mimes:function(j,p){var h=this,l,m,e,k,g=[];for(m=0;m<j.length;m++){for(l=j[m].extensions.split(/\s*,\s*/),e=0;e<l.length;e++){if("*"===l[e]){return[]}if(k=h.mimes[l[e]]){-1===c.inArray(k,g)&&g.push(k)}else{if(!p||!/^\w+$/.test(l[e])){return[]}g.push("."+l[e])}}}return g},mimes2exts:function(g){var h=this,e=[];return c.each(g,function(i){if("*"===i){return e=[],!1}var j=i.match(/^(\w+)\/(\*|\w+)$/);j&&("*"===j[2]?c.each(h.extensions,function(l,k){new RegExp("^"+j[1]+"/").test(k)&&[].push.apply(e,h.extensions[k])}):h.extensions[i]&&[].push.apply(e,h.extensions[i]))}),e},mimes2extList:function(h){var e=[],g=[];return"string"===c.typeOf(h)&&(h=c.trim(h).split(/\s*,\s*/)),g=this.mimes2exts(h),e.push({title:b.translate("Files"),extensions:g.length?g.join(","):"*"}),e.mimes=h,e},getFileExtension:function(h){var g=h&&h.match(/\.([^.]+)$/);return g?g[1].toLowerCase():""},getFileMime:function(g){return this.mimes[this.getFileExtension(g)]||""}};return a.addMimeType(f),a}),a6(bc,[aS],function(f){function b(m,v,k){var l=0,h=0,j=0,p={dev:-6,alpha:-5,a:-5,beta:-4,b:-4,RC:-3,rc:-3,"#":-2,p:1,pl:1},w=function(i){return i=(""+i).replace(/[_\-+]/g,"."),i=i.replace(/([^.\d]+)/g,".$1.").replace(/\.{2,}/g,"."),i.length?i.split("."):[-8]},q=function(i){return i?isNaN(i)?p[i]||-7:parseInt(i,10):0};for(m=w(m),v=w(v),h=Math.max(m.length,v.length),l=0;h>l;l++){if(m[l]!=v[l]){if(m[l]=q(m[l]),v[l]=q(v[l]),m[l]<v[l]){j=-1;break}if(m[l]>v[l]){j=1;break}}}if(!k){return j}switch(k){case">":case"gt":return j>0;case">=":case"ge":return j>=0;case"<=":case"le":return 0>=j;case"==":case"=":case"eq":return 0===j;case"<>":case"!=":case"ne":return 0!==j;case"":case"<":case"lt":return 0>j;default:return null}}var g=function(N){var A="",G="?",J="function",C="undefined",F="object",Q="major",B="model",x="name",P="type",I="vendor",O="version",M="architecture",K="console",D="mobile",H="tablet",L={has:function(i,h){return -1!==h.toLowerCase().indexOf(i.toLowerCase())},lowerize:function(h){return h.toLowerCase()}},q={rgx:function(){for(var R,i=0,y,S,E,w,m,v,r=arguments;i<r.length;i+=2){var o=r[i],e=r[i+1];if(typeof R===C){R={};for(E in e){w=e[E],typeof w===F?R[w[0]]=N:R[w]=N}}for(y=S=0;y<o.length;y++){if(m=o[y].exec(this.getUA())){for(E=0;E<e.length;E++){v=m[++S],w=e[E],typeof w===F&&w.length>0?2==w.length?R[w[0]]=typeof w[1]==J?w[1].call(this,v):w[1]:3==w.length?R[w[0]]=typeof w[1]!==J||w[1].exec&&w[1].test?v?v.replace(w[1],w[2]):N:v?w[1].call(this,v,w[2]):N:4==w.length&&(R[w[0]]=v?w[3].call(this,v.replace(w[1],w[2])):N):R[w]=v?v:N}break}}if(m){break}}return R},str:function(l,h){for(var m in h){if(typeof h[m]===F&&h[m].length>0){for(var e=0;e<h[m].length;e++){if(L.has(h[m][e],l)){return m===G?N:m}}}else{if(L.has(h[m],l)){return m===G?N:m}}}return l}},j={browser:{oldsafari:{major:{1:["/8","/1","/3"],2:"/4","?":"/"},version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",RT:"ARM"}}}},k={browser:[[/(opera\smini)\/((\d+)?[\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/((\d+)?[\w\.-]+)/i,/(opera).+version\/((\d+)?[\w\.]+)/i,/(opera)[\/\s]+((\d+)?[\w\.]+)/i],[x,O,Q],[/\s(opr)\/((\d+)?[\w\.]+)/i],[[x,"Opera"],O,Q],[/(kindle)\/((\d+)?[\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?((\d+)?[\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?((\d+)?[\w\.]*)/i,/(?:ms|\()(ie)\s((\d+)?[\w\.]+)/i,/(rekonq)((?:\/)[\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron)\/((\d+)?[\w\.-]+)/i],[x,O,Q],[/(trident).+rv[:\s]((\d+)?[\w\.]+).+like\sgecko/i],[[x,"IE"],O,Q],[/(yabrowser)\/((\d+)?[\w\.]+)/i],[[x,"Yandex"],O,Q],[/(comodo_dragon)\/((\d+)?[\w\.]+)/i],[[x,/_/g," "],O,Q],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?((\d+)?[\w\.]+)/i],[x,O,Q],[/(dolfin)\/((\d+)?[\w\.]+)/i],[[x,"Dolphin"],O,Q],[/((?:android.+)crmo|crios)\/((\d+)?[\w\.]+)/i],[[x,"Chrome"],O,Q],[/((?:android.+))version\/((\d+)?[\w\.]+)\smobile\ssafari/i],[[x,"Android Browser"],O,Q],[/version\/((\d+)?[\w\.]+).+?mobile\/\w+\s(safari)/i],[O,Q,[x,"Mobile Safari"]],[/version\/((\d+)?[\w\.]+).+?(mobile\s?safari|safari)/i],[O,Q,x],[/webkit.+?(mobile\s?safari|safari)((\/[\w\.]+))/i],[x,[Q,q.str,j.browser.oldsafari.major],[O,q.str,j.browser.oldsafari.version]],[/(konqueror)\/((\d+)?[\w\.]+)/i,/(webkit|khtml)\/((\d+)?[\w\.]+)/i],[x,O,Q],[/(navigator|netscape)\/((\d+)?[\w\.-]+)/i],[[x,"Netscape"],O,Q],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?((\d+)?[\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/((\d+)?[\w\.-]+)/i,/(mozilla)\/((\d+)?[\w\.]+).+rv\:.+gecko\/\d+/i,/(uc\s?browser|polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|qqbrowser)[\/\s]?((\d+)?[\w\.]+)/i,/(links)\s\(((\d+)?[\w\.]+)/i,/(gobrowser)\/?((\d+)?[\w\.]+)*/i,/(ice\s?browser)\/v?((\d+)?[\w\._]+)/i,/(mosaic)[\/\s]((\d+)?[\w\.]+)/i],[x,O,Q]],engine:[[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[x,O],[/rv\:([\w\.]+).*(gecko)/i],[O,x]],os:[[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[x,[O,q.str,j.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[x,"Windows"],[O,q.str,j.os.windows.version]],[/\((bb)(10);/i],[[x,"BlackBerry"],O],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)\/([\w\.]+)/i,/(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego)[\/\s-]?([\w\.]+)*/i],[x,O],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[x,"Symbian"],O],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[x,"Firefox OS"],O],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[x,O],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[x,"Chromium OS"],O],[/(sunos)\s?([\w\.]+\d)*/i],[[x,"Solaris"],O],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[x,O],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[x,"iOS"],[O,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i],[x,[O,/_/g,"."]],[/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(macintosh|mac(?=_powerpc)|plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos)/i,/(unix)\s?([\w\.]+)*/i],[x,O]]},z=function(h){var i=h||(window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:A);this.getBrowser=function(){return q.rgx.apply(this,k.browser)},this.getEngine=function(){return q.rgx.apply(this,k.engine)},this.getOS=function(){return q.rgx.apply(this,k.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS()}},this.getUA=function(){return i},this.setUA=function(l){return i=l,this},this.setUA(i)};return(new z).getResult()}(),a=function(){var e={define_property:function(){return !1}(),create_canvas:function(){var h=document.createElement("canvas");return !(!h.getContext||!h.getContext("2d"))}(),return_response_type:function(j){try{if(-1!==f.inArray(j,["","text","document"])){return !0}if(window.XMLHttpRequest){var k=new XMLHttpRequest;if(k.open("get","/"),"responseType" in k){return k.responseType=j,k.responseType!==j?!1:!0}}}catch(h){}return !1},use_data_uri:function(){var h=new Image;return h.onload=function(){e.use_data_uri=1===h.width&&1===h.height},setTimeout(function(){h.src="data:image/gif;base64,R0lGODlhAQABAIAAAP8AAAAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw=="},1),!1}(),use_data_uri_over32kb:function(){return e.use_data_uri&&("IE"!==c.browser||c.version>=9)},use_data_uri_of:function(h){return e.use_data_uri&&33000>h||e.use_data_uri_over32kb()},use_fileinput:function(){var h=document.createElement("input");return h.setAttribute("type","file"),!h.disabled}};return function(j){var h=[].slice.call(arguments);return h.shift(),"function"===f.typeOf(e[j])?e[j].apply(this,h):!!e[j]}}(),c={can:a,browser:g.browser.name,version:parseFloat(g.browser.major),os:g.os.name,osVersion:g.os.version,verComp:b,swf_url:"../flash/Moxie.swf",xap_url:"../silverlight/Moxie.xap",global_event_dispatcher:"moxie.core.EventTarget.instance.dispatchEvent"};return c.OS=c.os,c}),a6(ba,[bc],function(j){var f=function(a){return"string"!=typeof a?a:document.getElementById(a)},l=function(i,a){if(!i.className){return !1}var m=new RegExp("(^|\\s+)"+a+"(\\s+|$)");return m.test(i.className)},c=function(i,a){l(i,a)||(i.className=i.className?i.className.replace(/\s+$/,"")+" "+a:a)},h=function(i,a){if(i.className){var m=new RegExp("(^|\\s+)"+a+"(\\s+|$)");i.className=i.className.replace(m,function(p,o,q){return" "===o&&" "===q?" ":""})}},k=function(i,a){return i.currentStyle?i.currentStyle[a]:window.getComputedStyle?window.getComputedStyle(i,null)[a]:void 0},b=function(y,p){function q(u){var o,A,a=0,s=0;return u&&(A=u.getBoundingClientRect(),o="CSS1Compat"===z.compatMode?z.documentElement:z.body,a=A.left+o.scrollLeft,s=A.top+o.scrollTop),{x:a,y:s}}var e=0,m=0,w,z=document,x,v;if(y=y,p=p||z.body,y&&y.getBoundingClientRect&&"IE"===j.browser&&(!z.documentMode||z.documentMode<8)){return x=q(y),v=q(p),{x:x.x-v.x,y:x.y-v.y}}for(w=y;w&&w!=p&&w.nodeType;){e+=w.offsetLeft||0,m+=w.offsetTop||0,w=w.offsetParent}for(w=y.parentNode;w&&w!=p&&w.nodeType;){e-=w.scrollLeft||0,m-=w.scrollTop||0,w=w.parentNode}return{x:e,y:m}},g=function(a){return{w:a.offsetWidth||a.clientWidth,h:a.offsetHeight||a.clientHeight}};return{get:f,hasClass:l,addClass:c,removeClass:h,getStyle:k,getPos:b,getSize:g}}),a6(a7,[aS],function(b){function a(f,c){var g;for(g in f){if(f[g]===c){return g}}return null}return{RuntimeError:function(){function e(f){this.code=f,this.name=a(c,f),this.message=this.name+": RuntimeError "+this.code}var c={NOT_INIT_ERR:1,NOT_SUPPORTED_ERR:9,JS_ERR:4};return b.extend(e,c),e.prototype=Error.prototype,e}(),OperationNotAllowedException:function(){function c(f){this.code=f,this.name="OperationNotAllowedException"}return b.extend(c,{NOT_ALLOWED_ERR:1}),c.prototype=Error.prototype,c}(),ImageError:function(){function e(f){this.code=f,this.name=a(c,f),this.message=this.name+": ImageError "+this.code}var c={WRONG_FORMAT:1,MAX_RESOLUTION_ERR:2};return b.extend(e,c),e.prototype=Error.prototype,e}(),FileException:function(){function e(f){this.code=f,this.name=a(c,f),this.message=this.name+": FileException "+this.code}var c={NOT_FOUND_ERR:1,SECURITY_ERR:2,ABORT_ERR:3,NOT_READABLE_ERR:4,ENCODING_ERR:5,NO_MODIFICATION_ALLOWED_ERR:6,INVALID_STATE_ERR:7,SYNTAX_ERR:8};return b.extend(e,c),e.prototype=Error.prototype,e}(),DOMException:function(){function e(f){this.code=f,this.name=a(c,f),this.message=this.name+": DOMException "+this.code}var c={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25};return b.extend(e,c),e.prototype=Error.prototype,e}(),EventException:function(){function c(f){this.code=f,this.name="EventException"}return b.extend(c,{UNSPECIFIED_EVENT_TYPE_ERR:0}),c.prototype=Error.prototype,c}()}}),a6(aY,[a7,aS],function(b,a){function c(){var e={};a.extend(this,{uid:null,init:function(){this.uid||(this.uid=a.guid("uid_"))},addEventListener:function(k,g,j,l){var f=this,h;return k=a.trim(k),/\s/.test(k)?void a.each(k.split(/\s+/),function(i){f.addEventListener(i,g,j,l)}):(k=k.toLowerCase(),j=parseInt(j,10)||0,h=e[this.uid]&&e[this.uid][k]||[],h.push({fn:g,priority:j,scope:l||this}),e[this.uid]||(e[this.uid]={}),void (e[this.uid][k]=h))},hasEventListener:function(f){return f?!(!e[this.uid]||!e[this.uid][f]):!!e[this.uid]},removeEventListener:function(h,f){h=h.toLowerCase();var g=e[this.uid]&&e[this.uid][h],j;if(g){if(f){for(j=g.length-1;j>=0;j--){if(g[j].fn===f){g.splice(j,1);break}}}else{g=[]}g.length||(delete e[this.uid][h],a.isEmptyObj(e[this.uid])&&delete e[this.uid])}},removeAllEventListeners:function(){e[this.uid]&&delete e[this.uid]},dispatchEvent:function(j){var f,g,n,q,p={},m=!0,h;if("string"!==a.typeOf(j)){if(q=j,"string"!==a.typeOf(q.type)){throw new b.EventException(b.EventException.UNSPECIFIED_EVENT_TYPE_ERR)}j=q.type,q.total!==h&&q.loaded!==h&&(p.total=q.total,p.loaded=q.loaded),p.async=q.async||!1}if(-1!==j.indexOf("::")?!function(i){f=i[0],j=i[1]}(j.split("::")):f=this.uid,j=j.toLowerCase(),g=e[f]&&e[f][j]){g.sort(function(l,i){return i.priority-l.priority}),n=[].slice.call(arguments),n.shift(),p.type=j,n.unshift(p);var k=[];a.each(g,function(i){n[0].target=i.scope,k.push(p.async?function(l){setTimeout(function(){l(i.fn.apply(i.scope,n)===!1)},1)}:function(l){l(i.fn.apply(i.scope,n)===!1)})}),k.length&&a.inSeries(k,function(i){m=!i})}return m},bind:function(){this.addEventListener.apply(this,arguments)},unbind:function(){this.removeEventListener.apply(this,arguments)},unbindAll:function(){this.removeAllEventListeners.apply(this,arguments)},trigger:function(){return this.dispatchEvent.apply(this,arguments)},convertEventPropsToHandlers:function(g){var h;"array"!==a.typeOf(g)&&(g=[g]);for(var f=0;f<g.length;f++){h="on"+g[f],"function"===a.typeOf(this[h])?this.addEventListener(g[f],this[h]):"undefined"===a.typeOf(this[h])&&(this[h]=null)}}})}return c.instance=new c,c}),a6(a1,[],function(){var c=function(g){return unescape(encodeURIComponent(g))},b=function(g){return decodeURIComponent(escape(g))},f=function(z,q){if("function"==typeof window.atob){return q?b(window.atob(z)):window.atob(z)}var w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",g,k,C,E,D,B,v,A,y=0,x=0,j="",t=[];if(!z){return z}z+="";do{E=w.indexOf(z.charAt(y++)),D=w.indexOf(z.charAt(y++)),B=w.indexOf(z.charAt(y++)),v=w.indexOf(z.charAt(y++)),A=E<<18|D<<12|B<<6|v,g=A>>16&255,k=A>>8&255,C=255&A,t[x++]=64==B?String.fromCharCode(g):64==v?String.fromCharCode(g,k):String.fromCharCode(g,k,C)}while(y<z.length);return j=t.join(""),q?b(j):j},a=function(F,q){if(q&&c(F),"function"==typeof window.btoa){return window.btoa(F)}var x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e,k,D,G,E,C,w,B,A=0,y=0,j="",v=[];if(!F){return F}do{e=F.charCodeAt(A++),k=F.charCodeAt(A++),D=F.charCodeAt(A++),B=e<<16|k<<8|D,G=B>>18&63,E=B>>12&63,C=B>>6&63,w=63&B,v[y++]=x.charAt(G)+x.charAt(E)+x.charAt(C)+x.charAt(w)}while(A<F.length);j=v.join("");var z=F.length%3;return(z?j.slice(0,z-3):j)+"===".slice(z||3)};return{utf8_encode:c,utf8_decode:b,atob:f,btoa:a}}),a6(a8,[aS,ba,aY],function(f,b,h){function a(i,e,p,t,q){var o=this,j,m=f.guid(e+"_"),k=q||"browser";i=i||{},g[m]=this,p=f.extend({access_binary:!1,access_image_binary:!1,display_media:!1,do_cors:!1,drag_and_drop:!1,filter_by_extension:!0,resize_image:!1,report_upload_progress:!1,return_response_headers:!1,return_response_type:!1,return_status_code:!0,send_custom_headers:!1,select_file:!1,select_folder:!1,select_multiple:!0,send_binary_string:!1,send_browser_cookies:!0,send_multipart:!0,slice_blob:!1,stream_upload:!1,summon_file_dialog:!1,upload_filesize:!0,use_http_method:!0},p),i.preferred_caps&&(k=a.getMode(t,i.preferred_caps,k)),j=function(){var l={};return{exec:function(v,w,s,u){return j[w]&&(l[v]||(l[v]={context:this,instance:new j[w]}),l[v].instance[s])?l[v].instance[s].apply(this,u):void 0},removeInstance:function(n){delete l[n]},removeAllInstances:function(){var r=this;f.each(l,function(s,n){"function"===f.typeOf(s.instance.destroy)&&s.instance.destroy.call(s.context),r.removeInstance(n)})}}}(),f.extend(this,{initialized:!1,uid:m,type:e,mode:a.getMode(t,i.required_caps,k),shimid:m+"_container",clients:0,options:i,can:function(l,v){var s=arguments[2]||p;if("string"===f.typeOf(l)&&"undefined"===f.typeOf(v)&&(l=a.parseCaps(l)),"object"===f.typeOf(l)){for(var u in l){if(!this.can(u,l[u],s)){return !1}}return !0}return"function"===f.typeOf(s[l])?s[l].call(this,v):v===s[l]},getShimContainer:function(){var r,l=b.get(this.shimid);return l||(r=this.options.container?b.get(this.options.container):document.body,l=document.createElement("div"),l.id=this.shimid,l.className="moxie-shim moxie-shim-"+this.type,f.extend(l.style,{position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden"}),r.appendChild(l),r=null),l},getShim:function(){return j},shimExec:function(r,l){var s=[].slice.call(arguments,2);return o.getShim().exec.call(this,this.uid,r,l,s)},exec:function(r,l){var s=[].slice.call(arguments,2);return o[r]&&o[r][l]?o[r][l].apply(this,s):o.shimExec.apply(this,arguments)},destroy:function(){if(o){var l=b.get(this.shimid);l&&l.parentNode.removeChild(l),j&&j.removeAllInstances(),this.unbindAll(),delete g[this.uid],this.uid=null,m=o=j=l=null}}}),this.mode&&i.required_caps&&!this.can(i.required_caps)&&(this.mode=!1)}var c={},g={};return a.order="html5,flash,silverlight,html4",a.getRuntime=function(i){return g[i]?g[i]:!1},a.addConstructor=function(j,i){i.prototype=h.instance,c[j]=i},a.getConstructor=function(i){return c[i]||null},a.getInfo=function(j){var i=a.getRuntime(j);return i?{uid:i.uid,type:i.type,mode:i.mode,can:function(){return i.can.apply(i,arguments)}}:null},a.parseCaps=function(e){var i={};return"string"!==f.typeOf(e)?e||{}:(f.each(e.split(","),function(j){i[j]=!0}),i)},a.can=function(k,i){var m,j=a.getConstructor(k),l;return j?(m=new j({required_caps:i}),l=m.mode,m.destroy(),!!l):!1},a.thatCan=function(k,i){var l=(i||a.order).split(/\s*,\s*/);for(var j in l){if(a.can(l[j],k)){return l[j]}}return null},a.getMode=function(j,l,e){var k=null;if("undefined"===f.typeOf(e)&&(e="browser"),l&&!f.isEmptyObj(j)){if(f.each(l,function(q,m){if(j.hasOwnProperty(m)){var p=j[m](q);if("string"==typeof p&&(p=[p]),k){if(!(k=f.arrayIntersect(k,p))){return k=!1}}else{k=p}}}),k){return -1!==f.inArray(e,k)?e:k[0]}if(k===!1){return !1}}return e},a.capTrue=function(){return !0},a.capFalse=function(){return !1},a.capTest=function(i){return function(){return !!i}},a}),a6(aR,[a7,aS,a8],function(c,b,f){return function a(){var e;b.extend(this,{connectRuntime:function(i){function j(l){var m,k;return l.length?(m=l.shift(),(k=f.getConstructor(m))?(e=new k(i),e.bind("Init",function(){e.initialized=!0,setTimeout(function(){e.clients++,g.trigger("RuntimeInit",e)},1)}),e.bind("Error",function(){e.destroy(),j(l)}),e.mode?void e.init():void e.trigger("Error")):void j(l)):(g.trigger("RuntimeError",new c.RuntimeError(c.RuntimeError.NOT_INIT_ERR)),void (e=null))}var g=this,h;if("string"===b.typeOf(i)?h=i:"string"===b.typeOf(i.ruid)&&(h=i.ruid),h){if(e=f.getRuntime(h)){return e.clients++,e}throw new c.RuntimeError(c.RuntimeError.NOT_INIT_ERR)}j((i.runtime_order||f.order).split(/\s*,\s*/))},getRuntime:function(){return e&&e.uid?e:(e=null,null)},disconnectRuntime:function(){e&&--e.clients<=0&&(e.destroy(),e=null)}})}}),a6(aO,[aS,a1,aR],function(f,b,g){function a(i,e){function h(k,p,m){var j,l=c[this.uid];return"string"===f.typeOf(l)&&l.length?(j=new a(null,{type:m,size:p-k}),j.detach(l.substr(k,j.size)),j):null}g.call(this),i&&this.connectRuntime(i),e?"string"===f.typeOf(e)&&(e={data:e}):e={},f.extend(this,{uid:e.uid||f.guid("uid_"),ruid:i,size:e.size||0,type:e.type||"",slice:function(k,j,l){return this.isDetached()?h.apply(this,arguments):this.getRuntime().exec.call(this,"Blob","slice",this.getSource(),k,j,l)},getSource:function(){return c[this.uid]?c[this.uid]:null},detach:function(j){this.ruid&&(this.getRuntime().exec.call(this,"Blob","destroy"),this.disconnectRuntime(),this.ruid=null),j=j||"";var k=j.match(/^data:([^;]*);base64,/);k&&(this.type=k[1],j=b.atob(j.substring(j.indexOf("base64,")+7))),this.size=j.length,c[this.uid]=j},isDetached:function(){return !this.ruid&&"string"===f.typeOf(c[this.uid])},destroy:function(){this.detach(),delete c[this.uid]}}),e.data?this.detach(e.data):c[this.uid]=e}var c={};return a}),a6(aQ,[aS,a2,aO],function(c,b,f){function a(g,j){var k,e;if(j||(j={}),e=j.type&&""!==j.type?j.type:b.getFileMime(j.name),j.name){k=j.name.replace(/\\/g,"/"),k=k.substr(k.lastIndexOf("/")+1)}else{var h=e.split("/")[0];k=c.guid((""!==h?h:"file")+"_"),b.extensions[e]&&(k+="."+b.extensions[e][0])}f.apply(this,arguments),c.extend(this,{type:e||"",name:k||c.guid("file_"),lastModifiedDate:j.lastModifiedDate||(new Date).toLocaleString()})}return a.prototype=f.prototype,a}),a6(aA,[aS,a2,ba,a7,aY,bd,aQ,a8,aR],function(k,v,g,j,b,f,p,w,q){function m(e){var n=this,l,i,a;if(-1!==k.inArray(k.typeOf(e),["string","node"])&&(e={browse_button:e}),i=g.get(e.browse_button),!i){throw new j.DOMException(j.DOMException.NOT_FOUND_ERR)}a={accept:[{title:f.translate("All Files"),extensions:"*"}],name:"file",multiple:!1,required_caps:!1,container:i.parentNode||document.body},e=k.extend({},a,e),"string"==typeof e.required_caps&&(e.required_caps=w.parseCaps(e.required_caps)),"string"==typeof e.accept&&(e.accept=v.mimes2extList(e.accept)),l=g.get(e.container),l||(l=document.body),"static"===g.getStyle(l,"position")&&(l.style.position="relative"),l=i=null,q.call(n),k.extend(n,{uid:k.guid("uid_"),ruid:null,shimid:null,files:null,init:function(){n.convertEventPropsToHandlers(h),n.bind("RuntimeInit",function(o,c){n.ruid=c.uid,n.shimid=c.shimid,n.bind("Ready",function(){n.trigger("Refresh")},999),n.bind("Change",function(){var r=c.exec.call(n,"FileInput","getFiles");n.files=[],k.each(r,function(s){return 0===s.size?!0:void n.files.push(new p(n.ruid,s))})},999),n.bind("Refresh",function(){var u,y,r,x;r=g.get(e.browse_button),x=g.get(c.shimid),r&&(u=g.getPos(r,g.get(e.container)),y=g.getSize(r),x&&k.extend(x.style,{top:u.y+"px",left:u.x+"px",width:y.w+"px",height:y.h+"px"})),x=r=null}),c.exec.call(n,"FileInput","init",e)}),n.connectRuntime(k.extend({},e,{required_caps:{select_file:!0}}))},disable:function(c){var o=this.getRuntime();o&&o.exec.call(this,"FileInput","disable","undefined"===k.typeOf(c)?!0:c)},refresh:function(){n.trigger("Refresh")},destroy:function(){var c=this.getRuntime();c&&(c.exec.call(this,"FileInput","destroy"),this.disconnectRuntime()),"array"===k.typeOf(this.files)&&k.each(this.files,function(o){o.destroy()}),this.files=null}})}var h=["ready","change","cancel","mouseenter","mouseleave","mousedown","mouseup"];return m.prototype=b.instance,m}),a6(bg,[bd,ba,a7,aS,aQ,aR,aY,a2],function(j,p,g,h,b,f,l,q){function m(i){var c=this,e;"string"==typeof i&&(i={drop_zone:i}),e={accept:[{title:j.translate("All Files"),extensions:"*"}],required_caps:{drag_and_drop:!0}},i="object"==typeof i?h.extend({},e,i):e,i.container=p.get(i.drop_zone)||document.body,"static"===p.getStyle(i.container,"position")&&(i.container.style.position="relative"),"string"==typeof i.accept&&(i.accept=q.mimes2extList(i.accept)),f.call(c),h.extend(c,{uid:h.guid("uid_"),ruid:null,files:null,init:function(){c.convertEventPropsToHandlers(k),c.bind("RuntimeInit",function(n,a){c.ruid=a.uid,c.bind("Drop",function(){var o=a.exec.call(c,"FileDrop","getFiles");c.files=[],h.each(o,function(r){c.files.push(new b(c.ruid,r))})},999),a.exec.call(c,"FileDrop","init",i),c.dispatchEvent("ready")}),c.connectRuntime(i)},destroy:function(){var a=this.getRuntime();a&&(a.exec.call(this,"FileDrop","destroy"),this.disconnectRuntime()),this.files=null}})}var k=["ready","dragenter","dragleave","drop","error"];return m.prototype=l.instance,m}),a6(aP,[aS,aR,aY],function(c,b,f){function a(){this.uid=c.guid("uid_"),b.call(this),this.destroy=function(){this.disconnectRuntime(),this.unbindAll()}}return a.prototype=f.instance,a}),a6(be,[aS,a1,a7,aY,aO,aQ,aP],function(h,l,f,g,b,c,j){function m(){function a(s,p){function o(i){e.readyState=m.DONE,e.error=i,e.trigger("error"),t()}function t(){n.destroy(),n=null,e.trigger("loadend")}function r(i){n.bind("Error",function(v,u){o(u)}),n.bind("Progress",function(u){e.result=i.exec.call(n,"FileReader","getResult"),e.trigger(u)}),n.bind("Load",function(u){e.readyState=m.DONE,e.result=i.exec.call(n,"FileReader","getResult"),e.trigger(u),t()}),i.exec.call(n,"FileReader","read",s,p)}if(n=new j,this.convertEventPropsToHandlers(k),this.readyState===m.LOADING){return o(new f.DOMException(f.DOMException.INVALID_STATE_ERR))}if(this.readyState=m.LOADING,this.trigger("loadstart"),p instanceof b){if(p.isDetached()){var q=p.getSource();switch(s){case"readAsText":case"readAsBinaryString":this.result=q;break;case"readAsDataURL":this.result="data:"+p.type+";base64,"+l.btoa(q)}this.readyState=m.DONE,this.trigger("load"),t()}else{r(n.connectRuntime(p.ruid))}}else{o(new f.DOMException(f.DOMException.NOT_FOUND_ERR))}}var e=this,n;h.extend(this,{uid:h.guid("uid_"),readyState:m.EMPTY,result:null,error:null,readAsBinaryString:function(i){a.call(this,"readAsBinaryString",i)},readAsDataURL:function(i){a.call(this,"readAsDataURL",i)},readAsText:function(i){a.call(this,"readAsText",i)},abort:function(){this.result=null,-1===h.inArray(this.readyState,[m.EMPTY,m.DONE])&&(this.readyState===m.LOADING&&(this.readyState=m.DONE),n&&n.getRuntime().exec.call(this,"FileReader","abort"),this.trigger("abort"),this.trigger("loadend"))},destroy:function(){this.abort(),n&&(n.getRuntime().exec.call(this,"FileReader","destroy"),n.disconnectRuntime()),e=n=null}})}var k=["loadstart","progress","load","abort","error","loadend"];return m.EMPTY=0,m.LOADING=1,m.DONE=2,m.prototype=g.instance,m}),a6(aj,[],function(){var b=function(m,g){for(var h=["source","scheme","authority","userInfo","user","pass","host","port","relative","path","directory","file","query","fragment"],e=h.length,f={http:80,https:443},k={},p=/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,l=p.exec(m||"");e--;){l[e]&&(k[h[e]]=l[e])}if(!k.scheme){g&&"string"!=typeof g||(g=b(g||document.location.href)),k.scheme=g.scheme,k.host=g.host,k.port=g.port;var j="";/^[^\/]/.test(k.path)&&(j=g.path,/(\/|\/[^\.]+)$/.test(j)?j+="/":j=j.replace(/\/[^\/]+$/,"/")),k.path=j+(k.path||"")}return k.port||(k.port=f[k.scheme]||80),k.port=parseInt(k.port,10),k.path||(k.path="/"),delete k.source,k},a=function(f){var g={http:80,https:443},e=b(f);return e.scheme+"://"+e.host+(e.port!==g[e.scheme]?":"+e.port:"")+e.path+(e.query?e.query:"")},c=function(e){function f(g){return[g.scheme,g.host,g.port].join("/")}return"string"==typeof e&&(e=b(e)),f(b())===f(e)};return{parseUrl:b,resolveUrl:a,hasSameOrigin:c}}),a6(ag,[aS,aR,a1],function(b,a,c){return function(){function e(l,h){if(!h.isDetached()){var g=this.connectRuntime(h.ruid).exec.call(this,"FileReaderSync","read",l,h);return this.disconnectRuntime(),g}var k=h.getSource();switch(l){case"readAsBinaryString":return k;case"readAsDataURL":return"data:"+h.type+";base64,"+c.btoa(k);case"readAsText":for(var m="",f=0,j=k.length;j>f;f++){m+=String.fromCharCode(k[f])}return m}}a.call(this),b.extend(this,{uid:b.guid("uid_"),readAsBinaryString:function(f){return e.call(this,"readAsBinaryString",f)},readAsDataURL:function(f){return e.call(this,"readAsDataURL",f)},readAsText:function(f){return e.call(this,"readAsText",f)}})}}),a6(aE,[a7,aS,aO],function(c,b,f){function a(){var h,g=[];b.extend(this,{append:function(j,k){var e=this,i=b.typeOf(k);k instanceof f?h={name:j,value:k}:"array"===i?(j+="[]",b.each(k,function(l){e.append(j,l)})):"object"===i?b.each(k,function(m,l){e.append(j+"["+l+"]",m)}):"null"===i||"undefined"===i||"number"===i&&isNaN(k)?e.append(j,"false"):g.push({name:j,value:k.toString()})},hasBlob:function(){return !!this.getBlob()},getBlob:function(){return h&&h.value||null},getBlobName:function(){return h&&h.name||null},each:function(e){b.each(g,function(i){e(i.value,i.name)}),h&&e(h.value,h.name)},destroy:function(){h=null,g=[]}})}return a}),a6(ai,[aS,a7,aY,a1,aj,a8,aP,aO,ag,aE,bc,a2],function(G,k,z,C,w,y,J,q,j,I,B,H){function F(){this.uid=G.guid("uid_")}function D(){function bi(n,g){return p.hasOwnProperty(n)?1===arguments.length?B.can("define_property")?p[n]:Q[n]:void (B.can("define_property")?p[n]=g:Q[n]=g):void 0}function W(n){function g(){bj&&(bj.destroy(),bj=null),u.dispatchEvent("loadend"),u=null}function v(L){bj.bind("LoadStart",function(M){bi("readyState",D.LOADING),u.dispatchEvent("readystatechange"),u.dispatchEvent(M),r&&u.upload.dispatchEvent(M)}),bj.bind("Progress",function(M){bi("readyState")!==D.LOADING&&(bi("readyState",D.LOADING),u.dispatchEvent("readystatechange")),u.dispatchEvent(M)}),bj.bind("UploadProgress",function(M){r&&u.upload.dispatchEvent({type:"progress",lengthComputable:!1,total:M.total,loaded:M.loaded})}),bj.bind("Load",function(M){bi("readyState",D.DONE),bi("status",Number(L.exec.call(bj,"XMLHttpRequest","getStatus")||0)),bi("statusText",x[bi("status")]||""),bi("response",L.exec.call(bj,"XMLHttpRequest","getResponse",bi("responseType"))),~G.inArray(bi("responseType"),["text",""])?bi("responseText",bi("response")):"document"===bi("responseType")&&bi("responseXML",bi("response")),a=L.exec.call(bj,"XMLHttpRequest","getAllResponseHeaders"),u.dispatchEvent("readystatechange"),bi("status")>0?(r&&u.upload.dispatchEvent(M),u.dispatchEvent(M)):(l=!0,u.dispatchEvent("error")),g()}),bj.bind("Abort",function(M){u.dispatchEvent(M),g()}),bj.bind("Error",function(M){l=!0,bi("readyState",D.DONE),u.dispatchEvent("readystatechange"),Y=!0,u.dispatchEvent(M),g()}),L.exec.call(bj,"XMLHttpRequest","send",{url:X,method:bm,async:K,user:bl,password:f,headers:s,mimeType:bh,encoding:c,responseType:u.responseType,withCredentials:u.withCredentials,options:h},n)}var u=this;m=(new Date).getTime(),bj=new J,"string"==typeof h.required_caps&&(h.required_caps=y.parseCaps(h.required_caps)),h.required_caps=G.extend({},h.required_caps,{return_response_type:u.responseType}),n instanceof I&&(h.required_caps.send_multipart=!0),o||(h.required_caps.do_cors=!0),h.ruid?v(bj.connectRuntime(h)):(bj.bind("RuntimeInit",function(M,L){v(L)}),bj.bind("RuntimeError",function(M,L){u.dispatchEvent("RuntimeError",L)}),bj.connectRuntime(h))}function bk(){bi("responseText",""),bi("responseXML",null),bi("response",null),bi("status",0),bi("statusText",""),m=Z=null}var Q=this,p={timeout:0,readyState:D.UNSENT,withCredentials:!1,status:0,statusText:"",responseType:"",responseXML:null,responseText:null,response:null},K=!0,X,bm,s={},bl,f,c=null,bh=null,e=!1,i=!1,r=!1,Y=!1,l=!1,o=!1,m,Z,V=null,t=null,h={},bj,a="",at;G.extend(this,p,{uid:G.guid("uid_"),upload:new F,open:function(M,n,L,v,N){var g;if(!M||!n){throw new k.DOMException(k.DOMException.SYNTAX_ERR)}if(/[\u0100-\uffff]/.test(M)||C.utf8_encode(M)!==M){throw new k.DOMException(k.DOMException.SYNTAX_ERR)}if(~G.inArray(M.toUpperCase(),["CONNECT","DELETE","GET","HEAD","OPTIONS","POST","PUT","TRACE","TRACK"])&&(bm=M.toUpperCase()),~G.inArray(bm,["CONNECT","TRACE","TRACK"])){throw new k.DOMException(k.DOMException.SECURITY_ERR)}if(n=C.utf8_encode(n),g=w.parseUrl(n),o=w.hasSameOrigin(g),X=w.resolveUrl(n),(v||N)&&!o){throw new k.DOMException(k.DOMException.INVALID_ACCESS_ERR)}if(bl=v||g.user,f=N||g.pass,K=L||!0,K===!1&&(bi("timeout")||bi("withCredentials")||""!==bi("responseType"))){throw new k.DOMException(k.DOMException.INVALID_ACCESS_ERR)}e=!K,i=!1,s={},bk.call(this),bi("readyState",D.OPENED),this.convertEventPropsToHandlers(["readystatechange"]),this.dispatchEvent("readystatechange")},setRequestHeader:function(n,u){var g=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];if(bi("readyState")!==D.OPENED||i){throw new k.DOMException(k.DOMException.INVALID_STATE_ERR)}if(/[\u0100-\uffff]/.test(n)||C.utf8_encode(n)!==n){throw new k.DOMException(k.DOMException.SYNTAX_ERR)}return n=G.trim(n).toLowerCase(),~G.inArray(n,g)||/^(proxy\-|sec\-)/.test(n)?!1:(s[n]?s[n]+=", "+u:s[n]=u,!0)},getAllResponseHeaders:function(){return a||""},getResponseHeader:function(g){return g=g.toLowerCase(),l||~G.inArray(g,["set-cookie","set-cookie2"])?null:a&&""!==a&&(at||(at={},G.each(a.split(/\r\n/),function(u){var v=u.split(/:\s+/);2===v.length&&(v[0]=G.trim(v[0]),at[v[0].toLowerCase()]={header:v[0],value:G.trim(v[1])})})),at.hasOwnProperty(g))?at[g].header+": "+at[g].value:null},overrideMimeType:function(g){var n,u;if(~G.inArray(bi("readyState"),[D.LOADING,D.DONE])){throw new k.DOMException(k.DOMException.INVALID_STATE_ERR)}if(g=G.trim(g.toLowerCase()),/;/.test(g)&&(n=g.match(/^([^;]+)(?:;\scharset\=)?(.*)$/))&&(g=n[1],n[2]&&(u=n[2])),!H.mimes[g]){throw new k.DOMException(k.DOMException.SYNTAX_ERR)}V=g,t=u},send:function(v,g){if(h="string"===G.typeOf(g)?{ruid:g}:g?g:{},this.convertEventPropsToHandlers(A),this.upload.convertEventPropsToHandlers(A),this.readyState!==D.OPENED||i){throw new k.DOMException(k.DOMException.INVALID_STATE_ERR)}if(v instanceof q){h.ruid=v.ruid,bh=v.type||"application/octet-stream"}else{if(v instanceof I){if(v.hasBlob()){var u=v.getBlob();h.ruid=u.ruid,bh=u.type||"application/octet-stream"}}else{"string"==typeof v&&(c="UTF-8",bh="text/plain;charset=UTF-8",v=C.utf8_encode(v))}}this.withCredentials||(this.withCredentials=h.required_caps&&h.required_caps.send_browser_cookies&&!o),r=!e&&this.upload.hasEventListener(),l=!1,Y=!v,e||(i=!0),W.call(this,v)},abort:function(){if(l=!0,e=!1,~G.inArray(bi("readyState"),[D.UNSENT,D.OPENED,D.DONE])){bi("readyState",D.UNSENT)}else{if(bi("readyState",D.DONE),i=!1,!bj){throw new k.DOMException(k.DOMException.INVALID_STATE_ERR)}bj.getRuntime().exec.call(bj,"XMLHttpRequest","abort",Y),Y=!0}},destroy:function(){bj&&("function"===G.typeOf(bj.destroy)&&bj.destroy(),bj=null),this.unbindAll(),this.upload&&(this.upload.unbindAll(),this.upload=null)}})}var x={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Reserved",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",426:"Upgrade Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",510:"Not Extended"};F.prototype=z.instance;var A=["loadstart","progress","abort","error","load","timeout","loadend"],E=1,b=2;return D.UNSENT=0,D.OPENED=1,D.HEADERS_RECEIVED=2,D.LOADING=3,D.DONE=4,D.prototype=z.instance,D}),a6(an,[aS,a1,aR,aY],function(f,b,g,a){function c(){function j(){h=m=0,n=this.result=null}function e(o,s){var l=this;q=s,l.bind("TransportingProgress",function(i){m=i.loaded,h>m&&-1===f.inArray(l.state,[c.IDLE,c.DONE])&&p.call(l)},999),l.bind("TransportingComplete",function(){m=h,l.state=c.DONE,n=null,l.result=q.exec.call(l,"Transporter","getAsBlob",o||"")},999),l.state=c.BUSY,l.trigger("TransportingStarted"),p.call(l)}function p(){var o=this,s,l=h-m;k>l&&(k=l),s=b.btoa(n.substr(m,k)),q.exec.call(o,"Transporter","receive",s,h)}var r,q,n,h,m,k;g.call(this),f.extend(this,{uid:f.guid("uid_"),state:c.IDLE,result:null,transport:function(o,v,s){var i=this;if(s=f.extend({chunk_size:204798},s),(r=s.chunk_size%3)&&(s.chunk_size+=3-r),k=s.chunk_size,j.call(this),n=o,h=o.length,"string"===f.typeOf(s)||s.ruid){e.call(i,v,this.connectRuntime(s))}else{var l=function(w,u){i.unbind("RuntimeInit",l),e.call(i,v,u)};this.bind("RuntimeInit",l),this.connectRuntime(s)}},abort:function(){var i=this;i.state=c.IDLE,q&&(q.exec.call(i,"Transporter","clear"),i.trigger("TransportingAborted")),j.call(i)},destroy:function(){this.unbindAll(),q=null,this.disconnectRuntime(),j.call(this)}})}return c.IDLE=0,c.BUSY=1,c.DONE=2,c.prototype=a.instance,c}),a6(av,[aS,ba,a7,ag,ai,a8,aR,an,bc,aY,aO,aQ,a1],function(x,C,k,q,b,j,A,D,B,z,m,y,w){function v(){function f(c){c||(c=this.getRuntime().exec.call(this,"Image","getInfo")),this.size=c.size,this.width=c.width,this.height=c.height,this.type=c.type,this.meta=c.meta,""===this.name&&(this.name=c.name)}function l(n){var c=x.typeOf(n);try{if(n instanceof v){if(!n.size){throw new k.DOMException(k.DOMException.INVALID_STATE_ERR)}a.apply(this,arguments)}else{if(n instanceof m){if(!~x.inArray(n.type,["image/jpeg","image/png"])){throw new k.ImageError(k.ImageError.WRONG_FORMAT)}h.apply(this,arguments)}else{if(-1!==x.inArray(c,["blob","file"])){l.call(this,new y(null,n),arguments[1])}else{if("string"===c){/^data:[^;]*;base64,/.test(n)?l.call(this,new m(null,{data:n}),arguments[1]):e.apply(this,arguments)}else{if("node"!==c||"img"!==n.nodeName.toLowerCase()){throw new k.DOMException(k.DOMException.TYPE_MISMATCH_ERR)}l.call(this,n.src,arguments[1])}}}}}catch(o){this.trigger("error",o.code)}}function a(o,p){var c=this.connectRuntime(o.ruid);this.ruid=c.uid,c.exec.call(this,"Image","loadFromImage",o,"undefined"===x.typeOf(p)?!0:p)}function h(o,s){function c(i){p.ruid=i.uid,i.exec.call(p,"Image","loadFromBlob",o)}var p=this;p.name=o.name||"",o.isDetached()?(this.bind("RuntimeInit",function(n,i){c(i)}),s&&"string"==typeof s.required_caps&&(s.required_caps=j.parseCaps(s.required_caps)),this.connectRuntime(x.extend({required_caps:{access_image_binary:!0,resize_image:!0}},s))):c(this.connectRuntime(o.ruid))}function e(p,o){var r=this,c;c=new b,c.open("get",p),c.responseType="blob",c.onprogress=function(i){r.trigger(i)},c.onload=function(){h.call(r,c.response,!0)},c.onerror=function(i){r.trigger(i)},c.onloadend=function(){c.destroy()},c.bind("RuntimeError",function(n,i){r.trigger("RuntimeError",i)}),c.send(null,o)}A.call(this),x.extend(this,{uid:x.guid("uid_"),ruid:null,name:"",size:0,width:0,height:0,type:"",meta:{},clone:function(){this.load.apply(this,arguments)},load:function(){this.bind("Load Resize",function(){f.call(this)},999),this.convertEventPropsToHandlers(g),l.apply(this,arguments)},downsize:function(n){var c={width:this.width,height:this.height,crop:!1,preserveHeaders:!0};n="object"==typeof n?x.extend(c,n):x.extend(c,{width:arguments[0],height:arguments[1],crop:arguments[2],preserveHeaders:arguments[3]});try{if(!this.size){throw new k.DOMException(k.DOMException.INVALID_STATE_ERR)}if(this.width>v.MAX_RESIZE_WIDTH||this.height>v.MAX_RESIZE_HEIGHT){throw new k.ImageError(k.ImageError.MAX_RESOLUTION_ERR)}this.getRuntime().exec.call(this,"Image","downsize",n.width,n.height,n.crop,n.preserveHeaders)}catch(o){this.trigger("error",o.code)}},crop:function(i,c,o){this.downsize(i,c,!0,o)},getAsCanvas:function(){if(!B.can("create_canvas")){throw new k.RuntimeError(k.RuntimeError.NOT_SUPPORTED_ERR)}var c=this.connectRuntime(this.ruid);return c.exec.call(this,"Image","getAsCanvas")},getAsBlob:function(i,c){if(!this.size){throw new k.DOMException(k.DOMException.INVALID_STATE_ERR)}return i||(i="image/jpeg"),"image/jpeg"!==i||c||(c=90),this.getRuntime().exec.call(this,"Image","getAsBlob",i,c)},getAsDataURL:function(i,c){if(!this.size){throw new k.DOMException(k.DOMException.INVALID_STATE_ERR)}return this.getRuntime().exec.call(this,"Image","getAsDataURL",i,c)},getAsBinaryString:function(i,c){var o=this.getAsDataURL(i,c);return w.atob(o.substring(o.indexOf("base64,")+7))},embed:function(F){function n(){if(B.can("create_canvas")){var c=K.getAsCanvas();if(c){return F.appendChild(c),c=null,K.destroy(),void t.trigger("embedded")}}var i=K.getAsDataURL(I,E);if(!i){throw new k.ImageError(k.ImageError.WRONG_FORMAT)}if(B.can("use_data_uri_of",i.length)){F.innerHTML='<img src="'+i+'" width="'+K.width+'" height="'+K.height+'" />',K.destroy(),t.trigger("embedded")}else{var o=new D;o.bind("TransportingComplete",function(){M=t.connectRuntime(this.result.ruid),t.bind("Embedded",function(){x.extend(M.getShimContainer().style,{top:"0px",left:"0px",width:K.width+"px",height:K.height+"px"}),M=null},999),M.exec.call(t,"ImageView","display",this.result.uid,u,G),K.destroy()}),o.transport(w.atob(i.substring(i.indexOf("base64,")+7)),I,x.extend({},s,{required_caps:{display_media:!0},runtime_order:"flash,silverlight",container:F}))}}var t=this,K,I,E,H,s=arguments[1]||{},u=this.width,G=this.height,M;try{if(!(F=C.get(F))){throw new k.DOMException(k.DOMException.INVALID_NODE_TYPE_ERR)}if(!this.size){throw new k.DOMException(k.DOMException.INVALID_STATE_ERR)}if(this.width>v.MAX_RESIZE_WIDTH||this.height>v.MAX_RESIZE_HEIGHT){throw new k.ImageError(k.ImageError.MAX_RESOLUTION_ERR)}if(I=s.type||this.type||"image/jpeg",E=s.quality||90,H="undefined"!==x.typeOf(s.crop)?s.crop:!1,s.width){u=s.width,G=s.height||u}else{var J=C.getSize(F);J.w&&J.h&&(u=J.w,G=J.h)}return K=new v,K.bind("Resize",function(){n.call(t)}),K.bind("Load",function(){K.downsize(u,G,H,!1)}),K.clone(this,!1),K}catch(L){this.trigger("error",L.code)}},destroy:function(){this.ruid&&(this.getRuntime().exec.call(this,"Image","destroy"),this.disconnectRuntime()),this.unbindAll()}})}var g=["progress","load","error","resize","embedded"];return v.MAX_RESIZE_WIDTH=6500,v.MAX_RESIZE_HEIGHT=6500,v.prototype=z.instance,v}),a6(aB,[aS,a7,a8,bc],function(h,f,k,c){function g(e){var l=this,i=k.capTest,a=k.capTrue,m=h.extend({access_binary:i(window.FileReader||window.File&&window.File.getAsDataURL),access_image_binary:function(){return l.can("access_binary")&&!!b.Image},display_media:i(c.can("create_canvas")||c.can("use_data_uri_over32kb")),do_cors:i(window.XMLHttpRequest&&"withCredentials" in new XMLHttpRequest),drag_and_drop:i(function(){var n=document.createElement("div");return("draggable" in n||"ondragstart" in n&&"ondrop" in n)&&("IE"!==c.browser||c.version>9)}()),filter_by_extension:i(function(){return"Chrome"===c.browser&&c.version>=28||"IE"===c.browser&&c.version>=10}()),return_response_headers:a,return_response_type:function(n){return"json"===n&&window.JSON?!0:c.can("return_response_type",n)},return_status_code:a,report_upload_progress:i(window.XMLHttpRequest&&(new XMLHttpRequest).upload),resize_image:function(){return l.can("access_binary")&&c.can("create_canvas")},select_file:function(){return c.can("use_fileinput")&&window.File},select_folder:function(){return l.can("select_file")&&"Chrome"===c.browser&&c.version>=21},select_multiple:function(){return !(!l.can("select_file")||"Safari"===c.browser&&"Windows"===c.os||"iOS"===c.os&&c.verComp(c.osVersion,"7.0.4","<"))},send_binary_string:i(window.XMLHttpRequest&&((new XMLHttpRequest).sendAsBinary||window.Uint8Array&&window.ArrayBuffer)),send_custom_headers:i(window.XMLHttpRequest),send_multipart:function(){return !!(window.XMLHttpRequest&&(new XMLHttpRequest).upload&&window.FormData)||l.can("send_binary_string")},slice_blob:i(window.File&&(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice)),stream_upload:function(){return l.can("slice_blob")&&l.can("send_multipart")},summon_file_dialog:i(function(){return"Firefox"===c.browser&&c.version>=4||"Opera"===c.browser&&c.version>=12||"IE"===c.browser&&c.version>=10||!!~h.inArray(c.browser,["Chrome","Safari"])}()),upload_filesize:a},arguments[2]);k.call(this,e,arguments[1]||j,m),h.extend(this,{init:function(){this.trigger("Init")},destroy:function(n){return function(){n.call(l),n=l=null}}(this.destroy)}),h.extend(this.getShim(),b)}var j="html5",b={};return k.addConstructor(j,g),b}),a6(ao,[aB,aO],function(b,a){function c(){function f(k,h,l){var g;if(!window.File.prototype.slice){return(g=window.File.prototype.webkitSlice||window.File.prototype.mozSlice)?g.call(k,h,l):null}try{return k.slice(),k.slice(h,l)}catch(j){return k.slice(h,l-h)}}this.slice=function(){return new a(this.getRuntime().uid,f.apply(this,arguments))}}return b.Blob=c}),a6(aq,[aS],function(j){function f(){this.returnValue=!1}function l(){this.cancelBubble=!0}var c={},h="moxie_"+j.guid(),k=function(p,i,n,m){var q,e;i=i.toLowerCase(),p.addEventListener?(q=n,p.addEventListener(i,q,!1)):p.attachEvent&&(q=function(){var a=window.event;a.target||(a.target=a.srcElement),a.preventDefault=f,a.stopPropagation=l,n(a)},p.attachEvent("on"+i,q)),p[h]||(p[h]=j.guid()),c.hasOwnProperty(p[h])||(c[p[h]]={}),e=c[p[h]],e.hasOwnProperty(i)||(e[i]=[]),e[i].push({func:q,orig:n,key:m})},b=function(m,v,q){var e,p;if(v=v.toLowerCase(),m[h]&&c[m[h]]&&c[m[h]][v]){e=c[m[h]][v];for(var i=e.length-1;i>=0&&(e[i].orig!==q&&e[i].key!==q||(m.removeEventListener?m.removeEventListener(v,e[i].func,!1):m.detachEvent&&m.detachEvent("on"+v,e[i].func),e[i].orig=null,e[i].func=null,e.splice(i,1),q===p));i--){}if(e.length||delete c[m[h]][v],j.isEmptyObj(c[m[h]])){delete c[m[h]];try{delete m[h]}catch(r){m[h]=p}}}},g=function(a,e){a&&a[h]&&j.each(c[a[h]],function(n,m){b(a,m,e)})};return{addEvent:k,removeEvent:b,removeAllEvents:g}}),a6(ap,[aB,aS,ba,aq,a2,bc],function(h,f,k,c,g,j){function b(){var l=[],i;f.extend(this,{init:function(x){var w=this,v=w.getRuntime(),n,t,r,o,a,e;i=x,l=[],r=i.accept.mimes||g.extList2mimes(i.accept,v.can("filter_by_extension")),t=v.getShimContainer(),t.innerHTML='<input id="'+v.uid+'" type="file" style="font-size:999px;opacity:0;"'+(i.multiple&&v.can("select_multiple")?"multiple":"")+(i.directory&&v.can("select_folder")?"webkitdirectory directory":"")+(r?' accept="'+r.join(",")+'"':"")+" />",n=k.get(v.uid),f.extend(n.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"}),o=k.get(i.browse_button),v.can("summon_file_dialog")&&("static"===k.getStyle(o,"position")&&(o.style.position="relative"),a=parseInt(k.getStyle(o,"z-index"),10)||1,o.style.zIndex=a,t.style.zIndex=a-1,c.addEvent(o,"click",function(p){var m=k.get(v.uid);m&&!m.disabled&&m.click(),p.preventDefault()},w.uid)),e=v.can("summon_file_dialog")?o:t,c.addEvent(e,"mouseover",function(){w.trigger("mouseenter")},w.uid),c.addEvent(e,"mouseout",function(){w.trigger("mouseleave")},w.uid),c.addEvent(e,"mousedown",function(){w.trigger("mousedown")},w.uid),c.addEvent(k.get(i.container),"mouseup",function(){w.trigger("mouseup")},w.uid),n.onchange=function q(){if(l=[],i.directory?f.each(this.files,function(p){"."!==p.name&&l.push(p)}):l=[].slice.call(this.files),"IE"!==j.browser&&"IEMobile"!==j.browser){this.value=""}else{var m=this.cloneNode(!0);this.parentNode.replaceChild(m,this),m.onchange=q}w.trigger("change")},w.trigger({type:"ready",async:!0}),t=null},getFiles:function(){return l},disable:function(n){var m=this.getRuntime(),a;(a=k.get(m.uid))&&(a.disabled=!!n)},destroy:function(){var a=this.getRuntime(),e=a.getShim(),m=a.getShimContainer();c.removeAllEvents(m,this.uid),c.removeAllEvents(i&&k.get(i.container),this.uid),c.removeAllEvents(i&&k.get(i.browse_button),this.uid),m&&(m.innerHTML=""),e.removeInstance(this.uid),l=i=m=e=null}})}return h.FileInput=b}),a6(aC,[aB,aS,ba,aq,a2],function(f,b,h,a,c){function g(){function n(l){if(!l.dataTransfer||!l.dataTransfer.types){return !1}var o=b.toArray(l.dataTransfer.types||[]);return -1!==b.inArray("Files",o)||-1!==b.inArray("public.file-url",o)||-1!==b.inArray("application/x-moz-file",o)}function i(o){for(var s=[],l=0;l<o.length;l++){[].push.apply(s,o[l].extensions.split(/\s*,\s*/))}return -1===b.inArray("*",s)?s:[]}function r(l){if(!m.length){return !0}var o=c.getFileExtension(l.name);return !o||-1!==b.inArray(o,m)}function v(o,s){var l=[];b.each(o,function(w){var u=w.webkitGetAsEntry();if(u){if(u.isFile){var x=w.getAsFile();r(x)&&p.push(x)}else{l.push(u)}}}),l.length?t(l,s):s()}function t(o,s){var l=[];b.each(o,function(u){l.push(function(e){q(u,e)})}),b.inSeries(l,function(){s()})}function q(o,l){o.isFile?o.file(function(s){r(s)&&p.push(s),l()},function(){l()}):o.isDirectory?j(o,l):l()}function j(u,o){function w(x){s.readEntries(function(e){e.length?([].push.apply(l,e),w(x)):x()},x)}var l=[],s=u.createReader();w(function(){t(l,o)})}var p=[],m=[],k;b.extend(this,{init:function(o){var l=this,e;k=o,m=i(k.accept),e=k.container,a.addEvent(e,"dragover",function(s){n(s)&&(s.preventDefault(),s.dataTransfer.dropEffect="copy")},l.uid),a.addEvent(e,"drop",function(s){n(s)&&(s.preventDefault(),p=[],s.dataTransfer.items&&s.dataTransfer.items[0].webkitGetAsEntry?v(s.dataTransfer.items,function(){l.trigger("drop")}):(b.each(s.dataTransfer.files,function(u){r(u)&&p.push(u)}),l.trigger("drop")))},l.uid),a.addEvent(e,"dragenter",function(s){l.trigger("dragenter")},l.uid),a.addEvent(e,"dragleave",function(s){l.trigger("dragleave")},l.uid)},getFiles:function(){return p},destroy:function(){a.removeAllEvents(k&&h.get(k.container),this.uid),p=m=k=null}})}return f.FileDrop=g}),a6(az,[aB,a1,aS],function(c,b,f){function a(){function j(i){return b.atob(i.substring(i.indexOf("base64,")+7))}var g,h=!1;f.extend(this,{read:function(k,i){var l=this;g=new window.FileReader,g.addEventListener("progress",function(m){l.trigger(m)}),g.addEventListener("load",function(m){l.trigger(m)}),g.addEventListener("error",function(m){l.trigger(m,g.error)}),g.addEventListener("loadend",function(){g=null}),"function"===f.typeOf(g[k])?(h=!1,g[k](i.getSource())):"readAsBinaryString"===k&&(h=!0,g.readAsDataURL(i.getSource()))},getResult:function(){return g&&g.result?h?j(g.result):g.result:null},abort:function(){g&&g.abort()},destroy:function(){g=null}})}return c.FileReader=a}),a6(aw,[aB,aS,a2,aj,aQ,aO,aE,a7,bc],function(j,p,g,h,b,f,l,q,m){function k(){function r(w,u){var x=this,c,v;c=u.getBlob().getSource(),v=new window.FileReader,v.onload=function(){u.append(u.getBlobName(),new f(null,{type:c.type,data:v.result})),n.send.call(x,w,u)},v.readAsBinaryString(c)}function t(){return !window.XMLHttpRequest||"IE"===m.browser&&m.version<8?function(){for(var u=["Msxml2.XMLHTTP.6.0","Microsoft.XMLHTTP"],c=0;c<u.length;c++){try{return new ActiveXObject(u[c])}catch(v){}}}():new window.XMLHttpRequest}function a(u){var c=u.responseXML,v=u.responseText;return"IE"===m.browser&&v&&c&&!c.documentElement&&/[^\/]+\/[^\+]+\+xml/.test(u.getResponseHeader("Content-Type"))&&(c=new window.ActiveXObject("Microsoft.XMLDOM"),c.async=!1,c.validateOnParse=!1,c.loadXML(v)),c&&("IE"===m.browser&&0!==c.parseError||!c.documentElement||"parsererror"===c.documentElement.tagName)?null:c}function s(x){var v="----moxieboundary"+(new Date).getTime(),y="--",u="\r\n",w="",c=this.getRuntime();if(!c.can("send_binary_string")){throw new q.RuntimeError(q.RuntimeError.NOT_SUPPORTED_ERR)}return i.setRequestHeader("Content-Type","multipart/form-data; boundary="+v),x.each(function(A,z){w+=A instanceof f?y+v+u+'Content-Disposition: form-data; name="'+z+'"; filename="'+unescape(encodeURIComponent(A.name||"blob"))+'"'+u+"Content-Type: "+(A.type||"application/octet-stream")+u+u+A.getSource()+u:y+v+u+'Content-Disposition: form-data; name="'+z+'"'+u+u+unescape(encodeURIComponent(A))+u}),w+=y+v+y+u}var n=this,i,o;p.extend(this,{send:function(A,y){var w=this,e="Mozilla"===m.browser&&m.version>=4&&m.version<7,z="Android Browser"===m.browser,c=!1;if(o=A.url.replace(/^.+?\/([\w\-\.]+)$/,"$1").toLowerCase(),i=t(),i.open(A.method,A.url,A.async,A.user,A.password),y instanceof f){y.isDetached()&&(c=!0),y=y.getSource()}else{if(y instanceof l){if(y.hasBlob()){if(y.getBlob().isDetached()){y=s.call(w,y),c=!0}else{if((e||z)&&"blob"===p.typeOf(y.getBlob().getSource())&&window.FileReader){return void r.call(w,A,y)}}}if(y instanceof l){var x=new window.FormData;y.each(function(B,v){B instanceof f?x.append(v,B.getSource()):x.append(v,B)}),y=x}}}i.upload?(A.withCredentials&&(i.withCredentials=!0),i.addEventListener("load",function(v){w.trigger(v)}),i.addEventListener("error",function(v){w.trigger(v)}),i.addEventListener("progress",function(v){w.trigger(v)}),i.upload.addEventListener("progress",function(v){w.trigger({type:"UploadProgress",loaded:v.loaded,total:v.total})})):i.onreadystatechange=function u(){switch(i.readyState){case 1:break;case 2:break;case 3:var C,v;try{h.hasSameOrigin(A.url)&&(C=i.getResponseHeader("Content-Length")||0),i.responseText&&(v=i.responseText.length)}catch(B){C=v=0}w.trigger({type:"progress",lengthComputable:!!C,total:parseInt(C,10),loaded:v});break;case 4:i.onreadystatechange=function(){},w.trigger(0===i.status?"error":"load")}},p.isEmptyObj(A.headers)||p.each(A.headers,function(B,v){i.setRequestHeader(v,B)}),""!==A.responseType&&"responseType" in i&&(i.responseType="json"!==A.responseType||m.can("return_response_type","json")?A.responseType:"text"),c?i.sendAsBinary?i.sendAsBinary(y):!function(){for(var B=new Uint8Array(y.length),v=0;v<y.length;v++){B[v]=255&y.charCodeAt(v)}i.send(B.buffer)}():i.send(y),w.trigger("loadstart")},getStatus:function(){try{if(i){return i.status}}catch(c){}return 0},getResponse:function(x){var v=this.getRuntime();try{switch(x){case"blob":var u=new b(v.uid,i.response),y=i.getResponseHeader("Content-Disposition");if(y){var c=y.match(/filename=([\'\"'])([^\1]+)\1/);c&&(o=c[2])}return u.name=o,u.type||(u.type=g.getFileMime(o)),u;case"json":return m.can("return_response_type","json")?i.response:200===i.status&&window.JSON?JSON.parse(i.responseText):null;case"document":return a(i);default:return""!==i.responseText?i.responseText:null}}catch(w){return null}},getAllResponseHeaders:function(){try{return i.getAllResponseHeaders()}catch(c){}return""},abort:function(){i&&i.abort()},destroy:function(){n=o=null}})}return j.XMLHttpRequest=k}),a6(am,[],function(){return function(){function c(l,k){var m=b?0:-8*(k-1),j=0,h;for(h=0;k>h;h++){j|=f.charCodeAt(l+h)<<Math.abs(m+8*h)}return j}function g(i,h,j){j=3===arguments.length?j:f.length-h-1,f=f.substr(0,h)+i+f.substr(j+h)}function a(m,k,j){var n="",h=b?0:-8*(j-1),l;for(l=0;j>l;l++){n+=String.fromCharCode(k>>Math.abs(h+8*l)&255)}g(n,m,j)}var b=!1,f;return{II:function(h){return h===aT?b:void (b=h)},init:function(h){b=!1,f=h},SEGMENT:function(k,j,h){switch(arguments.length){case 1:return f.substr(k,f.length-k-1);case 2:return f.substr(k,j);case 3:g(h,k,j);break;default:return f}},BYTE:function(e){return c(e,1)},SHORT:function(e){return c(e,2)},LONG:function(h,e){return e===aT?c(h,4):void a(h,e,4)},SLONG:function(e){var h=c(e,4);return h>2147483647?h-4294967296:h},STRING:function(h,j){var e="";for(j+=h;j>h;h++){e+=String.fromCharCode(c(h,1))}return e}}}}),a6(a3,[am],function(b){return function a(j){var e=[],g,h,c,f=0;if(g=new b,g.init(j),65496===g.SHORT(0)){for(h=2;h<=j.length;){if(c=g.SHORT(h),c>=65488&&65495>=c){h+=2}else{if(65498===c||65497===c){break}f=g.SHORT(h+2)+2,c>=65505&&65519>=c&&e.push({hex:c,name:"APP"+(15&c),start:h,length:f,segment:g.SEGMENT(h,f)}),h+=f}}return g.init(null),{headers:e,restore:function(k){var i,l;for(g.init(k),h=65504==g.SHORT(2)?4+g.SHORT(4):2,l=0,i=e.length;i>l;l++){g.SEGMENT(h,0,e[l].segment),h+=e[l].length}return k=g.SEGMENT(),g.init(null),k},strip:function(l){var p,k,m;for(k=new a(l),p=k.headers,k.purge(),g.init(l),m=p.length;m--;){g.SEGMENT(p[m].start,p[m].length,"")}return l=g.SEGMENT(),g.init(null),l},get:function(l){for(var i=[],m=0,k=e.length;k>m;m++){e[m].name===l.toUpperCase()&&i.push(e[m].segment)}return i},set:function(m,k){var q=[],l,p,i;for("string"==typeof k?q.push(k):q=k,l=p=0,i=e.length;i>l&&(e[l].name===m.toUpperCase()&&(e[l].segment=q[p],e[l].length=q[p].length,p++),!(p>=q.length));l++){}},purge:function(){e=[],g.init(null),g=null}}}}}),a6(af,[aS,am],function(b,c){return function a(){function h(B,v){var x=f.SHORT(B),l,t,E,D,C,A,y,q,w=[],z={};for(l=0;x>l;l++){if(y=A=B+12*l+2,E=v[f.SHORT(y)],E!==aT){switch(D=f.SHORT(y+=2),C=f.LONG(y+=2),y+=4,w=[],D){case 1:case 7:for(C>4&&(y=f.LONG(y)+n.tiffHeader),t=0;C>t;t++){w[t]=f.BYTE(y+t)}break;case 2:C>4&&(y=f.LONG(y)+n.tiffHeader),z[E]=f.STRING(y,C-1);continue;case 3:for(C>2&&(y=f.LONG(y)+n.tiffHeader),t=0;C>t;t++){w[t]=f.SHORT(y+2*t)}break;case 4:for(C>1&&(y=f.LONG(y)+n.tiffHeader),t=0;C>t;t++){w[t]=f.LONG(y+4*t)}break;case 5:for(y=f.LONG(y)+n.tiffHeader,t=0;C>t;t++){w[t]=f.LONG(y+4*t)/f.LONG(y+4*t+4)}break;case 9:for(y=f.LONG(y)+n.tiffHeader,t=0;C>t;t++){w[t]=f.SLONG(y+4*t)}break;case 10:for(y=f.LONG(y)+n.tiffHeader,t=0;C>t;t++){w[t]=f.SLONG(y+4*t)/f.SLONG(y+4*t+4)}break;default:continue}q=1==C?w[0]:w,z[E]=e.hasOwnProperty(E)&&"object"!=typeof q?e[E][q]:q}}return z}function k(){var i=n.tiffHeader;return f.II(18761==f.SHORT(i)),42!==f.SHORT(i+=2)?!1:(n.IFD0=n.tiffHeader+f.LONG(i+=2),g=h(n.IFD0,j.tiff),"ExifIFDPointer" in g&&(n.exifIFD=n.tiffHeader+g.ExifIFDPointer,delete g.ExifIFDPointer),"GPSInfoIFDPointer" in g&&(n.gpsIFD=n.tiffHeader+g.GPSInfoIFDPointer,delete g.GPSInfoIFDPointer),!0)}function m(y,B,s){var w,p,q,A=0;if("string"==typeof B){var v=j[y.toLowerCase()];for(var z in v){if(v[z]===B){B=z;break}}}w=n[y.toLowerCase()+"IFD"],p=f.SHORT(w);for(var x=0;p>x;x++){if(q=w+12*x+2,f.SHORT(q)==B){A=q+8;break}}return A?(f.LONG(A,s),!0):!1}var f,j,g,n={},e;return f=new c,j={tiff:{274:"Orientation",270:"ImageDescription",271:"Make",272:"Model",305:"Software",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}},e={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},{init:function(i){return n={tiffHeader:10},i!==aT&&i.length?(f.init(i),65505===f.SHORT(0)&&"EXIF\x00"===f.STRING(4,5).toUpperCase()?k():!1):!1},TIFF:function(){return g},EXIF:function(){var i;if(i=h(n.exifIFD,j.exif),i.ExifVersion&&"array"===b.typeOf(i.ExifVersion)){for(var o=0,l="";o<i.ExifVersion.length;o++){l+=String.fromCharCode(i.ExifVersion[o])}i.ExifVersion=l}return i},GPS:function(){var i;return i=h(n.gpsIFD,j.gps),i.GPSVersionID&&"array"===b.typeOf(i.GPSVersionID)&&(i.GPSVersionID=i.GPSVersionID.join(".")),i},setExif:function(l,i){return"PixelXDimension"!==l&&"PixelYDimension"!==l?!1:m("exif",l,i)},getBinary:function(){return f.SEGMENT()},purge:function(){f.init(null),f=g=null,n={}}}}}),a6(aD,[aS,a7,a3,am,af],function(f,b,h,a,c){function g(e){function p(){for(var o=0,l,s;o<=q.length;){if(l=n.SHORT(o+=2),l>=65472&&65475>=l){return o+=5,{height:n.SHORT(o),width:n.SHORT(o+=2)}}s=n.SHORT(o+=2),o+=s-2}return null}function r(){m&&i&&n&&(m.purge(),i.purge(),n.init(null),q=k=i=m=n=null)}var q,n,i,m,k,j;if(q=e,n=new a,n.init(q),65496!==n.SHORT(0)){throw new b.ImageError(b.ImageError.WRONG_FORMAT)}i=new h(e),m=new c,j=!!m.init(i.get("app1")[0]),k=p.call(this),f.extend(this,{type:"image/jpeg",size:q.length,width:k&&k.width||0,height:k&&k.height||0,setExif:function(l,o){return j?("object"===f.typeOf(l)?f.each(l,function(u,s){m.setExif(s,u)}):m.setExif(l,o),void i.set("app1",m.getBinary())):!1},writeHeaders:function(){return arguments.length?i.restore(arguments[0]):q=i.restore(q)},stripHeaders:function(l){return i.strip(l)},purge:function(){r.call(this)}}),j&&(this.meta={tiff:m.TIFF(),exif:m.EXIF(),gps:m.GPS()})}return g}),a6(aN,[a7,aS,am],function(c,b,f){function a(j){function e(){var l,i;return l=n.call(this,8),"IHDR"==l.type?(i=l.start,{width:p.LONG(i),height:p.LONG(i+=4)}):null}function g(){p&&(p.init(null),q=k=m=h=p=null)}function n(u){var o,v,l,s;return o=p.LONG(u),v=p.STRING(u+=4,4),l=u+=4,s=p.LONG(u+o),{length:o,type:v,start:l,CRC:s}}var q,p,m,h,k;q=j,p=new f,p.init(q),function(){var o=0,r=0,l=[35152,20039,3338,6666];for(r=0;r<l.length;r++,o+=2){if(l[r]!=p.SHORT(o)){throw new c.ImageError(c.ImageError.WRONG_FORMAT)}}}(),k=e.call(this),b.extend(this,{type:"image/png",size:q.length,width:k.width,height:k.height,purge:function(){g.call(this)}}),g.call(this)}return a}),a6(ay,[aS,a7,aD,aN],function(c,b,f,a){return function(g){var h=[f,a],e;e=function(){for(var i=0;i<h.length;i++){try{return new h[i](g)}catch(j){}}throw new b.ImageError(b.ImageError.WRONG_FORMAT)}(),c.extend(this,{type:"",size:0,width:0,height:0,setExif:function(){},writeHeaders:function(i){return i},stripHeaders:function(i){return i},purge:function(){}}),c.extend(this,e),this.purge=function(){e.purge(),e=null}}}),a6(aW,[],function(){function b(L,H,B){var D=L.naturalWidth,P=L.naturalHeight,A=B.width,t=B.height,N=B.x||0,G=B.y||0,M=H.getContext("2d");a(L)&&(D/=2,P/=2);var K=1024,I=document.createElement("canvas");I.width=I.height=K;for(var C=I.getContext("2d"),F=c(L,D,P),J=0;P>J;){for(var q=J+K>P?P-J:K,j=0;D>j;){var n=j+K>D?D-j:K;C.clearRect(0,0,K,K),C.drawImage(L,-j,-J);var z=j*A/D+N<<0,Q=Math.ceil(n*A/D),k=J*t/P/F+G<<0,O=Math.ceil(q*t/P/F);M.drawImage(I,0,0,n,q,z,k,Q,O),j+=K}J+=K}I=C=null}function a(j){var g=j.naturalWidth,k=j.naturalHeight;if(g*k>1048576){var f=document.createElement("canvas");f.width=f.height=1;var h=f.getContext("2d");return h.drawImage(j,-g+1,0),0===h.getImageData(0,0,1,1).data[3]}return !1}function c(m,w,h){var k=document.createElement("canvas");k.width=1,k.height=h;var f=k.getContext("2d");f.drawImage(m,0,0);for(var g=f.getImageData(0,0,1,h).data,q=0,x=h,v=h;v>q;){var p=g[4*(v-1)+3];0===p?x=v:q=v,v=x+q>>1}k=null;var j=v/h;return 0===j?1:j}return{isSubsampled:a,renderTo:b}}),a6(ac,[aB,aS,a7,a1,aQ,ay,aW,a2,bc],function(j,p,g,h,b,f,l,q,m){function k(){function u(){if(!I&&!C){throw new g.ImageError(g.DOMException.INVALID_STATE_ERR)}return I||C}function A(c){return h.atob(c.substring(c.indexOf("base64,")+7))}function n(v,c){return"data:"+(c||"")+";base64,"+h.btoa(v)}function z(v){var c=this;C=new Image,C.onerror=function(){s.call(this),c.trigger("error",g.ImageError.WRONG_FORMAT)},C.onload=function(){c.trigger("load")},C.src=/^data:[^;]*;base64,/.test(v)?v:n(v,D.type)}function t(x,v){var c=this,w;return window.FileReader?(w=new FileReader,w.onload=function(){v(this.result)},w.onerror=function(){c.trigger("error",g.ImageError.WRONG_FORMAT)},w.readAsDataURL(x),void 0):v(x.getAsDataURL())}function r(x,E,e,w){var O=this,R,Q,N=0,y=0,M,L,J,K;if(o=w,K=this.meta&&this.meta.tiff&&this.meta.tiff.Orientation||1,-1!==p.inArray(K,[5,6,7,8])){var P=x;x=E,E=P}return M=u(),e?(x=Math.min(x,M.width),E=Math.min(E,M.height),R=Math.max(x/M.width,E/M.height)):R=Math.min(x/M.width,E/M.height),R>1&&!e&&w?void this.trigger("Resize"):(I||(I=document.createElement("canvas")),L=Math.round(M.width*R),J=Math.round(M.height*R),e?(I.width=x,I.height=E,L>x&&(N=Math.round((L-x)/2)),J>E&&(y=Math.round((J-E)/2))):(I.width=L,I.height=J),o||i(I.width,I.height,K),a.call(this,M,I,-N,-y,L,J),this.width=I.width,this.height=I.height,B=!0,void O.trigger("Resize"))}function a(y,v,J,c,x,E){if("iOS"===m.OS){l.renderTo(y,v,{width:x,height:E,x:J,y:c})}else{var w=v.getContext("2d");w.drawImage(y,J,c,x,E)}}function i(w,v,x){switch(x){case 5:case 6:case 7:case 8:I.width=v,I.height=w;break;default:I.width=w,I.height=v}var c=I.getContext("2d");switch(x){case 2:c.translate(w,0),c.scale(-1,1);break;case 3:c.translate(w,v),c.rotate(Math.PI);break;case 4:c.translate(0,v),c.scale(1,-1);break;case 5:c.rotate(0.5*Math.PI),c.scale(1,-1);break;case 6:c.rotate(0.5*Math.PI),c.translate(0,-v);break;case 7:c.rotate(0.5*Math.PI),c.translate(w,-v),c.scale(-1,1);break;case 8:c.rotate(-0.5*Math.PI),c.translate(-w,0)}}function s(){F&&(F.purge(),F=null),G=C=I=D=null,B=!1}var H=this,C,F,I,G,D,B=!1,o=!0;p.extend(this,{loadFromBlob:function(x){var v=this,c=v.getRuntime(),w=arguments.length>1?arguments[1]:!0;if(!c.can("access_binary")){throw new g.RuntimeError(g.RuntimeError.NOT_SUPPORTED_ERR)}return D=x,x.isDetached()?(G=x.getSource(),void z.call(this,G)):void t.call(this,x.getSource(),function(y){w&&(G=A(y)),z.call(v,y)})},loadFromImage:function(v,c){this.meta=v.meta,D=new b(null,{name:v.name,size:v.size,type:v.type}),z.call(this,c?G=v.getAsBinaryString():v.getAsDataURL())},getInfo:function(){var c=this.getRuntime(),e;return !F&&G&&c.can("access_image_binary")&&(F=new f(G)),e={width:u().width||0,height:u().height||0,type:D.type||q.getFileMime(D.name),size:G&&G.length||D.size||0,name:D.name||"",meta:F&&F.meta||this.meta||{}}},downsize:function(){r.apply(this,arguments)},getAsCanvas:function(){return I&&(I.id=this.uid+"_canvas"),I},getAsBlob:function(v,c){return v!==this.type&&r.call(this,this.width,this.height,!1),new b(null,{name:D.name||"",type:v,data:H.getAsBinaryString.call(this,v,c)})},getAsDataURL:function(v){var c=arguments[1]||90;if(!B){return C.src}if("image/jpeg"!==v){return I.toDataURL("image/png")}try{return I.toDataURL("image/jpeg",c/100)}catch(w){return I.toDataURL("image/jpeg")}},getAsBinaryString:function(w,v){if(!B){return G||(G=A(H.getAsDataURL(w,v))),G}if("image/jpeg"!==w){G=A(H.getAsDataURL(w,v))}else{var x;v||(v=90);try{x=I.toDataURL("image/jpeg",v/100)}catch(c){x=I.toDataURL("image/jpeg")}G=A(x),F&&(G=F.stripHeaders(G),o&&(F.meta&&F.meta.exif&&F.setExif({PixelXDimension:this.width,PixelYDimension:this.height}),G=F.writeHeaders(G)),F.purge(),F=null)}return B=!1,G},destroy:function(){H=null,s.call(this),this.getRuntime().getShim().removeInstance(this.uid)}})}return j.Image=k}),a6(a5,[aS,bc,ba,a7,a8],function(h,l,f,g,b){function c(){var i;try{i=navigator.plugins["Shockwave Flash"],i=i.description}catch(a){try{i=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(o){i="0.0"}}return i=i.match(/\d+/g),parseFloat(i[0]+"."+i[1])}function j(i){var n=this,e;i=h.extend({swf_url:l.swf_url},i),b.call(this,i,m,{access_binary:function(a){return a&&"browser"===n.mode},access_image_binary:function(a){return a&&"browser"===n.mode},display_media:b.capTrue,do_cors:b.capTrue,drag_and_drop:!1,report_upload_progress:function(){return"client"===n.mode},resize_image:b.capTrue,return_response_headers:!1,return_response_type:function(a){return"json"===a&&window.JSON?!0:!h.arrayDiff(a,["","text","document"])||"browser"===n.mode},return_status_code:function(a){return"browser"===n.mode||!h.arrayDiff(a,[200,404])},select_file:b.capTrue,select_multiple:b.capTrue,send_binary_string:function(a){return a&&"browser"===n.mode},send_browser_cookies:function(a){return a&&"browser"===n.mode},send_custom_headers:function(a){return a&&"browser"===n.mode},send_multipart:b.capTrue,slice_blob:function(a){return a&&"browser"===n.mode},stream_upload:function(a){return a&&"browser"===n.mode},summon_file_dialog:!1,upload_filesize:function(a){return h.parseSizeStr(a)<=2097152||"client"===n.mode},use_http_method:function(a){return !h.arrayDiff(a,["GET","POST"])}},{access_binary:function(a){return a?"browser":"client"},access_image_binary:function(a){return a?"browser":"client"},report_upload_progress:function(a){return a?"browser":"client"},return_response_type:function(a){return h.arrayDiff(a,["","text","json","document"])?"browser":["client","browser"]},return_status_code:function(a){return h.arrayDiff(a,[200,404])?"browser":["client","browser"]},send_binary_string:function(a){return a?"browser":"client"},send_browser_cookies:function(a){return a?"browser":"client"},send_custom_headers:function(a){return a?"browser":"client"},stream_upload:function(a){return a?"client":"browser"},upload_filesize:function(a){return h.parseSizeStr(a)>=2097152?"client":"browser"}},"client"),c()<10&&(this.mode=!1),h.extend(this,{getShim:function(){return f.get(this.uid)},shimExec:function(o,a){var p=[].slice.call(arguments,2);return n.getShim().exec(this.uid,o,a,p)},init:function(){var q,a,p;p=this.getShimContainer(),h.extend(p.style,{position:"absolute",top:"-8px",left:"-8px",width:"9px",height:"9px",overflow:"hidden"}),q='<object id="'+this.uid+'" type="application/x-shockwave-flash" data="'+i.swf_url+'" ',"IE"===l.browser&&(q+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),q+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+i.swf_url+'" /><param name="flashvars" value="uid='+escape(this.uid)+"&target="+l.global_event_dispatcher+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>',"IE"===l.browser?(a=document.createElement("div"),p.appendChild(a),a.outerHTML=q,a=p=null):p.innerHTML=q,e=setTimeout(function(){n&&!n.initialized&&n.trigger("Error",new g.RuntimeError(g.RuntimeError.NOT_INIT_ERR))},5000)},destroy:function(a){return function(){a.call(n),clearTimeout(e),i=e=a=n=null}}(this.destroy)},k)}var m="flash",k={};return b.addConstructor(m,j),k}),a6(ae,[a5,aO],function(b,a){var c={slice:function(h,k,f,g){var j=this.getRuntime();return 0>k?k=Math.max(h.size+k,0):k>0&&(k=Math.min(k,h.size)),0>f?f=Math.max(h.size+f,0):f>0&&(f=Math.min(f,h.size)),h=j.shimExec.call(this,"Blob","slice",k,f,g||""),h&&(h=new a(j.uid,h)),h}};return b.Blob=c}),a6(ad,[a5],function(b){var a={init:function(c){this.getRuntime().shimExec.call(this,"FileInput","init",{name:c.name,accept:c.accept,multiple:c.multiple}),this.trigger("ready")}};return b.FileInput=a}),a6(ab,[a5,a1],function(f,b){function g(h,i){switch(i){case"readAsText":return b.atob(h,"utf8");case"readAsBinaryString":return b.atob(h);case"readAsDataURL":return h}return null}var a="",c={read:function(j,h){var i=this,k=i.getRuntime();return"readAsDataURL"===j&&(a="data:"+(h.type||"")+";base64,"),i.bind("Progress",function(e,l){l&&(a+=g(l,j))}),k.shimExec.call(this,"FileReader","readAsBase64",h.uid)},getResult:function(){return a},destroy:function(){a=null}};return f.FileReader=c}),a6(aM,[a5,a1],function(c,b){function f(g,h){switch(h){case"readAsText":return b.atob(g,"utf8");case"readAsBinaryString":return b.atob(g);case"readAsDataURL":return g}return null}var a={read:function(k,h){var g,j=this.getRuntime();return(g=j.shimExec.call(this,"FileReaderSync","readAsBase64",h.uid))?("readAsDataURL"===k&&(g="data:"+(h.type||"")+";base64,"+g),f(g,k,h.type)):null}};return c.FileReaderSync=a}),a6(au,[a5,aS,aO,aQ,ag,aE,an],function(j,f,l,c,h,k,b){var g={send:function(p,n){function a(){p.transport=m.mode,m.shimExec.call(t,"XMLHttpRequest","send",p,n)}function w(r,i){m.shimExec.call(t,"XMLHttpRequest","appendBlob",r,i.uid),n=null,a()}function v(r,i){var s=new b;s.bind("TransportingComplete",function(){i(this.result)}),s.transport(r.getSource(),r.type,{ruid:m.uid})}var t=this,m=t.getRuntime();if(f.isEmptyObj(p.headers)||f.each(p.headers,function(r,i){m.shimExec.call(t,"XMLHttpRequest","setRequestHeader",i,r.toString())}),n instanceof k){var q;if(n.each(function(r,i){r instanceof l?q=i:m.shimExec.call(t,"XMLHttpRequest","append",i,r)}),n.hasBlob()){var o=n.getBlob();o.isDetached()?v(o,function(i){o.destroy(),w(q,i)}):w(q,o)}else{n=null,a()}}else{n instanceof l?n.isDetached()?v(n,function(i){n.destroy(),n=i.uid,a()}):(n=n.uid,a()):a()}},getResponse:function(m){var q,p,i=this.getRuntime();if(p=i.shimExec.call(this,"XMLHttpRequest","getResponseAsBlob")){if(p=new c(i.uid,p),"blob"===m){return p}try{if(q=new h,~f.inArray(m,["","text"])){return q.readAsText(p)}if("json"===m&&window.JSON){return JSON.parse(q.readAsText(p))}}finally{p.destroy()}}return null},abort:function(i){var a=this.getRuntime();a.shimExec.call(this,"XMLHttpRequest","abort"),this.dispatchEvent("readystatechange"),this.dispatchEvent("abort")}};return j.XMLHttpRequest=g}),a6(aa,[a5,aO],function(b,a){var c={getAsBlob:function(g){var h=this.getRuntime(),f=h.shimExec.call(this,"Transporter","getAsBlob",g);return f?new a(h.uid,f):null}};return b.Transporter=c}),a6(ar,[a5,aS,an,aO,ag],function(f,b,h,a,c){var g={loadFromBlob:function(m){function k(i){l.shimExec.call(j,"Image","loadFromBlob",i.uid),j=l=null}var j=this,l=j.getRuntime();if(m.isDetached()){var n=new h;n.bind("TransportingComplete",function(){k(n.result.getSource())}),n.transport(m.getSource(),m.type,{ruid:l.uid})}else{k(m.getSource())}},loadFromImage:function(j){var i=this.getRuntime();return i.shimExec.call(this,"Image","loadFromImage",j.uid)},getAsBlob:function(k,i){var l=this.getRuntime(),j=l.shimExec.call(this,"Image","getAsBlob",k,i);return j?new a(l.uid,j):null},getAsDataURL:function(){var j=this.getRuntime(),i=j.Image.getAsBlob.apply(this,arguments),k;return i?(k=new c,k.readAsDataURL(i)):null}};return f.Image=g}),a6(al,[aS,bc,ba,a7,a8],function(h,l,f,g,b){function c(y){var D=!1,v=null,x,p,q,B,E,C=0;try{try{v=new ActiveXObject("AgControl.AgControl"),v.IsVersionSupported(y)&&(D=!0),v=null}catch(A){var w=navigator.plugins["Silverlight Plug-In"];if(w){for(x=w.description,"1.0.30226.2"===x&&(x="2.0.30226.2"),p=x.split(".");p.length>3;){p.pop()}for(;p.length<4;){p.push(0)}for(q=y.split(".");q.length>4;){q.pop()}do{B=parseInt(q[C],10),E=parseInt(p[C],10),C++}while(C<q.length&&B===E);E>=B&&!isNaN(B)&&(D=!0)}}}catch(z){D=!1}return D}function j(i){var n=this,e;i=h.extend({xap_url:l.xap_url},i),b.call(this,i,m,{access_binary:b.capTrue,access_image_binary:b.capTrue,display_media:b.capTrue,do_cors:b.capTrue,drag_and_drop:!1,report_upload_progress:b.capTrue,resize_image:b.capTrue,return_response_headers:function(a){return a&&"client"===n.mode},return_response_type:function(a){return"json"!==a?!0:!!window.JSON},return_status_code:function(a){return"client"===n.mode||!h.arrayDiff(a,[200,404])},select_file:b.capTrue,select_multiple:b.capTrue,send_binary_string:b.capTrue,send_browser_cookies:function(a){return a&&"browser"===n.mode},send_custom_headers:function(a){return a&&"client"===n.mode},send_multipart:b.capTrue,slice_blob:b.capTrue,stream_upload:!0,summon_file_dialog:!1,upload_filesize:b.capTrue,use_http_method:function(a){return"client"===n.mode||!h.arrayDiff(a,["GET","POST"])}},{return_response_headers:function(a){return a?"client":"browser"},return_status_code:function(a){return h.arrayDiff(a,[200,404])?"client":["client","browser"]},send_browser_cookies:function(a){return a?"browser":"client"},send_custom_headers:function(a){return a?"client":"browser"},use_http_method:function(a){return h.arrayDiff(a,["GET","POST"])?"client":["client","browser"]}}),c("2.0.31005.0")&&"Opera"!==l.browser||(this.mode=!1),h.extend(this,{getShim:function(){return f.get(this.uid).content.Moxie},shimExec:function(o,a){var p=[].slice.call(arguments,2);return n.getShim().exec(this.uid,o,a,p)},init:function(){var a;a=this.getShimContainer(),a.innerHTML='<object id="'+this.uid+'" data="data:application/x-silverlight," type="application/x-silverlight-2" width="100%" height="100%" style="outline:none;"><param name="source" value="'+i.xap_url+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="enablehtmlaccess" value="true"/><param name="initParams" value="uid='+this.uid+",target="+l.global_event_dispatcher+'"/></object>',e=setTimeout(function(){n&&!n.initialized&&n.trigger("Error",new g.RuntimeError(g.RuntimeError.NOT_INIT_ERR))},"Windows"!==l.OS?10000:5000)},destroy:function(a){return function(){a.call(n),clearTimeout(e),i=e=a=n=null}}(this.destroy)},k)}var m="silverlight",k={};return b.addConstructor(m,j),k}),a6(aX,[al,aS,ae],function(b,a,c){return b.Blob=a.extend({},c)}),a6(a9,[al],function(b){var a={init:function(f){function c(h){for(var g="",i=0;i<h.length;i++){g+=(""!==g?"|":"")+h[i].title+" | *."+h[i].extensions.replace(/,/g,";*.")}return g}this.getRuntime().shimExec.call(this,"FileInput","init",c(f.accept),f.name,f.multiple),this.trigger("ready")}};return b.FileInput=a}),a6(a4,[al,ba,aq],function(c,b,f){var a={init:function(){var j=this,g=j.getRuntime(),h;return h=g.getShimContainer(),f.addEvent(h,"dragover",function(i){i.preventDefault(),i.stopPropagation(),i.dataTransfer.dropEffect="copy"},j.uid),f.addEvent(h,"dragenter",function(i){i.preventDefault();var k=b.get(g.uid).dragEnter(i);k&&i.stopPropagation()},j.uid),f.addEvent(h,"drop",function(i){i.preventDefault();var k=b.get(g.uid).dragDrop(i);k&&i.stopPropagation()},j.uid),g.shimExec.call(this,"FileDrop","init")}};return c.FileDrop=a}),a6(aH,[al,aS,ab],function(b,a,c){return b.FileReader=a.extend({},c)}),a6(aK,[al,aS,aM],function(b,a,c){return b.FileReaderSync=a.extend({},c)}),a6(aJ,[al,aS,au],function(b,a,c){return b.XMLHttpRequest=a.extend({},c)}),a6(ah,[al,aS,aa],function(b,a,c){return b.Transporter=a.extend({},c)}),a6(ax,[al,aS,ar],function(b,a,c){return b.Image=a.extend({},c,{getInfo:function(){var h=this.getRuntime(),j=["tiff","exif","gps"],f={meta:{}},g=h.shimExec.call(this,"Image","getInfo");return g.meta&&a.each(j,function(m){var k=g.meta[m],q,p,i,l;if(k&&k.keys){for(f.meta[m]={},p=0,i=k.keys.length;i>p;p++){q=k.keys[p],l=k[q],l&&(/^(\d|[1-9]\d+)$/.test(l)?l=parseInt(l,10):/^\d*\.\d+$/.test(l)&&(l=parseFloat(l)),f.meta[m][q]=l)}}}),f.width=parseInt(g.width,10),f.height=parseInt(g.height,10),f.size=parseInt(g.size,10),f.type=g.type,f.name=g.name,f}})}),a6(aL,[aS,a7,a8,bc],function(h,f,k,c){function g(e){var l=this,i=k.capTest,a=k.capTrue;k.call(this,e,j,{access_binary:i(window.FileReader||window.File&&File.getAsDataURL),access_image_binary:!1,display_media:i(b.Image&&(c.can("create_canvas")||c.can("use_data_uri_over32kb"))),do_cors:!1,drag_and_drop:!1,filter_by_extension:i(function(){return"Chrome"===c.browser&&c.version>=28||"IE"===c.browser&&c.version>=10}()),resize_image:function(){return b.Image&&l.can("access_binary")&&c.can("create_canvas")},report_upload_progress:!1,return_response_headers:!1,return_response_type:function(m){return"json"===m&&window.JSON?!0:!!~h.inArray(m,["text","document",""])},return_status_code:function(m){return !h.arrayDiff(m,[200,404])},select_file:function(){return c.can("use_fileinput")},select_multiple:!1,send_binary_string:!1,send_custom_headers:!1,send_multipart:!0,slice_blob:!1,stream_upload:function(){return l.can("select_file")},summon_file_dialog:i(function(){return"Firefox"===c.browser&&c.version>=4||"Opera"===c.browser&&c.version>=12||!!~h.inArray(c.browser,["Chrome","Safari"])}()),upload_filesize:a,use_http_method:function(m){return !h.arrayDiff(m,["GET","POST"])}}),h.extend(this,{init:function(){this.trigger("Init")},destroy:function(m){return function(){m.call(l),m=l=null}}(this.destroy)}),h.extend(this.getShim(),b)}var j="html4",b={};return k.addConstructor(j,g),b}),a6(aF,[aL,aS,ba,aq,a2,bc],function(h,f,k,c,g,j){function b(){function n(){var t=this,e=t.getRuntime(),w,u,q,v,a,s;s=f.guid("uid_"),w=e.getShimContainer(),i&&(q=k.get(i+"_form"),q&&f.extend(q.style,{top:"100%"})),v=document.createElement("form"),v.setAttribute("id",s+"_form"),v.setAttribute("method","post"),v.setAttribute("enctype","multipart/form-data"),v.setAttribute("encoding","multipart/form-data"),f.extend(v.style,{overflow:"hidden",position:"absolute",top:0,left:0,width:"100%",height:"100%"}),a=document.createElement("input"),a.setAttribute("id",s),a.setAttribute("type","file"),a.setAttribute("name",o.name||"Filedata"),a.setAttribute("accept",l.join(",")),f.extend(a.style,{fontSize:"999px",opacity:0}),v.appendChild(a),w.appendChild(v),f.extend(a.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"}),"IE"===j.browser&&j.version<10&&f.extend(a.style,{filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)"}),a.onchange=function(){var r;this.value&&(r=this.files?this.files[0]:{name:this.value},m=[r],this.onchange=function(){},n.call(t),t.bind("change",function p(){var y=k.get(s),x=k.get(s+"_form"),z;t.unbind("change",p),t.files.length&&y&&x&&(z=t.files[0],y.setAttribute("id",z.uid),x.setAttribute("id",z.uid+"_form"),x.setAttribute("target",z.uid+"_iframe")),y=x=null},998),a=v=null,t.trigger("change"))},e.can("summon_file_dialog")&&(u=k.get(o.browse_button),c.removeEvent(u,"click",t.uid),c.addEvent(u,"click",function(p){a&&!a.disabled&&a.click(),p.preventDefault()},t.uid)),i=s,w=q=u=null}var i,m=[],l=[],o;f.extend(this,{init:function(p){var r=this,e=r.getRuntime(),q;o=p,l=p.accept.mimes||g.extList2mimes(p.accept,e.can("filter_by_extension")),q=e.getShimContainer(),function(){var t,s,a;t=k.get(p.browse_button),e.can("summon_file_dialog")&&("static"===k.getStyle(t,"position")&&(t.style.position="relative"),s=parseInt(k.getStyle(t,"z-index"),10)||1,t.style.zIndex=s,q.style.zIndex=s-1),a=e.can("summon_file_dialog")?t:q,c.addEvent(a,"mouseover",function(){r.trigger("mouseenter")},r.uid),c.addEvent(a,"mouseout",function(){r.trigger("mouseleave")},r.uid),c.addEvent(a,"mousedown",function(){r.trigger("mousedown")},r.uid),c.addEvent(k.get(p.container),"mouseup",function(){r.trigger("mouseup")},r.uid),t=null}(),n.call(this),q=null,r.trigger({type:"ready",async:!0})},getFiles:function(){return m},disable:function(p){var a;(a=k.get(i))&&(a.disabled=!!p)},destroy:function(){var q=this.getRuntime(),a=q.getShim(),p=q.getShimContainer();c.removeAllEvents(p,this.uid),c.removeAllEvents(o&&k.get(o.container),this.uid),c.removeAllEvents(o&&k.get(o.browse_button),this.uid),p&&(p.innerHTML=""),a.removeInstance(this.uid),i=m=l=o=p=a=null}})}return h.FileInput=b}),a6(aI,[aL,az],function(b,a){return b.FileReader=a}),a6(ak,[aL,aS,ba,aj,a7,aq,aO,aE],function(h,l,f,g,b,c,j,m){function k(){function n(z){var w=this,v,y,p,x,q=!1;if(a){if(v=a.id.replace(/_iframe$/,""),y=f.get(v+"_form")){for(p=y.getElementsByTagName("input"),x=p.length;x--;){switch(p[x].getAttribute("type")){case"hidden":p[x].parentNode.removeChild(p[x]);break;case"file":q=!0}}p=[],q||y.parentNode.removeChild(y),y=null}setTimeout(function(){c.removeEvent(a,"load",w.uid),a.parentNode&&a.parentNode.removeChild(a);var e=w.getRuntime().getShimContainer();e.children.length||e.parentNode.removeChild(e),e=a=null,z()},1)}}var i,o,a;l.extend(this,{send:function(u,t){function r(){var v=q.getShimContainer()||document.body,p=document.createElement("div");p.innerHTML='<iframe id="'+s+'_iframe" name="'+s+'_iframe" src="javascript:&quot;&quot;" style="display:none"></iframe>',a=p.firstChild,v.appendChild(a),c.addEvent(a,"load",function(){var y;try{y=a.contentWindow.document||a.contentDocument||window.frames[a.id].document,/^4(0[0-9]|1[0-7]|2[2346])\s/.test(y.title)?i=y.title.replace(/^(\d+).*$/,"$1"):(i=200,o=l.trim(y.body.innerHTML),e.trigger({type:"progress",loaded:o.length,total:o.length}),z&&e.trigger({type:"uploadprogress",loaded:z.size||1025,total:z.size||1025}))}catch(w){if(!g.hasSameOrigin(u.url)){return void n.call(e,function(){e.trigger("error")})}i=404}n.call(e,function(){e.trigger("load")})},e.uid)}var e=this,q=e.getRuntime(),s,A,x,z;if(i=o=null,t instanceof m&&t.hasBlob()){if(z=t.getBlob(),s=z.uid,x=f.get(s),A=f.get(s+"_form"),!A){throw new b.DOMException(b.DOMException.NOT_FOUND_ERR)}}else{s=l.guid("uid_"),A=document.createElement("form"),A.setAttribute("id",s+"_form"),A.setAttribute("method",u.method),A.setAttribute("enctype","multipart/form-data"),A.setAttribute("encoding","multipart/form-data"),A.setAttribute("target",s+"_iframe"),q.getShimContainer().appendChild(A)}t instanceof m&&t.each(function(v,w){if(v instanceof j){x&&x.setAttribute("name",w)}else{var p=document.createElement("input");l.extend(p,{type:"hidden",name:w,value:v}),x?A.insertBefore(p,x):A.appendChild(p)}}),A.setAttribute("action",u.url),r(),A.submit(),e.trigger("loadstart")},getStatus:function(){return i},getResponse:function(p){if("json"===p&&"string"===l.typeOf(o)&&window.JSON){try{return JSON.parse(o.replace(/^\s*<pre[^>]*>/,"").replace(/<\/pre>\s*$/,""))}catch(q){return null}}return o},abort:function(){var e=this;a&&a.contentWindow&&(a.contentWindow.stop?a.contentWindow.stop():a.contentWindow.document.execCommand?a.contentWindow.document.execCommand("Stop"):a.src="about:blank"),n.call(this,function(){e.dispatchEvent("abort")})}})}return h.XMLHttpRequest=k}),a6(aG,[aL,ac],function(b,a){return b.Image=a}),bf([aS,bd,a2,bc,ba,a7,aY,a1,a8,aR,aO,aQ,aA,bg,aP,be,aj,ag,aE,ai,an,av,aq])}(this);(function(c){var a={},f=c.moxie.core.utils.Basic.inArray;return function b(j){var g,h;for(g in j){h=typeof j[g],h==="object"&&!~f(g,["Exceptions","Env","Mime"])?b(j[g]):h==="function"&&(a[g]=j[g])}}(c.moxie),a.Env=c.moxie.core.utils.Env,a.Mime=c.moxie.core.utils.Mime,a.Exceptions=c.moxie.core.Exceptions,c.mOxie=a,c.o||(c.o=a),a})(this);(function(g,b,j){function c(l){function k(q,o,p){var n={chunks:"slice_blob",jpgresize:"send_binary_string",pngresize:"send_binary_string",progress:"report_upload_progress",multi_selection:"select_multiple",dragdrop:"drag_and_drop",drop_element:"drag_and_drop",headers:"send_custom_headers",urlstream_upload:"send_binary_string",canSendBinary:"send_binary",triggerDialog:"summon_file_dialog"};n[q]?m[n[q]]=o:p||(m[q]=o)}var i=l.required_features,m={};if(typeof i=="string"){h.each(i.split(/\s*,\s*/),function(n){k(n,!0)})}else{if(typeof i=="object"){h.each(i,function(o,n){k(n,o)})}else{if(i===!0){l.chunk_size>0&&(m.slice_blob=!0);if(l.resize.enabled||!l.multipart){m.send_binary_string=!0}h.each(l,function(o,n){k(n,!!o,!0)})}}}return m}var f=g.setTimeout,a={},h={VERSION:"2.1.2",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,FILE_DUPLICATE_ERROR:-602,IMAGE_FORMAT_ERROR:-700,MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:b.mimes,ua:b.ua,typeOf:b.typeOf,extend:b.extend,guid:b.guid,get:function(m){var l=[],e;b.typeOf(m)!=="array"&&(m=[m]);var k=m.length;while(k--){e=b.get(m[k]),e&&l.push(e)}return l.length?l:null},each:b.each,getPos:b.getPos,getSize:b.getSize,xmlEncode:function(k){var i={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},l=/[<>&\"\']/g;return k?(""+k).replace(l,function(m){return i[m]?"&"+i[m]+";":m}):k},toArray:b.toArray,inArray:b.inArray,addI18n:b.addI18n,translate:b.translate,isEmptyObj:b.isEmptyObj,hasClass:b.hasClass,addClass:b.addClass,removeClass:b.removeClass,getStyle:b.getStyle,addEvent:b.addEvent,removeEvent:b.removeEvent,removeAllEvents:b.removeAllEvents,cleanName:function(k){var i,l;l=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"];for(i=0;i<l.length;i+=2){k=k.replace(l[i],l[i+1])}return k=k.replace(/\s+/g,"_"),k=k.replace(/[^a-z0-9_\-\.]+/gi,""),k},buildUrl:function(k,i){var l="";return h.each(i,function(n,m){l+=(l?"&":"")+encodeURIComponent(m)+"="+encodeURIComponent(n)}),l&&(k+=(k.indexOf("?")>0?"&":"?")+l),k},formatSize:function(l){function i(n,m){return Math.round(n*Math.pow(10,m))/Math.pow(10,m)}if(l===j||/\D/.test(l)){return h.translate("N/A")}var k=Math.pow(1024,4);return l>k?i(l/k,1)+" "+h.translate("tb"):l>(k/=1024)?i(l/k,1)+" "+h.translate("gb"):l>(k/=1024)?i(l/k,1)+" "+h.translate("mb"):l>1024?Math.round(l/1024)+" "+h.translate("kb"):l+" "+h.translate("b")},parseSize:b.parseSizeStr,predictRuntime:function(m,o){var l,k;return l=new h.Uploader(m),k=b.Runtime.thatCan(l.getOption().required_features,o||m.runtimes),l.destroy(),k},addFileFilter:function(k,i){a[k]=i}};h.addFileFilter("mime_types",function(k,i,l){k.length&&!k.regexp.test(i.name)?(this.trigger("Error",{code:h.FILE_EXTENSION_ERROR,message:h.translate("File extension error."),file:i}),l(!1)):l(!0)}),h.addFileFilter("max_file_size",function(l,i,m){var k;l=h.parseSize(l),i.size!==k&&l&&i.size>l?(this.trigger("Error",{code:h.FILE_SIZE_ERROR,message:h.translate("File size error."),file:i}),m(!1)):m(!0)}),h.addFileFilter("prevent_duplicates",function(l,i,m){if(l){var k=this.files.length;while(k--){if(i.name===this.files[k].name&&i.size===this.files[k].size){this.trigger("Error",{code:h.FILE_DUPLICATE_ERROR,message:h.translate("Duplicate file error."),file:i}),m(!1);return}}}m(!0)}),h.Uploader=function(Y){function W(){var l,k=0,m;if(this.state==h.STARTED){for(m=0;m<X.length;m++){!l&&X[m].status==h.QUEUED?(l=X[m],this.trigger("BeforeUpload",l)&&(l.status=h.UPLOADING,this.trigger("UploadFile",l))):k++}k==X.length&&(this.state!==h.STOPPED&&(this.state=h.STOPPED,this.trigger("StateChanged")),this.trigger("UploadComplete",X))}}function t(k){k.percent=k.size>0?Math.ceil(k.loaded/k.size*100):100,ab()}function ab(){var l,k;Z.reset();for(l=0;l<X.length;l++){k=X[l],k.size!==j?(Z.size+=k.origSize,Z.loaded+=k.loaded*k.origSize/k.size):Z.size=j,k.status==h.DONE?Z.uploaded++:k.status==h.FAILED?Z.failed++:Z.queued++}Z.size===j?Z.percent=X.length>0?Math.ceil(Z.uploaded/X.length*100):0:(Z.bytesPerSec=Math.ceil(Z.loaded/((+(new Date)-K||1)/1000)),Z.percent=Z.size>0?Math.ceil(Z.loaded/Z.size*100):0)}function B(){var k=aa[0]||V[0];return k?k.getRuntime().uid:!1}function H(l,m){if(l.ruid){var k=b.Runtime.getInfo(l.ruid);if(k){return k.can(m)}}return !1}function n(){this.bind("FilesAdded FilesRemoved",function(k){k.trigger("QueueChanged"),k.refresh()}),this.bind("CancelUpload",o),this.bind("BeforeUpload",J),this.bind("UploadFile",U),this.bind("UploadProgress",s),this.bind("StateChanged",P),this.bind("QueueChanged",ab),this.bind("Error",ad),this.bind("FileUploaded",r),this.bind("Destroy",I)}function z(v,w){var p=this,l=0,m=[],k={runtime_order:v.runtimes,required_caps:v.required_features,preferred_caps:R,swf_url:v.flash_swf_url,xap_url:v.silverlight_xap_url};h.each(v.runtimes.split(/\s*,\s*/),function(e){v[e]&&(k[e]=v[e])}),v.browse_button&&h.each(v.browse_button,function(e){m.push(function(x){var u=new b.FileInput(h.extend({},k,{accept:v.filters.mime_types,name:v.file_data_name,multiple:v.multi_selection,container:v.container,browse_button:e}));u.onready=function(){var y=b.Runtime.getInfo(this.ruid);b.extend(p.features,{chunks:y.can("slice_blob"),multipart:y.can("send_multipart"),multi_selection:y.can("select_multiple")}),l++,aa.push(this),x()},u.onchange=function(){p.addFile(this.files)},u.bind("mouseenter mouseleave mousedown mouseup",function(y){F||(v.browse_button_hover&&("mouseenter"===y.type?b.addClass(e,v.browse_button_hover):"mouseleave"===y.type&&b.removeClass(e,v.browse_button_hover)),v.browse_button_active&&("mousedown"===y.type?b.addClass(e,v.browse_button_active):"mouseup"===y.type&&b.removeClass(e,v.browse_button_active)))}),u.bind("mousedown",function(){p.trigger("Browse")}),u.bind("error runtimeerror",function(){u=null,x()}),u.init()})}),v.drop_element&&h.each(v.drop_element,function(u){m.push(function(x){var e=new b.FileDrop(h.extend({},k,{drop_zone:u}));e.onready=function(){var y=b.Runtime.getInfo(this.ruid);p.features.dragdrop=y.can("drag_and_drop"),l++,V.push(this),x()},e.ondrop=function(){p.addFile(this.files)},e.bind("error runtimeerror",function(){e=null,x()}),e.init()})}),b.inSeries(m,function(){typeof w=="function"&&w(l)})}function i(p,m,k){var l=new b.Image;try{l.onload=function(){if(m.width>this.width&&m.height>this.height&&m.quality===j&&m.preserve_headers&&!m.crop){return this.destroy(),k(p)}l.downsize(m.width,m.height,m.crop,m.preserve_headers)},l.onresize=function(){k(this.getAsBlob(p.type,m.quality)),this.destroy()},l.onerror=function(){k(p)},l.load(p)}catch(u){k(p)}}function q(v,w,m){function p(y,u,A){var x=ac[y];switch(y){case"max_file_size":y==="max_file_size"&&(ac.max_file_size=ac.filters.max_file_size=u);break;case"chunk_size":if(u=h.parseSize(u)){ac[y]=u,ac.send_file_name=!0}break;case"multipart":ac[y]=u,u||(ac.send_file_name=!0);break;case"unique_names":ac[y]=u,u&&(ac.send_file_name=!0);break;case"filters":h.typeOf(u)==="array"&&(u={mime_types:u}),A?h.extend(ac.filters,u):ac.filters=u,u.mime_types&&(ac.filters.mime_types.regexp=function(D){var C=[];return h.each(D,function(E){h.each(E.extensions.split(/,/),function(L){/^\s*\*\s*$/.test(L)?C.push("\\.*"):C.push("\\."+L.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})}),new RegExp("("+C.join("|")+")$","i")}(ac.filters.mime_types));break;case"resize":A?h.extend(ac.resize,u,{enabled:!0}):ac.resize=u;break;case"prevent_duplicates":ac.prevent_duplicates=ac.filters.prevent_duplicates=!!u;break;case"browse_button":case"drop_element":u=h.get(u);case"container":case"runtimes":case"multi_selection":case"flash_swf_url":case"silverlight_xap_url":ac[y]=u,A||(k=!0);break;default:ac[y]=u}A||l.trigger("OptionChanged",y,u,x)}var l=this,k=!1;typeof v=="object"?h.each(v,function(x,u){p(u,x,m)}):p(v,w,m),m?(ac.required_features=c(h.extend({},ac)),R=c(h.extend({},ac,{required_features:!0}))):k&&(l.trigger("Destroy"),z.call(l,ac,function(u){u?(l.runtime=b.Runtime.getInfo(B()).type,l.trigger("Init",{runtime:l.runtime}),l.trigger("PostInit")):l.trigger("Error",{code:h.INIT_ERROR,message:h.translate("Init error.")})}))}function J(m,k){if(m.settings.unique_names){var p=k.name.match(/\.([^.]+)$/),l="part";p&&(l=p[1]),k.target_name=k.id+"."+l}}function U(x,l){function v(){C-->0?f(k,1000):(l.loaded=w,x.trigger("Error",{code:h.HTTP_ERROR,message:h.translate("HTTP Error."),file:l,response:Q.responseText,status:Q.status,responseHeaders:Q.getAllResponseHeaders()}))}function k(){var u,e,p={},E;if(l.status!==h.UPLOADING||x.state===h.STOPPED){return}x.settings.send_file_name&&(p.name=l.target_name||l.name),D&&A.chunks&&y.size>D?(E=Math.min(D,y.size-w),u=y.slice(w,w+E)):(E=y.size,u=y),D&&A.chunks&&(x.settings.send_chunk_number?(p.chunk=Math.ceil(w/D),p.chunks=Math.ceil(y.size/D)):(p.offset=w,p.total=y.size)),Q=new b.XMLHttpRequest,Q.upload&&(Q.upload.onprogress=function(L){l.loaded=Math.min(l.size,w+L.loaded),x.trigger("UploadProgress",l)}),Q.onload=function(){if(Q.status>=400){v();return}C=x.settings.max_retries,E<y.size?(u.destroy(),w+=E,l.loaded=Math.min(w,y.size),x.trigger("ChunkUploaded",l,{offset:l.loaded,total:y.size,response:Q.responseText,status:Q.status,responseHeaders:Q.getAllResponseHeaders()}),b.Env.browser==="Android Browser"&&x.trigger("UploadProgress",l)):l.loaded=l.size,u=e=null,!w||w>=y.size?(l.size!=l.origSize&&(y.destroy(),y=null),x.trigger("UploadProgress",l),l.status=h.DONE,x.trigger("FileUploaded",l,{response:Q.responseText,status:Q.status,responseHeaders:Q.getAllResponseHeaders()})):f(k,1)},Q.onerror=function(){v()},Q.onloadend=function(){this.destroy(),Q=null},x.settings.multipart&&A.multipart?(Q.open("post",m,!0),h.each(x.settings.headers,function(M,L){Q.setRequestHeader(L,M)}),e=new b.FormData,h.each(h.extend(p,x.settings.multipart_params),function(M,L){e.append(L,M)}),e.append(x.settings.file_data_name,u),Q.send(e,{runtime_order:x.settings.runtimes,required_caps:x.settings.required_features,preferred_caps:R,swf_url:x.settings.flash_swf_url,xap_url:x.settings.silverlight_xap_url})):(m=h.buildUrl(x.settings.url,h.extend(p,x.settings.multipart_params)),Q.open("post",m,!0),Q.setRequestHeader("Content-Type","application/octet-stream"),h.each(x.settings.headers,function(M,L){Q.setRequestHeader(L,M)}),Q.send(u,{runtime_order:x.settings.runtimes,required_caps:x.settings.required_features,preferred_caps:R,swf_url:x.settings.flash_swf_url,xap_url:x.settings.silverlight_xap_url}))}var m=x.settings.url,D=x.settings.chunk_size,C=x.settings.max_retries,A=x.features,w=0,y;l.loaded&&(w=l.loaded=D?D*Math.floor(l.loaded/D):0),y=l.getSource(),x.settings.resize.enabled&&H(y,"send_binary_string")&&!!~b.inArray(y.type,["image/jpeg","image/png"])?i.call(this,y,x.settings.resize,function(p){y=p,l.size=p.size,k()}):k()}function s(l,k){t(k)}function P(l){if(l.state==h.STARTED){K=+(new Date)}else{if(l.state==h.STOPPED){for(var k=l.files.length-1;k>=0;k--){l.files[k].status==h.UPLOADING&&(l.files[k].status=h.QUEUED,ab())}}}}function o(){Q&&Q.abort()}function r(k){ab(),f(function(){W.call(k)},1)}function ad(l,k){k.code===h.INIT_ERROR?l.destroy():k.file&&(k.file.status=h.FAILED,t(k.file),l.state==h.STARTED&&(l.trigger("CancelUpload"),f(function(){W.call(l)},1)))}function I(k){k.stop(),h.each(X,function(l){l.destroy()}),X=[],aa.length&&(h.each(aa,function(l){l.destroy()}),aa=[]),V.length&&(h.each(V,function(l){l.destroy()}),V=[]),R={},F=!1,K=Q=null,Z.reset()}var G=h.guid(),ac,X=[],R={},aa=[],V=[],K,Z,F=!1,Q;ac={runtimes:b.Runtime.order,max_retries:0,chunk_size:0,multipart:!0,multi_selection:!0,file_data_name:"file",flash_swf_url:"js/Moxie.swf",silverlight_xap_url:"js/Moxie.xap",filters:{mime_types:[],prevent_duplicates:!1,max_file_size:0},resize:{enabled:!1,preserve_headers:!0,crop:!1},send_file_name:!0,send_chunk_number:!0},q.call(this,Y,null,!0),Z=new h.QueueProgress,h.extend(this,{id:G,uid:G,state:h.STOPPED,features:{},runtime:null,files:X,settings:ac,total:Z,init:function(){var k=this;typeof ac.preinit=="function"?ac.preinit(k):h.each(ac.preinit,function(e,l){k.bind(l,e)}),n.call(this);if(!ac.browse_button||!ac.url){this.trigger("Error",{code:h.INIT_ERROR,message:h.translate("Init error.")});return}z.call(this,ac,function(e){typeof ac.init=="function"?ac.init(k):h.each(ac.init,function(l,m){k.bind(m,l)}),e?(k.runtime=b.Runtime.getInfo(B()).type,k.trigger("Init",{runtime:k.runtime}),k.trigger("PostInit")):k.trigger("Error",{code:h.INIT_ERROR,message:h.translate("Init error.")})})},setOption:function(l,k){q.call(this,l,k,!this.runtime)},getOption:function(k){return k?ac[k]:ac},refresh:function(){aa.length&&h.each(aa,function(k){k.trigger("Refresh")}),this.trigger("Refresh")},start:function(){this.state!=h.STARTED&&(this.state=h.STARTED,this.trigger("StateChanged"),W.call(this))},stop:function(){this.state!=h.STOPPED&&(this.state=h.STOPPED,this.trigger("StateChanged"),this.trigger("CancelUpload"))},disableBrowse:function(){F=arguments[0]!==j?arguments[0]:!0,aa.length&&h.each(aa,function(k){k.disable(F)}),this.trigger("DisableBrowse",F)},getFile:function(l){var k;for(k=X.length-1;k>=0;k--){if(X[k].id===l){return X[k]}}},addFile:function(x,A){function y(u,C){var l=[];b.each(v.settings.filters,function(e,D){a[D]&&l.push(function(E){a[D].call(v,e,u,function(L){E(!L)})})}),b.inSeries(l,C)}function w(u){var l=b.typeOf(u);if(u instanceof b.File){if(!u.ruid&&!u.isDetached()){if(!k){return !1}u.ruid=k,u.connectRuntime(k)}w(new h.File(u))}else{u instanceof b.Blob?(w(u.getSource()),u.destroy()):u instanceof h.File?(A&&(u.name=A),p.push(function(e){y(u,function(C){C||(X.push(u),m.push(u),v.trigger("FileFiltered",u)),f(e,1)})})):b.inArray(l,["file","blob"])!==-1?w(new b.File(null,u)):l==="node"&&b.typeOf(u.files)==="filelist"?b.each(u.files,w):l==="array"&&(A=null,b.each(u,w))}}var v=this,p=[],m=[],k;k=B(),w(x),p.length&&b.inSeries(p,function(){m.length&&v.trigger("FilesAdded",m)})},removeFile:function(l){var k=typeof l=="string"?l:l.id;for(var m=X.length-1;m>=0;m--){if(X[m].id===k){return this.splice(m,1)[0]}}},splice:function(p,l){var m=X.splice(p===j?0:p,l===j?X.length:l),k=!1;return this.state==h.STARTED&&(h.each(m,function(u){if(u.status===h.UPLOADING){return k=!0,!1}}),k&&this.stop()),this.trigger("FilesRemoved",m),h.each(m,function(u){u.destroy()}),k&&this.start(),m},bind:function(m,k,p){var l=this;h.Uploader.prototype.bind.call(this,m,function(){var u=[].slice.call(arguments);return u.splice(0,1,l),k.apply(this,u)},0,p)},destroy:function(){this.trigger("Destroy"),ac=Z=null,this.unbindAll()}})},h.Uploader.prototype=b.EventTarget.instance,h.File=function(){function k(e){h.extend(this,{id:h.guid(),name:e.name||e.fileName,type:e.type||"",size:e.size||e.fileSize,origSize:e.size||e.fileSize,loaded:0,percent:0,status:h.QUEUED,lastModifiedDate:e.lastModifiedDate||(new Date).toLocaleString(),getNative:function(){var l=this.getSource().getSource();return b.inArray(b.typeOf(l),["blob","file"])!==-1?l:null},getSource:function(){return i[this.id]?i[this.id]:null},destroy:function(){var l=this.getSource();l&&(l.destroy(),delete i[this.id])}}),i[this.id]=e}var i={};return k}(),h.QueueProgress=function(){var i=this;i.size=0,i.loaded=0,i.uploaded=0,i.failed=0,i.queued=0,i.percent=0,i.bytesPerSec=0,i.reset=function(){i.size=i.loaded=i.uploaded=i.failed=i.queued=i.percent=i.bytesPerSec=0}},g.plupload=h})(window,mOxie);(function(D){var Q={timeoutDelay:500,appendClasses:false,keystrokeDelay:200,slideDuration:300,buttonHtml:true,showGroupHeaders:true,scrollbar:false,scrollbarOptions:{},autoHide:true,dropUp:false,showHide:false,bottomOffset:"0px",fullSize:false,autoAppendGroupTitle:false,disableOnTouch:false,disableScrollbarOnTouch:false,autoAppendGroupSeparator:" - ",wrapperClass:"pph-dropdown",wrapperHookClass:"pph-dropdown-wrapper",selectClass:"pph-dropdown-select",labelClass:"pph-dropdown-label",labelTitleClass:"pph-dropdown-title",labelButtonClass:"pph-dropdown-button",listContainerClass:"pph-dropdown-list",additionalListItemClass:"",elementSelected:"pph-dropdown-selected",additionalWrapperClass:"",fullSizeWrapperClass:"pph-dropdown-fullsize",listLinkClass:"",ajaxLoadMore:false};var i="PPHD-list";var R="PPHD-select-";var g="PPHD-item";var q="PPHD-group";var K="PPHD-group-";var t="current";var y="last";var z="hoverable";var O;var P;var m="";var L="click.pph-dropdown";var f="keydown.pph-dropdown";var A="keydown.pph-dropdown-list";var l="change.pph-dropdown";var B;var v;var p;var J=10;var N={38:function(X){var T=X.find("option");var W=T.filter("option:selected");var U=T.index(W);if(U!=0){var V=X.find(T.get(U-1));X.val(V.val()).change()}},40:function(X){var T=X.find("option");var W=T.filter("option:selected");var U=T.index(W);if(U!=(T.length-1)){var V=X.find(T.get(U+1));X.val(V.val()).change()}},37:function(T){N[38](T)},39:function(T){N[40](T)},36:function(U){var T=U.find("option:first-child");U.val(T.val()).change()},35:function(U){var T=U.find("option").last();U.val(T.val()).change()},33:function(X){var T=X.find("option");var W=T.filter("option:selected");var U=T.index(W);if(U>J){var V=X.find(T.get(U-J));X.val(V.val()).change()}else{N[36](X)}},34:function(X){var T=X.find("option");var W=T.filter("option:selected");var U=T.index(W);if(U<(T.length-J)){var V=X.find(T.get(U+J));X.val(V.val()).change()}else{N[35](X)}},27:function(T){H();j(D("."+i+":visible"))},13:function(T){N[27](T)},32:function(T){N[27](T)}};var E={init:function(T){v=D.extend({},Q,T);if(v.disableOnTouch&&F()){return}if(v.scrollbar&&v.disableScrollbarOnTouch&&F()){v.scrollbar=false}return this.each(function(W,Y){var Z=D(this);if(typeof Z.attr("id")!="undefined"){W=Z.attr("id")}var aa=R+W;if(D("."+v.wrapperHookClass+"."+aa).length!=0){D("."+v.wrapperHookClass+"."+aa).remove()}var V=G(Z,aa),U=Z.attr("class");var X=s(Z,aa,W,T);var ab=e(aa);if(v.additionalWrapperClass.length!=0){ab.addClass(v.additionalWrapperClass)}else{ab.addClass(D(this).attr("class"))}ab.append(V).append(X);a(X,X.find("ul li.current"));Z.addClass(aa).addClass(v.selectClass).after(ab).hide().off(l).on(l,b);if(U!==undefined&&U.length>0){if(v.appendClasses){ab.addClass(U)}}if(v.scrollbar){o(ab)}X.data("settings",v);if(v.dropUp){X.hide()}else{X.css({top:p}).hide()}if(v.fullSize){X.addClass(v.fullSizeWrapperClass);X.find("li").addClass("boxmodelfix").css({minWidth:V.width()+"px"});if(v.scrollbar){X.find(".tiny-scroll-overview").css({position:"relative"})}}})},getRelatedSelect:function(U){var T=U.closest("."+i).data("related-select");return D("."+T)},update:function(){b({},this)}};function o(U){var T=U.find("div."+i);if(typeof D.fn.tinyscrollbar=="function"){T.tinyscrollbar(v.scrollbarOptions).data("scrollbar",true)}}function e(T){return D("<div></div>").css({position:"relative"}).addClass(v.wrapperClass).addClass(v.wrapperHookClass).addClass(T).addClass("clearfix")}function G(U,Z){var T=D("<div></div>").addClass(v.labelClass).addClass("clearfix");var X=U.find("option:selected").text(),Y=U.find("option:selected").parent("optgroup[label]");if(v.autoAppendGroupTitle&&Y.length){X=Y.attr("label")+v.autoAppendGroupSeparator+X}var aa=D("<div></div>").addClass(v.labelTitleClass).html(X);if(typeof v.buttonHtml=="boolean"&&v.buttonHtml){var V=D('<div><span class="fa fa-caret-down"></span></div>');V.addClass(v.labelButtonClass);T.append(aa).append(V)}else{if(typeof v.buttonHtml=="string"&&D(v.buttonHtml.length)!=0){var V=D(v.buttonHtml);V.addClass(v.labelButtonClass).addClass("right");T.append(aa).append(V)}else{T.append(aa)}}if(typeof Z!="undefined"){T.addClass(Z).data("related-select",Z)}var W;if(typeof U.attr("tabindex")=="undefined"){W=0}else{W=U.attr("tabindex")}T.attr("tabindex",W);T.on("click",function(){c(D(this))});T.on(A,function(ab){if(!D(this).parent().find("."+v.listContainerClass).is(":visible")&&D.inArray((ab.keyCode),[38,40,37,39,33,34])!=(-1)){ab.preventDefault();c(D(this))}});T.on("blur",w);T.on("mouseover",k);T.on("mouseout",w);return T}function s(W,aa,Z,ab){p=W.css("top");var Y={position:"absolute","z-index":1};if(v.dropUp){Y.bottom=v.bottomOffset}else{Y.top="-3000px"}var T=D("<div></div>").addClass(v.listContainerClass).addClass(i).data("select",Z).css(Y);var U=D("<ul></ul>");if(typeof aa!="undefined"){T.addClass(aa).data("related-select",aa)}U=S(U,W,W.val());U.children().last().addClass(y);if(typeof ab!="undefined"&&typeof ab.ajaxLoadMore!="undefined"&&ab.ajaxLoadMore){var X=R+"load-all-jobs";var V=h(X,ab.ajaxLoadMore.label,null,"action-load-all-jobs");V.removeClass(g);U.append(V);V.on("click",function(){if(ab.ajaxLoadMore.beforeClickCallback){ab.ajaxLoadMore.beforeClickCallback()}D.ajax({url:ab.ajaxLoadMore.url,data:ab.ajaxLoadMore.data,type:"GET",dataType:"json",success:function(ac){if(ab.ajaxLoadMore.callback){ab.ajaxLoadMore.callback(ac)}return true}})})}T.append(U).on("mouseout",w).on("mouseover",k);return T}function S(U,T,W,V){if(typeof V=="undefined"){V=""}T.children().each(function(Z,X){var ad=D(X);var ac=R+C(ad.attr("value"));var ab=C(W);var Y=(ab.indexOf(R)>=0)?ab:R+ab;var aa={};jQuery.each(ad.get(0).attributes,function(af,ae){aa[ae.nodeName]=ae.nodeValue});if(ad.is("option")){ad.addClass(ac).attr("rel",ac);U.append(h(ac,ad.text(),Y,V,aa))}else{if(ad.is("optgroup")){V=K+C(ad.attr("label"));if(v.showGroupHeaders){U.append(r(ad.attr("label"),V))}U=S(U,ad,Y,V)}}});return U}String.prototype.replaceAll=function(U,T,V){if(typeof U=="undefined"||typeof T=="undefined"){return U}return this.replace(new RegExp(U.replace(/([\,\!\\\^\$\{\}\[\]\(\)\.\*\+\?\|\<\>\-\&])/g,function(W){return"\\"+W}),"g"+(V?"i":"")),T)};function C(U){if(typeof U=="undefined"||U==null){return""}var T="-";return U.replaceAll(" ",T).replaceAll(",",T).replaceAll(".",T).replaceAll("_",T).replaceAll("/",T).replaceAll("*",T).replaceAll("+",T).replaceAll("@",T).replaceAll("&",T).replaceAll("(","").replaceAll(")","").replaceAll("<","").replaceAll(">","").replaceAll('"',"").replaceAll("'","").replaceAll("?","").replaceAll(T+T,T)}function h(Z,Y,X,W,V){var U=D("<a></a>").attr({href:"#",tabIndex:-1,rel:Z}).addClass(v.additionalListItemClass).addClass(v.listLinkClass).html(Y).on(L,I);if(typeof W!="undefined"){U.addClass(W)}var T=D("<li></li>").addClass(Z).addClass(g).addClass("hoverable");if(V){jQuery.each(V,function(aa,ab){T.attr(aa,ab)})}T.append(U);if(typeof X!="undefined"&&Z==X){T.addClass(t)}return T}function r(V,U){var T=D("<li></li>").addClass(q).append(V);if(typeof U!="undefined"){T.addClass(U)}return T}function w(){var T=D(this);if(!T.hasClass(v.listContainerClass)){T=T.parent().find("."+v.listContainerClass)}if(v.autoHide){O=setTimeout(function(){j(T)},v.timeoutDelay)}}function H(){D("."+v.selectClass).blur();D(document).off(f)}function j(U){if(U.length>0){var T=U.data("settings");var W=U.closest("."+v.wrapperHookClass);var V=W.find("."+v.listContainerClass);W.removeClass(v.elementSelected);if(T&&T.showHide){V.stop(false,true).hide()}else{V.stop(false,true).slideUp(v.slideDuration)}D(document).off(f)}}function k(){clearTimeout(O)}function c(V){if(D("select."+V.data("related-select")).prop("disabled")){return false}H();var W=D("."+i+"."+V.data("related-select"));if(W.is(":visible")){V.removeClass(v.elementSelected);j(W)}else{j(D("."+i+":visible"));var U=W.data("settings");D(document).on(f,n);V.addClass(v.elementSelected);if(U.showHide){W.stop(false,true).show()}else{W.stop(false,true).slideDown(v.slideDuration)}var T=W.find("li."+t);if(T.length>0&&W.data("scrollbar")){u(W,T)}}}function n(V){if(typeof N[V.keyCode|V.charCode]=="function"){var U=D("."+i+":visible");V.preventDefault();var W=D("select."+U.data("related-select"));N[V.keyCode|V.charCode](W)}else{if(V.which!==0&&V.which!==9){V.preventDefault();var T=(String.fromCharCode(V.keyCode|V.charCode));x(T)}}}function x(T){clearTimeout(P);m+=T;P=setTimeout(function(){M();m=""},v.keystrokeDelay)}function M(){var Z=D("."+i+":visible");var aa=D("select."+Z.data("related-select"));var V=aa.find("option");var Y=V.filter("option:selected");var X=V.index(Y);var U=null;var T=null;V.each(function(ab){if(jQuery(this).text().substr(0,m.length).toUpperCase()==m.toUpperCase()){var ac=ab;if(ab>X&&U==null){U=ac}else{if(T==null){T=ab}}}});if(U!=null||T!=null){if(U==null){U=T}var W=aa.find(V.get(U));aa.val(W.val()).change()}}function I(U){U.preventDefault();var X=D(this);var T=E.getRelatedSelect(X);var V=T.find("option."+X.attr("rel"));if(V.length){var W=V.val();T.val(W).change()}j(X.closest("."+i))}function a(U,T){if(T==null||typeof T=="undefined"||typeof T.attr("class")=="undefined"||T.attr("class").length==0){return}var Z=D(U).prev("."+v.labelClass).find("."+v.labelTitleClass);var Y=Z.data("extra-class");var X="";var W=T.attr("class").split(" ");for(var V in W){if(W[V]!=z&&W[V]!==t&&W[V]!==y){X+=" "+W[V]}}if(Y!=undefined&&Y!=""){Z.removeClass(Y)}Z.addClass(X);Z.data("extra-class",X)}function b(U,X){var W=X==undefined?D(this):D(X);var T=W.next();var V=T.find("."+v.listContainerClass);var Z=T.find("."+v.listContainerClass);var aa=Z.find("li."+W.find("option:selected").attr("rel"));var Y=W.find("option:selected").text(),ab=W.find("option:selected").parent("optgroup[label]");if(v.autoAppendGroupTitle&&ab.length){Y=ab.attr("label")+v.autoAppendGroupSeparator+Y}T.find("div."+v.labelTitleClass).html(Y);a(V,aa);Z.find("li").removeClass(t);aa.find('a[rel="'+W.find("option:selected").attr("rel")+'"]').html(W.find("option:selected").text());aa.addClass(t);if(Z.data("scrollbar")){u(Z,aa)}}function u(Z,X){var U=Z.find(".tiny-scroll-viewport");var aa=Z.find(".tiny-scroll-overview");if(typeof U!="undefined"&&typeof aa!="undefined"){var V={top:X.offset().top,height:X.height()};var Y={top:U.offset().top,height:U.height()};var W={top:aa.offset().top,height:aa.height()};var T;if((V.top)<Y.top){T=V.top-W.top;if(T<(2*V.height)){T=0}Z.tinyscrollbar_update(T)}else{if((V.top+V.height)>(Y.top+Y.height)){T=V.top-W.top-Y.height+V.height;Z.tinyscrollbar_update(T)}}}}function F(){return("ontouchstart" in window)||("ontouchend" in document)||(window.DocumentTouch&&document instanceof DocumentTouch)}D.fn.pphDropdown=function(T){B=this.selector;if(E[T]){return E[T].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof T==="object"||!T){return E.init.apply(this,arguments)}else{D.error("Method "+T+" does not exist on jQuery.pphDropdown");return false}}}})(jQuery);(function(f){var c={closeLinkMarkup:'<a href="" class="close"><i class="fa fa-times"></i></a>',effectDelay:300,timeoutDelay:5000,defaultClass:"notice",ease:false,messageOptions:{persist:false,messageClass:"shout",unique:false,header:""}};var g=false;var e;var j="non-important";var b={init:function(l){f.extend(true,c,l);i();g=true}};function i(){e=f("<div></div>").addClass("shout-container");f(e).insertAfter("body header:first")}function h(r,l,m){if(!g){b.init.call()}var q=f.extend(true,{},c.messageOptions,m);if(typeof l=="undefined"){l=c.defaultClass}if(q.messageOptions!==undefined&&typeof q.messageOptions.beforeShow==="function"){q.messageOptions.beforeShow.apply(e,[])}var n=f("<div></div>").addClass(l).addClass(q.messageClass).css({position:"relative"}).html("<div><p>"+r+"</p></div>").hide().data("options",q);if(q.header){n.find("div").prepend("<h5>"+q.header+"</h5>")}if(typeof q.unique=="string"){n.addClass("shout-"+q.unique)}if(typeof q.unique=="string"&&e.find("div.shout-"+q.unique).length>0){e.find("div.shout-"+q.unique).remove();e.append(n);n.fadeIn(0,function(){a()})}else{e.append(n);n.slideDown(c.effectDelay,"linear",function(){a()})}if(!q.persist){setTimeout(function(){n.slideUp(c.effectDelay,function(){n.remove();k()})},c.timeoutDelay)}else{if(q.closeLinkMarkup!=""){c.closeLinkMarkup=q.closeLinkMarkup}var p=f(c.closeLinkMarkup).on("click",function(o){o.preventDefault();n.slideUp(c.effectDelay,function(){n.remove();k()})});n.find("div").append(p)}if(q.ease){e.addClass(j)}}function k(){var m=false;var l;e.children().each(function(n,o){l=f(this).data("options");if(l.ease){m=true}});if(!m){e.removeClass(j)}}function a(){}f.shout=function(l){if(b[l]){return b[l].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof l==="object"||!l){return b.init.apply(this,arguments)}else{h.apply(this,arguments)}}}})(jQuery);(function(i){var c={timeoutDelay:500,slideDuration:200,buttonHtml:true,showGroupHeaders:true,scrollbar:false,wrapperClass:"pph-splitButton-wrapper",primaryBtnClass:"primary-btn",toggleBtnClass:"toggle-btn",dropDownListClass:"dropDown-list",dropDownListItemClass:"dropDown-item",wrapperCustomClass:"",primaryBtnCustomClass:"",primaryBtnLinkCustomClass:"",toggleBtnContentCustomClass:"",toggleBtnCustomClass:"",buttonSize:""};var f="PPHSB-splitButton-";var a="PPHSB-splitButton-wrapper";var n="PPHSB-splitButton-item";var t="PPHSB-primary-btn";var v="PPHSB-dropDown-toggle";var q="PPHSB-dropDown-list";var r="PPHSB-dropDown-item";var l="active";var o="single-button";var j;var s;var b;var p={init:function(w){b=i.extend({},c,w);b.UlTopMargin=i(this).height()+"px";return i(this).each(function(y,z){var x=i(z);x.css({style:"display: none;"});if(x.data("initialized")){return true}if(typeof x.attr("id")!="undefined"){y=x.attr("id")}var A=f+y;m(x,A)})}};var e=function(y){var x=y;var w=h(x);w.removeClass(l);x.stop(true,false).slideUp(b.slideDuration)};var u=function(){var w=i(this);if(!w.hasClass(q)){w=w.parent().find("."+q)}if(!w.is(":visible")){return}j=setTimeout(function(){e(w)},b.timeoutDelay)};var k=function(){clearTimeout(j)};var g=function(){var w=i(this);if(!w.hasClass(q)){w=w.closest("."+b.wrapperClass).find("."+q)}u()};var h=function(w){return w.closest("."+a).find("."+v)};var m=function(B,A){B.attr("id",A).addClass(b.wrapperCustomClass+" "+a).data("initialized",true);var x=i('<ul class="'+b.buttonSize+'"></ul>').addClass(q+" "+b.dropDownListClass+" "+b.buttonSize);var y=i('<a class="button '+b.buttonSize+" "+v+" "+b.toggleBtnClass+" "+b.toggleBtnCustomClass+'"><span class="arrow-down gray icon '+b.toggleBtnContentCustomClass+'"></span></a>');var z=i("<li></li>").addClass(r+" "+b.dropDownItemClass+" "+b.buttonSize);var w={main:null,itemList:[]};B.children().each(function(D,E){var C=i(E);switch(C[0].tagName.toUpperCase()){case"BUTTON":if(!w.main){C.addClass(t+" "+b.primaryBtnClass+" "+b.primaryBtnCustomClass+" "+b.buttonSize);w.main=C}break;case"A":w.itemList.push(C);x.append(z.clone().append(C));break}});if(!w.main){if(w.itemList.length==0){throw"[ERROR]: No main button or other action links."}w.main=w.itemList[0];w.itemList.splice(0,1);x.find("li:first-child").remove();B.prepend(w.main.addClass(t+" "+b.primaryBtnClass+" "+b.primaryBtnLinkCustomClass+" button").html("<span>"+w.main.html()+"</span>")).addClass(o)}if(w.itemList.length!=0){B.append(y).append(x)}y.on("click",function(C){e(i("."+b.dropDownListClass));y.toggleClass(l);x.stop(true,false).slideToggle(b.slideDuration,function(){if(x.is(":visible")){y.addClass(l)}else{y.removeClass(l)}})}).on("mouseover",k).on("mouseout",u);x.on("mouseover",k).on("mouseout",u);x.find("a").on("click",g);B.css({display:"inline-block"})};i.fn.pphSplitButton=function(w){s=this.selector;if(p[w]){return p[w].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof w==="object"||!w){return p.init.apply(this,arguments)}else{i.error("Method "+w+" does not exist on jQuery.pphSplitButton");return false}}}})(jQuery);(function(c){var a={arrows:"a[data-previous], a[data-next]",arrowDisabledClass:"disabled",arrowsAlwaysVisible:true,arrowsRemoveIfInvisible:false,animationDelay:600,animationEasing:"linear",dimensionFault:4,selectedItem:0,selectedClass:"selected",autoCenter:true,mousewheel:true,mousewheelDelay:10,orientation:null,scrollTo:"item",scrollTarget:null,list:"ul",item:"ul > li",clickable:"a",scrolled:function(){},select:function(){},initialized:function(){}};function b(f,e){if(typeof f==="string"){f=c(f)}this.options=c.extend(true,{},a,e);this.$context=f;this.$wrapper=this.$context.find(this.options.list).parent();if(this.options.scrollTarget===null){this.options.scrollTarget=this.$wrapper}this._wheelTimeout=this.listDimension=this.containerHeight=this.containerWidth=this.containerDim=this._isHorizontal=null;this.init()}b.prototype.init=function(){var h=this,g=function(){h.resize.apply(h,arguments)};h.resize();c(window).on("resize",g);h.$context.on("thumbslider.resize",g);if(h.options.arrows!==false){h.$context.on("click",h.options.arrows,function(j){j.preventDefault();var i=c(this).data("previous")?-1:1;h.slidePage(i)});var e=h.$context.find(h.options.arrows);if(e.is(":hidden")){e.show()}}h.$wrapper.find(h.options.item+" "+h.options.clickable).on("click",function(k){k.preventDefault();k.stopPropagation();var j=h.$wrapper.find(this).parents(h.options.item),i=j.index();h.selectItem(i,j)});if(h.options.selectedItem!==false){var f=h.$wrapper.find(h.options.item).eq(h.options.selectedItem);h.selectItem(f.index(),f)}if(h.options.mousewheel){h.options.scrollTarget.on("mousewheel DOMMouseScroll",function(j){j.preventDefault();j.stopPropagation();if(j.originalEvent===undefined){return false}if(h._wheelTimeout!==null){clearTimeout(h._wheelTimeout)}var i=j.originalEvent.wheelDelta!==undefined?j.originalEvent.wheelDelta:-40*j.originalEvent.detail;h._wheelTimeout=setTimeout(function(){if(i<0){return h.slidePage(1)}return h.slidePage(-1)},h.options.mousewheelDelay)})}if(typeof h.options.initialized==="function"){h.options.initialized.apply(h.$context)}};b.prototype.resize=function(){this.containerWidth=this.$wrapper.width();this.containerHeight=this.$wrapper.height();if(this.options.orientation===null){this.options.orientation=this.containerWidth>=this.containerHeight?"horizontal":"vertical"}this._isHorizontal=this.options.orientation=="horizontal";this.containerDim=this._isHorizontal?this.containerWidth:this.containerHeight;var g=0,h=this._isHorizontal;var f=this.$wrapper.find(this.options.item);f.each(function(){var i=c(this);g+=(h?i.outerWidth(true):i.outerHeight(true))});this.listDimension=g;this.$wrapper.find(this.options.list).css((this._isHorizontal?"width":"height"),this.listDimension+"px");if(this.options.arrows!==false&&this.containerDim>=this.listDimension){if(this.options.arrowsAlwaysVisible){this.$context.find(this.options.arrows).addClass(this.options.arrowDisabledClass)}else{var e=this.$context.find(this.options.arrows);if(this.options.arrowsRemoveIfInvisible){e.remove()}else{e.hide()}}}};b.prototype.highlightSelected=function(){var e=this.getSelected();if(e.length){this.selectItem(e.index(),e,false)}};b.prototype.getSelected=function(){return this.$wrapper.find(this.options.item+"."+this.options.selectedClass)};b.prototype.selectItem=function(e,f,g){g=g!==undefined?g:true;if(f===undefined){f=this.$wrapper.find(this.options.item).eq(e)}this.$wrapper.find(this.options.item).removeClass(this.options.selectedClass);f.addClass(this.options.selectedClass);if(this.options.autoCenter){this.centerToItem(e,f)}var h=f.has(this.options.clickable)?f.find(this.options.clickable):f;if(g){this.options.select.apply(h,arguments)}};b.prototype.option=function(e,f){this.options[e]=f};b.prototype.gotoItem=function(g){g=g===undefined?"next":g;if(g!=="next"&&g!=="previous"){return false}var f=this.getSelected(),e=g=="next"?f.next():f.prev();if(e.length===0){e=this.$wrapper.find(this.options.item+(g=="next"?":first":":last"))}if(e.length){return this.selectItem(e.index(),e)}return false};b.prototype.centerToItem=function(k,o){this.resize();var h=(this._isHorizontal?this.options.scrollTarget.scrollLeft():this.options.scrollTarget.scrollTop()),n=(this._isHorizontal?(o.offset().left-this.options.scrollTarget.offset().left):(o.offset().top-this.options.scrollTarget.offset().top))+h,j=(this._isHorizontal?o.outerWidth(true):o.outerHeight(true)),g=(n+j),f=(g<(h+this.containerDim));var m=Math.floor(this.containerDim/2),i=Math.floor(j/2),e=m-i,l=this.options.autoCenter?(n-e):n;if(l<0){l=0}if(l>this.listDimension){l=this.containerDim}return this._smoothScroll(l,false)};b.prototype.slidePage=function(e){e=e||1;if((offset=this._getPageScrollOffset(e))!==false){this._smoothScroll(offset)}};b.prototype._smoothScroll=function(f,k){k=k!==undefined?k:true;if(this.options.arrows!==false&&this.listDimension>this.containerDim){var h=this.$context.find(this.options.arrows);h.removeClass(this.options.arrowDisabledClass);var i=this.$wrapper.find(this.options.item).eq(0);var e=this._isHorizontal?i.outerWidth(true):i.outerHeight(true);if(f<=e){h.filter("[data-previous]").addClass(this.options.arrowDisabledClass)}else{if(f+this.containerDim>=this.listDimension){h.filter("[data-next]").addClass(this.options.arrowDisabledClass)}}}var g=this.options.scrolled;if(k){var j=this._isHorizontal?{scrollLeft:f}:{scrollTop:f};return this.options.scrollTarget.stop().animate(j,this.options.animationDelay,this.options.animationEasing,function(){if(typeof g==="function"){g.apply(this,[f])}})}if(typeof g==="function"){g.apply(this,[f])}return this._isHorizontal?this.options.scrollTarget.scrollLeft(f):this.options.scrollTarget.scrollTop(f)};b.prototype._getPageScrollOffset=function(q){this.resize();var m=this.$wrapper.find(this.options.item),h=m.filter("[data-in-viewport]"),e=h.length?h:this.$wrapper.find(this.options.item+"."+this.options.selectedClass),f=q<0?e.prevAll():e.nextAll(),k=this._isHorizontal?this.options.scrollTarget.offset().left:this.options.scrollTarget.offset().top,g=this._isHorizontal?this.options.scrollTarget.scrollLeft():this.options.scrollTarget.scrollTop();if(!f.length){return false}if(q<0){f=c(f.get().reverse())}var l=f.eq(0),o=f.get(),p=g+q*this.containerDim;for(var j in o){var r=c(o[j]),n=(this._isHorizontal?r.offset().left:r.offset().top)-k+g;if(n>p){if(q<0){l=r}break}l=r}m.removeAttr("data-in-viewport");l.attr("data-in-viewport",1);return(this._isHorizontal?l.offset().left:l.offset().top)-k+g};c.fn.thumbslider=function(f){var e=arguments;return this.each(function(){var h="_tbsldr",g=c.data(this,h);if(g===undefined){g=new b(c(this),f)}if(typeof f==="string"&&typeof g[f]==="function"){g[f].apply(g,Array.prototype.slice.call(e,1))}c.data(this,h,g)})}})(jQuery);
/*!
 * Tiny Scrollbar 1.66
 * http://www.baijs.nl/tinyscrollbar/
 *
 * Copyright 2010, Maarten Baijs
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/gpl-2.0.php
 *
 * Date: 13 / 11 / 2011
 * Depends on library: jQuery
 * .tinyscrollbar()
 */
(function(a){a.tiny=a.tiny||{};a.tiny.scrollbar={options:{axis:"y",wheel:40,scroll:true,size:200,sizethumb:"auto",minsizethumb:20}};a.fn.tinyscrollbar=function(c){var c=a.extend({},a.tiny.scrollbar.options,c);this.each(function(){a(this).data("tsb",new b(a(this),c))});return this};a.fn.tinyscrollbar_update=function(c){return a(this).data("tsb").update(c)};function b(v,k){var h="tiny-scroll-";var o=h+"scrollbar";var I=h+"track";var i=h+"thumb";var G=h+"end";var e=h+"viewport";var x=h+"overview";B(v);var c=v.css("top");var D=v.is(":visible");if(!D){v.css("top","-3000px").show()}var q=this;var z=v;var n={obj:a("."+e,v)};var l={obj:a("."+x,v)};var g={obj:a("."+o,v)};var r={obj:a("."+I,g.obj)};var u={obj:a("."+i,g.obj)};var p=k.axis=="x",s=p?"left":"top",C=p?"Width":"Height";var w,H={start:0,now:0},t={};function f(){q.update();y();if(v.find("."+e).height()>v.find("."+x).height()){v.find("."+e).height(v.find("."+x).height())}if(!D){v.css("top",c).hide()}return q}function B(M){if(M.find("div."+o+" div."+I+" div."+i+" div."+G).length==0||M.find("div."+e+" div."+x).length==0){var O=M.children();if(O.length==0){O=M.html()}var L=a("<div></div>").addClass(G).css("overflow","hidden");var N=a("<div></div>").addClass(i).css("cursor","pointer").css("overflow","hidden").css("position","absolute").css("top","0").append(L);var K=a("<div></div>").addClass(I).css("position","relative").append(N);if(k.minTrackHeight){K.css("min-height",k.minTrackHeight)}var Q=a("<div></div>").addClass(o).css("position","relative").css("float","right").append(K);var P=a("<div></div>").addClass(x).css("list-style","none").css("position","absolute").css("left","0").css("top","0").css("width","100%").append(O);var J=a("<div></div>").addClass(e).css("overflow","hidden").css("position","relative").append(P);if(k.size!="auto"){J.css("height",k.size)}M.css("clear","both").html("").append(Q).append(J)}}this.update=function(J){n[k.axis]=n.obj[0]["offset"+C];l[k.axis]=l.obj[0]["scroll"+C];l.ratio=n[k.axis]/l[k.axis];g.obj.toggleClass("hide",l.ratio>=1);r[k.axis]=k.size=="auto"?n[k.axis]:k.size;u[k.axis]=Math.min(r[k.axis],Math.max(0,(k.sizethumb=="auto"?(r[k.axis]*l.ratio):k.sizethumb)));if(k.minsizethumb&&u[k.axis]<k.minsizethumb){k.sizethumb=k.minsizethumb;u[k.axis]=Math.min(r[k.axis],Math.max(0,(k.sizethumb=="auto"?(r[k.axis]*l.ratio):k.sizethumb)))}g.ratio=k.sizethumb=="auto"?(l[k.axis]/r[k.axis]):(l[k.axis]-n[k.axis])/(r[k.axis]-u[k.axis]);w=(J=="relative"&&l.ratio<=1)?Math.min((l[k.axis]-n[k.axis]),Math.max(0,w)):0;w=(J=="bottom"&&l.ratio<=1)?(l[k.axis]-n[k.axis]):isNaN(parseInt(J))?w:parseInt(J);E()};function E(){u.obj.css(s,w/g.ratio);l.obj.css(s,-w);t.start=u.obj.offset()[s];var J=C.toLowerCase();g.obj.css(J,r[k.axis]);r.obj.css(J,r[k.axis]);u.obj.css(J,u[k.axis])}function y(){u.obj.bind("mousedown",m);u.obj[0].ontouchstart=function(J){J.preventDefault();u.obj.unbind("mousedown");m(J.touches[0]);return false};r.obj.bind("mouseup",A);if(k.scroll&&this.addEventListener){z[0].addEventListener("DOMMouseScroll",F,false);z[0].addEventListener("mousewheel",F,false)}else{if(k.scroll){z[0].onmousewheel=F}}}function m(K){t.start=p?K.pageX:K.pageY;var J=parseInt(u.obj.css(s));H.start=J=="auto"?0:J;a(document).bind("mousemove",A);document.ontouchmove=function(L){a(document).unbind("mousemove");A(L.touches[0])};a(document).bind("mouseup",j);u.obj.bind("mouseup",j);u.obj[0].ontouchend=document.ontouchend=function(L){a(document).unbind("mouseup");u.obj.unbind("mouseup");j(L.touches[0])};return false}function F(K){if(!(l.ratio>=1)){var K=K||window.event;var J=K.wheelDelta?K.wheelDelta/120:-K.detail/3;w-=J*k.wheel;w=Math.min((l[k.axis]-n[k.axis]),Math.max(0,w));u.obj.css(s,w/g.ratio);l.obj.css(s,-w);K=a.event.fix(K);K.preventDefault()}}function j(J){a(document).unbind("mousemove",A);a(document).unbind("mouseup",j);u.obj.unbind("mouseup",j);document.ontouchmove=u.obj[0].ontouchend=document.ontouchend=null;return false}function A(J){if(!(l.ratio>=1)){H.now=Math.min((r[k.axis]-u[k.axis]),Math.max(0,(H.start+((p?J.pageX:J.pageY)-t.start))));w=H.now*g.ratio;l.obj.css(s,-w);u.obj.css(s,H.now)}return false}return f()}})(jQuery);(function(g){g.yvalidate={exists:function(m,k,l){return i("exists",m,null,k,l)},isBoolean:function(n,k,l,m){return i("isBoolean",n,k,l,m)},isTrue:function(n,l,k,m){return i("isTrue",n,k,l,m)},isFalse:function(n,l,k,m){return i("isFalse",n,k,l,m)},isObject:function(m,k,l){return i("isObject",m,null,k,l)},isFunction:function(m,k,l){return i("isFunction",m,null,k,l)},isArray:function(m,k,l){return i("isArray",m,null,k,l)},inArray:function(n,k,l,m){return i("inArray",n,k,l,m)},isInt:function(m,k,l){return i("isInt",m,null,k,l)},isNumeric:function(m,k,l){return i("isNumeric",m,null,k,l)},isMoreThan:function(n,k,l,m){return i("isMoreThan",n,k,l,m)},isLessThan:function(n,k,l,m){return i("isLessThan",n,k,l,m)},isString:function(m,k,l){return i("isString",m,null,k,l)},isEmpty:function(m,k,l){return i("isEmpty",m,null,k,l)},isNotEmpty:function(m,k,l){return i("isNotEmpty",m,null,k,l)},isMoreCharThan:function(n,k,l,m){return i("isMoreCharThan",n,k,l,m)},isLessCharThan:function(n,k,l,m){return i("isLessCharThan",n,k,l,m)}};var a=false;var e={exists:function(){return"is not defined"},isObject:function(){return"should be an object"},isArray:function(){return"is not an array"},inArray:function(){return"is not valid"},isString:function(){return"should be a string"},isMoreCharThan:function(k){return"should be minimum "+k+" characters long"},isLessCharThan:function(k){return"should be maximum "+k+" characters long"},isInt:function(){return"should be a number"},isNumeric:function(){return"should be a number"},isMoreThan:function(k){return"should be minimum "+k},isLessThan:function(k){return"should be maximum "+k},isBoolean:function(){return"should be true or false"},isTrue:function(){return"should be true"},isFalse:function(){return"should be false"},isEmpty:function(){return"should be empty"},isNotEmpty:function(){return"is required"},isFunction:function(){return"should be a function"}};var i=function(o,n,k,l,m){if(m){e=g.extend({},e,m)}if(!j.exists(o)){f("Param 'method' is required")}if(!j.isFunction(j[o])){f("Validation method '"+o+"' does not exist")}if(j[o](n,k)){return true}return(l?h(o,l,k):false)};var j={exists:function(k){return(k!==null&&typeof k!=="undefined")},isBoolean:function(l,k){k=j.exists(k)?j.exists(k):true;return(j.exists(l)&&(l===true||l===false));if(k){return(j.exists(l)&&(l===true||l===false))}else{return(j.exists(l)&&(l==true||l==false))}},isTrue:function(l,k){return(j.isBoolean(l,k)&&l==true)},isFalse:function(l,k){return(j.isBoolean(l,k)&&l==false)},isObject:function(k){return(typeof k==="object")},isFunction:function(k){return(j.exists(k)&&g.isFunction(k))},isArray:function(k){return g.isArray(k)},inArray:function(l,k){return j.exists(l)&&j.exists(k)&&j.isArray(k)&&(g.inArray(l,k)!==-1)},isInt:function(k){return j.isNumeric(k)&&(Math.floor(k)==k)},isNumeric:function(k){return j.isNotEmpty(k)&&g.isNumeric(k)},isMoreThan:function(l,k){if(j.isNotEmpty(l)&&!j.isNumeric(l)){return j.isNumeric(l)}return j.isEmpty(l)||(typeof l.length!=="function"&&l>k)},isLessThan:function(l,k){if(j.isNotEmpty(l)&&!j.isNumeric(l)){return j.isNumeric(l)}return j.isEmpty(l)||(typeof l.length!=="function"&&l<=k)},isString:function(k){return typeof k==="string"||j.isNumeric(k)},isEmpty:function(k){return(typeof k==="undefined"||k===null||(!j.isFunction(k)&&k.length==0)||(j.isObject(k)&&c(k)==0))},isNotEmpty:function(k){return !j.isEmpty(k)},isMoreCharThan:function(l,k){return typeof l.length!=="function"&&l.length>k},isLessCharThan:function(l,k){return typeof l.length!=="function"&&l.length<=k}};function h(n,l,k){var m=b(l)+" "+(e[n]?e[n](k):e.genericError());f(m);return m}function f(k,l){if(a){console.log("YVALIDATE",k)}if(l){console.trace()}}function c(m){var l=0;var k;for(k in m){if(m.hasOwnProperty(k)){l++}}return l}function b(k){return k.charAt(0).toUpperCase()+k.slice(1)}})(jQuery);(function(a){a.widget("ui.tagit",{options:{itemName:"item",fieldName:"tags",availableTags:[],tagSource:null,removeConfirmation:false,caseSensitive:true,placeholderText:null,truncateTagView:false,truncateTagSuffix:"...",allowSpaces:false,animate:true,singleField:false,singleFieldDelimiter:",",singleFieldNode:null,tabIndex:null,onTagAdded:null,onTagRemoved:null,onTagClicked:null},_create:function(){var e=this;this.options.truncateTagView=parseInt(this.options.truncateTagView);if(this.element.is("input")){this.tagList=a("<ul></ul>").insertAfter(this.element);this.options.singleField=true;this.options.singleFieldNode=this.element;this.element.css("display","none")}else{this.tagList=this.element.find("ul, ol").andSelf().last()}this._tagInput=a('<input type="text" />').addClass("ui-widget-content");if(this.options.tabIndex){this._tagInput.attr("tabindex",this.options.tabIndex)}if(this.options.placeholderText){this._tagInput.attr("placeholder",this.options.placeholderText)}this.options.tagSource=this.options.tagSource||function(g,f){var h=g.term.toLowerCase();var i=a.grep(this.options.availableTags,function(j){return(j.toLowerCase().indexOf(h)===0)});f(this._subtractArray(i,this.assignedTags()))};if(a.isFunction(this.options.tagSource)){this.options.tagSource=a.proxy(this.options.tagSource,this)}this.tagList.addClass("tagit").addClass("ui-widget ui-widget-content ui-corner-all").append(a('<li class="tagit-new"></li>').append(this._tagInput)).click(function(g){var f=a(g.target);if(f.hasClass("tagit-label")){e._trigger("onTagClicked",g,f.closest(".tagit-choice"))}else{e._tagInput.focus()}});this.tagList.children("li").each(function(){if(!a(this).hasClass("tagit-new")){e.createTag(a(this).html(),a(this).attr("class"));a(this).remove()}});if(this.options.singleField){if(this.options.singleFieldNode){var c=a(this.options.singleFieldNode);var b=c.val().split(this.options.singleFieldDelimiter);c.val("");a.each(b,function(g,f){e.createTag(f)})}else{this.options.singleFieldNode=this.tagList.after('<input type="hidden" style="display:none;" value="" name="'+this.options.fieldName+'" />')}}this._tagInput.keydown(function(g){if(g.which==a.ui.keyCode.BACKSPACE&&e._tagInput.val()===""){var f=e._lastTag();if(!e.options.removeConfirmation||f.hasClass("remove")){e.removeTag(f)}else{if(e.options.removeConfirmation){f.addClass("remove ui-state-highlight")}}}else{if(e.options.removeConfirmation){e._lastTag().removeClass("remove ui-state-highlight")}}if(g.which==a.ui.keyCode.COMMA||g.which==a.ui.keyCode.ENTER||(g.which==a.ui.keyCode.TAB&&e._tagInput.val()!=="")||(g.which==a.ui.keyCode.SPACE&&e.options.allowSpaces!==true&&(a.trim(e._tagInput.val()).replace(/^s*/,"").charAt(0)!='"'||(a.trim(e._tagInput.val()).charAt(0)=='"'&&a.trim(e._tagInput.val()).charAt(a.trim(e._tagInput.val()).length-1)=='"'&&a.trim(e._tagInput.val()).length-1!==0)))){g.preventDefault();e.createTag(e._cleanedInput());e._tagInput.autocomplete("close")}}).blur(function(f){e.createTag(e._cleanedInput())});if(this.options.availableTags||this.options.tagSource){this._tagInput.autocomplete({source:this.options.tagSource,select:function(f,g){if(e._tagInput.val()===""){e.removeTag(e._lastTag(),false)}e.createTag(g.item.value);return false}})}},_cleanedInput:function(){return a.trim(this._tagInput.val().replace(/^"(.*)"$/,"$1"))},_lastTag:function(){return this.tagList.children(".tagit-choice:last")},assignedTags:function(){var c=this;var b=[];if(this.options.singleField){b=a(this.options.singleFieldNode).val().split(this.options.singleFieldDelimiter);if(b[0]===""){b=[]}}else{this.tagList.children(".tagit-choice").each(function(){b.push(c.tagLabel(this))})}return b},_updateSingleTagsField:function(b){a(this.options.singleFieldNode).val(b.join(this.options.singleFieldDelimiter))},_subtractArray:function(e,c){var b=[];for(var f=0;f<e.length;f++){if(a.inArray(e[f],c)==-1){b.push(e[f])}}return b},tagLabel:function(b){if(this.options.singleField){return a(b).children(".tagit-label").data("value")}else{return a(b).children("input").val()}},_isNew:function(e){var c=this;var b=true;this.tagList.children(".tagit-choice").each(function(f){if(c._formatStr(e)==c._formatStr(c.tagLabel(this))){b=false;return false}});return b},_formatStr:function(b){if(this.options.caseSensitive){return b}return a.trim(b.toLowerCase())},createTag:function(i,f){var e=this;var j=e._tagInput.attr("placeholder");i=(j===i)?"":a.trim(i);if(!this._isNew(i)||i===""){e._tagInput.placeholder();return false}var c=i;if(this.options.truncateTagView&&this.options.truncateTagView>0&&this.options.truncateTagView<i.length){c=i.substring(0,(this.options.truncateTagView-this.options.truncateTagSuffix.length))+this.options.truncateTagSuffix}var h=a(this.options.onTagClicked?'<a class="tagit-label"></a>':'<span class="tagit-label"></span>').text(c).data("value",i);var m=a("<li></li>").addClass("tagit-choice ui-widget-content ui-state-default ui-corner-all").addClass(f).append(h);this._trigger("onTagAdded",null,m);var b=a("<span></span>").addClass("ui-icon ui-icon-close");var g=a('<a><span class="text-icon">\xd7</span></a>').addClass("tagit-close").append(b).click(function(n){e.removeTag(m)});m.append(g);if(this.options.singleField){var l=this.assignedTags();l.push(m.find(".tagit-label").data("value"));this._updateSingleTagsField(l)}else{var k=h.data("value");m.append('<input type="hidden" style="display:none;" value="'+k+'" name="'+this.options.itemName+"["+this.options.fieldName+'][]" />')}this._tagInput.val("");this._tagInput.parent().before(m)},removeTag:function(b,c){c=c||this.options.animate;b=a(b);this._trigger("onTagRemoved",null,b);if(this.options.singleField){var f=this.assignedTags();var e=this.tagLabel(b);f=a.grep(f,function(g){return g!=e});this._updateSingleTagsField(f)}if(c){b.fadeOut("fast").hide("blind",{direction:"horizontal"},"fast",function(){b.remove()}).dequeue()}else{b.remove()}},removeAll:function(){var b=this;this.tagList.children(".tagit-choice").each(function(e,c){b.removeTag(c,false)})}})})(jQuery);var PPH=(function(f){var l=/\bid-(\w+)/,j=false,o=false,b=true;var k=1260;var g={};function p(r,q){if(typeof r=="object"){r=f.param(r)}if(typeof q=="object"){q=f.param(q)}return r==q}function i(r){PPH.csrfTokenName=r.csrfTokenName!==undefined?r.csrfTokenName:"YII_CSRF_TOKEN";var q=f.cookie(PPH.csrfTokenName);if(q){PPH.csrfToken=q.replace(/[^A-Za-z0-9\-\_]/g,"")}else{PPH.csrfToken=r.csrfToken!==undefined?r.csrfToken:""}}var m={page:{},pages:{},modules:{},DEBUG:false,templateEngine:{},isResponsive:b,Module:function(s){var r={},q={};var t={id:null,config:f.extend(true,{},r,s),bind:function(u,v,w){if(typeof(q[u])==="undefined"){q[u]=[]}q[u].push([v,w]);return t},unbind:function(u){if(typeof(q[u])!=="undefined"){delete q[u]}return t},trigger:function(u){args=arguments.length>1?f.makeArray(arguments).slice(1):[];if(typeof(q[u])!=="undefined"){f.each(q[u],function(v,w){if(typeof(w[1])!=="undefined"){args.push(w[1])}w[0].apply(t,args)})}},hasHandler:function(u){return typeof q[u]!=="undefined"&&q[u].length!==0},setState:function(u){t.page.setState(t.id,u)},getState:function(){return t.page.getState(t.id)},changeState:function(v){var u=t.getState()||{};f.each(v,function(w,x){if(x===null){delete u[w]}else{u[w]=x}});t.setState(u)},init:function(){}};return t},Page:function(q){var s=q||{};var r={modules:{},bu:""},v=f.extend(true,{},r,s),t=PPH.Module(v);i(v);if(typeof TemplateEngine!=="undefined"){PPH.templateEngine=TemplateEngine.init()}PPH.DEBUG=s.DEBUG||false;function u(w){var y=w.getState(),x=t.state;f.each(t.modules,function(B,z){var A=y[B]!==undefined,C=x[B]!==undefined,D=A&&C&&!p(y[B],x[B]);if((A&&!C||!A&&C||D)&&z.onHashChange!==undefined){z.onHashChange(y[B])}});t.state=y}f.extend(t,{modules:{},state:{},redirect:function(w,x){if(x){window.top.location=w}else{window.location=w}},refresh:function(){window.location.reload()},hasModule:function(w){return t.modules[w]?true:false},setState:function(w,y){var x=f.bbq.getState();if(!y){y=w;w="page"}x[w]=y;f.bbq.pushState(x)},getState:function(w){var x=f.bbq.getState();if(!w){w="page"}return x[w]==undefined?null:x[w]},run:function(){f.each(t.config.modules,function(w,y){if(m.modules[w]){if(typeof y.multiInstance!=="undefined"){for(var x in y){if(x=="multiInstance"){continue}t.modules[w]=m.modules[w](y[x]);t.modules[w].page=t;t.modules[w].id=w;t.modules[w].init()}}else{t.modules[w]=m.modules[w](y);t.modules[w].page=t;t.modules[w].id=w;t.modules[w].init()}if(w==="Messages"){j=t.modules[w]}}});PPH.page=t;t.modules.page=t;t.init();f(window).bind("hashchange",u)}});f("body").ajaxError(function(B,C,x,z){if(C.status===0||C.statusText==="abort"){return}var w=PPH.DEBUG?{persist:true,unique:"requestError-"+C.status}:{unique:"requestError-"+C.status};var A,y;if(typeof C.responseText!="undefined"){try{A=f.parseJSON(C.responseText)}catch(B){}if("object"==PPH.typeOf(A)&&"string"==PPH.typeOf(A.message)){y=A.message}}if(!PPH.DEBUG&&C.status==403){PPH.error("You have been inactive for some time and you have to <a href='#' onclick='location.reload();return false;'>Log in</a> again.",w)}else{if(!PPH.DEBUG&&"string"==PPH.typeOf(y)){PPH.error("Request error:\n"+y,w)}else{PPH.error("Request error\nError code: "+C.status+"\nMessage:\n"+C.responseText,w)}}});f(function(w){t.run()});return t},getIdFromClass:function(s){var q=l.exec(f(s).attr("class"));return(q&&q.length>1)?q[1]:null},getIdFromParents:function(s,q){var r=f(s).parents(q?q:".item");return r.length?PPH.getIdFromClass(r):null},addUrlParam:function(q,s,r){return q+(q.indexOf("?")===-1?"?":"&")+s+"="+encodeURIComponent(r)},getUrlParameter:function(q,r){if(typeof r=="undefined"){r=null}return decodeURIComponent((new RegExp("[?|&]"+q+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||r},getCsrf:function(){if(PPH.csrfToken==""){return{}}var q={};q[PPH.csrfTokenName]=PPH.csrfToken;return q},isMobile:function(){return f(".detect-mobile").is(":visible")&&navigator.userAgent.match(/mobile/i)!=null},isIpad:function(){return(navigator.userAgent.match(/iPad/i)!=null)},isTouch:function(){return("ontouchstart" in window)||("ontouchend" in document)||(window.DocumentTouch&&document instanceof DocumentTouch)},unfinishedFormExist:function(){return o},success:function(r,q){f.shout(r,"success",f.extend(true,{header:"Success",closeLinkMarkup:"",messageOptions:{}},q))},warning:function(r,q){f.shout(r,"warning",f.extend(true,{header:"Warning",closeLinkMarkup:"",messageOptions:{}},q))},info:function(r,q){f.shout(r,"info",f.extend(true,{header:"Info",closeLinkMarkup:"",messageOptions:{}},q))},error:function(r,q){f.shout(r,"error",f.extend(true,{header:"Error",closeLinkMarkup:"",messageOptions:{}},q))},tipConfig:function(q){return h(q)},tip:function(s,t,r,q){return n(s,t,r,q)},dom:{simpletip:function(r,s,q){n(r,s,"info",q)},error:function(r,s,q){n(r,s,"error",q)},info:function(r,s,q){n(r,s,"info",q)},warning:function(r,s,q){n(r,s,"warning",q)},success:function(r,s,q){n(r,s,"success",q)},help:function(r,s,q){n(r,s,"help",q)}},userData:{cache:function(){PPH.DEBUG&&console.log(g)},getAll:function(){if(PPH.DEBUG){this.get("dummy");console.log(g)}},setData:function(q){PPH.DEBUG&&console.log("seting data",q);g=q},save:function(q,u,r){r=r||false;var t={};t[q]=u;var s={data:t,overwrite:r};var v=false;f.ajax({url:"/userData/save",data:f.extend(PPH.getCsrf(),s),type:"POST",async:false,success:function(w){PPH.DEBUG&&console.log(w.success);v=w.success}});g={};return v},get:function(q){if(!f.isEmptyObject(g)){return g[q]!=undefined?g[q]:null}f.ajax({url:"/userData/getAll",data:PPH.getCsrf(),type:"POST",async:false,success:function(s){g=s.data}});var r=!f.isEmptyObject(g)&&g[q]!=undefined?g[q]:null;return r}},runStringAsFn:function(t){var s=t.split("."),r=window;for(var q in s){if(r[s[q]]){r=r[s[q]]}}if(typeof r==="function"){r()}},stripSlashes:function(q){return q.replace(/[^\\][\\]/g,"")},typeOf:function(t){var r=typeof t;if(r=="object"){if(t){if(t instanceof Array){return"array"}else{if(t instanceof Object){return r}}var q=Object.prototype.toString.call((t));if(q=="[object Window]"){return"object"}if((q=="[object Array]"||typeof t.length=="number"&&typeof t.splice!="undefined"&&typeof t.propertyIsEnumerable!="undefined"&&!t.propertyIsEnumerable("splice"))){return"array"}if((q=="[object Function]"||typeof t.call!="undefined"&&typeof t.propertyIsEnumerable!="undefined"&&!t.propertyIsEnumerable("call"))){return"function"}}else{return"null"}}else{if(r=="function"&&typeof t.call=="undefined"){return"object"}}return r}};function h(t){var u="",s=t.data("trigger")||null,q=t.data("placement")||t.data("tooltip-pos");if(t.data("tooltip-fallback-pos")!==undefined&&f(window).width()<k){q=t.data("tooltip-fallback-pos")}if(t.data("tooltip-content")!==undefined){u=t.data("tooltip-content")}else{if(t.data("tooltip-content-selector")!==undefined&&f(t.data("tooltip-content-selector")).length){u=f(t.data("tooltip-content-selector")).html()}else{if(t.data("content-selector")&&f(t.data("content-selector")).length){u=f(t.data("content-selector")).html()}else{if(t.data("tooltip-click-content")!==undefined||(t.data("tooltip-click-content-selector")!==undefined&&f(t.data("tooltip-click-content-selector")).length)){s="click";u=t.data("tooltip-click-content")||f(t.data("tooltip-click-content-selector")).html()}else{if(t.data("input-suggestion")!==undefined){u=t.data("input-suggestion")}else{if(t.data("input-suggestion-selector")&&f(t.data("input-suggestion-selector")).length){u=f(t.data("input-suggestion-selector")).html()}}}}}}var r={arrow:!t.hasClass("no-tip")&&(!t.data("class")||(t.data("class")&&t.data("class").indexOf("no-tip")===-1&&t.data("class").indexOf("on-top")===-1)),container:(t.data("container")||"body"),content:u,pos:q?q:(t.data("tooltip-style")==="info"?"right":"top"),show:t.data("show")!==undefined?t.data("show"):true,usePopover:t.data("use-popover")!==undefined?t.data("use-popover"):false};if(s!==null){r.trigger=s}if(t.data("tooltip-style")){r.style=t.data("tooltip-style");if(r.style=="info"||r.style=="help"){r.usePopover=true}}if(t.data("tooltip-classes")){r.extraClasses=t.data("tooltip-classes")}if(t.data("tooltip-title")){r.title=t.data("tooltip-title")}else{if(t.attr("title")||t.data("title")){r.title=t.attr("title")||t.data("title")}}if(t.data("selector")&&f(t.data("selector")).length){r.selector=f(t.data("selector"))}else{if(t.data("tip-hook")&&f(t.data("tip-hook")).length){r.selector=f(t.data("tip-hook"))}}if(t.hasClass("on-top")){if(!t.attr("id")){throw new Error("We have to specify an ID for the element")}r.container=["#",t.attr("id")].join("");t.css({position:"relative"})}return r}function n(u,v,A,w){w=w||{};u=f(u);if(v===undefined&&A===undefined){w=h(u)||{};v=w.content||w.title;A=w.style}if(w.usePopover===undefined&&(A=="info"||A=="help")){w.usePopover=true}var r=w.usePopover!==undefined?w.usePopover:false,E=w.closeOnFocus!==undefined?w.closeOnFocus:true;if(u.data("bs.tooltip")!==undefined||u.data("bs.popover")!==undefined){if(u.data("bs.tooltip")!==undefined){u.tooltip("destroy")}if(u.data("bs.popover")!==undefined){u.popover("destroy")}}if(v==="close"){return false}var s=(A||w.style||"default"),z=(w.autoclose||false),x=(w.extraClasses||""),D=w.show!==undefined?w.show:true,y=w.icon!==undefined?w.icon:true,C=w.arrow!==undefined?w.arrow:true,F={placement:(w.pos||"right"),trigger:(w.trigger||"manual"),html:true};if(w.selector){F.selector=w.selector}else{F.viewport=false;F.container=(w.tipContainer||w.container||"body")}if(w.classes){w.extraClasses+=" "+w.classes}if(r){if(w.title){F.title=w.title}F.content=v||w.content;var q=f("<span>"+F.content+"</span>").find("a").length;if(F.content&&q&&F.trigger.match(/hover/gi)){F.delay={show:0,hide:300}}}else{F.title=v||w.content}if(F.trigger&&F.trigger.match(/(manual)/gi)&&E){u.one("focus mouseup",function(){if(r){return u.popover("hide")}return u.tooltip("hide")})}if(r){var t=f(document);t.mouseup(function(I){var G=f(".popover-toggle.tooltip-visible-lg");var H=f(".popover");if(!G.is(I.target)&&G.has(I.target).length===0){if(!H.is(I.target)&&H.has(I.target).length===0){if(r){return u.popover("hide")}return u.tooltip("hide")}}else{f(".popover-toggle.tooltip-visible-lg").map(function(K,J){if(J.hasAttribute("aria-describedby")){return J.click()}})}})}if(r){F.template=['<div class="popover ',x," ",s,'"',(w.zIndex?(' style="z-index: '+w.zIndex+'"'):""),">",(C?'<div class="arrow"></div>':""),'<div class="popover-inner"><h1 class="popover-title"></h1><div class="popover-content"><p></p></div></div></div>'].join("");if(u.data("bs.popover")){u.popover("destroy")}u.popover(F);if(D&&z!==false&&!isNaN(z)){setTimeout(function(){u.popover("hide")},z)}return D?u.popover("show"):u}var B=null;if(y){if(A==="error"||A==="warning"){B="fa fa-warning"}else{if(A==="info"){B="fa fa-info-circle"}else{if(A==="success"){B="fa fa-check"}}}}if(B===null){x+=" no-icon"}F.template=['<div class="tooltip ',x," ","state-",s,'"',(w.zIndex?(' style="z-index: '+w.zIndex+'"'):""),">",(C?'<div class="tooltip-arrow"></div>':""),(B?'<i class="fa '+B+'"></i>':""),'<div class="tooltip-inner"></div></div>'].join("");if(u.data("bs.tooltip")){u.tooltip("destroy")}u.tooltip(F);if(D&&z!==false&&!isNaN(z)){setTimeout(function(){u.tooltip("hide")},z)}return D?u.tooltip("show"):u}f(document).on("mouseup","[data-tracking-category]:not(form)",e).on("submit","form[data-tracking-category]",e);function e(){var q=f(this);if(typeof gtmTrackGAEvent!=="undefined"){gtmTrackGAEvent(q.data("tracking-category"),q.data("tracking-action"),q.data("tracking-label"),q.data("tracking-value"))}}function c(){o=false;f(document).on("change.unfinishedform",":input",function(){var q=f(this);if(q.filter(".ignore-unfinished-form").length==0&&q.parents(".ignore-unfinished-form").length==0){o=true;a()}})}function a(){f(document).off("change.unfinishedform",":input")}c();return m})(jQuery);window.performance=window.performance||{};performance.now=(function(){return performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow||function(){return new Date().getTime()}})();window.originalTitle=document.title;$(document).ready(function(){$(".pph-switch").pphSwitch();if(PPH.isTouch()){$("body").addClass("touch-enabled")}if(typeof $.ui!=="undefined"){$(".sortable").disableSelection()}if(typeof $(this).dotdotdot!=="undefined"){window.cropTitles=function(){var a=$(".js-paragraph-crop");if(a.length){a.each(function(){var c=$(this),b=c.data("height")||c.parent().innerHeight();if(c.find(".js-crop-ending").length){c.dotdotdot({after:".js-crop-ending",height:b,wrap:"letter"})}else{c.dotdotdot({height:b,wrap:"letter"})}})}};window.cropTitles()}if($.browser&&$.browser.msie&&parseInt($.browser.version,10)<10){$("input[placeholder], textarea[placeholder]").placeholder()}(function(){var a=[".controller-job.view-list",".controller-freelancer.view-index"];if($(a.join(",")).length>0){$("#login-form").on("submit",function(f){var b=$.deparam.fragment(),h=$.deparam.querystring(),g,c;if(typeof b.Tag!=="undefined"){if($(".controller-freelancer.view-index").length>0){b.skills=b.Tag.id}else{b.tag=b.Tag.id}delete b.Tag}g=$.extend({},h,b);c=$.map(g,function(i,e){if(i!==""){return e+"="+i}}).join("&");if(c===""){return}if($("#login-form input[name=next]").length>1){$("#login-form input[name=next]").eq(1).remove()}$("#next").val(document.location.pathname+"?"+c)})}})();$("body").on("click","[data-toggle-class]",function(g){var f=$(this),c=f.attr("data-toggle-class-target"),a=c?$(c):f,b=f.attr("data-toggle-class");g.preventDefault();a.toggleClass(b)});$("body").on("click","[data-toggle-html]",function(h){var g=$(this),f=g.attr("data-toggle-html-target"),a=f?$(f):g,c=g.attr("data-toggle-html"),b=a.html();h.preventDefault();a.html(c);g.attr("data-toggle-html",b)});$("body").on("click","[data-toggle-value]",function(h){var g=$(this),f=g.attr("data-toggle-value-target"),a=f?$(f):g,c=g.attr("data-toggle-value"),b=a.val();h.preventDefault();a.val(c);g.attr("data-toggle-value",b)});(function(){var h,i=null,c,g,k,a,b='[data-hook="cmm-announcement"]',e='[data-hook="cmm-announcement"] i.fa',j='<div class="cmm-announcement clearfix" data-hook="cmm-announcement" style="display: none;"><p>{%msg}</p><i class="fa fa-times"></i></div>';if(typeof __pph_community==="undefined"||__pph_community===null){return}c=[];var f=PPH.userData.get("community.history");if(f){if(typeof f.length==="undefined"){$.each(f,function(l,m){c.push(m)})}else{c=f}}if(typeof __pph_community.announcements!=="undefined"){i=$(__pph_community.announcements).last().get(0)}if(i!==null){g=i.cmm_active||false;if(g==="y"&&$.inArray(parseInt(i.cmm_id),c)<0){a=$(j.replace("{%msg}",i.cmm_message));$(".container-top").prepend(a);$(window).load(function(){$(b).slideDown(200,function(){$(window).trigger("resize")})});$("body").on("click.community",e,function(){c.push(i.cmm_id);PPH.userData.save("community.history",c,true);$(this).parent().slideUp(200,function(){$(this).remove();$("body").off("click.community");$(window).trigger("resize")})})}}})()});(function(e){e.fn.pphactiveform=function(g){var f=e(this);e.extend(e.fn.pphactiveform.options,e.fn.yiiactiveform.defaults,e.fn.pphactiveform.defaults,g);return this.each(function(){e(this).yiiactiveform(g);c(f,e.fn.pphactiveform.components,g)})};e.fn.pphactiveform.defaults={errorSummarySeparator:"\n",tooltipDescriptor:"aria-describedby",pphComponentAttribute:"data-pph-component",componentsDefaults:{tooltip:{},pphdropdown:{},pphnumeric:{},autoresize:{}}};e.fn.pphactiveform.options={};e.fn.pphactiveform.displayErrors=function(f,i,p){var s=e(f),r=e.fn.pphactiveform.options;var o=0;for(var m in i){var n=e("#"+m,s).length?e("#"+m,s):e('[data-id="'+m+'"]',s),q=b(i[m],e.fn.pphactiveform.options.errorSummarySeparator);var h=n;if(n.is(":hidden")){h=n.closest(":visible")}var k=e.extend({container:h.parent()},a(n,"tooltip"));if(q.trim()!=""){PPH.dom.error(h,q,k)}o++;var j=r.validatingCssClass+" "+r.errorCssClass+" "+r.successCssClass;e(h).one("mouseup focus",function(v){var u=e(this),w=e(this,s).parents("."+r.errorCssClass+":first");u.removeClass(j);w.removeClass(j);var t=s.find("#"+this.errorID);if(t.length){t.html("").hide()}})}var g=e("["+r.tooltipDescriptor+"]:first");if(o&&g.length&&r.scrollErrors){var l=g.offset().top-r.scrollErrorOffset;e("html, body").animate({scrollTop:l},r.scrollErrorDuration)}return o==0};e.fn.pphactiveform.components={autoresize:function(){e(this.element).autoResize(this.options)},pphdropdown:function(){if(this.options.scrollbar==true){this.options.scrollbarOptions={size:250}}e(this.element).pphDropdown(this.options)},pphnumeric:function(){var f=this.options;if(f.typeAttribute===undefined){return}e('input[type="text"]['+this.options.typeAttribute+"]").on("keyup input paste",function(){var h=e(this).val(),g=e(this).attr(f.typeAttribute);if(h!==null){h=g=="int"?h.replace(/\D+/gi,""):h.replace(/[^0-9\.]+/gi,"");e(this).val(h)}})},help:function(){var g=e(this.element);var f=g.data("message-container");var h=e('[data-hook="'+f+'"]').html();PPH.dom.help(g,h)}};e.fn.pphactiveform.addItem=function(f,q,l,x){var o=e(f),k=e(q),l=typeof l==="function"?l:e.noop,u=o.data("settings"),m=x!==undefined?e(x):k.eq(0);if(!m.length){throw new Error("Could not locate the template for the new elements. Please specify one")}if(u===undefined){throw new Error("form "+o.selector+" is not an active form")}var t=1;if(k.length){t=Math.max.apply(Math,k.find("input, textarea, select").map(function(){return parseInt(this.id.replace(/(.*)_(\d+)_([^_]+)/gi,"$2"),10)}));t+=1}var g=u.attributes.length?u.attributes:[],s=m.clone(),h=s.find("input, textarea, select").get();for(var r in h){var v=h[r],w={};if(g.length){for(var r in g){var y=g[r];if(y.id===v.id){w=y;break}}}e(v).attr("id",j(v.id,t)).attr("name",p(v.name,t)).val("");if(e.isEmptyObject(w)){continue}var n={errorID:j(w.errorID,t),id:j(w.id,t),inputID:j(w.inputID,t),name:p(w.name,t),value:""};u.attributes.push(e.extend(true,{},w,n))}k.filter(":last").after(s);o.data("settings",u);l.apply(s,s);function j(z,i){return z.replace(/(.*)_([0-9]+)_([^_]+)/gi,("$1_"+i+"_$3"))}function p(z,i){return z.replace(/(.*)\[([0-9]+)\]\[([^\[\]]+)\]/gi,("$1["+i+"][$3]"))}};e.fn.pphactiveform.removeItem=function(f,n,j){var o=e(f),k=e(n),g=o.data("settings"),j=typeof j==="function"?j:e.noop,l=k.find("input, select, textarea").get(),m=[];if(!o.length||!k.length){return false}if(l.length){for(var h in l){m.push(l[h].id)}}if(m.length){e.each(g.attributes,function(p,i){if(i===undefined||i.inputID===undefined){return false}if(e.inArray(i.inputID,m)>-1){g.attributes.splice(p,1)}})}k.remove();j.apply();o.data("settings",g)};e.fn.pphactiveform.requiredUploader=function(f,j,i){var h=[f,"_",j].join("");if(!PPH.page||!PPH.page.modules||!PPH.page.modules.AttachFiles||!PPH.page.modules.AttachFiles.config[h]||!PPH.page.modules.AttachFiles.config[h]){return false}i=!isNaN(i)?parseInt(i,10):1;var g=PPH.page.modules.AttachFiles.config[h];return g._filesUploadedOrQueued>=i};var c=function(h,g,f){if(typeof h=="string"){h=e(h)}e("["+f.pphComponentAttribute+"]",h).each(function(m,l){var j=e(l,h).attr(f.pphComponentAttribute);var k=g[j],n=f.componentsDefaults[j];var o=e.extend({},e.fn.pphactiveform.defaults.componentsDefaults[j],n,a(e(l,h),j));if(typeof k=="function"){k.call({element:l,options:o})}})};var b=function(h,f){var g="";e.each(h,function(i,j){g+=j+f});return g};var a=function(f,h){if(typeof f=="string"){f=e(f)}if(typeof e.fn.pphactiveform.options.componentsDefaults!="undefined"){var k=e.fn.pphactiveform.options.componentsDefaults[h],i={}}if(k!==undefined){for(var g in k){var j=f.data(h+"-"+g);if(j!==undefined&&j!==null){i[g]=j}}}return e.extend({},k,i)}})(jQuery);(function(e){e.fn.availabilitySwitch=function(n){this.defaultOptions={ajax:"/member/setAvailable",onStateText:'<i class="fa fa-check-circle"></i>Available now!',offStateText:'<i class="fa fa-minus-circle"></i>Busy',stateTextContainer:e(".availability"),stateTextElement:e(".availability-label"),toggleIconElement:e(".avail-member-trigger"),success:function(){},fail:function(){}};var o=e.extend({},this.defaultOptions,n);return this.each(function(){var p=e(this);c(p,o)})};var i;var m=function(q,s,p){if(i){return false}var t=p?0:1;var o=q.stateTextContainer;var u=q.stateTextElement;var n=e(u,o);var r={status:t};e.ajax({url:q.ajax,type:"POST",data:e.extend({},r,PPH.getCsrf()),beforeSend:function(){n.fadeTo(200,0.4);i=true},success:function(v){if(v.success){if(t){f(q)}else{k(q)}n.fadeTo(150,1);i=false;l(q);a(v.newStatus);q.success.call(this)}else{q.fail.call(this);i=false;b(s,q,false);i=true;PPH.error(v.message,{persist:true})}}})};var c=function(p,o){var q=e("<div/>",{"class":"switchContainer"});var n=e("<div/>",{"class":"av-switch-bg"});switchHandle=e("<div/>",{"class":"av-switch-handle"});p.hide();switchHandle.appendTo(n.appendTo(q));q.insertAfter(p);g(p,o);var r=p.prev("a");q.add(r).on("click drag",function(s){b(p,o,true)})};var g=function(p,o){var n=p.is(":checked");if(n){switchHandle.css("left","");switchHandle.css("left","55%");switchHandle.removeClass("handle-off").addClass("handle-on");f(o)}else{switchHandle.css("left","-5%");switchHandle.removeClass("handle-on").addClass("handle-off");k(o)}};var b=function(p,o,q){var n=p.is(":checked");if(i){return false}if(n){h(p)}else{j(p)}if(q){m(o,p,n)}};var j=function(n){var o=e(".av-switch-bg > .av-switch-handle");n.prop("checked",true);o.css("left","");o.removeClass("handle-off").addClass("handle-on");o.animate({left:"55%"});o.handlePos="right"};var h=function(n){var o=e(".av-switch-bg > .av-switch-handle");n.prop("checked",false);o.removeClass("handle-on").addClass("handle-off");o.animate({left:"-5%"});o.css("right","");o.handlePos="left"};var f=function(p){var o=p.stateTextContainer;var q=p.stateTextElement;var n=e(q,o);e(n,o).html(p.onStateText).removeClass("busy").addClass("available")};var k=function(p){var o=p.stateTextContainer;var q=p.stateTextElement;var n=e(q,o);e(n,o).html(p.offStateText).removeClass("available").addClass("busy")};var l=function(n){var o=n.toggleIconElement;o.toggle()};var a=function(o){var n=e(".top-nav-image .available");var p=e(".top-nav-image .available i");n.removeClass("not");p.removeClass("fa-check fa-minus");if(o==0){n.addClass("not");p.addClass("fa-minus")}else{p.addClass("fa-check")}}})(jQuery);(function(h){h.fn.pphSwitch=function(i){this.defaultOptions={targetClass:"pphSwitchContainer",handleLeftPos:"3%",handleRightPos:"53%"};var j=h.extend({},this.defaultOptions,i);return this.each(function(){var k=h(this);c(k,j)})};var b;var c=function(j,i){var k=h("<div/>",{"class":i.targetClass});switchBg=h("<div/>",{"class":"pph-switch-bg"});switchHandle=h("<div/>",{"class":"pph-switch-handle"});if(j.data("handleleftpos")){j.handleLeftPos=j.data("handleleftpos")}else{j.handleLeftPos=i.handleLeftPos}if(j.data("handlerightpos")){j.handleRightPos=j.data("handlerightpos")}else{j.handleRightPos=i.handleRightPos}j.hide();switchHandle.appendTo(switchBg.appendTo(k));k.insertAfter(j);e(j,i);k.add(i.stateTextElement).on("click drag",function(l){f(j,i,true)})};var e=function(k,j){var i=k.is(":checked");if(i){switchHandle.css("left","");switchHandle.css("left",k.handleRightPos);switchHandle.removeClass("handle-off").addClass("handle-on");switchBg.removeClass("bg-off").addClass("bg-on")}else{switchHandle.css("left",k.handleLeftPos);switchHandle.removeClass("handle-on").addClass("handle-off");switchBg.removeClass("bg-on").addClass("bg-off")}};var f=function(k,j){var i=k.is(":checked");if(i){g(k,j)}else{a(k,j)}};var a=function(k,j){var i=h("+."+j.targetClass+" .pph-switch-bg",k);var l=h("> .pph-switch-handle",i);k.prop("checked",true);k.trigger("change");l.css("left","");l.removeClass("handle-off").addClass("handle-on");i.removeClass("bg-off").addClass("bg-on");l.animate({left:k.handleRightPos});l.handlePos="right"};var g=function(k,j){var i=h("+."+j.targetClass+" .pph-switch-bg",k);var l=h("> .pph-switch-handle",i);k.prop("checked",false);k.trigger("change");l.removeClass("handle-on").addClass("handle-off");i.removeClass("bg-on").addClass("bg-off");l.animate({left:k.handleLeftPos});l.css("right","");l.handlePos="left"}})(jQuery);PPH.modules.BsRating=function(b){var a={starRatingSelector:".star-rating span",valueInputSelector:"input.rating-value",emptyStar:"&#9734;",filledStar:"&#9733;",emptyColor:"#bbb",filledColor:"#ffac00"};var e=PPH.Module($.extend({},a,b));var f=e.config;e.init=function(){$(document).on("click",f.starRatingSelector,function(){$(this).siblings(f.valueInputSelector).val($(this).data("rating"));e.setRatingStar()});e.setRatingStar()};e.setRatingStar=function(){var c=$(f.starRatingSelector);var g=parseInt(c.siblings(f.valueInputSelector).val(),10);return c.each(function(){if(g>=parseInt($(this).data("rating"),10)){return $(this).addClass("selected")}else{if($(this).hasClass("selected")){$(this).removeClass("selected")}}})};return e};PPH.modules.AttachFiles=function(N){var a=60;var H=160;var aa={maxFiles:3,maxFileSize:"20mb",maxTotalFileSize:"0mb",chunkSize:"100kb",container:".widget-jsModuleAttachFiles",itemClass:"attachFiles-item",primaryInput:null,primarySelector:null,primaryEnabled:false,primaryDefaultOrdering:["video","image","embed","quote","other"],primaryClass:"primary",overlayClass:"attach-overlay",fileList:".attachFiles-list",fileRemoves:".delete",dragSupportElement:".attachFiles-dragsupport",noDragSupportClass:"noDragSupport",promoViewSel:".attachFiles-promoView",promoFileLink:".attachFiles-pvFiles a",absDropArea:".attachFiles-dropArea",descrDialog:null,descrDialogText:null,uploadDelayPercentage:25,uploadProgressInterval:300,chucksCount:6,chunkSizeMin:100000,chunkSizeMax:600000,embedOn:false,embedUrl:null,embedValidateUrl:null,translations:{embedContentButton:"Embed Content",embedMediaWaitMessage:"Please wait..."},importOn:false,importItemsUrl:null,importUrl:null,loadedPortfolio:false,portfolioItems:null,formKey:"uploadEnc",oldAtt:true,files:{},phrases:{errorMaxFiles:"You can upload up to {0} files",errorTotalMaxFiles:"You can upload up to {0} files of total size",errorFileType:"Invalid file type",errorFileSize:"Max file size for this file type is {0}",errorGeneral:"There was an error",loadPleaseWait:"Please wait...",description:"Add description"},fileExtsWhitelist:[],fileExtsBlacklist:[],_dropTarget:"",_formElement:"",_submitButtons:"",_currentUpload:"",_pluploader:null,_filesToUpload:0,_filesUploadedOrQueued:0,defaultMaxFileSize:"5mb",successUploadClass:"attach-success",sortingAttribute:null,tooltipPosition:"left",tooltipClasses:"state-error",FILETYPES:{},user_id:0};var o={};for(var e in N){o[e]=$.extend({},aa,N[e])}var L=PPH.Module(o);var Z=L.config;var J={};var w;var z=800;var V=25;var l=null;var T=null;var G={uploadRate:10000,uploadStart:0,uploadFinish:0,chunks:[],lastChunkUploaded:0};var K=false;var h=null;var s=null;var P=PPH.isResponsive?"fpph-icon":"icon large";var Y=PPH.isResponsive?"fpph-file-unknown":"file-unknown";L.FILETYPES={IMAGE:"image",AUDIO:"audio",VIDEO:"video",DOC:"document",QUOTE:"quote",EMBED:"embed",OTHER:"other"};function m(c){if(PPH.DEBUG&&typeof console!="undefined"){console.log(c)}}function R(ae,ad){var ac=$("#"+ae.id).closest(".widget-jsModuleAttachFiles");var c=ad||ac.data("uploader");var af=ab(c);m("_onRemoveFile Triggered for id:"+af.id);$("body").trigger("FileRemove",{opts:af,file:ae});ac.data(ae.id+"-removed","1");E(ae.id,c);if(af.primaryEnabled&&l!==null&&ae.id==l.id){r()}if(5!=ae.status){af._filesToUpload--}af._filesUploadedOrQueued--;af.totalSize-=parseInt(ae.size,10);L.refreshFormStatus(c);if(ae.fake){L.trigger("removed",c,ae);return}c.removeFile(ae);c.refresh();if(af._currentUpload==ae.id){c.stop();c.refresh();c.start()}L.trigger("removed",c,ae)}function Q(){var c=$(".widget-jsModuleAttachFiles");$.each(c,function(ai,af){var ae=$(af);$(".attachFiles-list li",ae).each(function(ak,al){$(al).animate({width:0,opacity:0},1000,function(){$(this).remove()})});var ad=ae.data("uploader");var aj=ab(ad);ad.stop();ad.refresh();aj._filesUploadedOrQueued=0;aj._filesToUpload=0;if(aj.importOn){var ac=$("#import-dialog-"+aj.id),ah=ac.find('input[data-hook="selected-items"]'),ag=ac.find('li[data-hook="import-select"]');ag.each(function(){$(this).removeClass("checked").removeClass("imported").removeData("checked").removeData("imported")});ah.remove()}L.refreshFormStatus(ad)})}function A(c){if("string"!==typeof c){c="-"}return c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\(/g,"&#40;").replace(/\)/g,"&#41;")}function v(ac,c){var ad=ac.substring(0,ac.lastIndexOf("."));if(ad.length>c-4){ad=ad.substring(0,c-5)+".."+ac.substring(ac.lastIndexOf("."))}else{ad+=ac.substring(ac.lastIndexOf("."))}ad=A(ad);return ad}function D(ae){var ac=["b","k","m","g","t"],c=parseFloat(ae),ad=ae.replace(/(\d+)b$/g,"$1bb").slice(-2,-1);return c*Math.pow(1024,$.inArray(ad,ac))}function b(c){if(c.lastIndexOf(".")!==-1){return c.slice(c.lastIndexOf(".")).substr(1).toLowerCase()}else{return false}}function U(ac,c){if(!ac){return false}else{if(c.fileExtsWhitelist&&c.fileExtsWhitelist.length>0){return($.inArray(ac,c.fileExtsWhitelist)!==-1)}else{if(c.fileExtsBlacklist&&c.fileExtsBlacklist.length>0){return($.inArray(ac,c.fileExtsBlacklist)===-1)}}}return true}function n(c){return Math.ceil(c-((c/100)*aa.uploadDelayPercentage))}function E(ac,c){$("#"+ac+" .remove").remove();$("#"+ac).animate({width:0,opacity:0},z,function(){$("#"+ac+", .file-attach-"+ac).remove();c&&c.refresh()})}function u(ad,ae,af,ac){var c=ab();ac=ac||{};PPH.dom.error(ad,af,$.extend(true,{},{pos:c.tooltipPosition,autoclose:5000,extraClasses:c.tooltipClasses},ac))}function q(ac,c){return"<b>"+v(ac,V)+"</b>: "+c}function k(c){$('<a href="#" class="attachFiles-pick-placeholder"></a>').insertAfter($(".attachFiles-pick._attachFiles-link",c))}L.embedMedia=function(ae,af,c){var ag=ae.find('input[type="submit"]'),ad=ae.data("uploaderConfig"),ac=function(){ag.removeProp("disabled").removeClass("disabled").val(ad.translations.embedContentButton)};ag.removeProp("disabled");if(c){ac();return false}if(s&&s.abort){s.abort()}s=$.ajax({url:ad.embedUrl,data:ae.serializeArray(),dataType:"json",type:"post",beforeSend:function(){ag.prop("disabled",true)},error:function(){ac()},success:function(ah){s=null;ac();if(!ah.status&&ah.errorMsg){return u(ae.find('input[data-hook="input"]'),"error",ah.errorMsg,{zIndex:1101,container:ad!==undefined?"#embed-form-"+ad.id:"body"})}if(ad!==undefined){$dlg=$("#embed-dialog-"+ad.id);$dlg.modal("hide")}var ai=new L.PPHFile({id:ah.id,description:ah.name,fake:false,original:ah.path,preview:ah.preview,path:ah.path,size:ah.size,fileName:ah.name,type:ah.type||L.FILETYPES.EMBED,cssClass:Y,service:ah.service,status:5,source_url:ah.source_url,media_url:ah.media_url,width:ah.width,height:ah.height,isEmbedding:true},ah.name,ah.filesize,L.FILETYPES.EMBED,false,false,ah.name);ai.category=L.FILETYPES.EMBED;L.addFileBlock(ai,ad.containerDom,ad.containerDom.data("uploader"));var aj=$("#"+ah.id);aj.data("file",ai).removeClass("hide").addClass("attach-success").css("opacity",1).show().css("width",120);L.generatePreview($("img",aj),ai);L.updateFileBlock(ah.id,ah.id,ai,ad);L.refreshFormStatus(ad.container.data("uploader"),true)}})};L.loadPortfolioItems=function(c){return $.ajax({url:c.importItemsUrl,data:PPH.getCsrf(),dataType:"html",type:"POST",success:function(ac){c.portfolioItems=ac;c.loadedPortfolio=true}})};function C(ae,ac){var ad=ae.find('a[data-hook="import-dialog-trigger"]'),c=$("#import-dialog-"+ac.id),af=c.find('div[data-hook="items-container"]');c.on("show.bs.modal",function(ah,ag){af.loader("open",{smartPositioningOptions:{minimumHeight:250}});if(ac.portfolioItems===null){$.when(L.loadPortfolioItems(ac)).done(function(){af.html(ac.portfolioItems);if($(ac.portfolioItems).find("span.empty").length){c.find('a[data-hook="import-button"]').hide()}j(c,ac);af.loader("close")})}else{af.loader("close")}});ad.on("click",function(ag){ag.preventDefault();c.modal("show")});c.on("hide.bs.modal",function(){c.find("li.checked:not(.imported)").each(function(){var ag=$(this);ag.removeClass("checked").removeData("checked");c.find('input[data-hook="selected-items"][data-item="'+ag.data("id")+'"]').remove()});PPH.dom.error(af,"close");PPH.dom.info(c.find("li.checked.imported"),"close")});c.find('a[data-hook="import-button"]').on("click",function(ah){ah.preventDefault();ah.stopPropagation();var ag=af.find('input[data-hook="selected-items"]');g(ag,ac);ag.each(function(){$("#import-dialog-"+ac.id+' li[data-hook="import-select"][data-id="'+$(this).data("item")+'"]').addClass("imported").data("imported",true)});c.modal("hide")})}function j(c,ac){var ae=c.find('div[data-hook="items-container"]'),ad={autoclose:5000,closeOnFocus:true,zIndex:1101,container:c.selector};ae.find('li[data-hook="import-select"]').on("click","a",function(ak){ak.preventDefault();ak.stopPropagation();var ai=ac._filesUploadedOrQueued,ah=parseInt(ac.totalSize,10),af=ac.maxFiles-ai,an=D(ac.maxTotalFileSize)-ah;PPH.dom.error(ae,"close",ad);var al=$(this),am=al.parent("li");if(am.data("imported")==true){PPH.dom.info(am,ac.translations.alreadyImported,ad);return false}if(am.data("checked")){am.removeClass("checked").removeData("checked");ae.find('input[data-hook="selected-items"][data-item="'+am.data("id")+'"]').remove();return false}if(ae.find('input[data-hook="selected-items"]').length>=af){PPH.dom.error(ae,ac.translations.maxImportFiles.replace(/\{num\}/gi,ac.maxFiles),ad);return false}if(D(ac.maxTotalFileSize)>0&&ag()>=an){PPH.dom.error(ae,ac.translations.maxImportSize.replace(/\{num\}/gi,ac.maxTotalFileSize),ad);return false}am.addClass("checked").data("checked",true);var aj=am.data();ae.append(['<input type="hidden" value="',aj.id,'" data-item="',aj.id,'" data-type="',aj.type,'" data-description="',aj.description,'" data-size="',aj.size,'" data-hook="selected-items">'].join(""));function ag(){var ao=0;ae.find('input[data-hook="selected-items"][data-size]').each(function(){var ap=parseInt($(this).data("size"),10);if(!isNaN(ap)){ao+=ap}});return ao}})}function g(ac,c){if(!ac.length){return false}var ad=c.container.data("uploader");L.refreshFormStatus(ad,false);Z[c.id]._filesToUpload=ac.length;$.each(ac,function(ag,ah){var af=$(this),aj=null,al=af.data("item"),ai=af.data();var ae=new L.PPHFile({id:"import-item-"+al,description:ai.description,fake:false,category:ai.category,status:5,primary:false,fileName:ai.description,filesize:ai.size,type:ai.type||L.FILETYPES.EMBED,cssClass:Y});L.addFileBlock(ae,c.containerDom,c.containerDom.data("uploader"));var ak=$("#import-item-"+al);ak.data("file",ae).removeClass("hide").addClass("attach-success").addClass("attach-import-loading").css("opacity",1).show().css("width",120);L.refreshFormStatus(ad);ak.find(".remove").on("click",function(){Z[c.id]._filesToUpload--;L.refreshFormStatus(c.container.data("uploader"));$("#import-dialog-"+c.id+' li[data-hook="import-select"][data-id="'+al+'"]').removeClass("checked imported").removeData("checked").removeData("imported");if(aj!==null&&typeof aj.abort==="function"){aj.abort()}});$(window).on("beforeunload",function(){if(aj!==null&&typeof aj.abort==="function"){aj.abort()}});aj=$.ajax({url:c.importUrl+"&mediaId="+al,data:PPH.getCsrf(),dataType:"json",type:"post",error:function(){ak.find(".remove").trigger("click");L.refreshFormStatus(c.container.data("uploader"))},success:function(ao){if(ao.status===undefined||ao.status===false){var ar=ao.errorMsg?[ao.errorMsg,"<br>"].join(""):["System Error: Item ",al," could not be imported","<br>"].join(""),an=5000;PPH.dom.error(ak,ar,{autoclose:an});setTimeout(function(){ak.find(".remove").trigger("click")},an);L.refreshFormStatus(c.container.data("uploader"));return false}var aq=new L.PPHFile({id:ao.id,description:ao.description,fake:false,category:ao.category,original:ao.path,preview:ao.preview,path:ao.path,size:ao.size,fileName:ao.name,type:ao.type||L.FILETYPES.EMBED,cssClass:ao.cssClass||Y,service:ao.service,status:5,source_url:ao.source_url,media_url:ao.media_url,width:ao.width,height:ao.height,filesize:ao.filesize,thumb:ao.thumb,isImporting:true},ao.name,ao.filesize,ao.category,false,false,ao.description);Z[c.id]._filesToUpload--;var am=parseInt(ao.filesize,10),ap=ak.find("img");Z[c.id].totalSize+=!isNaN(am)?am:0;L.generatePreview(ap,aq);ap.attr("data-tooltip-content",ao.name);L.updateFileBlock(ao.id,"import-item-"+al,aq,c);L.refreshFormStatus(c.container.data("uploader"))}});af.remove()})}function X(ae,ah){var ai=ae.find('a[data-hook="embed-dialog-trigger"]'),af=$("#embed-dialog-"+ah.id),ak=$("#embed-form-"+ah.id),ac=ak.find('input[type="submit"]'),ad=af.find('input[type="hidden"][data-hook="service"]'),aj=af.find('a[data-hook="service"]'),ag=[8,9,16,17,18,33,34,35,36,37,38,39,40,46,91];if(ak.length){ak.data("uploaderConfig",ah);ak.on("submit",function(al){al.preventDefault();al.stopPropagation()})}if(ai.length&&af.length){af.on("show.bs.modal",function(){ak.find('input[data-hook="input"], input[data-hook="service"]').val("");ak.find('input[data-hook="service"]').trigger("change");ac.removeProp("disabled").removeClass("disabled").val(ah.translations.embedContentButton)}).on("hide.bs.modal",function(){if(s&&s.abort){s.abort()}ac.removeProp("disabled").removeClass("disabled").val(ah.translations.embedContentButton);af.find(".tooltip").tooltip("destroy")});af.find('input[data-hook="input"]').on("keyup change",function(an){var am=$(this);if(am.val()===""){ad.val("").trigger("change")}if(an.keyCode!==undefined&&$.inArray(parseInt(an.keyCode,10),ag)!==-1){return}var al=new String(am.val());if(al.length&&!al.match(/^(http|<\w+)/gi)){al="http://"+al;am.val(al)}c(al,ah.embedHosts)});ai.on("click",function(al){al.preventDefault();af.modal("show")});function c(am,al){if(h!==null){match=am.match(h);if(match!==undefined&&match!==null&&match.length&&match[0]!==undefined){ad.val(al[(match[0])]).trigger("change")}else{ad.val("").trigger("change")}}}ad.on("change",function(ap){var ao=$(this),al=ao.val(),an=false;aj.removeClass("transparent");for(var am in ah.embedHosts){if(!ah.embedHosts.hasOwnProperty(am)){continue}if(ah.embedHosts[am]==al){an=true;break}}if(al===""||!al||!an){return}aj.filter(':not([data-service="'+al+'"])').addClass("transparent")})}}function y(c){var ac=$(c.fileList,w);ac.addClass("ui-sortable");ac.sortable({handle:".attachFiles-item",nested:false,vertical:false,placeholder:'<li class="drop-target"></li>',onDragStart:function(af,ad,ae){ae(af);af.addClass("highlight-drag")},onDrop:function(af,ad,ae){af.removeClass("highlight-drag");L.applySortingOrder(c);ae(af)}})}function B(){var c=new XMLHttpRequest();return !!(c&&("upload" in c)&&("onprogress" in c.upload))}function O(){var c=document.createElement("canvas");return !!(c.getContext&&c.getContext("2d"))}function ab(c){if(typeof c=="undefined"){c=$(".widget-jsModuleAttachFiles").eq(0).data("uploader")}return typeof c!=="undefined"?c.settings.config:aa}function t(c){m("setupUploader Init");var ad=1;while($("#attachFiles-pick-"+ad).length){ad++}$("._attachFiles-link",c.containerDom).attr("id","attachFiles-pick-"+ad);$(".attachFiles-dropArea",c.containerDom).attr("id","attachFiles-dropArea-"+ad);var ac=new plupload.Uploader({runtimes:"html5,flash",required_features:"send_browser_cookies",browse_button:"attachFiles-pick-"+ad,container:c.containerDom.attr("id"),containerDom:c.containerDom,config:c,drop_element:"attachFiles-dropArea-"+ad,flash_swf_url:"/js/jquery-plugins/plupload/Moxie.swf",chunk_size:c.chunkSize,urlstream_upload:true,url:c.ajaxUpload});L.refreshFormStatus(ac);ac.init();ac.bind("FilesAdded",function(al,af){var ae=al.settings.config;var ag=[];var ak=af.length;m("FilesAdded event triggered. Totalfiles:"+ak);for(var ah=0;ah<ak;ah++){if(typeof af[ah]==="undefined"){continue}var ai=af[ah];if(!U(b(ai.name),ae)){ag.push(q(ai.name,ae.phrases.errorFileType));al.removeFile(ai);u(ae.containerDom,"error",ai.name+": invalid file type");x(false,"Invalid file type",ai.size,ai.name);af.splice(ah,1);ah--;continue}var am=p(ai.name,ae);if(ai.size>D(am)){ag.push(q(ai.name,ae.phrases.errorFileSize.replace("{0}",am)));al.removeFile(ai);af.splice(ah,1);ah--;continue}ae.totalSize+=ai.size;if(D(ae.maxTotalFileSize)>0&&ae.totalSize>D(ae.maxTotalFileSize)){ag.push(q(ai.name,ae.phrases.errorTotalMaxFiles.replace("{0}",ae.maxTotalFileSize)));al.removeFile(ai);af.splice(ah,1);ah--;ae.totalSize-=ai.size;continue}}if(ae._filesUploadedOrQueued+af.length>ae.maxFiles){var an=ae._filesUploadedOrQueued+af.length-ae.maxFiles;if(ae._filesUploadedOrQueued==1){an--}for(var aj=0;aj<an;aj++){al.removeFile(af.pop())}if(an>0){ag.push(ae.phrases.errorMaxFiles.replace("{0}",ae.maxFiles))}}if(af.length>0){$.each(af,function(ap,ao){if(ao.size===0){al.removeFile(ao);return true}ao.safeName=v(ao.name,25);ae._filesToUpload++;L.addFileBlock(ao,al.settings.containerDom,al);var aq=a;if(ae.galleryMode){aq=H}$("#"+ao.id).data("uploader",al).css("width",0).css("display","block").animate({width:aq,opacity:1},z,function(){var ar=$(this).data("uploader");L.refreshFormStatus(ar);ar.refresh()})});al.start();L.refreshFormStatus(al)}if(ag.length){u(ae.containerDom,"error",ag.join("<br/>"))}});ac.bind("Error",function(ae,ag){m("ErrorUpload Event. err:"+ag.message);var af=ae.settings.config;L.uploadFailed(af,ae,ag.file,ag.message);if(af._filesToUpload>0){af._filesToUpload--}});ac.bind("BeforeUpload",function(ae,ah){m("Event: BeforeUpload");G.uploadStart=performance.now();G.lastChunkUploaded=performance.now();G.chunks=[];var ag=Math.ceil(ah.size/aa.chucksCount);m("File size: "+ah.size+" bytes");ag=Math.min(Math.max(ag,aa.chunkSizeMin),aa.chunkSizeMax);ae.settings.chunk_size=ag;var aj={file_size:ah.size,user_id:c.user_id};if(c.target){aj.target=c.target}if(c.targetId){aj.targetId=c.targetId}ae.settings.multipart_params=$.extend(aj,PPH.getCsrf());m("Resulting ChunkSize: "+ag+" bytes");m(ae.settings);var ai=ae.settings.config;ai._currentUpload=ah.id;$("#"+ah.id).removeClass().addClass("attach-uploading").find(".attachFiles-item").remove("img").append('<div class="attachFiles-progress"><span>0</span><input type="hidden" class="attachFiles-knob" value="0" /></div>');var af=$("#"+ah.id+" .attachFiles-knob");af.bind("change",function(ak){$(this).parents(".attachFiles-progress").find("span").text($(this).val())}).parent().css({marginTop:af.parents(".gallery:first").length?40:5,marginLeft:5,display:"block"});if(O()){af.knob({readOnly:true,fgColor:"#ff7701",bgColor:"#abaaaa",thickness:0.22,width:50,height:50})}L.updateFileProgressBlock(ah,ae,10,700,false,true)});ac.bind("ChunkUploaded",function(ai,ag,am){m("Event: ChunkUploaded");m(". Percent (file.percent): "+ag.percent);m(". Percent (up.total.percent): "+ai.total.percent);m(am);if(am.chunk==am.chunks-1){var al=0;for(var ah=0;ah<G.chunks.length;ah++){al+=parseInt(G.chunks[ah])}al=Math.ceil(al/G.chunks.length);lastChunk=Math.ceil(performance.now()-G.lastChunkUploaded)}G.chunks[am.chunk]=performance.now()-G.lastChunkUploaded;G.lastChunkUploaded=performance.now();var ak=99-parseInt($("#"+ag.id+" .attachFiles-progress input.attachFiles-knob").val(),10),ae=(ak-aa.uploadDelayPercentage)*aa.uploadProgressInterval;if(am.chunks>2&&am.chunk==0){G.uploadRate=ai.settings.chunk_size/((performance.now()-G.uploadStart)/1000);m(". Upload rate: "+G.uploadRate)}if(am.chunk+1<=am.chunks-1){var af=0,aj=aa.uploadProgressInterval;if(am.chunk>0){for(var ah=0;ah<=am.chunk;ah++){af+=G.chunks[ah]}af/=am.chunk+1;aj=af/(n(100)/am.chunks)}ae=(ak-aa.uploadDelayPercentage)*aj;m(". Update progress: Normal");L.updateFileProgressBlock(ag,ai,ag.percent,aj,true,true)}else{m(". Update progress: None, last chunk")}if(am.chunk+1==am.chunks-1){m(". Update progress: Last Update, pre-last chunk");setTimeout(function(){var ao=100-parseInt($("#"+ag.id+" .attachFiles-progress input.attachFiles-knob").val()),ap=0.0000186282295023406*ag.size+(22.0065182321634*ag.size/3000000),an=(ap/ao)*1000;m("Estimated processing time: "+ap);L.updateFileProgressBlock(ag,ai,98,an,false,true)},ae)}});ac.bind("UploadedProgress",function(ae,af){var ag=ab(ae);m("Event: UploadedProgress");m("Percent (file.percent): "+af.percent);m("Percent (up.total.percent): "+ae.total.percent)});ac.bind("FileUploaded",function(am,ai,aj){for(var al=0;al<G.chunks.length;al++){m("Chunk #"+(al+1)+" took: "+parseInt(G.chunks[al]*1000,10)/1000000+"s")}var af=ab(am);m("FileUpload Event. File upload completed");if($(af.container).data(ai.id+"-removed")==1){return false}af._filesToUpload--;var ak=null,ae=true;try{ak=jQuery.parseJSON(aj.response)}catch(an){x(false,"Exception thrown while parsing the json response "+an.message);ae=false}var ah;if(ak===undefined||!ae){m("Malformed JSON returned from server");ah=q(ai.name,"System Error");L.uploadFailed(af,am,ai,ah);return false}else{if(null===ak){m("FileUpload Event. Empty response");ah=q(ai.name,"System Error");x(false,"System error: empty response from server",ai.size,ai.name);L.uploadFailed(af,am,ai,ah);return false}}if(typeof ak!="undefined"&&ak.errorMsg){m("FileUpload Event. Failed with error message:"+ah);ah=q(ai.name,ak.errorMsg);x(false,"Failed with message "+ah,ai.size,ai.name);L.uploadFailed(af,am,ai,ah);return false}else{if(!ak.status){m("FileUpload Event. Failed with no error message");ah=q(ai.name,af.phrases.errorGeneral);x(false,"Failed with no error message",ai.size,ai.name);L.uploadFailed(af,am,ai,ah);return false}}var ag=ak.id||ai.id;L.updateFileProgressBlock(ai,am,100,1,false,true);setTimeout(function(){if(K&&af.sortingAttribute&&!ak[af.sortingAttribute]){ak[af.sortingAttribute]=$(af.fileList+" li",w).length}L.updateFileBlock(ag,ai.id,ak,af)},100);L.refreshFormStatus(am);m("FileUpload Event. totalSize so far:"+L.getTotalSize(am));x(true,"File uploaded successfully",ai.size,ai.name);$("body").trigger("FileUpload",{pluploader:ac,opts:af,response:ak});L.trigger("uploaded",am)});ac.bind("UploadComplete",function(ae,ag){for(var af in ag){ae.removeFile(ag[af])}L.refreshFormStatus(ae)});c._pluploader=ac;c.containerDom.data("uploader",c._pluploader);return c._pluploader}L.uploadFailed=function(ac,c,ad,ae){ac._filesUploadedOrQueued--;u(ac.containerDom,"error",ae);E(ad.id,c);L.refreshFormStatus(c)};function I(ah){ah.preventDefault();var ad=$(this).closest("li");var af=ad.data("file");var ae=ad.data("config");var ai=$("img.descr-content-img"),c=$("div.descr-content-icon");ai.removeAttr("src").hide();c.hide();var ac=$('input[data-file-id="'+af.id+'"][data-property="description"]');ae.descrDialogText.val(ac.val());if(L.FILETYPES.IMAGE==af.category){ai.attr("src",af.original);ai.show()}else{if(af.category==L.FILETYPES.EMBED&&af.preview){ai.attr("src",af.preview);ai.show()}else{if(c.data("icon-class")!==undefined){c.removeClass(c.data("icon-class"))}if(af.cssClass===undefined){var ag=ad.find(".preview").attr("class").match(/(file\-.*)/gi);if(ag.length){af.cssClass=ag.pop()}}c.addClass(af.cssClass).data("icon-class",af.cssClass).show()}}$("#"+ae.id+"-descr-dialog-btn").data("file",af);ae.descrDialog.modal("show")}function f(af){af.preventDefault();var ah=$(this).data("config");var ad=$(this).data("file");var ae=ah.descrDialogText.val();var ac=$('input[data-file-id="'+ad.id+'"][data-property="description"]');ac.val(ae);var ag=$("#"+ad.id);if(""===ae){ag.find(".attachFiles-item-descr-container a").addClass("without-description").text("Add Description")}else{ag.find(".attachFiles-item-descr-container a").removeClass("without-description").text(ae)}ah.descrDialog.modal("hide")}function p(ag,af){var ac=af||ab(),c=ac.defaultMaxFileSize,ae=(b(ag)||null),ad="other";if(ae!=null&&typeof plupload.mimeTypes[ae]!="undefined"){ad=plupload.mimeTypes[ae].replace(/(.*)\/.*/gi,"$1")||null;if(typeof ac.maxFileSize=="object"&&typeof ac.maxFileSize[ad]!="undefined"){c=ac.maxFileSize[ad]}}return c}function i(c){m("_enableDefault Init. fileId:"+c);if("string"!==typeof c){m("_enableDefault exiting, fileId not string");return}var ad=ab(),ai=ad.primaryDefaultOrdering,ah=-1,ae=-1;var af="."+ad.itemClass+" ."+ad.overlayClass;var ag=$("#"+c).closest(ad.fileList),ac=$("#"+c).data("category");if(T!==null){ah=$.inArray(T,ai)}if(ac!==null){ae=$.inArray(ac,ai)}ag.find("li[data-category]").off("mouseover mouseout click").on("click",function(aj){aj.preventDefault();return false});if(T===null||(ac!==null&&ae>-1&&(ah==-1||ae<ah))){F(c);T=ac;l=c}m("_enableDefault: _primaryType:"+T+" newType:"+ac+" newPos:"+ae+" existingPos:"+ah);ag.find('li[data-category="'+T+'"]').each(function(ak,aj){$(aj).on("mouseover",function(){if(T===null||$(this).data("category")==T){$(this).find(af).addClass(ad.primaryClass)}}).on("mouseout",function(){if(l===null||(l.id!==null&&l!=$(this).attr("id"))){$(this).find(af).removeClass(ad.primaryClass)}}).on("click",function(al){m("_enableDefault: click triggered for element with ID:"+$(this).attr("id"));F($(this).attr("id"));al.preventDefault();return false})})}function F(c){m("_makeDefault Init. fileID:"+c);var ad=ab();var ac="#"+c;l=c;var ae="."+ad.itemClass+" ."+ad.overlayClass;$(ac).siblings().each(function(){$(this).find(ae).removeClass(ad.primaryClass)});$(ac).find(ae).addClass(ad.primaryClass);var af=isNaN(c)?$(ac).find('input[data-property="id"]').val():c;$(ad.primarySelector).val(af)}function r(){l=null;var c=ab();$(c.primarySelector).val("")}function W(ad){var c=false;if(typeof ad.originalEvent.dataTransfer.types=="undefined"||!ad.originalEvent.dataTransfer.types){c=true}else{for(var ac=0;ac<ad.originalEvent.dataTransfer.types.length;ac++){if(ad.originalEvent.dataTransfer.types[ac]=="Files"){c=true}if(ad.originalEvent.dataTransfer.types[ac]=="text/uri-list"){return false}}}if(c&&$(".widget-jsModuleAttachFiles").is(":hidden")){$(".widget-jsModuleAttachFiles:hidden").slideDown()}return c}L.generatePreview=function(ac,af){var ae=ab();if(typeof af.preview=="string"){ac.attr("src",af.preview).show()}else{switch(af.category){case L.FILETYPES.VIDEO:ac.attr("src",ae.defaultThumbFile).show();break;case L.FILETYPES.QUOTE:ac.attr("src",ae.defaultQuoteThumbFile).show();break;default:var ad=ac.parent();ac.replaceWith('<div class="preview"></div>');var c=(typeof af.cssClass=="string")?af.cssClass:Y;if(PPH.isResponsive){c="fpph-"+c}$(".preview",ad).addClass(P).addClass(c);if(PPH.isResponsive){$(".preview",ad).addClass("js-tooltip").attr("title",af.name)}else{$(".preview",ad).attr("data-tooltip-content",af.name)}$(".preview",ad).parents("li").first().removeClass().attr("data-category",af.category||"other").addClass(ae.successUploadClass);ac=$(".preview",ad);break}}return ac};L.applySortingOrder=function(c){if(!K){return false}$(c.fileList+" > li",w).each(function(ac,ad){var ae=$(ad).find('input[data-property="'+c.sortingAttribute+'"]');if(ae.length){ae.val(ac)}});return true};L.addFileBlock=function(af,ad,ac){var c=ac||undefined;var ae=ab(c);m("addFileBlock Init. ConfigID:"+ae.id+"file.category:"+af.category+" file.type:"+af.type+" file.cssClass:"+af.cssClass+" file.preview:"+af.preview+" config._filesUploadedOrQueued:"+ae._filesUploadedOrQueued);if(typeof c!="undefined"||af.preview===undefined){ae._filesUploadedOrQueued++}var ag=$("#"+ae.id+"-template li").clone();ag.data("file",af).data("config",ae);ag.attr("id",af.id);ag.attr("data-category",af.category||"other");if(ae.primaryEnabled){ag.children("div").children(".default").addClass(ae.overlayClass)}else{ag.children("div").children(".default").remove()}if(!ae.galleryMode){ag.find(".attachFiles-item-descr-container").remove()}else{ag.find(".attachFiles-item-descr-container").on("click",I).addClass("hide");if(af.description&&0<af.description.length){ag.find(".attachFiles-item-descr-container a").attr("title","Edit Description").removeClass("without-description").text(af.description)}}if(typeof af.preview=="string"){ag.children("div").children("img").attr("alt",af.safeName+" - "+(af.size>0?plupload.formatSize(af.size):""))}ag.children(".remove").click(function(ah){R(af,c);ah.preventDefault();ah.stopPropagation();return false}).attr("title","Remove");$(".attachFiles-list",ad).append(ag);return ag};L.animateFileBlock=function(ad,ac){m("animateFileBlock Init. jQ.selector:"+ad.selector);var c=ac||function(){};ad.css("width",0).css("display","block").animate({width:a,opacity:1},z,c).removeClass().addClass("attach-uploading");return ad};L.PPHFile=function(ah,ag,ad,ae,ac,c,af){if("string"===typeof ah){m("PPHFile() init. id:"+ah+" fileName:"+ag+" size:"+ad);this.id=ah;this.fileName=A(ag);this.size=ad||0;this.fake=ac||false;this.primary=c||false;this.category=ae||L.FILETYPES.OTHER;this.status=5;this.description=af||""}else{m("PPHFile() init. id:"+ah.id+" fileName:"+ah.fileName+" size:"+ah.size+" preview:"+ah.preview);this.id=ah.id;this.fileName=A(ah.fileName);this.size=ah.filesize||ad;this.fake=ah.fake||false;this.primary=ah.primary||false;this.category=ah.category||L.FILETYPES.OTHER;this.preview=ah.thumbUrl||ah.preview;this.original=ah.original||this.preview;this.cssClass=ah.cssClass;this.status=ah.status||5;this.type=ah.type||ae;this.description=ah.description||"";this.path=ah.path||"";this.service=ah.service||"";this.width=ah.width||"";this.height=ah.height||"";this.filesize=ah.filesize;this.source_url=ah.source_url||"";this.media_url=ah.media_url||"";this.thumb=ah.thumb||"";this.isEmbedding=ah.isEmbedding||false;this.isImporting=ah.isImporting||false}this.name=this.fileName};L.getTotalSize=function(c){var ac=ab(c);if(typeof ac.totalSize=="undefined"||isNaN(ac.totalSize)){return 0}return ac.totalSize};L.init=function(){plupload.mimeTypes=$.extend(true,{},mOxie.Mime.mimes,{"3gp":"video/3gp","3gpp":"video/3gp"});var ac,c;for(c in Z){ac=Z[c];m("Core INIT for id:"+ac.id);ac.totalSize=0;w=$(ac.container+"[data-id="+c+"]");ac.container=w;ac.containerDom=w;w.data("attachFilesConfig",ac);ac._fileList=$(ac.fileList,w);ac._formElement=w.closest("form");ac._submitButtons=ac._formElement.find("input[type=submit],button").not('[data-hook="descr"]').not('[data-dismiss="modal"]');ac._dropTarget=$(ac.absDropArea,w);if(ac.galleryMode){ac.descrDialog=$("#"+ac.id+"-descr-dialog");ac.descrDialog.data("config",ac);ac.descrDialogText=$("#"+ac.id+"-descr-dialog-text");$("#"+ac.id+"-descr-dialog-btn").on("click",f).data("config",ac)}if(ac.embedOn){X(w,ac);var ad=[];for(var ak in ac.embedHosts){ad.push(ak)}h=new RegExp("("+ad.join("|")+")","gi")}if(ac.importOn){C(w,ac)}if(ac.primaryInput!==null){ac.primarySelector="#"+$(ac.primaryInput).attr("id")}$("input[type=submit]",ac._formElement).each(function(){$(this).data("previousValue",$(this).val())});if(ac.promoView&&typeof ac.files!="undefined"&&ac.files&&ac.files.length&&$(ac.promoViewSel).is(":visible")){$(ac.promoViewSel).hide();$(".attachFiles-pick-placeholder",w).replaceWith($(".attachFiles-pick._attachFiles-link",w))}if(ac.quotesOn){k()}if(ac.sortingAttribute!==null){K=true;y(ac)}var af=t(ac);for(var aj in ac.files){var ah=ac.files[aj];var ae=new L.PPHFile({id:ah.id,safeName:ah.name,size:ah.size,fake:true,primary:ac.primaryEnabled&&typeof ah.primary!=="undefined"&&ah.primary==true?true:false,type:ah.type||"other",category:ah.type||"other",name:ah.name,thumb:ah.thumb,preview:ah.preview,original:ah.original,cssClass:ah.cssClass,fileName:ah.name,service:ah.service||"",description:ah.description||"",source_url:ah.source_url||"",media_url:ah.media_url||"",width:ah.width||"",height:ah.height||""});if(K&&ac.sortingAttribute!==null&&ah[ac.sortingAttribute]!==undefined){ae[ac.sortingAttribute]=parseInt(ah[ac.sortingAttribute],10)}var ag=parseInt(ae.size,10);ac.totalSize+=!isNaN(ag)?ag:0;var ai=a;if(ac.galleryMode){ai=H}L.addFileBlock(ae,w,af);$("#"+ah.id).removeClass().addClass("attach-success").css("opacity",1).show().css("width",ai);L.generatePreview($("img","#"+ah.id),ae);if(ac.oldAtt){$("#"+ah.id).append('<input type="hidden" name="oldAtt[]" value="'+ae.id+'">')}else{L.updateFileBlock(ah.id,ah.id,ae,ac)}if(ac.primaryEnabled){i(ah.id)}}L.refreshFormStatus(af,true);L.trigger("uploaderInit",af);if((typeof window.FileReader!="undefined"&&window.FileReader)&&("draggable" in document.createElement("span"))){L.hideForDrag=function(){$(ac.absDropArea).removeClass("dragging");$(window).unbind("mousemove",L.hideForDrag)};L.showForDrag=function(){$(ac.absDropArea).addClass("dragging");$(window).bind("mousemove",L.hideForDrag)};$(window).bind("dragover",function(al){if(W(al)){L.showForDrag()}al.preventDefault()});$(window).bind("drop",function(al){L.hideForDrag();al.preventDefault();return false})}else{w.addClass(ac.noDragSupportClass)}}};L.reset=function(){Q()};L.refresh=function(){var c=$(".widget-jsModuleAttachFiles");$.each(c,function(af,ae){var ad=$(ae);var ac=ad.data("uploader");var ag=ab(ac);ac.refresh()})};L.refreshFormStatus=function(ac,ah){var c=ac||Z._pluploader;var af=ab(c);var ad;if(false===ah){ad=false}else{if(true===ah){ad=true}else{ad=af._filesToUpload<=0}}m("refreshFormStatus Init. for id:"+af.id+" status:"+ad+" maxFiles:"+af.maxFiles+" _filesToUpload:"+af._filesToUpload+" _filesUploadedOrQueued:"+af._filesUploadedOrQueued+" total size uploaded:"+L.getTotalSize(c));for(var ae in Z){if(Z[ae]._filesToUpload>0){ad=false;break}}if(ad){L.trigger("upload-complete");af._formElement.removeClass("loading");af._submitButtons.each(function(ai){$(this).removeAttr("disabled");if(ai===0){if($(this).prop("tagName").toLowerCase()=="input"){$(this).val($(this).data("previousValue"))}if($(this).prop("tagName").toLowerCase()=="button"){$(this).text($(this).data("previousValue"))}}})}else{L.trigger("upload-progress");if(!af._formElement.hasClass("loading")){af._formElement.addClass("loading")}af._submitButtons.each(function(ai){$(this).attr("disabled","disabled");if(ai===0){if(typeof $(this).data("previousValue")=="undefined"){if($(this).prop("tagName").toLowerCase()=="input"){$(this).data("previousValue",$(this).val())}if($(this).prop("tagName").toLowerCase()=="button"){$(this).data("previousValue",$(this).text())}}if($(this).prop("tagName").toLowerCase()=="input"){$(this).val(af.phrases.loadPleaseWait)}if($(this).prop("tagName").toLowerCase()=="button"){$(this).text(af.phrases.loadPleaseWait)}}})}var ag=(af.maxFiles<=af._filesUploadedOrQueued);if(ag){af._dropTarget.hide()}else{if(!ag){af._dropTarget.show()}}if(K){L.applySortingOrder(af)}};L.updateFileProgressBlock=function(c,ad,af,ah,ac,aj){var aj=(typeof aj!=="undefined"&&aj),ac=(typeof ac!=="undefined"&&ac),af=(ac?n(af):af),ah=(typeof ah!=="undefined"?ah:aa.uploadProgressInterval),ae=$("#"+c.id+" .attachFiles-progress"),ag=$(ae).find("input.attachFiles-knob");var ai;if(aj){ai=af}else{ai=af-parseInt(ag.val(),10)}S(ag,ai,ah,aj)};function S(af,ae,ag,c){var ac=ae;m(".. animate "+(c?"Absolute":"Relative")+" progress: "+ae+"%, rate: "+ag);var ad=setInterval(function(){var ah=af.val();if(ah>=100||((!c&&ac<=0)||(c&&ah>=ac))){clearInterval(ad);return false}if(!c){ac--}af.val(parseInt(af.val(),10)+1);af.trigger("change")},ag)}L.updateFileBlock=function(ah,af,al,ae){m("updateFileBlock Init. fileId:"+af);var c=ae||ab();af=af+"";var aq=$("<div/>").text((typeof al.name=="undefined"||al.name==="")?"":al.name).html();var ap=$("<div/>").text((typeof al.path=="undefined"||al.path==="")?"":al.path).html();var ak=$("#"+af);var ag=ak.data("file");ag.original=al.original||"";ag.category=al.category||L.FILETYPES.OTHER;ak.data("file",ag);var an=c.formKey+"["+ah+"]";var am=al.description||"";ak.find(".attachFiles-progress").fadeOut(100);if(c.galleryMode){ak.find(".attachFiles-item-descr-container").removeClass("hide")}var aj=c.sortingAttribute;if(K&&aj!==null&&al[aj]!==undefined&&!isNaN(parseInt(al[aj],10))){ak.append('<input type="hidden" name="'+an+"["+aj+']" data-file-id="'+af+'" data-property="'+aj+'" class="file-attachment file-attach-'+af+'" value="'+al[aj]+'" />')}var ad=c.embedServiceAttribute;if(c.embedOn&&al.isEmbedding){ak.append('<input type="hidden" name="'+an+"["+ad+']" data-file-id="'+af+'" data-property="'+ad+'" class="file-attachment file-attach-'+af+'" value="'+al[ad]+'" />');var ao=["source_url","media_url","width","height"];for(var ai in ao){var ar=ao[ai];if(ar!==undefined&&al[ar]!==undefined){ak.append('<input type="hidden" name="'+an+"["+ar+']" data-file-id="'+af+'" data-property="'+ar+'" class="file-attachment file-attach-'+af+'" value="'+al[ar]+'" />')}}}if(c.importOn&&al.isImporting){var ac=["media_url","source_url","service"];for(var ai in ac){var ar=ac[ai];if(ar!==undefined&&al[ar]!==undefined){ak.append('<input type="hidden" name="'+an+"["+ar+']" data-file-id="'+af+'" data-property="'+ar+'" class="file-attachment file-attach-'+af+'" value="'+al[ar]+'" />')}}}ak.append('<input type="hidden" name="'+an+'[name]" data-file-id="'+af+'" data-property="name" class="file-attachment file-attach-'+af+'" value="'+aq+'" />').append('<input type="hidden" name="'+an+'[type]" data-file-id="'+af+'" data-property="type" class="file-attachment file-attach-'+af+'" value="'+al.type+'" />').append('<input type="hidden" name="'+an+'[path]" data-file-id="'+af+'" data-property="path" class="file-attachment file-attach-'+af+'" value="'+ap+'" />').append('<input type="hidden" name="'+an+'[thumb]" data-file-id="'+af+'" data-property="thumb" class="file-attachment file-attach-'+af+'" value="'+(al.thumb||"")+'" />').append('<input type="hidden" name="'+an+'[id]" data-file-id="'+af+'" data-property="id" class="file-attachment file-attach-'+af+'" value="'+al.id+'" />').append('<input type="hidden" name="'+an+'[filesize]" data-file-id="'+af+'" data-property="filesize" class="file-attachment file-attach-'+af+'" value="'+al.size+'" />').append('<input type="hidden" name="'+an+'[description]" data-file-id="'+af+'" data-property="description" class="file-attachment file-attach-'+af+'" value="'+am+'" />').find(".preview").bind("load",function(){$(this).show().parents("li").attr("data-category",al.category||"other").removeClass().addClass(c.successUploadClass);if(c.primaryEnabled){i(af)}});L.generatePreview($(".preview",ak),al)};function x(ag,aj,ai,af){var ah=0;for(var ac in o){var ae=o[ac].user_id!==undefined?parseInt(o[ac].user_id,10):0;if(!isNaN(ae)&&ae>0){ah=ae;break}}var c="uploader_"+M()+(ag?"_success":"_error");var ad="";if(!isNaN(ai)&&af!==undefined){af=af.indexOf(".")!==-1?af.replace(/(.*)\.([a-z0-9]{2,4})?/gi,"$2"):af;ad=[af.toUpperCase(),"file size:","~",(ai/1000/1000).toFixed(2),"MB"].join(" ")}ad+=" "+new Date().toISOString().replace(/([T,Z])/gi," ");m(["Uploader Analytis: ",c,aj,ad].join(" "));if(typeof gtmTrackGAEvent!=="undefined"){gtmTrackGAEvent(c,aj,ad,(ah>0?ah:"1"))}}function M(){var c=window.location.pathname;if(c.match(/\/hourlie\/new/gi)){return"post_hourlie"}else{if(c.match(/\/freelancer\/(.*)\/edit/gi)){return"edit_profile"}else{if(c.match(/\/job\/new/gi)){return"post_job"}else{if(c.match(/\/job\/(.*)(\-[0-9]+)/gi)){return"job_view"}else{if(c.match(/\/stream\//gi)){return"stream"}}}}}}return L};PPH.modules.CheckoutButton=function(b){var a={element:"button",buttonElementValue:"button",linkElementValue:"link",messages:{wait:"Please wait..."},selectors:{allForms:".js-checkout-button",addons:'input[name^="Checkout[params][addons]"]',quantity:"input[]",button:".js-payment-button"}};var f=PPH.Module($.extend(true,{},a,b)),g=f.config;f.init=function(){if(g.element==g.linkElementValue){$(document).on("click",("a"+g.selectors.button),function(j){if(j){j.preventDefault()}var i=$(this),h=i.data("formId"),c=i.parents("#"+h+":first");if(!c.length){throw new Error("Form was not found")}c.submit()})}$(document).on("submit",g.selectors.allForms,function(l){var k=$(this);var j=k[0].id.includes("Dispute");if(k[0].id.indexOf("invoice")>-1&&j===false){var i=k.data("enableEscrowRelease");var h=(i)?"Release Funds":"Yes";var c=this;l.preventDefault();bootbox.confirm({message:"I confirm that I have received and accepted the work related to this invoice and I agree to complete the payment to the Freelancer.",title:"Warning",buttons:{confirm:{label:h,className:"btn btn-pph tall"},cancel:{label:"Cancel",className:"btn btn-pph tall"}},callback:function(m){if(m){if(k.data("enableEscrowRelease")){e.apply(this,[k.data("releaseUrl"),k])}else{c.submit()}}}})}else{return true}})};function e(c,h){var n=h,o=n.find(g.selectors.button),m=o.text(),j={},q=n.serializeArray(),k=o.get(0).nodeName.toUpperCase()=="A";o.attr("disabled","disabled").addClass("disabled").css("cursor","wait");o.on("click.disabled",function(i){i.preventDefault();return false});if(k){o.text(g.messages.wait)}else{o.val(g.messages.wait)}for(var l in q){var p=q[l];j[p.name]=p.value}$.ajax({type:"POST",url:c,data:$.extend(true,{},PPH.getCsrf(),j),success:function(i){if(i.status&&i.url&&i.url.match(/^http/)){return window.location.href=i.url}if(k){o.text(m)}else{o.val(m)}o.removeAttr("disabled").removeClass("disabled").css("cursor","initial");o.off("click.disabled");window.location.reload()}})}f.updateHourlieAddonIds=function(k){var h=$(g.selectors.allForms);h.find(g.selectors.addons).remove();if(!k.length){return}for(var j in k){var l=k[j],c=$(['<input type="hidden" name="Checkout[params][addons][',j,']" value="',l,'">'].join(""));h.append(c)}};f.updateQuantity=function(h){var c=$(g.selectors.allForms);h=parseInt(h,10);if(isNaN(h)){h=1}c.find('input[name="Checkout[params][quantity]"]').val(h)};return f};PPH.modules.DateRangePicker=function(b){var i={};var h=PPH.Module($.extend({},i,b));var g=5*60*1000;start=moment(Math.ceil((+new Date)/g)*g);var j=h.config,a=moment(new Date),l={endDate:a,format:"DD/MM",maxDate:a,startDate:moment(new Date).subtract(1,"day"),opens:"right",separator:" - "},e=["apply.daterangepicker","cancel.daterangepicker","hide.daterangepicker","show.daterangepicker"];function k(n,m,o){var q=n.find('[data-role="range-display"]'),s=n.find('[data-role="hidden-start-date"]'),t=n.find('[data-role="hidden-end-date"]'),c=n.data("daterangepickerOpts"),r=m.format(c.format)+c.separator+o.format(c.format),p="YYYY-MM-DD";if(n.data("daterangepickerType")=="select"){q.val(r);n.find(".date").html(r)}else{(n.data("daterangepickerType")=="text")}q.val(r);s.val(m.format(p));t.val(o.format(p))}function f(o,m){var c=$('input[data-role="hidden-'+o.data("role")+'"]'),n=m.format(o.data("format-value"));c.val(n)}h.setup=function(p,m){if(typeof m=="undefined"){m=p.data()}if(m.singleDatePicker){if(m.cancelLabel){if(!m.locale){m.locale={}}m.locale.cancelLabel=m.cancelLabel}p.daterangepicker(m,function(s,u,t){f(p,s)});if(m.resetOnCancel==true){p.on("cancel.daterangepicker",function(t,s){p.val("");$('input[data-role="hidden-'+p.data("role")+'"]').val("")})}if(m.prefillDate==true){p.data("daterangepicker").setStartDate(m.startDate)}}else{var o=$.extend({},l,m.options,h.config||{}),n=m.events||{};var r=p.find('[data-role="hidden-start-date"]');var c=p.find('[data-role="hidden-end-date"]');if(r.val()){o.startDate=moment(r.val())}if(c.val()){o.endDate=moment(c.val())}p.daterangepicker(o,function(s,t){k(p,s,t)}).data("daterangepickerOpts",o);for(var q in n){if(e.indexOf(q)>-1&&typeof n[q]!="undefined"){p.on(q,n[q])}}p.on("apply.daterangepicker",function(t){var s=p.data("daterangepicker");if(s.endDate.diff(o.maxDate,"days")>0){s.setEndDate(o.maxDate);k(p,s.startDate,s.maxDate)}});if(!o.startDate||!o.endDate){return true}p.data("daterangepicker").setStartDate(o.startDate);p.data("daterangepicker").setEndDate(o.endDate);k(p,o.startDate,o.endDate)}};h.init=function(){};return h};PPH.modules.CertoMeter=function(e){var b={levels:[],supportsSvg:true,userLevel:-1,viewMode:null};var g=PPH.Module($.extend(true,{},b,e)),j=g.config,a="#"+j.id+"-svg";var h=$(a),i=$(a+"-container");function f(){h.attr({height:i.width()*0.55,width:i.width()})}g.init=function(){j.supportsSvg=!!("createElementNS" in document&&document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect);if(j.supportsSvg){i.find("svg").show()}else{if(!j.supportsSvg&&j.viewMode=="full"){var k=parseInt(j.userLevel,10),c=['<div class="fallback level-',(k===-1?"not-assigned":k),'"></div>'].join("");i.html(c)}else{if(!j.supportsSvg&&j.viewMode!="full"){$('div[data-hook="cert-indicator-group"]').remove()}}}f();$(window).on("resize",function(){f()})};return g};PPH.modules.FeatureFeedback=function(e){var b={};var g=PPH.Module($.extend({},b,e));var h=g.config;g.init=function(){a()};function a(){$('input[name="featureFeedback[rating]"]').on("change",function(){f()});$("#featureFeedback").on("submit",function(c){c.preventDefault();$.post("/featureFeedback/save",$(this).serialize(),function(i){if(i.success){$(".featureFeedbackWidget").html("Thank You!").fadeOut(5000)}else{if(i.error){$(".featureFeedbackWidget .feedback-error").html(i.message)}}},"json")})}function f(){$(".featureFeedbackWidget .feedback-hidden:hidden").slideDown()}return g};PPH.modules.InviteSeller=function(b){var a={inviteHookAuto:"contact-invite-auto",inviteHookAll:"contact-invite-all",inviteMoreAfterSent:false,sendingLabel:"Sending...",sentLabel:"Invited",inviteLabel:"Invite"};var e=PPH.Module($.extend({},a,b));var f=e.config;e.init=function(){$("body").on("click",'[data-hook="'+f.inviteHookAuto+'"]',function(i){i.preventDefault();var c=$(this);if(!c.hasClass("disabled")){var h=c.data("job");var g=c.data("id");e.inviteToBid(h,g,c)}});if($('[data-hook="'+f.inviteHookAuto+'"]').not(":disabled").length>0){$("body").on("click",'[data-hook="'+f.inviteHookAll+'"]',function(g){g.preventDefault();if($(this).hasClass("disabled")){return}$(this).attr("disabled","disabled").addClass("disabled");var c=$('[data-hook="'+f.inviteHookAuto+'"]').not(":disabled");$.each(c,function(j,l){var h=$(l);if(!h.hasClass("disabled")){var m=h.data("job");var k=h.data("id");e.inviteToBid(m,k,h,true)}});if(c.length>0){PPH.success("All invitations were successfully sent.")}})}else{$('[data-hook="'+f.inviteHookAll+'"]').attr("disabled","disabled").addClass("disabled");$("body").on("click",'[data-hook="'+f.inviteHookAll+'"]',function(c){c.preventDefault()})}};e.inviteToBid=function(j,i,h,g){var c="/job/invite";h.val(f.sendingLabel).text(f.sendingLabel).attr("disabled","disabled").addClass("disabled");$.get(c,{id:j,inv_id:i},function(k){if(k.success){if(typeof gtmTrackPageview!=="undefined"){if(g){gtmTrackPageview("/vp_members_invite_all")}else{gtmTrackPageview("/vp_members_invite")}}if(!g){if(k.redirect){location.href=k.redirect}else{PPH.success(k.message);if(f.inviteMoreAfterSent&&k.inviteMoreHtml){$(".js-invite-more-sellers").html(k.inviteMoreHtml).show();$(".js-invite-btn").hide();return}}}h.val(f.sentLabel).text(f.sentLabel)}else{if(k.error){PPH.warning(k.error)}if(k.info){PPH.warning(k.info)}h.attr("disabled",false).val(f.inviteLabel).text(f.inviteLabel)}})};return e};PPH.modules.LoginSignup=function(K){var a;var j={defaultNextUrl:"/dashboard",selLogin:".action-login-show",selSignup:".action-signup-show",selSocial:".action-social-login",selFbLogin:".fb-login",selToggleForms:".action-login-toggle",selLoginToggleDiv:".div-login-toggle",selSignupToggleDiv:".div-signup-toggle",selForgotPassword:".action-forgot-toggle",selConfirmEmailDiv:".emailConfirm",selNextUrl:".login-next-url",selFbLink:".login-fb-link",selLiLink:".login-li-link",selSlider:"member-type-slider",selSelect:"member-type-select",selRadio:"member-type-radio",selInPopup:".insidePopup",selPasswordStrength:".pass-strength",dataSelPasswordStrength:'[data-password-strength="password"]',selToggleSignup:'[data-hook="toggle-signup-form"]',selUpdateMetadataPromo:".update-metadata-homepage",selUpdateMetadataMemberType:".update-metadata-member-type",partialSocial:'[data-hook="partial-social-buttons"]',partialFacebook:'[data-hook="partial-facebook-button"]',partialSignup:'[data-hook="partial-singup-form"]',partialSignupToggle:'[data-hook="partial-singup-toggle"]',partialSeparator:'[data-hook="partial-separator"]',selEmail:".login-signup-email",idEmail:"#Members_newEmail",idConfirmEmail:"#Members_emailConfirm",selConfirmPasswordDiv:".passwordConfirm",idPassword:"#Members_password",idConfirmPassword:"#Members_passwordConfirm",metadataMemberType:"guest.memberType",metadataHomepagePromo:"homepage.promo",memberTypeValue:null,memberTypeBuyer:"buyer",memberTypeBuyerValue:null,memberTypeSeller:"provider",memberTypeSellerValue:null,fbUrl:null,liUrl:null,nextUrl:null,urlIsGuest:"/site/isGuest",beforeRedirect:null,afterAjaxLogin:null,enableAjax:false,enableClientValidation:true,enableDialog:true,dialogOpts:{backdrop:true,show:false}};var r=PPH.Module($.extend(true,{},j,K)),H=r.config,A,q,b,J,k,w,D,y,g,f,B,t=false,h=false;function F(c){if(h!==false||!r.hasHandler("beforeRedirect")){return true}c.preventDefault();h=c.data.form;r.trigger("beforeRedirect")}function o(M){var L=$(this);if(B&&typeof $(H.selNextUrl).attr("value")!="undefined"){var c=L.attr("href");L.attr("href",c+"&next="+$(H.selNextUrl).attr("value"))}if(!r.hasHandler("beforeRedirect")){return true}M.preventDefault();h=$(this).attr("href");r.trigger("beforeRedirect")}function C(c){l();if(f){f=false;J.filter(H.selInPopup).hide();D.filter(H.selInPopup).show();D.filter(H.selInPopup).find(H.partialSignupToggle).show();D.filter(H.selInPopup).find(H.partialSignup).hide();w.hide();g.show();x(A,"signupTitle");$(".pph-dropdown-countries-popup").pphDropdown({additionalWrapperClass:"pph-dropdown tall",scrollbar:true,scrollbarOptions:{size:100}})}else{f=true;J.filter(H.selInPopup).show();D.filter(H.selInPopup).hide();w.show();g.hide();x(A,"loginTitle")}q.hide();c.preventDefault()}function n(c){h="forgotPassword";l();x(A,"forgotTitle");J.hide();D.hide();w.hide();g.hide();q.show();$(window).trigger("resize");c.preventDefault()}function z(){if($(this).val()==""){$(H.selConfirmEmailDiv).addClass("disabled");$(H.idConfirmEmail).empty().attr("disabled","disabled")}else{$(H.selConfirmEmailDiv).removeClass("disabled");$(H.idConfirmEmail).removeAttr("disabled")}}function I(){if($(this).val()==""){$(H.selConfirmPasswordDiv).addClass("disabled");$(H.idConfirmPassword).empty().attr("disabled","disabled")}else{$(H.selConfirmPasswordDiv).removeClass("disabled");$(H.idConfirmPassword).removeAttr("disabled")}}var s=function(){var c=$("."+H.selSlider);if(c.length>0){c.each(function(){var L=$(this);if(typeof L.data(H.selSlider+"-active")=="undefined"){var N=$("<div></div>").addClass(H.selSlider+"-container").insertAfter(L).slider({min:1,max:L.children().length,range:"min",value:L[0].selectedIndex+1,slide:function(P,Q){L[0].selectedIndex=Q.value-1;H.memberTypeValue=L.val();e(H.metadataMemberType,L.val())}});var M=$("<div></div>").addClass(H.selSlider+"-edges clearfix");if(typeof L.data("edge-left")!="undefined"){M.append($("<div></div>").addClass("hourlie left").html(L.data("edge-left")))}if(typeof L.data("edge-right")!="undefined"){M.append($("<div></div>").addClass("job right").html(L.data("edge-right")))}M.insertBefore(L);L.change(function(){N.slider("value",this.selectedIndex+1)}).data(H.selSlider+"-active",true).hide()}var O;if(O=G(L)){L.val(O).change()}})}};var p=function(){var c=$("."+H.selSelect);if(c.length>0){c.each(function(){var L=$(this);var M;L.change(function(){H.memberTypeValue=L.val();e(H.metadataMemberType,L.val())});if(M=G(L)){L.val(M).change()}})}};var v=function(){var c=$("."+H.selRadio);if(c.length>0){c.each(function(){var L=$(this);var N=G(L);if(N){var M=L.val();if(M==N){L.attr("checked",true)}else{L.removeAttr("checked")}}L.off("click.loginSignupRadio").on("click.loginSignupRadio",function(){H.memberTypeValue=L.val();e(H.metadataMemberType,H.memberTypeValue)})})}};var i=function(){var c=$("."+H.selRadio+"[value=provider]");var L=$("."+H.selRadio+"[value=uninitialized]");var M=$(".extra-types-container");if(c.is(":checked")||L.is(":checked")){M.show()}else{M.find(".extra-types-radio").attr("checked",false);M.hide()}};var e=function(c,L){PPH.userData.save(c,L)};var G=function(c){var L=null;if(H.memberTypeValue==null&&typeof c.data("member-type")!="undefined"){H.memberTypeValue=c.data("member-type")}if(H.memberTypeValue!=null&&a==null){if(H.memberTypeValue==H.memberTypeBuyer){L=H.memberTypeValue=H.memberTypeBuyerValue}else{if(H.memberTypeValue==H.memberTypeSeller){L=H.memberTypeValue=H.memberTypeSellerValue}}L=H.memberTypeValue}if(a!=null){if(a==H.memberTypeBuyer){L=H.memberTypeBuyerValue}else{if(a==H.memberTypeSeller){L=H.memberTypeSellerValue}}L=a}return L};r.isGuest=function(c){$.getJSON(H.urlIsGuest,function(L){if(typeof c=="function"){c(L.isGuest)}})};r.open=function(M,N){r.trigger("beforeOpen");$("input[type=radio]").attr("checked",false);$(".extra-types-container").hide();if(typeof gtmTrackPageview!=="undefined"){gtmTrackPageview("/vp_"+((typeof M!="undefined")?M:"login")+"_popup")}if(!t){r.showSignupFacepile()}var c=H.nextUrl;if(typeof $(document).data("nextUrl")!="undefined"&&$(document).data("nextUrl")!=""){N=$(document).data("nextUrl");$(document).data("nextUrl","")}var L=(typeof N!="undefined"&&N!==null)?N:c;k.find(H.selNextUrl).remove();y.find(H.selNextUrl).remove();if(B&&L){$('<input type="hidden" class="'+H.selNextUrl.substr(1)+'" name="next" />').appendTo(y)}else{L=c}$('<input type="hidden" class="'+H.selNextUrl.substr(1)+'" name="next" />').appendTo(k);$(H.selNextUrl).attr("value",L);$(H.selFbLink).attr("href",PPH.addUrlParam(H.fbUrl,"next",L));$(H.selLiLink).attr("href",PPH.addUrlParam(H.liUrl,"next",L));if(!H.enableDialog){return}q.hide();if(M==="signup"){f=false;J.hide();D.show();w.hide();g.show();x(A,"signupTitle");if(H.forceEmailRegistration){$(H.selToggleSignup).click()}}else{f=true;J.show();D.hide();w.show();g.hide();x(A,"loginTitle")}$(".member-type-radio-container").click(i);s();p();v();i();A.modal("show");$(".widget-jsModuleLoginSignup a.action-social-login.button-facebook").attr("href",PPH.addUrlParam(H.fbUrl,"next",L));$(".widget-jsModuleLoginSignup a.action-social-login.button-linkedin").attr("href",PPH.addUrlParam(H.liUrl,"next",L));H.defaultNextUrl=L;r.trigger("open")};r.close=function(){if(!H.enableDialog){return}A.modal("hide");r.trigger("close")};r.proceed=function(){if(h==="login"){k.submit()}else{if(h==="signup"){y.submit()}else{if(h==="forgotPassword"){forgotPasswordForm.submit()}else{if(h!==false){r.page.redirect(h)}else{h=false}}}}};var u=function(N,Q,P){l();for(var L in Q){var M="";if(typeof Q[L]!="undefined"&&typeof Q[L][0]!="undefined"){M=Q[L][0]}if(M!=""){var c=$("#"+L).is(":visible")?$("#"+L):$("#"+L).closest(":visible");var O=c.data("tip-position")||"right";c.addClass("error");PPH.dom.error(c,M,{container:N,pos:O,zIndex:1500})}}};r.afterValidateForgotPassword=function(c,M,L){u(c,M,L);if(L){return false}return true};r.afterValidate=function(c,M,L){if($('input[name="EmailMemberRegistration[geonameId]"]').val()==""&&$(".signupDiv").is(":visible")){M.Members_location=["Please enter your location"];L=true}if(!L){if(h=="forgotPassword"){$("#forgotPasswordForm").submit();return true}if(H.enableDialog){r.close()}if(h!==false){return true}if(H.enableAjax){$.ajax({type:"POST",url:c.attr("action"),data:c.serialize(),dataType:"json",success:function(N){r.trigger("afterAjaxLogin",N.success)}})}else{if(r.hasHandler("beforeRedirect")){h=f?"login":"signup";r.trigger("beforeRedirect");return false}else{return true}}}if(!L){e("guest.geonameId",$('[name="EmailMemberRegistration[geonameId]"]').val());return true}u(c,M,L);return false};r.showSignupFacepile=function(){var c=10;var L=setInterval(function(){var M=$(".signupDiv");if(typeof PPH.page.modules!="undefined"&&typeof PPH.page.modules.FbApi!="undefined"){PPH.page.modules.FbApi.checkLoginStatus(function(N){if(N!==null){M.find(H.partialSocial).hide();M.find(H.partialFacebook).show();M.find(H.partialSeparator).show();var O=M.find(H.partialSocial).find("span,iframe");$(".button-facebook").off("hover").on("hover",function(){$(H.partialFacebook).addClass("fb-facepile-container-hover")}).off("mouseout").on("mouseout",function(){$(H.partialFacebook).removeClass("fb-facepile-container-hover")});if(O.is(":visible")){clearInterval(L);O.removeAttr("height").css("height","70px")}}else{M.find(H.partialSocial).show();M.find(H.partialSeparator).show()}t=true;clearInterval(L)})}else{if(c>1){c--}else{M.find(H.partialSocial).show();M.find(H.partialSeparator).show();clearInterval(L);if(window.console&&console.log){console.log("Tried to load FB library "+c+" times, I'm giving up.")}}}},500)};r.init=function(){a=PPH.userData.get(H.metadataMemberType);$('[data-hook="work-email"]').remove();B=window.location.pathname!="/"&&!window.location.pathname.match(/^\/hp\/(.*)?/gi);$("input[type=radio]").attr("checked",false);$(".extra-types-container").hide();H.dialogOpts.buttons={};if(H.enableDialog){A=$("#jsModuleLoginSignup").modal(H.dialogOpts);A.on("show.bs.modal",function(){$(this).addClass("customUiDialog loginSignupCustomDialog login-signup-modal")}).on("hide.bs.modal",function(){if($(".tooltip").length>0){$(".tooltip").tooltip("destroy")}});A.data({forgotTitle:"Forgot your Password?",loginTitle:"Log In",signupTitle:"Sign Up"})}J=$("#jsModuleLoginSignup .loginDiv");D=$("#jsModuleLoginSignup .signupDiv");q=$("#forgotPasswordDiv");k=J.parent("form");y=D.parent("form");w=$(H.selLoginToggleDiv);g=$(H.selSignupToggleDiv);if(!H.enableAjax&&!H.enableClientValidation){k.bind("submit",{form:"login"},F);y.bind("submit",{form:"signup"},F)}J.find(H.selSocial).click(o);J.find(H.selForgotPassword).click(n);w.find("a").click(C);D.find(H.selSocial).click(o);D.find(H.idEmail).keyup(z);D.find(H.idPassword).keyup(I);g.find("a").click(C);$("body").on("click",H.selToggleSignup,function(L){var c=$(this).parents(".signupDiv");c.find(H.partialSignupToggle).hide();c.find(H.partialFacebook).hide();c.find(H.partialSignup).show();c.find(H.partialSocial).show();c.find(H.partialSeparator).show();$(window).trigger("resize");L.preventDefault()});if(typeof H.beforeRedirect==="function"){r.bind("beforeRedirect",H.beforeRedirect)}if(H.enableDialog){$("body").on("click",H.selLogin,function(L){L.preventDefault();H.memberTypeValue=(typeof $(this).data("member-type")!="undefined"?$(this).data("member-type"):H.memberTypeValue);var c=(typeof $(this).data("deactivate-next")!="undefined")?false:null;r.open("login",c);x(A,"loginTitle")});$("body").on("click",H.selSignup,function(L){L.preventDefault();H.memberTypeValue=(typeof $(this).data("member-type")!="undefined"?$(this).data("member-type"):H.memberTypeValue);var c=(typeof $(this).data("deactivate-next")!="undefined")?false:null;r.open("signup",c);x(A,"signupTitle");$(".pph-dropdown-countries-popup").pphDropdown({additionalWrapperClass:"pph-dropdown tall",scrollbar:true,scrollbarOptions:{size:100}})});$("body").not(".homepage").on("click",H.selFbLogin,o)}$("body").on("click",H.selUpdateMetadataPromo,function(){e(H.metadataHomepagePromo,"active");return true});$("body").on("click",H.selUpdateMetadataMemberType,function(){var c=$(this).data("member-type");if(c){e(H.metadataMemberType,c)}return true});if(H.forceEmailRegistration){$(H.selToggleSignup).click()}m();E()};function E(){var c=document.location.hash;if(c.indexOf("buyer")>=0){$("#EmailMemberRegistration_memType_0").trigger("click");p()}if(c.indexOf("freelancer")>=0){$("#EmailMemberRegistration_memType_1").trigger("click");p()}}function m(){$(H.dataSelPasswordStrength).on("keyup",function(L){var c={password:L.target.value,passwordStrengthI:H.selPasswordStrength+" i",passwordStrengthSpanText:H.selPasswordStrength+" span.text"};$(H.dataSelPasswordStrength).trigger("password-strength-event",c)})}r.validateExtraTypesRadio=function(O,M){var P=$(".extra-types-container");var N=P.find(".extra-types-radio");var c=$("."+H.selRadio+"[value=provider]");var L=$("."+H.selRadio+"[value=uninitialized]");if((c.is(":checked")||L.is(":checked"))&&!N.is(":checked")){M.push("Please Select a Freelancer Type");return false}return true};function x(M,L){var c=M.find(".modal-header"),N=M.find('[data-dismiss="modal"]'),O=M.data(L);if(O===undefined){return}c.html(O).append(N)}function l(){if($(".tooltip").length){$(".tooltip").tooltip("destroy")}}$(".member-type-radio-container").click(i);v();i();return r};PPH.modules.MediaViewer=function(C){var k={ajaxData:{},backgroundCoverMode:false,supportedSuffixes:[],response:null,defaultImage:"/css/images/file-icon-picture.png",selectedId:null,fancyboxOptions:{openEffect:"fade",closeEffect:"fade",nextEffect:"fade",prevEffect:"fade",autoCenter:true,autoSize:true,fitToView:true,keys:false,scrolling:"no",margin:[55,20,20,20],arrows:false,showCloseButton:true,mouseWheel:false,helpers:{title:false,overlay:{closeClick:false}},wrapCSS:"widget-media-viewer"}};var m=PPH.Module($.extend({},k,C)),A=m.config;if(A.selectors===undefined){return m}var n=$(A.selectors.widget),o=$(A.selectors.stage),u=$("title").html(),g=new RegExp("([?#&]{1})"+A.id+"-item\\=([\\w]+)","i"),r=(window.location.pathname+window.location.search).replace(g,"");var h={video:y,embed:a,file:E,image:s,pdf:D,quote:z};var b,e,w,i;m.init=function(){var J=A.clientOptions;if(J!==undefined&&J.afterRenderTrigger!==undefined&&typeof J.afterRenderTrigger==="function"){J.afterRenderTrigger.apply(m,[n])}A.stageId=A.id;if(A.enableAjax){t();x();if($.fancybox.current){$.fancybox.update()}$(window).on("resize",function(){x();$.fancybox.update()})}else{m.bindEvents(A.id)}var K=m.getItemFromState();if(K!==false){if(A.enableAjax){j()}else{var I=$('div[data-hook="stage-container"][data-widget-id="'+A.id+'"] ul[data-hook="thumbnails-list"] li a[data-id="'+K+'"]');if(I!==undefined&&I.length){m.showItem(I)}}}if(navigator.plugins){for(var G=0;G<navigator.plugins.length;G++){for(var F=0;F<navigator.plugins[G].length;F++){var c=navigator.plugins[G][F].suffixes.split(",");for(var H in c){if(c[H]!=""){A.supportedSuffixes.push(c[H])}}}}}if(J!==undefined&&J.afterInit&&typeof J.afterInit==="function"){J.afterInit.apply(m,[n])}};m.bindEvents=function(I){I=I||A.id;A.stageId=I;var H=$('.stage-container[data-widget-id="'+I+'"] div[data-hook="thumbnails"]'),G=H.find(".thumbnails-list-container"),F=H.find('ul[data-hook="thumbnails-list"]'),J=A.selectedItem||0;var c=m.getItemFromState();if(c!==false){J=H.find('a[data-id="'+c+'"]').parent("li").index()}H.thumbslider({arrows:A.enablePagerArrows?"a[data-previous], a[data-next]":false,arrowsAlwaysVisible:false,arrowsRemoveIfInvisible:true,autoCenter:true,animationEasing:$.easing.easeInOutCirc!==undefined?"easeInOutCirc":"linear",mousewheel:A.enablePagerArrows,orientation:A.orientation,selectedItem:J,select:function(){var K=$(this);A.selectedId=K.data("id");if(A.enableItemUrl){m.setItemState(K)}m.showItem(K)},scrolled:function(K){var L=A.orientation=="horizontal"?F.width():F.height(),M=A.orientation=="horizontal"?G.width():G.height();if(!A.enablePagerArrows&&G.length&&G.data("tsb")&&L>M){if(K<0){K=0}if(K+M>L){K=L-M}G.tinyscrollbar_update(K)}},initialized:function(){if(!A.enablePagerArrows){G.tinyscrollbar({axis:A.orientation==="horizontal"?"x":"y",size:"auto",minTrackHeight:5});if(A.orientation==="horizontal"){G.find(".tiny-scroll-overview").css({position:"relative"});G.find(".tiny-scroll-scrollbar").css({position:"absolute",bottom:"10px"})}setTimeout(function(){H.thumbslider("option","scrollTarget",H.find(".tiny-scroll-overview"))},100)}}});$(document).off("click",'a[data-hook="mediaviewer-nav"]').on("click",'a[data-hook="mediaviewer-nav"]',function(K){K.preventDefault();H.thumbslider("gotoItem",$(this).data("pos"))});if(A.enableNextOnClick&&F.find("li").length>1){$(document).off("click",'div.central-stage[data-hook="stage"]').on("click",'div.central-stage[data-hook="stage"]',function(K){K.preventDefault();K.stopPropagation();H.thumbslider("gotoItem","next")})}if(A.enableKeyNavigation){$(document).off("keyup.mediaviewer").on("keyup.mediaviewer",function(K){if(!$.fancybox.isOpen||K.keyCode===undefined||$.inArray(K.keyCode,[27,33,34,35,36,37,38,39,40])===-1){return false}K.preventDefault();if(K.keyCode===27){return $.fancybox.close()}if($.inArray(K.keyCode,[34,35,39,40])>=0){H.thumbslider("gotoItem","next")}else{H.thumbslider("gotoItem","previous")}})}};m.setItemState=function(c){if(!A.enableItemUrl||!c.length||!c.data||!c.data("id")){return false}History.pushState({item:c.data("id")},u,m.getStateUrl(c.data("id")));return true};m.getStateUrl=function(G,c){var H=c===undefined?window.location.search:c.replace(/\?(.*)/gi,"?$1");if(H!==""){if(H.match(g)){H=H.replace(g,"")}}var F=H!==""?(H+"&"):"?";return[F,A.id,"-item=",G].join("")};m.getItemFromState=function(){var F=History.getState(),c=F.cleanUrl.match(g);if(c&&c[2]!==undefined){return c[2]}return false};m.clearState=function(){if(!A.enableItemUrl){return false}History.replaceState({},u,r)};m.showItem=function(F){var c=F.data("type"),H=F.data("extension");var G=null;if(H&&A.previewCallbacks[H]){G=A.previewCallbacks[H]}else{if(c&&A.previewCallbacks[c]){G=A.previewCallbacks[c]}else{if(H&&h[H]){G=h[H]}else{G=h[c]||s}}}if(G===null||typeof G!=="function"){return false}if(A.clientOptions!==undefined&&A.clientOptions.beforeShowItem!==undefined&&typeof A.clientOptions.beforeShowItem=="function"){A.clientOptions.beforeShowItem.apply(m,[F,F.parent("li").index()])}if(A.backgroundCoverMode){p(F.data())}G.apply(F,[F.data()]);if(A.enableMediaTitle){m.showTitle(F.data())}};m.loadImage=function(c){if(typeof c!=="object"||!c.length){return false}if(c.data("src")){c.attr("src",c.data("src"));c.data("src",false)}return true};m.showTitle=function(c){var F=q(),H=$('<div class="media-description"></div>');if(F.nextAll(".media-description").length){F.nextAll(".media-description").remove()}if(c.description!==undefined&&c.description.toString().replace(/[\-\s]+/gi,"")!==""){H.append(['<span class="title crop">',c.description,"</span>"].join(""))}if(c.download){var K=$('<span class="helpers"></span>'),J=!(c.type=="image"||c.type==="embed"||c.type==="video"),M=!J?A.previewCssClass:A.downloadCssClass,G=!J?A.translations.preview:A.translations.download;K.append(['<a href="',c.download,'" target="_blank"><i class="',M,'"></i>',G,"</a>"].join(""));K.prependTo(H)}F.after(H);var I=H.find(".title");if(I.length){var L=I.get(0);if(L!==undefined&&L.scrollWidth>L.clientWidth){I.addClass("js-tooltip").data("title",c.description).data("placement","top").tooltip()}}return true};function t(){$(document).on("click",A.ajaxTrigger,function(I){I.preventDefault();var H=$(this);if(A.enableItemUrl){m.setItemState(H)}else{var G=H.parents(A.ajaxTriggerContainer).filter(":first"),F=G.siblings(A.ajaxTriggerContainer),c=0;if(G.length>0&&F.length>0&&F.find(A.ajaxTrigger).length>0){c=G.index(A.ajaxTriggerContainer)}else{if(H.siblings(A.ajaxTrigger).length>0){c=H.index()}}A.selectedItem=!isNaN(c)?c:0}if(!H.data("widgetId")){H.data("widgetId",A.id)}if(A.enableAjax){j(H)}else{m.showItem(H)}return false})}function j(G){var J=G!==undefined&&G.data!==undefined?G.data():{},I=G!==undefined?G:this,F={};var c=["content","type","dataType","data","url","tipHook","tooltipContent","tooltipContentSelector","tooltipStyle"];for(var H in J){if(typeof J[H]!=="object"&&$.inArray(H,c)===-1){F[H]=J[H]}}$.ajax({url:A.ajaxUrl,data:$.extend(true,{},PPH.getCsrf(),{widgetId:A.id},A.ajaxData,F),dataType:"html",type:"post",beforeSend:function(){$.fancybox.showLoading();if(A.clientOptions!==undefined&&A.clientOptions.beforeAjax!==undefined&&typeof A.clientOptions.beforeAjax==="function"){var K=A.clientOptions.beforeAjax.apply(I,[m]);if(K===false){return false}}return true},success:function(K){A.response=K;$.fancybox.hideLoading();l();if(A.clientOptions!==undefined&&A.clientOptions.afterAjax!==undefined&&typeof A.clientOptions.afterAjax==="function"){A.clientOptions.afterAjax.apply(I,[m])}}})}function l(){$response=$("<div>"+A.response+"</div>");$thumbs=$response.find('[data-hook="thumbnails"]');var c=$response.find("[data-widget-id]").data("widgetId");$.fancybox.open($.extend(true,{},A.fancyboxOptions,{content:$response.find('div[data-hook="widget-content"]'),beforeShow:function(){this.width=q().outerWidth(true);this.height=q().outerHeight(true)},onReady:function(){i=this.minHeight;w=this.minWidth;b=this.maxWidth;e=this.maxHeight},onUpdate:function(){if(this.thumbsAppended){var F=$thumbs.find("li.selected > a"),G=F.data();$thumbs.thumbslider("highlightSelected");if(A.clientOptions!==undefined&&A.clientOptions.afterShowItem!==undefined&&typeof A.clientOptions.afterShowItem=="function"){A.clientOptions.afterShowItem.apply(m,[F,F.parent("li").index()])}}},afterShow:function(){var G=this;setTimeout(function(){if($thumbs.find("li").length>1){var F=$response.find('[data-hook="ajax-nav-arrows"]');G.wrap.prepend(F.find('[data-pos="previous"]'));G.wrap.append(F.find('[data-pos="next"]'))}G.thumbsAppended=true;m.bindEvents(c)},250)},afterClose:function(){m.clearState();$('a[data-hook="mediaviewer-nav"]').remove()}}))}function q(){return $(['.stage-container[data-widget-id="',A.stageId,'"] ',A.selectors.stage].join(""))}function f(c){c.removeClass("loading").addClass("loading")}function v(c){c.removeClass("loading")}function s(G){var c=q();var F=$('<img style="display: none;">');F.attr("src",G.source).attr("alt",G.description);c.html("").prepend('<span class="center-helper"></span>').append(F);f(c);F.load(function(){F.fadeIn(400);v(c);$.fancybox.update()}).error(function(){c.html(['<article class="missing-image boxmodelfix"><img src="',A.defaultImage,'" alt="',A.translations.fileNotFound,'"></article>'].join(""));v(c);$.fancybox.update()})}function p(F){var c=q();if(c.data("resized")){return false}if(F.width>F.height&&F.width>c.width()){var G=parseFloat((F.height/F.width).toFixed(3),10)*100;c.parent(".stage-container").css({paddingBottom:(G+"%")})}c.data("resized",true)}function B(G){var c=q(),F=$('<div class="background-cover" style="background-image: url('+G.source+')"></div>');c.html("");f(c);c.html(F);v(c);$.fancybox.update()}function E(G){var c=q(),F=$('<article class="preview-file boxmodelfix">');F.append(['<span class="center-helper"></span><i class="',G.icon,'"></i>'].join(""));f(c);c.html(F).prepend('<span class="center-helper"></span>');v(c);if(A.enableAjax){$.fancybox.update()}}function D(F){var H=false;if((navigator.mimeTypes&&navigator.mimeTypes["application/pdf"]!==undefined)||$.inArray("pdf",A.supportedSuffixes)>=0){H=true}if(!H){return E(F)}var c=q(),G=$('<iframe class="pdf-viewer">');f(c);G.attr("src",F.download);c.html(G);v(c);if(A.enableAjax){$.fancybox.update()}}function z(H){var c=q(),F=H.id%5,G=['<div class="hourlie-quote-',F,' portrait-mode quote-display"><div>',H.description,"</div></div>"].join("");f(c);c.html(G);v(c);if(A.enableAjax){$.fancybox.update()}}function y(G){var c=q();if(G.videoStillEncoding!==undefined&&parseInt(G.videoStillEncoding,10)===1){var F=['<div class="video-processing-full"><span class="video-processing-film"></span>',A.translations.videoNotReady,"</div>"].join("");return c.html(F)}return a(G)}function a(G){var c=q();var H=$('<iframe allowtransparency allowfullscreen scrolling="no" frameborder="0">');var F=G.source;if(G.autoplay&&parseInt(G.autoplay,10)===1){F+=(F.match(/\?/gi)?"&":"?")+"autoplay=1"}F+=(F.match(/\?/gi)?"&":"?")+"wmode=transparent";H.attr("src",F).attr("width",G.width).attr("height",G.height);f(c);c.html('<div class="embed-container"></div>').find(".embed-container").html(H);H.load(function(){v(c);H.addClass("bg-fill");if(A.enableAjax){$.fancybox.update()}})}function x(){var L=0,c=0,G=0,H=A.fancyboxOptions,M=H.margin!==undefined&&H.margin.length===4,c=M?(H.margin[0]+H.margin[2]):0,G=M?(H.margin[1]+H.margin[3]):0;var J=$(window),F=Math.floor(J.width()*0.9)-G-($(".mediaviewer-nav").width()*2),N=Math.floor(J.height()*0.95)-c,K=A.widthLimit!==null?A.widthLimit:0,F=K<F?K:F,N=N>F?F:N,I={maxHeight:N,minWidth:F,minHeight:N,maxWidth:F};if($.fancybox.current!==null){$.fancybox.current=$.extend(true,{},$.fancybox.current,A.fancyboxOptions,I)}A.fancyboxOptions=newOptions=$.extend(true,{},A.fancyboxOptions,I)}return m};PPH.modules.Notifications=function(b){var h={yiiListID:"notification-list",notifPageSelector:".widget-jsModuleNotifications",notifItemClass:".notification-item",notifDismissHook:".action-notification-dismiss",notifSetAsReadHook:".action-notification-setasread",notifMainLinkHook:".action-notification-link",notifTopNavLinkHook:"#notification-list-mini .notifications-list li",notifUnreadClass:"unread",updateUrl:"/notification/list",dismissUrl:"/notification/dismiss",setAsReadUrl:"/notification/setAsRead",setAsUnreadUrl:"/notification/setAsUnread"};var f=PPH.Module($.extend(true,{},h,b));var i=f.config;function k(p,c){var n=c.find("i.fa");var o=n.parent("a");var m=c.parents(i.notifItemClass);if(m.hasClass("unread")){o.attr("title","Mark as unread");n.removeClass("fa-circle").addClass("fa-circle-o")}else{o.attr("title","Mark as read");n.removeClass("fa-circle-o").addClass("fa-circle")}m.toggleClass("unread");if(c.data("id")>0){$(i.notifTopNavLinkHook+'[data-id="'+c.data("id")+'"]').toggleClass("unread")}$("#"+i.yiiListID).loader("close")}function g(o,n,m,c){o.preventDefault();if(typeof c=="undefined"){$("#"+i.yiiListID).loader("open")}if(typeof n==="undefined"){n=$(this)}if(typeof m==="undefined"){m=k}$.ajax({url:($(this).parents(i.notifItemClass).hasClass("unread"))?i.setAsReadUrl:i.setAsUnreadUrl,data:{id:n.data("id")},dataType:"json",success:function(){m(o,n);if(typeof c=="undefined"){$("#"+i.yiiListID).loader("close")}},complete:function(){},error:function(){}})}function l(o,m,c){o.preventDefault();if(!$("#"+i.yiiListID).not("[href='#']")){$("#"+i.yiiListID).loader("open")}if(typeof m==="undefined"){m=$(this)}if(typeof c==="undefined"){c=function(q,p){window.location=p.attr("href")}}var n=m.parents(i.notifItemClass);if(n.hasClass("unread")){g(o,m,c,true)}else{c(o,m)}}function a(m,c){$.fn.yiiListView.update(i.yiiListID,{url:i.updateUrl,data:{},async:false});if(c.data("id")>0){$(i.notifTopNavLinkHook+"[data-id="+c.data("id")+"]").remove()}}function j(o,n,m,c){o.preventDefault();if(typeof c=="undefined"){$("#"+i.yiiListID).loader("open")}if(typeof n==="undefined"){n=$(this)}if(typeof m==="undefined"){m=a}$.ajax({url:i.dismissUrl,data:{id:n.data("id")},dataType:"json",success:function(){m(o,n);if(typeof c=="undefined"){$("#"+i.yiiListID).loader("close")}},complete:function(){},error:function(){}})}f.setupNotificationsMultiselector=function(){var o="#actionbox";var m=$(o+" .check-all");var c=$(".multiaction-cb");var n=$(".notification-mass-actions");m.on("click",function(p){var q=$(this).is(":checked");(q===true)?$(i.notifItemClass).find(":checkbox").prop("checked",true):$(i.notifItemClass).find(":checkbox").prop("checked",false);$("#"+i.yiiListID).trigger("checkBoxUpdate")});c.on("click",function(){m.prop("checked",false);$("#"+i.yiiListID).trigger("checkBoxUpdate")});$(o+" .check-control .dropdown-menu li a").on("click",function(q){q.preventDefault();var p=$(this).data("checkCondition");$(i.notifItemClass).find(":checkbox").prop("checked",false);switch(p){case"read":$(i.notifItemClass).filter(":not(.unread)").find(":checkbox").prop("checked",true);break;case"unread":$(i.notifItemClass).filter(".unread").find(":checkbox").prop("checked",true);break;case"all":m.prop("checked",true);$(i.notifItemClass).find(":checkbox").prop("checked",true);break;default:$(i.notifItemClass).find(":checkbox").prop("checked",false)}$("#"+i.yiiListID).trigger("checkBoxUpdate")});$("#"+i.yiiListID).on("checkBoxUpdate",function(){var q=$(i.notifItemClass+" :checkbox:checked").length;var p=$(i.notifItemClass+" :checkbox").length;if(q==p){m.prop("checked",true)}else{m.prop("checked",false)}(q>0)?$(".notification-mass-actions").css("display","inline-block"):$(".notification-mass-actions").hide()});$("#"+i.yiiListID).trigger("checkBoxUpdate")};function e(n,c,m){m.preventDefault();$("#"+i.yiiListID).loader("open");$.ajax({url:n,data:{id:c.toString()},dataType:"json",success:function(){$.fn.yiiListView.update(i.yiiListID,{url:i.updateUrl,data:{},async:false})},complete:function(){f.setupNotificationsMultiselector();$("#"+i.yiiListID).loader("close")},error:function(){}})}$(".notification-mass-actions").on("click",".btn",function(m){var n=$(this).data("action");var c=Array.prototype.slice.call($(i.notifItemClass+" :checkbox:checked").map(function(o){return $(this).data("id")}));switch(n){case"read":e(i.setAsReadUrl,c,m);break;case"unread":e(i.setAsUnreadUrl,c,m);break;case"delete":e(i.dismissUrl,c,m)}});f.init=function(){$(document).off("click.notification",i.notifPageSelector+" "+i.notifMainLinkHook).on("click.notification",i.notifPageSelector+" "+i.notifMainLinkHook,l);$(document).off("click.notification",i.notifPageSelector+" "+i.notifSetAsReadHook).on("click.notification",i.notifPageSelector+" "+i.notifSetAsReadHook,g);$(document).off("click.notification",i.notifPageSelector+" "+i.notifDismissHook).on("click.notification",i.notifPageSelector+" "+i.notifDismissHook,j);f.setupNotificationsMultiselector()};f.actionChangeReadState=function(o,n,m,c){g(o,n,m,c)};f.actionDismiss=function(o,n,m,c){j(o,n,m,c)};return f};PPH.modules.OneTimeHelpText=function(e){var b={};var g=PPH.Module($.extend({},b,e));var i=g.config,f;g.init=function(){var k=function(o){var n=o.data.id;var p=n;a(n,$(this).parent())};for(aConfig in i){var j=i[aConfig];var m=j.container_hook_class;var c=j.meta_id;var l="."+m+'[data-hook="'+c+'"] .close-icon';$(document).on("click",l,{id:c},k)}};function a(j,c){PPH.userData.save("help",[j]);h(c)}function h(c){c.slideUp("slow")}return g};PPH.modules.PasswordStrength=function(b){var g={scores:[26,40],options:{common:{minChar:6},rules:{activated:{wordNotEmail:true,wordLength:true,wordSequences:true,wordRepetitions:true,wordLowercase:true,wordUppercase:true,wordOneNumber:true,wordThreeNumbers:true,wordOneSpecialChar:true,wordTwoSpecialChar:true,wordUpperLowerCombo:true,wordLetterNumberCombo:true,wordLetterNumberCharCombo:true},scores:{wordNotEmail:-100,wordLength:-50,wordSequences:-20,wordRepetitions:-25,wordLowercase:1,wordUppercase:3,wordOneNumber:3,wordThreeNumbers:5,wordOneSpecialChar:4,wordTwoSpecialChar:5,wordUpperLowerCombo:3,wordLetterNumberCombo:2,wordLetterNumberCharCombo:2},raisePower:1.4}},faExclamationCircle:"fa-exclamation-circle",faMinusCircle:"fa-minus-circle",faCheckCircle:"fa-check-circle",lowCssClass:"low",mediumCssClass:"medium",strongCssClass:"strong"};var f=PPH.Module($.extend({},g,b));var h=f.config;var e={};var a={};a.forbiddenSequences=["0123456789","abcdefghijklmnopqrstuvwxyz","qwertyuiop","asdfghjkl","zxcvbnm","!@#$%^&*()_+"];e.wordNotEmail=function(l,c){if(l.match(/^([\w\!\#$\%\&\'\*\+\-\/\=\?\^\`{\|\}\~]+\.)*[\w\!\#$\%\&\'\*\+\-\/\=\?\^\`{\|\}\~]+@((((([a-z0-9]{1}[a-z0-9\-]{0,62}[a-z0-9]{1})|[a-z])\.)+[a-z]{2,6})|(\d{1,3}\.){3}\d{1,3}(\:\d{1,5})?)$/i)){return c}return 0};e.wordLength=function(p,c,l){var n=p.length,m=l.rules.raisePower,o=Math.pow(n,m);if(n<l.common.minChar){o=(o+c)}return o};e.wordRepetitions=function(l,c){if(l.match(/(.)\1\1/)){return c}return 0};e.wordSequences=function(n,c){var m=false,l;if(n.length>2){$.each(a.forbiddenSequences,function(o,p){if(m){return}var q=[p,p.split("").reverse().join("")];$.each(q,function(r,s){for(l=0;l<(n.length-2);l+=1){if(s.indexOf(n.toLowerCase().substring(l,l+3))>-1){m=true}}})});if(m){return c}}return 0};e.wordLowercase=function(l,c){return l.match(/[a-z]/)&&c};e.wordUppercase=function(l,c){return l.match(/[A-Z]/)&&c};e.wordOneNumber=function(l,c){return l.match(/\d+/)&&c};e.wordThreeNumbers=function(l,c){return l.match(/(.*[0-9].*[0-9].*[0-9])/)&&c};e.wordOneSpecialChar=function(l,c){return l.match(/[!,@,#,$,%,\^,&,*,?,_,~]/)&&c};e.wordTwoSpecialChar=function(l,c){return l.match(/(.*[!,@,#,$,%,\^,&,*,?,_,~].*[!,@,#,$,%,\^,&,*,?,_,~])/)&&c};e.wordUpperLowerCombo=function(l,c){return l.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)&&c};e.wordLetterNumberCombo=function(l,c){return l.match(/([a-zA-Z])/)&&l.match(/([0-9])/)&&c};e.wordLetterNumberCharCombo=function(l,c){return l.match(/([a-zA-Z0-9].*[!,@,#,$,%,\^,&,*,?,_,~])|([!,@,#,$,%,\^,&,*,?,_,~].*[a-zA-Z0-9])/)&&c};a.validation=e;var k=function(c,m){var l=0;$.each(h.options.rules.activated,function(q,p){if(p){var r=c.rules.scores[q],o=a.validation[q],n;if($.isFunction(o)){n=o(m,r,c);if(n){l+=n}}}});return l};var i=function(n){var l,m,c;if(n<h.scores[0]){l="low";m=h.translation.weak;c=h.faMinusCircle}else{if(n<h.scores[1]){l=h.mediumCssClass;m=h.translation.medium;c=h.faExclamationCircle}else{l=h.strongCssClass;m=h.translation.strong;c=h.faCheckCircle}}return[m,l,c]};var j=function(s,p,r){var q=h.faExclamationCircle+" "+h.faCheckCircle+" "+h.faMinusCircle+" "+h.lowCssClass+" "+h.mediumCssClass+" "+h.strongCssClass;$(p).removeClass(q);$(r).text("");if(s!==""){var l=k(h.options,s);var t=i(l);var o=t[0];var n=t[1];var m=t[2];var c=n+" "+m;$(p).addClass(c);$(r).text(o)}};f.init=function(){$(document).on("password-strength-event",function(l,c){j(c.password,c.passwordStrengthI,c.passwordStrengthSpanText)})};return f};PPH.modules.Rating=function(b){var a={hook:"ul.rating",name:"rating",ratingWordings:[]};var e=PPH.Module($.extend(true,{},a,b)),f=e.config;e.init=function(){var c=$("ul.rating");$(document).on("click","ul.rating li a",function(m){m.preventDefault();if($(this).parents("ul:first").data("disabled")==0){var g;var l=$(this);var j=l.parents("ul.rating:first");var n=l.parent("li").data("index");if(typeof $(this).data("id")!="undefined"){g=$(this).data("id")}else{g=f.name}PPH.dom.error(c.parents(".widget-jsModuleRating"),"close");j.find("a span").removeClass("active");j.next("div.rating-wording").html(f.ratingWordings[n]);for(var i=0;i<n;i++){j.find("a span").eq(i).addClass("active")}var h=j.nextAll('input[name="'+g+'"]:first');if(h.length==0){h=$("<input>").attr({name:g,type:"hidden"}).val(n);j.after(h)}h.val(n);$(h).change()}});$(document).on("mouseover.ratingHover","ul.rating li",function(){var g=$(this).parent("ul").eq(0);if(g.data("disabled")==1){return}g.find("a span").removeClass("active");$(this).find("a span").addClass("hover");$(this).prevAll("li").each(function(){$(this).find("a span").addClass("hover")});g.next("div.rating-wording").html(f.ratingWordings[$(this).data("index")])}).on("mouseout.ratingHover","ul.rating li",function(){var h=$(this).parent("ul").eq(0);if(h.data("disabled")==1){return}h.find("a span").removeClass("hover");var i=h.nextAll("input:first").val();for(var g=0;g<i;g++){h.find("a span").eq(g).addClass("active")}h.next("div").html(f.ratingWordings[h.find("li span.active").last().parents("li").data("index")]?f.ratingWordings[h.find("li span.active").last().parents("li").data("index")]:"")})};return e};PPH.modules.Tag=function(e){var m={prefix:"widget-tag-",listId:"list",itemClass:"item",activeClass:"active",selectClass:"select-tag",removeClass:"unset-tag",templateTag:"",templateUnsetTag:"",performAjaxRequest:true,limitTitle:false,delimiter:",",minWeight:80,maxWeight:150,alterFontSize:false,triggerOnChange:false};var j=PPH.Module($.extend({},m,e));var n=j.config,k;function h(){var s=$("div."+n.prefix+n.listId);if(!isNaN(n.minWeight)&&!isNaN(n.maxWeight)){var q=$("a."+n.selectClass);var c=Number.MIN_VALUE;var r=Number.MAX_VALUE;q.each(function(v){var u=$(this).data("weight");if(u>c){c=u}if(u<r){r=u}});if(c-r!=0){var t=(n.maxWeight-n.minWeight)/(c-r);q.each(function(u){var v=$(this).data("weight");$(this).css("fontSize",(n.minWeight+(v-r)*t)+"%")})}}}function o(q){var c={};if(j.getState()!=null){c=j.getState()}$.each(q,function(r,s){if(s.length!=0){c[r]=s}else{c[r]=""}});j.setState(c)}function f(q){q.preventDefault();var c=$(this).parent();c.find("."+n.prefix+n.itemClass+"-excess").removeClass("hide");c.find("."+n.prefix+"more-action").addClass("hide");c.find("."+n.prefix+"less-action").removeClass("hide")}function g(q){q.preventDefault();var c=$(this).parent();c.find("."+n.prefix+n.itemClass+"-excess").addClass("hide");c.find("."+n.prefix+"more-action").removeClass("hide");c.find("."+n.prefix+"less-action").addClass("hide")}function l(u){var q=$(this).closest("."+n.prefix+n.itemClass),r=q.data(n.prefix+n.itemClass).toString();if(n.triggerOnChange){u.preventDefault();var c=q.hasClass(n.activeClass);if(c){a(r);j.trigger("unchecked",r)}else{b(r);j.trigger("checked",r)}return false}else{if(n.performAjaxRequest){u.preventDefault();var c=q.hasClass(n.activeClass),s=[],t=k.attr("data-"+n.prefix+"ids");if(typeof t!="undefined"){if(t.toString().indexOf(",")==-1){s=t.length>0?[t]:[]}else{s=t.split(",")}}if(c){$.each(s,function(v,w){if(w==r){s.splice(v,1)}})}else{if($.inArray(r,s)==-1){s.push(r)}}j.updateSelected(s);o({id:s.join(n.delimiter)})}}}function p(r){r.preventDefault();var c=$(this).closest("."+n.prefix+n.itemClass),t=c.attr("data-"+n.prefix+n.itemClass).toString(),s=c.find("."+n.selectClass).text(),q=c.attr("data-owner");if(typeof q!="undefined"){c.remove();j.trigger("unsetTag",{id:t,name:s,owner:q})}}function i(){j.updateSelected(j.val())}j.init=function(){k=$("div."+n.prefix+n.listId);$("body").delegate(k,"refreshTags",i);$("body").delegate("."+n.prefix+n.itemClass+" ."+n.selectClass,"click",l);$("body").delegate("."+n.prefix+n.itemClass+" ."+n.unsetClass,"click",p);$("body").delegate("."+n.prefix+"more-action","click",f);$("body").delegate("."+n.prefix+"less-action","click",g);if(n.alterFontSize){h()}};j.onHashChange=function(s){var u="";var c="";var r=[];var t=null;if(typeof s!="undefined"&&typeof(s.id)!="undefined"){t=[];if(s.id.toString().indexOf(",")==-1){r=s.id.length>0?[s.id]:[]}else{r=s.id.split(",")}var q;$.each(r,function(v,w){q=$("."+n.prefix+n.itemClass+" ."+n.selectClass+"[data-"+n.prefix+n.itemClass+'="'+w+'"]');t.push(q.html())});u=s.id.toString();c=t.join(",");j.updateSelected(r)}k.attr("data-"+n.prefix+"ids",u);k.attr("data-"+n.prefix+"names",c);j.trigger("updateHeading",t)};j.updateSelected=function(c){if(typeof c!="undefined"){$("."+n.prefix+n.itemClass).removeClass(n.activeClass);$.each(c,function(q,r){b(r)})}};function b(c){$("."+n.prefix+n.itemClass+"[data-"+n.prefix+n.itemClass+'="'+c+'"]').addClass(n.activeClass)}function a(c){$("."+n.prefix+n.itemClass+"[data-"+n.prefix+n.itemClass+'="'+c+'"]').removeClass(n.activeClass)}j.val=function(){var q=k.attr("data-"+n.prefix+"ids");var c=[];if(typeof q!="undefined"){if(q.toString().indexOf(",")==-1){c=q.length>0?[q]:[]}else{c=q.split(",")}}return c};j.addTag=function(c){k.find("div.emptyTags").hide();c.id=typeof(c.id)!="undefined"?c.id:"";var q=j.getTag(c.id);if(q.length==0){k.prepend(j.createNewTag(c))}};j.getTag=function(c){return k.find("."+n.prefix+n.itemClass+"-"+c).clone()};j.createNewTag=function(c){c.id=typeof(c.id)!="undefined"?c.id:"";c.name=typeof(c.name)!="undefined"?c.name:"";c.weight=typeof(c.weight)!="undefined"?c.weight:"";c.cssclass=typeof(c.cssclass)!="undefined"?c.cssclass:"";c.owner=typeof(c.owner)!="undefined"?c.owner:"";c.unset=typeof(c.unset)!="undefined"?c.unset:false;var q=n.templateTag.replace(/{id}/g,c.id).replace(/{name}/g,c.name).replace(/{cssclass}/g,c.cssclass).replace(/{weight}/g,c.weight).replace(/{owner}/g,c.owner);if(c.unset){q=q.replace("</div>",n.templateUnsetTag+"</div>")}return q};j.removeTag=function(c){k.find("."+n.prefix+n.itemClass+"-"+c).remove()};return j};PPH.modules.TagsInput=function(a){var h={id:"",truncateTagView:false,container:".widget-tags-input",selTagNew:".tagit-new input",selDefaultInput:".tagItList",enableClientValidation:false,allowSpaces:true,autoCompleteUrl:""};var f={};for(moduleInstance in a){f[moduleInstance]=$.extend({},h,a[moduleInstance])}var g=PPH.Module(f);var i=g.config;var e;function l(){$(h.container).addClass("tag-focus").css("overflow","hidden")}function b(){$(h.container).removeClass("tag-focus").css("overflow","hidden");if(f[moduleInstance].enableClientValidation){$(h.selDefaultInput).trigger("blur")}}function m(n,c){var o=c.find(".tagit-label").text();o=k(o);if($.trim(o)==""){$(f[moduleInstance].selDefaultInput).tagit("removeTag",c,true);return false}c.find(".tagit-label").text(o);$(c).on("click",function(){$(f[moduleInstance].selDefaultInput).tagit("removeTag",c,true)});setTimeout(function(){$(window).trigger("resize")},100)}function j(n,c){setTimeout(function(){$(window).trigger("resize")},100)}function k(c){c=c.replace(/[^\d\w\s\+#&\.,\@]/g,"");return c}g.init=function(){var c,n=i;for(c in n){i=n[c];e=$(i.container+"[data-id="+c+"]");i.containerDom=e;e.data("tagsInputConfig",i);$(i.selDefaultInput,e).tagit({tagSource:i.autoCompleteUrl,allowSpaces:i.allowSpaces,singleFieldDelimiter:",",onTagAdded:m,onTagRemoved:j,placeholderText:i.placeholder,truncateTagView:i.truncateTagView});e.on("click",function(){$(h.selTagNew).trigger("focus")});$(h.selTagNew).on("focus",l).on("blur",b)}i=n};return g};PPH.modules.SuggestSkills=function(f){var e={triggerSelector:null,targetSelector:null,modalId:null,modal:{cancel:".suggested-tags .cancel",submit:"#suggest-skill-submit-btn",addTag:".suggest-auto-tag-item",skillInput:"#SuggestedSkill_skill",suggestedTags:".suggested-auto-tags",message:".js-relative-skill-msg",submitHidden:"#submit-hidden"}};var h=PPH.Module($.extend({},e,f));var j=h.config;h.init=function(){$(document).on("click",j.triggerSelector,g);$(document).on("click",j.modal.cancel,b);$(document).on("click",j.modal.submit,a);$(document).on("click",j.modal.addTag,i)};function g(c){c.preventDefault();$(j.modal.skillInput).val("");$(j.modal.suggestedTags).html("");$(j.modal.submit).text("Submit");$(j.modal.message).hide();$(j.modal.submitHidden).val(0);$(j.modalId).modal("show");$(j.modal.cancel).css("display","none")}function a(m){m.preventDefault();if($(j.modal.skillInput).val().trim()==""){PPH.dom.error(j.modal.skillInput,"Please type a skill");return}var l=$(this).parents("form"),k=l.find(j.modal.submit),c=k.text();k.prop("disabled",true).text("Please wait...");$.ajax({url:l.attr("action"),type:"POST",data:l.serialize(),success:function(n){k.prop("disabled",false).text(c);if(n.success){if(n.tags.length>0){var o='<ul class="select2-choices">';$(n.tags).each(function(r,q){o+=['<li class="suggest-auto-tag-item select2-search-choice gray" data-id=',q.id,' data-text="',q.label,'">',q.label,"</li>"].join("")});o+="</ul>";$(j.modal.suggestedTags).html(o);var p=["We found ",(n.tags.length==1?"a":"these")," relative skill",(n.tags.length==1?"":"s"),"<br>","Do you want to submit your skill or use ",(n.tags.length==1?"this":"one of these"),"?<br>"].join("");$(j.modal.message).html(p).show();$(j.modal.submit).text("Submit mine");$(j.modal.submitHidden).val(1);$(j.modal.cancel).css("display","inline-block");return}PPH.success("Thanks for submitting a new Skill.We will review it soon.");$(j.modal.skillInput).val("");$(j.modalId).modal("hide")}else{PPH.error("There was an error while submitting the skill.Please try again later.")}}})}function i(){var m=$(this),k=m.siblings(j.modal.addTag).length;var c={id:m.data("id"),text:m.data("text")};var l=$(j.targetSelector).select2("data");l.push(c);$(j.targetSelector).select2("data",l);m.remove();if(!k){$(j.modalId).modal("hide")}}function b(){$(j.modalId).modal("hide")}return h};var _lockNotificationRequest=false;var _lockStreamNotificationRequest=false;(function(f){f(".navNotifications").click(function(){var i=f(this);if(!i.hasClass("open")&&!_lockNotificationRequest){var h='<div class="text-center gutter-top gutter-bottom"><img class="loading" src="/img/pph-loader-black-bg-mini.gif" /></div>';f(".notification-menu > .notification-list").html(h);f(".navNotifications > .mobile-notification-list").html(h);var j=f.ajax({url:"/notification/topMenu",type:"GET",data:{},success:function(k){_lockNotificationRequest=true;f(".notification-menu > .notification-list").html(k);f(".navNotifications > .mobile-notification-list").html(k)}})}});f(".navWorkstreams").click(function(){var i=f(this);if(!i.hasClass("open")&&!_lockStreamNotificationRequest){var h='<div class="text-center gutter-top gutter-bottom"><img class="loading" src="/img/pph-loader-black-bg-mini.gif" /></div>';f(".workstream-menu > .workstream-list").html(h);f(".navWorkstreams > .mobile-workstream-list").html(h);var j=f.ajax({url:"/stream/topMenu",type:"GET",data:{},success:function(k){_lockStreamNotificationRequest=true;f(".workstream-menu > .workstream-list").html(k);f(".navWorkstreams > .mobile-workstream-list").html(k)}})}});f(".availability").click(function(h){h.stopPropagation()});f(".availability-switch").availabilitySwitch();if(f("#widget-TopNav.for-user").length){var e=function(h,i){if(typeof i=="undefined"){var i=h.data.options}var l=f(i.notificationIconContainerClass+" > a").find(".notification-bubble");var k=true;f.each(l,function(m,n){if(parseInt(f(n).html())>0){k=false}});if(k){if(i.noActionCallback){i.noActionCallback()}}else{var j=f.ajax({url:i.actionUrl,type:"GET",data:f.extend(true,{},PPH.getCsrf()),dataType:"json",success:function(m){if(!m.error){if(i.entity=="memberNotifications"){PPH.modules.Rtm().bell.removeAll()}else{if(i.entity=="streamNotifications"){PPH.modules.Rtm().envelope.removeAll()}}}else{}}})}};f(".user-menu .availability .btn").click(function(n){n.preventDefault();var j=f(this);var m=j.data("availability");var h=m=="available"?0:1;var k=f(j).parents("li.availability").first();var l=k.find("a").first();var i={status:h};f.ajax({url:"/member/setAvailable",type:"POST",data:f.extend({},i,PPH.getCsrf()),success:function(o){if(o.success){k.removeClass("available busy");if(m=="available"){k.addClass("busy");l.html('<i class="fa fa-minus-circle"></i>Busy');j.data("availability","busy")}else{k.addClass("available");l.html('<i class="fa fa-check-circle-o"></i>Available');j.data("availability","available")}PPH.success(o.message)}else{PPH.error(o.message,{persist:true})}}})});var a=function(h){f(h.notificationIconContainerClass+" > a").on("click",{options:h},e)};var c="#widget-TopNav";var g=c+" .navWorkstreams";var b={actionUrl:"/stream/resetNew",notificationIconContainerClass:g,noActionCallback:function(){f(g+" .view-all").html("View all")},entity:"streamNotifications"};a(b);if((window.location.pathname=="/stream/list")){e(null,b)}g=c+" .navNotifications";b={actionUrl:"/notification/resetNew",notificationIconContainerClass:g,noActionCallback:function(){f(g+" .view-all").html("View all")},entity:"memberNotifications"};a(b);if((window.location.pathname=="/notification/list")){e(null,b)}}})(jQuery);$(document).ready(function(){var b=$(document);b.on("click",".offcanvas-toggle.topnav-toggle",function(g){g.preventDefault();$("#site-wrapper").toggleClass("offcanvas-active")});$(".js-show-offcanvas").off("click");b.on("click",".js-show-offcanvas",function(g){g.preventDefault();$("#main-container").toggleClass("offcanvas-active");$("html").css("overflow-x","hidden")});$(".js-hide-offcanvas").off("click");b.on("click",".offcanvas-sidebar .js-hide-offcanvas",function(g){g.preventDefault();$("#main-container").removeClass("offcanvas-active");$("html").css("overflow-x","auto")});var c=$(".dropcanvas");if(c.length>0){var a=$(".js-toggle-dropcanvas"),e=a.offset().top;a.on("click",function(g){g.preventDefault();if(c.is(":visible")){c.slideUp()}else{if(e>$(window).scrollTop()){dropcanvasH=2.5/4*($(window).height()-$(window).scrollTop())}else{dropcanvasH=3/4*$(window).height()}c.css({height:dropcanvasH+"px"});c.slideDown("fast",function(){$(this).css({"overflow-y":"auto"})})}})}b.on("mouseenter focus",".js-tooltip",function(h){h.preventDefault();var g=$(this);g.data("trigger","hover");PPH.tip(g)});b.on("mouseleave",".js-tooltip",function(h){var g=$("body").find($("[id^=tooltip]"));g.remove()});b.on("mouseenter tap click",'[data-tooltip-content]:not("[aria-describedby]"), [data-tooltip-content-selector]:not("[aria-describedby]")',function(h){var g=$(this);if(g.hasClass("js-tooltip")||g.hasClass("popover-toggle")){return false}g.data("trigger","hover");PPH.tip(g)});b.on("touchstart tap click mousenter hover",".js-tooltip--exclusive",function(j){var h=$(this);var g=$("#"+h.attr("aria-describedby"));var i=$('.popover:not("#'+h.attr("aria-describedby")+'")');$.each(i,function(l,k){$(this).remove()});setTimeout(function(){g.fadeOut(0,function(){if(g!==null){g.remove()}})},5000)});b.on("click","[data-tooltip-click-content], [data-tooltip-click-content-selector]",function(h){h.preventDefault();var g=$(this);g.data("tooltip-style","info");b.one("click",function(i){g.popover("destroy")});PPH.tip(g)});b.on("focus","[data-input-suggestion], [data-input-suggestion-selector]",function(g){var h=(typeof g.preventDefault=="undefined")?g:$(this);h.data("tooltip-style","info");h.data("trigger","focus");PPH.tip(h)});b.on("focus",'.popover-toggle[data-trigger="focus"], input.popover-toggle:not([data-trigger])',function(g){f.apply(this,["focus"])});b.on("click",'.popover-toggle[data-trigger*="click"], button.popover-toggle:not([data-trigger])',function(g){g.preventDefault();f.apply(this,["click"])});b.on("mouseenter",'.popover-toggle[data-trigger*="hover"], a.popover-toggle:not([data-trigger])',function(g){f.apply(this,["hover"])});b.on("click",".bootbox-toggle",function(i){i.preventDefault();var g=$(this),h={keyboard:true};if(g.data("class")){h.className=g.data("class")}if(g.attr("title")){h.title=g.attr("title")}if(g.data("message")){h.message=g.data("message")}else{if(g.data("contentSelector")){h.message=$(g.data("contentSelector")).html()}}var j=bootbox.dialog(h);if(g.data("modalShownCb")){PPH.runStringAsFn(g.data("modalShownCb"))}if(g.data("closeModalBtn")){j.find(g.data("closeModalBtn")).on("click",function(k){bootbox.hideAll()})}});b.on("click",".js-toggle-class",function(){var g=$(this);var h=g.data("selector")?g.parents(g.data("selector")):g;if(g.data("class")){h.toggleClass(g.data("class"))}});function f(g){var h=$(this);h.data("tooltip-style","info");if(h.data("bound-popover")){return false}h.data("bound-popover",true);g=g||"hover";if(!h.data("trigger")){h.data("trigger",g)}PPH.tip(h)}});PPH.modules.LocationCombo=function(D){var i={mappings:{iso_code:"iso"},selMainIdPrefix:"#widget-jsModuleLocationCombo-",selMain:".widget-jsModuleLocationCombo",selInput:".location-combo-input",selText:".location-combo-text",selChange:".location-combo-change",suggestionDisplayKey:"country",ajaxLookup:"/location/cities",locationDisplayFields:["city","iso"],locationDelimiter:" - ",minLength:2,enhancedText:false,enhancedTextFlag:false,dropdownFlags:true,dropdownLook:false,lockedLocation:false,lockedMessage:false,prefix:"",showTitleTooltip:false};var l=PPH.Module($.extend({},i,D));var y=l.config,o="",z={},j={},x={},g=false,q="text",u=false;function C(c,F){for(var E=0;E<F.length;E++){if(typeof F[E]=="undefined"||F[E]==""||F[E]==null){F.splice(E,1);E--}}if(F.length>0){return F.join(c)}else{return""}}function a(H,c){var G=[];c=c!==undefined?c:true;for(var I in y.locationDisplayFields){var F=y.locationDisplayFields[I];if(H[F]===undefined){var E=H.country;return f(H,E)}G.push(H[y.locationDisplayFields[I]]);if(y.locationDisplayFields[I]=="city"&&H.iso!==undefined&&H.iso=="US"&&H.admin_area!==undefined){G.push(H.admin_area)}}G=C(y.locationDelimiter,G);return c?f(H,G):G}function f(E,c){if(y.dropdownFlags&&E.iso!==undefined){c='<img src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" class="country-flag flag-'+E.iso.toLowerCase()+'"  /> '+c}return c}function A(F,E){var c=$(y.elMain).data("lastGoodItem");if(!F){if($(E).val()!=""&&c!==undefined&&!$.isEmptyObject(c)){e(a(c),c.iso);return c}else{e("");$(y.elMain).data("lastGoodItem",{});if(y.ifEmptyShowInput){w(true)}return{}}}else{$(y.elMain).data("lastGoodItem",F);e(a(F),F.iso);return F}}function p(E){var c=$(this).data("locationItem");if(c===undefined){return false}var F=$(E.target).text().length>0?$(E.target).text():a(c);e(F,c.geoname.iso);return false}function v(E,L,G){var I=y.elMain.find(".location-combo-input");if(L===undefined||$.isEmptyObject(L)){return false}if(I.attr("placeholder")===I.val()){return false}L=A(L,this);var J=$(this);J.data("locationItem",$.extend(true,J.data("locationItem"),{geoname:L}));var F=y.mappings;for(var c in F){var K=F[c];if(!L||!L[K]||L[K]==""){$('input[data-geoname-attr="'+K+'"]',y.elMain).val("");var H=n();y.elMain.trigger("newLocation",H);return false}else{$('input[data-geoname-attr="'+K+'"]',y.elMain).val(L[K])}}var H=n();if(j.concatTotal!=H.concatTotal||(j.concatTotal!==undefined&&z.concatTotal!=H.concatTotal)){y.elMain.trigger("newLocation",H);if(H.concatTotal!=""){j=H;y.elMain.trigger("newValidLocation",H)}}if(I.attr("placeholder")!=I.val()){b.apply(this,[E])}return false}function e(c,E){if(c===undefined){return}c=$.trim(c.replace(/(<([^>]+)>)/ig,""));$(y.elInput).val(c);if(y.enhancedText){if(c!=""&&y.enhancedTextFlag&&typeof E!="undefined"){c=f({iso:E},c)}$(y.elText).html(c==""?y.emptyLocation:y.prefix+c);if(y.showTitleTooltip){m(y.elText)}}}function b(c){s()}function k(c){if(c.keyCode==13||c.keyCode==27){$(this).trigger("blur");$(this).trigger("keyPressBlur");c.preventDefault()}}function h(c){c.preventDefault();t();r();w();return false}function t(){if(y.dependsOn){y.elDepends.attr("checked",true);y.elDepends.change()}}function s(E){if(y.enhancedText){q="text";g=false;var c=y.elText.text();if(y.ifEmptyShowInput&&(c==""||c==y.emptyLocation)){y.elInput.unbind("blur");y.elInput.blur();y.elInput.bind("blur",b);return true}y.elInput.hide();y.elText.show();if(y.elText.next(".twitter-typeahead").length){y.elText.next(".twitter-typeahead").hide()}if(typeof E=="undefined"||!E){y.elChange.css("display","inline")}}}function w(c){if(y.lockedLocation){return false}if(y.enhancedText){if(q==="input"){return true}q="input";y.elChange.hide();y.elText.hide()}y.elInput.show();if(y.elText.next(".twitter-typeahead").length){y.elText.next(".twitter-typeahead").show()}if(!c){if(y.elInput.not(":focus").length>0&&!g){y.elInput.focus();y.elInput.select();g=true}}}function r(){var c=$(y.elMain).attr("data-tip-hook");if(typeof c!="undefined"){PPH.dom.error($(y.elMain),"close",{useHook:false})}}function n(){var c={};c.target=c.geoname={};c.concatTotal="";$("[data-target-attr]",y.elMain).each(function(E,F){var G=$(F);var H=G.val();c.target[G.attr("data-target-attr")]=H;c.geoname[G.attr("data-geoname-attr")]=H;c.concatTotal+=H});return c}function B(){$(this).fadeOut("fast");$(".widget-jsModuleLocationCombo").fadeIn("fast")}function m(c){c.attr("title",c.text())}l.disable=function(){if(!u){return true}u=false;r();var c=$('input[type="text"],input[type="hidden"]',$(y.elMain).parent());c.each(function(E,F){if(typeof $(F).attr("data-name")==="undefined"){$(F).attr("data-name",$(F).attr("name"))}});c.attr("disabled","disabled").removeAttr("name");s(true)};l.enable=function(){if(u){return true}u=true;r();var c=$('input[type="text"],input[type="hidden"]',$(y.elMain).parent());c.each(function(E,F){if(typeof $(this).attr("data-name")!=="undefined"){$(this).attr("name",$(F).attr("data-name"))}});c.removeAttr("disabled").removeAttr("data-name");w(false)};l.reset=function(E){j={};var c=$('input[type="text"],input[type="hidden"]',$(y.elMain).parent());c.val("");if(typeof E!="undefined"&&E){y.elInput.trigger("blur");if(y.elInput.data("ttTypeahead")){y.elInput.typeahead("val","")}}};l.init=function(){var E=$(y.selMainIdPrefix+y.id);var F=$(y.selInput,E);if(!F.length){return}y.elMain=E;y.elInput=F;if(y.enhancedText){y.elChange=$(y.selChange,E);y.elText=$(y.selText,E);if(y.showTitleTooltip){m(y.elText)}if(typeof y.dependsOn!="undefined"){y.elDepends=$(y.dependsOn);if(!y.elDepends.is(":checked")){y.elChange.hide();l.disable()}var I=y.elDepends;if(y.elDepends.attr("type")=="radio"){var H=y.elDepends.attr("name");I=$('input[name="'+H+'"]')}I.on("change",function(){if($(this).val()==y.elDepends.val()){y.elMain.show();l.enable()}else{y.elChange.hide();l.disable()}})}}z=n();var G=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace,remote:(y.ajaxLookup+"?term=%QUERY")});G.initialize();F.typeahead(null,{name:y.id+"-typeahead",displayKey:y.suggestionDisplayKey,source:G.ttAdapter(),autoselect:true,templates:{suggestion:function(J){return a(J)}}});F.on("typeahead:selected",v);F.on("focus",p);F.on("blur",b);F.data("locationItem",z);E.data("js-location-combo",l);F.on("blur",b);F.on("keypress",k);if(y.enhancedText){y.elChange.add(y.elText).on("click",h);y.elText.next(".twitter-typeahead").hide()}else{var c=$(y.elMain).parents("form");$('input[type="submit"]',c).on("mouseover",function(){y.elInput.blur()})}if(y.id=="footer_preference_menu_location"&&y.lockedLocation){$(y.selMainIdPrefix+y.id+" "+y.selText).css({cursor:"default"}).attr("data-tooltip-content",y.lockedMessage).attr("data-tooltip-pos","top").attr("data-tooltip-style","info");$(y.selMainIdPrefix+y.id+" "+y.selChange).hide()}$(document).on("click",".add-more-countries",B)};return l};PPH.modules.SubscribeNewsletter=function(e){var b={metadataKey:"guest.newsletter-subscription-popup"};var f=PPH.Module($.extend(true,{},b,e)),h=f.config;f.init=function(){$(document).on("click",".subscribe-newsletter .form .submit-btn, .connect .submit-btn",function(c){var i=$(this).closest("form");a("subscribe");c.preventDefault();g(c,i)})};function g(l,m){var j=m;var k=$(j).attr("action");var c=$("#NewsletterSubscription_email",m).val().trim();var i=$("#NewsletterSubscription_email_group",m);if(c==""){PPH.dom.error(i,"Please type your email",{container:j});return}if(jQuery.trim(c)!=""&&!c.match(/^[a-zA-Z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?$/)){PPH.dom.error(i,"Email format isn't valid",{container:j});return}$.ajax({url:k,type:"POST",data:j.serialize(),success:function(n){if(n.success){PPH.success("You have successfully subscribed to the hourlie offers newsletter");$('input[name="NewsletterSubscription[email]"]',m).val("");PPH.userData.save(h.metadataKey,true)}else{PPH.error("We couldn't subscribe you to the hourlie offers newsletter");$('input[name="NewsletterSubscription[email]"]',m).val("")}}})}function a(i){var c="/subscribeNewsletter/"+i;if(typeof gtmTrackPageview!=="undefined"){gtmTrackPageview(c)}}return f};PPH.modules.Rtm=function(f){var m={notificationCreated:"App\\Events\\NotificationCreated",videoCallInitialized:"videoCallInitialized",videoCallCreated:"App\\Events\\VideoCallCreated",videoCallAnswered:"App\\Events\\VideoCallAnswered",videoCallHangup:"App\\Events\\VideoCallHangup",videoCallMissed:"App\\Events\\VideoCallMissed",videoCallConstructionEndpoint:"/videoCall/transformCall",streamRead:"StreamRead",streamUpdated:"StreamUpdated",messageTyping:"client-MessageTyping",memberAdded:"pusher:member_added",memberRemoved:"pusher:member_removed",messageNotTyping:"client-MessageNotTyping",notificationContainer:$("li.notifications-bell"),notificationContainerMobile:$("li.navNotifications"),envelopeContainer:$("li.navWorkstreams"),notificationMobileTopnavToggler:$(".top-navigation .topnav-toggle"),listItemContainer:"#streamview-list .items-container",listMessageID:"files-messageview-list",streamFeedSummaryView:"streamsystemmessageview-list",notificationConstructionEndpoint:"/notification/renderMessage",notificationBubbleTimeout:15000,notificationBubbleDivContainer:"notifications-bubble-container"};var j=PPH.Module($.extend({},m,f));var n=j.config;var e;var p;var g;var a=n.videoCallerTemplate;var h=n.videoCalleeTemplate;var l={};function i(r){var c={notifications:"private-"+n.consumer+"-"+n.userId,stream:"private-"+n.consumer+"-stream-"+j.getStreamId(),presence:"presence-"+n.consumer+"-stream-"+j.getStreamId()};return c[r]}function k(r){var s=window.location.search.substring(1);var t=s.split("&");for(var c=0;c<t.length;c++){var u=t[c].split("=");if(u[0]==r){return u[1]}}}function q(){$(n.listItemContainer).animate({scrollTop:$(n.listItemContainer)[0].scrollHeight},0)}j.init=function(){$(window).load(function(){if(n.featureEnabled&&typeof _pusher!=="undefined"){o()}})};function o(){if(!_pusher){return}e=_pusher.subscribe(i("notifications"));if(j.getStreamId()&&n.currentUrl=="stream/view"){p=_pusher.subscribe(i("stream"));g=_pusher.subscribe(i("presence"))}if(!n.isReactPage){j.notifications._initNotifications(_pusher)}j.videoCalls._initVideoCalls();j.streamNotifications._initStreamNotifications()}j.videoCalls={_initVideoCalls:function(c){if(!n.isReactPage){e.bind(n.videoCallCreated,function(r){j.videoCalls._callReceived(r.videoCall)});e.bind(n.videoCallAnswered,function(r){j.videoCalls._callAnwered(r.videoCall)});e.bind(n.videoCallHangup,function(r){j.videoCalls._callHangup(r.videoCall)});e.bind(n.videoCallMissed,function(r){j.videoCalls._callMissed(r.videoCall)});this._callingCheck()}$(document).bind("makeRtmCall",function(t,r,s){j.videoCalls.actionMakeCallAttempt(r,s)})},_callingCheck:function(){$.each(n.videoCalls,function(c,r){j.videoCalls.callingBubble(r)})},_playCallingSound:function(){if(n.notificationSoundFlag==1){var r=new Audio(n.videocallSoundUrl);try{r.play().catch(function(){})}catch(c){}}},callingBubble:function(s){var r;if(s.role=="caller"){r=j.template._populateTemplate(a,s.params)}else{if(s.role=="callee"){r=j.template._populateTemplate(h,s.params)}}var t={level:200,html:r,bubbleTimeout:s.timeout,role:s.role,callId:s.id};j.bubble.notify(t,s.id);var c=$('.notify-bubble[data-id="'+s.id+'"]');c.find(".abort-call").on("click",function(){j.videoCalls._actionHangupCall(s);$(this).unbind("click");c.find(".answer-call").unbind("click")});if(s.role=="callee"){c.find(".answer-call").on("click",function(){j.videoCalls._actionAnswerCall(s);$(this).unbind("click");var u=window.open(s.params["{call-link}"],"_blank");if(u!=null){u.focus()}})}c.find(".join-call").on("click",function(){var u=window.open(s.params["{call-link}"],"_blank");if(u!=null){u.focus()}})},_updateBubble:function(r,s){var c=$('.notify-bubble[data-id="'+r.id+'"]');switch(s){case"answer":c.find(".call-accepted").show();c.find(".call-pending").remove();clearTimeout(l[c.data("id")]);l[c.data("id")]=setTimeout(function(){j.bubbleTimeout(c)},60000);break;case"hangup":clearTimeout(l[c.data("id")]);j.bubbleTimeout(c);break}},_callReceived:function(c){var r=$('.notify-bubble[data-id="'+c.id+'"]').length;if(r<1){$.ajax({url:n.videoCallConstructionEndpoint,dataType:"json",data:{call:c},success:function(s){j.videoCalls.callingBubble(s);j.title.flashTitle(n.translations.callReceivedTitle,c.timeout,1500);j.videoCalls._playCallingSound();if(n.currentUrl=="stream/view"){$.fn.yiiListView.update("streamview-list",{url:"/stream/view",data:{id:j.getStreamId()}})}}})}},_callAnwered:function(r){j.videoCalls._updateBubble(r,"answer");var c=$('.notify-bubble[data-id="'+r.id+'"]');c.find("button.answer-call").trigger("click")},_callMissed:function(r){var c=$.extend({callId:r.id,fromElement:(typeof r.fromElement!="undefined")?r.fromElement:false},PPH.getCsrf());$.post("/videoCall/missedCall",c)},_callHangup:function(c){j.videoCalls._updateBubble(c,"hangup");j.title.flashClear()},_actionAnswerCall:function(r){var c=$.extend({callId:r.id},PPH.getCsrf());$.post("/videoCall/answerCall",c,function(s){if(s.status=="1"){j.videoCalls._updateBubble(r,"answer")}},"json")},_actionHangupCall:function(r){var c=$.extend({callId:r.id},PPH.getCsrf());$.post("/videoCall/hangupCall",c,function(s){if(s.status=="1"){j.videoCalls._updateBubble(r,"hangup")}},"json")},actionMakeCallAttempt:function(r,t){var s=r;var u=t;var c=$.extend({calleeId:r,streamId:t,check:1},PPH.getCsrf());$.post("/videoCall/makeCall",c,function(v){if(v.status=="1"){bootbox.dialog({message:n.translations.callConfirmMsg,title:n.translations.callConfirmTitle,buttons:{success:{label:n.translations.callConfirmButton,className:"btn btn-pph tall",callback:function(){j.videoCalls.actionMakeCall(s,u);return true}},main:{label:"Cancel",className:"btn tall",callback:function(){bootbox.hideAll();return false}}}})}else{if(v.status=="0"){bootbox.dialog({message:v.message,title:n.translations.callConfirmTitle,buttons:{main:{label:"Close",className:"btn tall",callback:function(){bootbox.hideAll();return false}}}})}}$(document).trigger("callProcessed")},"json")},actionMakeCall:function(r,s){var c=$.extend({calleeId:r,streamId:s},PPH.getCsrf());$.post("/videoCall/makeCall",c,function(u){if(u.status=="1"){if(!n.isReactPage){j.videoCalls.callingBubble(u.call)}else{var t=new CustomEvent(n.videoCallInitialized,{detail:u.call});window.dispatchEvent(t)}}else{if(u.status=="0"){PPH.info(u.message)}}$(document).trigger("callProcessed");$.fn.yiiListView.settings["streamview-list"].afterAjaxUpdate=function(){q()};$.fn.yiiListView.update("streamview-list",{url:"/stream/view",data:{id:j.getStreamId()}})},"json")}};j.streamNotifications={_notificationBubbleNumber:n.envelopeContainer.find(".notification-bubble"),_messagesCount:function(){return parseInt(this._notificationBubbleNumber.html())},_initStreamNotifications:function(){e.bind(n.streamRead,function(c){j.streamNotifications._actionStreamRead(c)});e.bind(n.streamUpdated,function(c){j.streamNotifications._actionStreamUpdated(c)});if(j.getStreamId()&&n.currentUrl=="stream/view"){$(document).bind(n.messageTyping,function(r,c){p.trigger(n.messageTyping,c)});p.bind(n.messageTyping,function(c){j.streamNotifications._actionMessageTyping(c)});$(document).bind(n.messageNotTyping,function(r,c){p.trigger(n.messageNotTyping,c)});p.bind(n.messageNotTyping,function(c){j.streamNotifications._actionMessageNotTyping(c)})}},_actionMessageTyping:function(c){$("#streamview-list").append('<div class="user-typing"><span class="user-name">'+c.memberName+'</span> <span class="typing">is typing</span></div>');$("#streamview-list .user-typing").slideDown("fast")},_actionMessageNotTyping:function(c){$("#streamview-list .user-typing").slideUp("fast",function(){$(this).remove()})},_actionStreamRead:function(c){var s=c.data;if(n.currentUrl=="stream/view"){if(j.getStreamId()==s.stream_id){$(".seen-date").remove();var r=$("#streamview-list ul.items > li.item.mine").last().find(".right-col .msg-wrap");if(!r.find(".seen-date").length){r.append('<p class="pull-right discreet seen-date">'+n.translations.streamSeen+"</p>");q()}}}},_actionStreamUpdated:function(r){data=r.data;var c=false;if(n.currentUrl=="stream/view"){var s=j.getStreamId();if(data.streamId==s){var t=0;if(document.hasFocus()){t=1}else{$(window).unbind("focus").one("focus",function(){$.getJSON("/stream/read",{id:s})})}$.getJSON("/stream/view",{id:s,hasFocus:t,ajax:"streamview-list-full"},function(u){this._afterStreamRefresh(u)}.bind(this));$.fn.yiiListView.update(n.streamFeedSummaryView,{url:"/stream/view",data:{id:s}});$.fn.yiiListView.update(n.listMessageID,{url:"/stream/view",data:{id:s}});j.page.trigger("refresh-button-states-config");if(!n.isReactPage){j.title.flashTitle(n.translations.streamUpdtedTitle,30000,1500)}c=true}else{c=false}}if(!n.isReactPage){if(!c){j.streamNotifications.renderNotifications()}}},renderNotifications:function(){$.getJSON("/stream/newMessages",function(c){if(c.count<=this._messagesCount()){return false}j.notifications._playNotificationSound();j.envelope.setCount(c.count);j.title.flashTitle(n.translations.streamNewMessages,30000,1500);this._updateWorkstreamListingPage();_lockStreamNotificationRequest=false;if($(".navWorkstreams.stream-envelope").hasClass("open")){$(".navWorkstreams.stream-envelope").trigger("click")}}.bind(this))},_updateWorkstreamListingPage:function(){if((window.location.pathname=="/stream/list")&&(!$("#stream-list").has(".new-stream-message-element").length)){$('<div class="clearfix new-stream-message-element">'+n.newStreamMessagesText+"</div>").prependTo($("#stream-list").on("click",function(){location.reload(true)}))}},_updateSummary:function(s,r){var c=r;if(s!=""){if(c.length&&c.is(":visible")){c.replaceWith(s)}else{$(".right-column .sticky-widgets").append(s)}}else{if(c.length){c.hide().html("")}}PPH.page.modules.StreamControl.sidebarTabsHeightCalc()},_afterStreamRefresh:function(s){$(s.messages).replaceAll("#streamview-list").promise().done(function(){q()});var r=$("section.toolbox");var c=$("<div></div>");c.hide().appendTo("body").html(s.toolbox);r.html(c.children().html());c.remove();$(".stream-whats-next").replaceWith(s.whatsNext);$(".system-messages-list").replaceWith(s.systemMessages);PPH.page.modules.StreamControl.initWorkstreamFeed();this._updateSummary(s.perhourSummary,$(".hire-per-hour-summary-display"));this._updateSummary(s.streamSummary,$(".stream-summary-display"));this._updateSummary(s.payrollSummary,$(".payroll-summary-display"));$(document).trigger("_setupFeedbackForms")}};j.notifications={_initNotifications:function(c){j.bubble._createContainer();e.bind(n.notificationCreated,function(r){j.notifications._constructNotification(r)})},_constructNotification:function(c){$.ajax({url:n.notificationConstructionEndpoint,dataType:"json",data:c,success:function(r){j.notifications._afterNotificationRender(r)}})},_playNotificationSound:function(){if(n.notificationSoundFlag==1){var r=new Audio(n.notificationSoundUrl);try{r.play().catch(function(){})}catch(c){}}},_afterNotificationRender:function(c){if(c.status){if(c.showBubble){j.bubble.notify(c)}j.bell.setNumber(c.newCount);this._playNotificationSound();this._updateNotificationListingPage();_lockNotificationRequest=false;if($(".navNotifications.notifications-bell").hasClass("open")){$(".navNotifications.notifications-bell").trigger("click")}}},_updateNotificationListingPage:function(){if((window.location.pathname=="/notification/list")&&(!$("#notification-list .items").has(".new-notifs-element").length)){$('<div class="col-xs-12 clearfix new-notifs-element">'+n.newNotificationsText+"</div>").prependTo($("#notification-list .items").on("click",function(){location.reload(true)}))}},_countNewNotifs:function(){var r=["navWorkstreams","navNotifications"],s=0,c;$.each(r,function(t,u){c=parseInt($("#widget-TopNav .nav-tabs ."+u+" > a").find(".notification-bubble").html());if(c>0){s+=c}});return s}};j.envelope={_envelopeCountContainer:n.envelopeContainer.find(".notification-bubble"),setCount:function(c){if(c>0){this._envelopeCountContainer.html(c).show();n.notificationMobileTopnavToggler.addClass("with-new-notification")}},removeAll:function(){this._envelopeCountContainer.html(0).fadeOut("slow");j.title.restoreTitle();if(j.notifications._countNewNotifs()==0){n.notificationMobileTopnavToggler.removeClass("with-new-notification")}}};j.bell={_notificationBubbleNumber:n.notificationContainer.find(".notification-bubble"),_notificationBubbleNumberMobile:n.notificationContainerMobile.find(".notification-bubble"),_notificationsCount:function(){return parseInt(this._notificationBubbleNumber.html())},addOne:function(){var c=this._notificationsCount()+1;this._notificationBubbleNumber.html(c).show();this._notificationBubbleNumberMobile.html(c).show();j.title.changeTitle(c);n.notificationMobileTopnavToggler.addClass("with-new-notification")},addLot:function(r){var c=this._notificationsCount()+r;this._notificationBubbleNumber.html(c).show();this._notificationBubbleNumberMobile.html(c).show();n.notificationMobileTopnavToggler.addClass("with-new-notification")},setNumber:function(c){this._notificationBubbleNumber.html(c).show();this._notificationBubbleNumberMobile.html(c).show();j.title.changeTitle(c);n.notificationMobileTopnavToggler.addClass("with-new-notification")},removeOne:function(){var c;if(this._notificationsCount()>1){c=this._notificationsCount()-1;this._notificationBubbleNumber.html(c).show();this._notificationBubbleNumberMobile.html(c).show();j.title.changeTitle(c)}else{if(this._notificationsCount()==1){this.removeAll()}}},removeAll:function(){this._notificationBubbleNumber.html(0).fadeOut("slow");this._notificationBubbleNumberMobile.html(0).fadeOut("slow");j.title.restoreTitle();if(j.notifications._countNewNotifs()==0){n.notificationMobileTopnavToggler.removeClass("with-new-notification")}}};var b=null;j.title={changeTitle:function(c){document.title="("+c+") "+window.originalTitle},restoreTitle:function(){document.title=window.originalTitle},flashTitle:function(t,u,c){if((b!=null)||(document.hasFocus())){return false}b=null;var v=$("title").html();var s;var r=0;b=setInterval(function(){if(r%2==0||r==0){$("title").html(t)}else{$("title").html(v)}r++},c);s=setTimeout(function(){clearInterval(b)},u);$(document).focusin(function(){clearInterval(b);clearTimeout(s);$("title").html(v)})},flashClear:function(){clearInterval(b)}};j.bubble={_createContainer:function(){$("body").append('<div class="'+n.notificationBubbleDivContainer+' col-xs-12 col-sm-7"></div>')},notify:function(t,s){var c=$('<div class="notify-bubble notif-level-'+t.level+'">'+t.html+"</div>");if(s){c.attr("data-id",s)}c.appendTo("."+n.notificationBubbleDivContainer).slideDown("fast");l[c.data("id")]=setTimeout(function(){j.bubbleTimeout(c,true)},(t.bubbleTimeout)?t.bubbleTimeout:n.notificationBubbleTimeout);var r=c.find(".close-btn");c.call=t;r.on("click",function(){clearTimeout(l[c.data("id")]);j.bubbleTimeout(c)})}};j.bubbleTimeout=function(r,c){r.slideUp("fast");if((typeof c=="undefined")||(c==false)){return true}if(typeof r.call=="undefined"){return true}if(r.call.role!="caller"){return true}var s={id:r.call.callId,fromElement:true};j.videoCalls._callMissed(s)};j.template={_populateTemplate:function(c,r){$.each(r,function(s,t){c=c.replace(new RegExp(s,"g"),t)});return c}};j.getStreamId=function(){var c=new URL(window.location.href);var r;if(c.searchParams){r=c.searchParams.get("id")}else{r=k("id")}return r&&r.replace(/[^\d]/gi,"")};return j};PPH.pages.Checkout=function(t){var e={actions:[],activeClass:"selected",validVoucherClass:"",invalidVoucherClass:"",beforeSubmit:function(){return true},voucherCustomValue:"CUSTOM",tooltipPosition:"top",paymentData:{},selectors:{action:".js-action-value",mainContainer:"#main-container .main-content.controller-checkout",control:".js-selection-control",partial:'.js-selection-control[data-partial="1"]',cancelCustomVoucher:".js-cancel-custom-voucher",customVoucherContainer:".js-custom-voucher-container",customVoucher:".js-custom-voucher",form:"#checkout-form",item:".js-payment-method-item",submit:"#checkout-btn",voucherControl:'.js-payment-method-item .js-selection-control[data-voucher="1"]',voucherForm:".js-voucher-form-container",voucherValidityStatus:".js-voucher-valid-status",validateVoucher:".js-validate-voucher",vouchers:".js-voucher-list",refreshInput:"select.js-refresh-order-preview, input.js-refresh-order-preview",serviceFee:".js-service-fee"},messages:{}};var h=PPH.Page($.extend(true,{},e,t)),s=h.config;var f=$(s.selectors.form),j=$(s.selectors.mainContainer),n={};h.init=function(){var c=$(document);c.on("ready",function(){n=$.fn.yiiactiveform.getSettings(s.selectors.form)});c.on("change",s.selectors.refreshInput,o);c.on("change",s.selectors.partial,o);c.on("change",s.selectors.vouchers,a);c.on("change",s.selectors.customVoucher,q);c.on("click",s.selectors.cancelCustomVoucher,p);c.on("click",s.selectors.item,m);c.on("click",s.selectors.submit,l);c.on("click","a[data-tooltip-content-selector]",b);k()};function k(){$(s.selectors.item).each(function(){var w=$(this),c=w.find(s.selectors.control);if(c.prop("checked")){w.addClass(s.activeClass);i(c)}else{w.removeClass(s.activeClass)}})}h.beforeValidate=function(){if(typeof s.beforeSubmit!=="function"){return true}return s.beforeSubmit.apply(h,[])};h.afterValidate=function(w,c){if(!w.status){return false}if(w.url&&w.url.match(/^http.*$/)){h.disableForm();window.location.href=w.url;return w.url}if(!w.view){return false}j.html(w.view);j.find(".js-pph-dropdown").pphDropdown();f=j.find(s.selectors.form);f.yiiactiveform(n);$(s.selectors.item).each(function(){var y=$(this),x=y.find(s.selectors.control);if(x.prop("checked")){i(x)}})};function l(c){b(c);g("doCheckout")}function o(x){b(x);var w=$(this),c=parseInt(w.data("voucher"),10)===1;if(c&&!w.is(":checked")){r()}g("orderPreview")}h.disableForm=function(){$(s.selectors.mainContainer).loader("open");$(s.selectors.submit).text(s.messages.wait).prop("disabled",true)};h.enableForm=function(){$(s.selectors.mainContainer).loader("close");$(s.selectors.submit).text(s.messages.checkout).prop("disabled",false)};h.getVoucherCode=function(){var c=$(s.selectors.vouchers),w=$(s.selectors.customVoucher);if(!c.length){return w.val()}return c.val()==s.voucherCustomValue?w.val():c.val()};h.focusVoucher=function(){var c=$(s.selectors.vouchers),x=$(s.selectors.customVoucher),w=[];if(!c.length){w=x}else{w=x.is(":visible")?x:c}PPH.dom.error(w,s.messages.noVoucher,{autoclose:2500,closeOnFocus:false,pos:s.tooltipPosition});return w.focus()};function i(w){if(w.length>0){var c=w[0];if(w.attr("type")=="radio"&&c.value=="wallet-pph-wallet"){$(s.selectors.serviceFee).css("visibility","hidden")}else{$(s.selectors.serviceFee).css("visibility","visible")}}}function m(B){var c=B.target?$(B.target):[];if(c.length&&(c.is(":input")||c.parents(s.selectors.partial).length)){return false}b(B);var A=$(this),w=A.is(s.selectors.item)?A:A.parents(s.selectors.item).filter(":first"),y=w.find(s.selectors.control),x=y.attr("type")=="radio",z=parseInt(y.data("voucher"),10)===1,C=y.is(":checked");if(y.prop("disabled")){return false}i(y);if(x){if(C){return false}w.siblings(s.selectors.item).each(function(E,D){var F=$(D);if(x&&F.find(s.selectors.control+'[type="radio"]').length){F.removeClass(s.activeClass)}});y.prop("checked",true)}else{if(!z){y.prop("checked",!C)}else{if(z){if(!y.is(":checked")&&h.getVoucherCode()===""){return h.focusVoucher()}y.prop("checked",!C)}}}if(y.is(":checked")){w.addClass(s.activeClass)}else{w.removeClass(s.activeClass)}y.trigger("change")}function r(){$([s.selectors.vouchers,s.selectors.customVoucher].join()).val("");$(s.selectors.voucherValidityStatus).removeClass(s.validVoucherClass).addClass(s.invalidVoucherClass);var c=$(s.selectors.vouchers);if(c.length){$(s.selectors.customVoucherContainer).hide();c.show()}}function a(x){b(x);var w=$(this),c=$(s.selectors.voucherControl);if($(this).val()==s.voucherCustomValue){return u.apply(this,[x])}c.prop("checked",(w.val()!=="")).trigger("change")}function q(x){b(x);var w=$(this),c=$(s.selectors.voucherControl);if(w.val()===""){return p.apply(this,[x])}v()}function p(w){b(w);r();var c=$(s.selectors.voucherControl);if(!c.is(":checked")&&h.getVoucherCode()===""){return false}c.prop("checked",false).trigger("change")}function v(){g("validateVoucher")}function u(c){$(s.selectors.vouchers).hide();$(s.selectors.customVoucherContainer).show().find(s.selectors.customVoucher).val("").focus();$(s.selectors.voucherValidityStatus).removeClass(s.validVoucherClass)}function b(c){if(!c){return false}c.preventDefault();c.stopPropagation()}function g(c){if(c&&$.inArray(c,s.actions)>-1){f.find(s.selectors.action).val(c)}f.submit()}return h};PPH.pages.Zero=function(b){var a={isGuest:true,currency:""};var e=PPH.Page($.extend(true,{},a,b)),f=e.config;e.init=function(){PPH.page.currency=f.currency};return e};PPH.pages.Listing=function(H){var Q={lastPushedStateId:null,filtersSelector:'input[type="hidden"][data-hook="filters"]:not([data-invalidate]), div[data-hook="filters"] select:not([data-invalidate]), div[data-hook="filters"] input[type="checkbox"]:not([data-invalidate]), div[data-hook="filters"] input[type="radio"]:not([data-invalidate]), div[data-hook="filters"] input[type="hidden"]:not([data-invalidate])',columns:3,enableAutoComplete:false,autoCompleteAjaxUrl:"",autoCompleteOptions:{},locationComboConfigs:[],pageViewTypeParam:"",afterUpdateCallback:function(){},getSearchUrl:function(c){},enableFixedToolbox:false,windowResizeTimeout:50,windowScrollTimeout:50,isTouch:false,supportsHistory:false,submitSearchClass:".js-submit-search",featuredSeoContent:"#featured-seo-content-wrapper"};var F=PPH.Page($.extend(true,{},Q,H)),P=F.config,E=["abt","utm_expid","ref","covers","top","cta"],S=$(window),b=S.width(),k=$(document),y=$(".js-keep-inview"),e=false,l=false,A=300,q=false,D=1.32,p=null,s=null,I=null,a=".tag-image img, .js-listing-tile .image-container img, .has-lazy-img img, .hourlie-tile .image-container img, .listing-row .row-image-container img",N=function J(){},v=null;F.init=function(){v=new N();F.currentState=v;if(typeof History===undefined){History=window.history}if(History.getCurrentIndex===undefined||typeof History.getCurrentIndex!=="function"){History.getCurrentIndex=function(){return History.savedStates.length>1?(History.savedStates.length-1):0}}if(History.Adapter!==undefined){History.Adapter.bind(window,"statechange",v.onStateChangeCallback)}P.pageTitle=$("title").text();P.supportsHistory=!!(window.history&&history.pushState);P.isTouch=document.createTouch;k.on("change",P.filtersSelector,function(){var T=this,c=arguments;setTimeout(function(){F._updateFilters.apply(T,c)},50)});h();r();L();z();g();i();m();F.resizeTagLabels();l=K();if(t()){$("html").addClass("is-ios")}if(x()){$(P.searchBoxId).one("typeahead:initialized",function(){$(this).off("typeahead:initialized").typeahead("destroy")})}$(document).on("submit","#hourlieLocationForm",function(T){T.preventDefault();var c=$(this).serializeArray().reduce(function(V,U){V[U.name]=U.value;return V},{});F.currentState.pushState(c)})};function t(){var c=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];if(navigator.platform!=null){if($.inArray(navigator.platform,c)>=0){return true}}return false}F.updateFeaturedSeoContent=function(X){var aa=$(".heading-container--featured-seo");var Y=$(".listings-container--featured-seo");var V="heading__featured-seo-excerpt";var ag="featured-seo__title";var W="featured-seo__content";var Z=aa.find("."+V);var ab=Z.length>0?true:false;if(X.featuredSeoContent){var ae=X.featuredSeoContent.excerpt;var af="";var U=X.featuredSeoContent.title_tag;if(X.featuredSeoContent.hasOwnProperty("h1_title")){var ae=X.featuredSeoContent.h1_title}if(X.featuredSeoContent.hasOwnProperty("h2_title")){var af=X.featuredSeoContent.h2_title}var T=X.featuredSeoContent.content;var ac=Y.find("."+ag);var ad=Y.find("."+W);O(X.featuredSeoContent);if(ab){Z.text(ae);ac.text(af);ad.text(T);$("title").text(U+" - PeoplePerHour")}else{$("title").text(U+" - PeoplePerHour");aa.find("#job-listing-heading").find('[data-id="page-heading"]').html(ae+" &mdash;")}}else{if(ab&&$("#hourlies-listing-heading").length>0){$("."+V).text("");if(X.pageTitle&&X.pageTitle!=""&&!U){$("title").text(X.pageTitle)}}else{if(ab){$("."+V).remove();$(".featured-seo-wrapper").remove();$("title").text("")}}var c=$(Q.featuredSeoContent);c.html("")}};F.updateListView=function(c){if(P.supportsHistory){$.fn.yiiListView.settings[P.listViewId].url=History.getState().cleanUrl}c=c||{};$.fn.yiiListView.update(P.listViewId,{data:c})};F.beforeAjaxUpdate=function(){var c=x()?{position:"fixed",top:"15%"}:{};n("results").loader("open",{zIndex:10,loaderStyle:c,smartPositioning:true});q=false;e=true;$(document.body).animate({scrollTop:0},"slow");f()};F.afterAjaxUpdate=function(W,U){e=false;if($("select:visible").length){h()}z();g();var T=$("#"+P.id,["<div>",U,"</div>"].join());if(!T.length){return false}var c=T.data("page-url"),V=T.data("page-title");P.pageTitle=V;P.autoCompleteAjaxUrl=T.data("autocomplete-url");$(".pph-switch").pphSwitch();if(!P.isTouch&&P.enableAutoComplete){r()}i();v.updateState({},V,c);F.resizeTagLabels();F.initLocationCombo();y=$(".js-keep-inview");$(document).trigger("listing:newData",U);if(typeof P.afterUpdateCallback==="function"){P.afterUpdateCallback.apply(F,[])}m()};F.ajaxUpdateError=function(U,W,T,c,V){n("results").loader("close");return false};F.replaceAutoCompleteUrl=function(c,T){var U=new RegExp("%QUERY","g");return P.autoCompleteAjaxUrl.replace(U,T)};F.suggestionSelected=function(U,T){if(F.pathControllerName("services")){$("#hourlies-listing-search-form").submit();return true}if(T.url===undefined){return false}if(!P.supportsHistory){var X={},c={};if(window.location.search){X=$.deparam(window.location.search.replace(/\?/,""))}for(var V in E){var W=E[V];if(X[W]!==undefined){c[W]=X[W]}}window.location.href=T.url+(T.url.indexOf("?")!==-1?"&":"?")+$.param(c);return true}v.pushState({keyword:T.text},P.pageTitle,T.url)};F._updateFilters=function(c,T){var ae=$(this),V={};if(ae.data("multiple-values")!==undefined){var ad=$.map(ae.data("multiple-values").split(","),function(af){return $.trim(af)});if(ad.length){for(var W in ad){var ac=ad[W],U=ae.find("option:selected"),ab=U.length?U.data(ac):ae.data(ac);V[ac]=ab!==undefined?ab:null}}return v.pushState(V)}if(ae.hasClass("languages-search")){var Z=ae.val().toString();V[ae.attr("name")]=Z;return v.pushState(V)}var X=ae.val();if(ae.is(":checkbox")){var aa=$('input[type="checkbox"][name="'+ae.attr("name")+'"]').filter(":checked");X=null;if(aa.length){var Y=[];$.each(aa,function(ag,af){Y.push(af.value)});V[ae.attr("name")]=Y.join(",");return v.pushState(V)}}V[ae.attr("name")]=X;if(T){V._noPush=true}return v.pushState(V)};function m(){var c=document.getElementById("price-range-slider");if(c!==null){var Y=$(".priceRangeSlider");var T=$('input[data-hook="price-range-slider-input"]',Y);var U=[0,1000];var V=Y.data("currency");var aa="+";var X=T.map(function(ab){return $(this).val()?Number($(this).val()):U[ab]}).get();var Z=wNumb({prefix:V,decimals:0,edit:function(ac,ab){if(ab==U[1]){return ac+aa}else{return ac}}});var W={min:[0,10],"10%":[100,50],"50%":[500,100],max:1000};if(c.noUiSlider&&c.noUiSlider.destroy){c.noUiSlider.destroy()}noUiSlider.create(c,{start:X,connect:true,tooltips:true,format:Z,range:W}).on("change",function(ad,ae,af,ac,ab){T.each(function(ag){if(U.indexOf(af[ag])!==-1){$(this).val("")}else{$(this).val(af[ag])}})})}}F._initPriceRangeSlider=m;function r(){if(!P.enableAutoComplete){return false}var X=$(P.searchBoxId);if(x()){if(X.length&&X.data("ttTypeahead")!==undefined){X.typeahead("destroy")}return false}if(X.length&&X.data("ttTypeahead")!==undefined){return false}var T=P.autoCompleteOptions.suggestionEngineOptions;T=$.extend(true,{},T,{remote:P.autoCompleteAjaxUrl,datumTokenizer:function(Y){return Bloodhound.tokenizers.whitespace(Y.value)},queryTokenizer:Bloodhound.tokenizers.whitespace});I=new Bloodhound(T);I.initialize();var W=P.autoCompleteOptions.typeaheadOptions,c=P.autoCompleteOptions.datasetOptions;c.source=I.ttAdapter();if(c.templates!==undefined){for(var V in c.templates){var U=c.templates[V];if(typeof U==="string"){c.templates[V]=TemplateEngine.compile(U).render}}}X.typeahead(W,c)}function h(){var T=$.merge(n("filters").find("select").not(".js-select2-tags"),$("select.js-pph-dropdown"));if(!T.length){return false}var c=$("#hourlies-listing-mobile-filters, #job-listing-mobile-filters").find("select");if(c.length>0){T.push(c)}$.each(T,function(V,W){var U=$(W);opts=U.find("option").length>10?{scrollbar:true}:{};U.pphDropdown(opts)});$lists=$(".pph-dropdown-list.PPHD-list");if($lists.length){$lists.css({zIndex:3})}}F.initDropdowns=function(){return h()};F.addLocationComboConfig=function(c){P.locationComboConfigs.push(c)};F.initLocationCombo=function(){if(!P.locationComboConfigs.length){return}$.each(P.locationComboConfigs,function(T,c){F.modules.LocationCombo=PPH.modules.LocationCombo(c);F.modules.LocationCombo.page=F;F.modules.LocationCombo.id="LocationCombo";F.modules.LocationCombo.init()})};function j(W,U){U=U||[];var V=$.merge(["stateUrl","_index","_noPush"],U),c={};for(var T in W){if($.inArray(T,V)>=0){continue}c[T]=W[T]}return c}function o(){var W=$(".js-listing-tile");if(W.length===0){return false}var V=W.get(),c="auto";W.css({height:"auto"});for(var U in V){var T=W.eq(U);if(T.find(".js-pusher:visible").length){continue}c=T.outerHeight();if(c>0&&!isNaN(c)){c=[c,"px"].join("");break}}W.css({height:c})}function f(){$("#main-container").removeClass("offcanvas-active");$("html").css("overflow-x","auto");l=K();z();o();$(a).each(u);i();if(P.enableAutoComplete){r()}}F._replaceSpace=function(c){if(window.location.pathname.includes("freelance")||F.pathControllerName("services")||window.location.pathname.includes("hourlies")){c=c.replace(/\s+/g," ").trim();return c.split(" ").join("+")}return c};F.pathControllerName=function(T){var c=window.location.pathname.split("/");if(c.length>1&&c[1]===T){return true}return false};function L(){var c=["#",P.id,"-listview .tag-tile a.category-link, #",P.id,"-tags a, #",P.id,"-breadcrumbs a, .search-container .category-tree a, .search-container .js-tag-item a, #listing-sidebar .category-tree a, #listing-sidebar .js-tag-item a, .switch-view-container a"].join("");if(P.supportsHistory){k.on("click",c,function(W){if(!P.supportsHistory){return true}W.preventDefault();v.pushState({},P.pageTitle,this.href)})}var V='.twitter-typeahead input[type="text"]:not(.tt-hint)';k.on("focusin",V,function(){$(this).parents(".input-group:first").addClass("focused")}).on("focusout",V,function(){$(this).parents(".input-group:first").removeClass("focused")});var T='#job-listing-search-form .search-text-wrapper input[type="text"]';k.on("focusin",T,function(){$(this).parents(".input-group:first").addClass("focused")}).on("focusout",T,function(){$(this).parents(".input-group:first").removeClass("focused")});$(document).on("listingState:resetFilters",function(X){var W=P.supportsHistory?History.getState().cleanUrl:window.location.href;v.pushState({},P.pageTitle,W,preserved)});$(document).on("listingState:push",function(W,X){v.pushState(X,P.pageTitle)});$(document).on("listingState:updateSearchTerm",function(X,W){var Z={};var Y=P.supportsHistory?History.getState().cleanUrl:window.location.href;Z.keyword=W.length?W:null;if(typeof P.getSearchUrl==="function"){Y=P.getSearchUrl.apply(this,[W])}Y=F._replaceSpace(Y);v.pushState(Z,P.pageTitle,Y)});var U=["#",P.id,"-search-form"].join("");k.on("submit",U,P.submitSearchClass,function(ad){if(!P.supportsHistory){return true}ad.preventDefault();ad.stopPropagation();var aa=$(this),ac={},Z="",ab=P.supportsHistory?History.getState().cleanUrl:window.location.href;if(aa.find('input[data-hook="search-url"]').length){ab=aa.find('input[data-hook="search-url"]').data("url")}var W=$(P.searchBoxId);if(W.length){Z=$.trim(W.val()).replace(/[\\?!@"'$%^&*();/]/gi,"");Z=Z=="-"?"":Z;ac[W.attr("name")]=Z}var Y=w();if(typeof P.getSearchUrl==="function"){ab=P.getSearchUrl.apply(this,[Z])}var X=$.merge(["sort"],E);if(!ab.indexOf(Y)){ab=ab+Y}ab=F._replaceSpace(ab);v.pushState(ac,P.pageTitle,ab,X);W.typeahead("close")});k.on("click",".reset-filters",function(Z){if(!P.supportsHistory){return true}Z.preventDefault();var Y=$(this);var X={};var W=Y.data("filters").split("|");$.each(W,function(ab,ac){X[ac]=null;var aa=$('[name="'+ac+'"]');if((aa).is(":text")){aa.val("")}else{aa.removeAttr("checked").removeAttr("selected")}});v.pushState(X,P.pageTitle)});k.on("click",".js-reset-form",function(Y){if(!P.supportsHistory){return true}Y.preventDefault();var X=$(this);X.hide();var W=X.attr("href")||X.data("reset-url");v.pushState({},P.pageTitle,W)});S.on("resize",function(){if(b!=S.width()){if(p!==null){clearTimeout(p)}p=setTimeout(f,P.windowResizeTimeout)}if(P.enableFixedToolbox){y.removeClass("fixed-toolbox")}}).on("scroll",function(W){if(P.enableFixedToolbox&&l!==false&&!isNaN(l)){if(window.scrollY>=l){y.addClass("fixed-toolbox")}else{y.removeClass("fixed-toolbox")}}if(s!==null){clearTimeout(s)}if(e||q){return false}s=setTimeout(g,P.windowScrollTimeout)});if(P.enableAutoComplete){k.on("typeahead:selected typeahead:autocompleted",P.searchBoxId,F.suggestionSelected)}}function n(c){return $(["#",P.id,"-",c].join(""))}function w(){var c="";$.each(E,function(T,V){var U=PPH.getUrlParameter(V,false);if(U){c+=V+"="+U+"&"}});if(c&&c!==""){c="?"+c.slice(0,-1)}return c}function i(){if(typeof window.cropTitles==="function"){window.cropTitles()}}function M(aa,ab){if(ab===undefined){ab=$.noop}var Y=typeof aa==="string"?$(aa):aa,c=screen!==undefined&&screen.availHeight?screen.availHeight:S.innerHeight(),Z=c+S.scrollTop()+A;Y=Y.filter("[data-src]");if(!e&&Y.length===0){q=true;return false}Y=Y.get();for(var W in Y){var X=Y[W],T=$(X),U=T.data("src"),V=T.offset();if(V&&V.top&&V.top>Z){break}T.attr("src",U);T.load(ab);T.removeAttr("data-src").removeData("src")}}function u(){var T=$(this),W=T.parents(".js-scaled:first"),V=W.height();if(!W.length||!V){return false}var U=0,c=Math.ceil(T.width()/D);if(c>V){U=["-",Math.floor((c-V)/2),"px"].join("")}T.css({marginTop:U})}function z(){if(x()){return false}n("results").find(".items-results .js-scaled").each(function(T,c){$container=$(this);$parentContainer=$container.parents(".js-scaled-container:first"),paddingBottom=parseInt($parentContainer.css("paddingBottom"),10),containerMinHeight=parseInt($container.css("minHeight"),10),containerHeight=Math.ceil($container.width()/D)-(isNaN(paddingBottom)?0:paddingBottom);if(!isNaN(containerMinHeight)&&containerHeight<containerMinHeight){containerHeight=containerMinHeight}if(containerHeight<=0){return}$container.height(containerHeight)})}function g(){M(a,u)}function x(){return S.innerWidth()<=768||$(".drop-filters-trigger").is(":visible")}function K(){if(!y.length||!y.is(":visible")||!y.offset()){return false}return y.offset().top}function C(c){if(typeof gtmTrackPageview=="undefined"){return false}if(c===undefined){c=window.location.pathname+window.location.search}var V=c.indexOf("?")===-1?"?":"&",U={type:P.pageViewTypeParam};var T=($(P.searchBoxId).val()).replace(/[\\?!@"'$%^&*();/]/gi,"");if(T&&T!==""){U[P.searchModelKeywordAttribute]=T}gtmTrackPageview(c)}function O(Y){var Z=$(Q.featuredSeoContent);Z.html("");if(Y!==null&&typeof Y!=="undefined"){var X={};var c=1;for(var W in Y){if(Y.hasOwnProperty(W)){if(W==="question_"+c){if(Y[W]!==""&&Y[W]!==null){X[Y[W]]=Y["answer_"+c];c++}}}}if((typeof X!=="undefined"&&Object.keys(X).length>0)&&(Y.h2_title!==null&&Y.h2_title!==""&&Y.h2_title.replace(/\s/g,"").length)){if(Y.h2_title!==""&&Y.h2_title.replace(/\s/g,"").length){var T=$('<h2 class="text-center">'+Y.h2_title+"</h2>")}var V=$('<div class="featured-seo-content-container col-xs-12"></div>');var U=$('<ul class="list"></ul>');$.each(X,function(aa,ab){U.append('<li class="list-item"><div class="list-content"><h3>'+aa+"</h3><p>"+ab+"</p></div></li>")});$row=$('<div class="row--nested"></div>');V.append(T).append(U);$row.append(V);Z.html($row)}}}N.prototype.pushState=function B(W,aa,c,Z){Z=Z||[];for(var X in E){if($.inArray(E[X],Z)===-1){Z.push(E[X])}}if(aa===undefined){aa=P.pageTitle}_urlRegexp=new RegExp("^(https?://"+window.location.hostname+")?([^?]+)(\\?.*)?");if(c===undefined){c=window.location.href}var ac=c.replace(_urlRegexp,"$3")||"";c=c.replace(_urlRegexp,"$2");var ah={},U={};if(ac!==""){ah=$.deparam(ac.replace(/^\?(.*)$/gi,"$1"))}var af=window.location.href;if(F.pathControllerName("services")){af=c}var ae=$.deparam(af.replace(/^\?(.*)$/gi,"$1"));for(var ad in W){var ab=W[ad];if((ab===""||ab===null)&&ah[ad]===undefined){continue}else{if((ab===""||ab===null)&&ah[ad]!==undefined){delete ah[ad];continue}}U[ad]=ab}if(Z&&Z.length){var ag={};for(var X in Z){var V=Z[X];if(ah[V]!==undefined){ag[V]=ah[V]}else{if(ae[V]!==undefined){ag[V]=ae[V]}}}ah=$.extend(true,{},ah,ag)}var T=$.extend(true,{},ah,U),Y=j(T,[P.searchModelKeywordAttribute]);if(Y.page!==undefined){delete Y.page}if(!$.isEmptyObject(Y)){c+="?"+$.param(Y)}if(W.stateUrl===undefined){W.stateUrl=c}if(!P.supportsHistory){window.location.href=c;return}C(c);$(document).trigger("listingState:changed",{data:W,title:aa,url:c,preserve:Z});return History.pushState(W,aa,c)};N.prototype.updateState=function G(U,V,c){if(!P.supportsHistory){return false}var T=History.getState();if(U!==undefined){U=$.extend(true,{},T.data,U)}if(c===undefined){c=(U.stateUrl===undefined?window.location.pathname:U.stateUrl)}P.pageTitle=V;U._index=History.getCurrentIndex();History.replaceState(U,V,c)};N.prototype.onStateChangeCallback=function R(){if(!P.supportsHistory){return false}var T=History.getState(),c=History.getCurrentIndex(),U=(T.data._index==(c-1));if(U||T.data._noPush){return}F.updateListView(T.data)};F.resizeTagLabels=function(){if($(".js-tag-item").length===0){return false}var U=$(".js-tag-item:first").width(),T=Math.ceil(U*0.5),W=U;var c=null,V=null;$(".js-tag-item .js-tag-count").each(function(){var X=parseInt(this.innerHTML.replace(/(\.|\,)/gi,""),10);if(isNaN(X)){X=0}if(c===null||X<c){c=X}if(V===null||X>=V){V=X}});$(".js-tag-item .js-tag-label").each(function(){var ad=$(this),Y=ad.next(".js-tag-count"),ac=Y.html().replace(/(\.|\,)/gi,"");var aa=parseInt(ac,10);if(isNaN(aa)){aa=0}var ab=(aa-c)/(V-c);var Z=ab*(W-T)+T;var X=(Z/W)*100;if(Z>(ad.outerWidth()+parseInt(ad.css("padding-left"),10))){ad.css({width:X+"%"})}})};return F};PPH.modules.Star=function(a){var i={url:"",actionClass:".action-entity-star",idVar:"",responseVar:"",activeVar:"",disabled:false,afterAjax:"",beforeAjax:"",type:""};var f=PPH.Module($.extend({},i,a));var j=f.config;function k(l){var c=$.param.fragment(location.href,{Star:{selector:l.attr("id")}});if(PPH.page.modules!==undefined&&PPH.page.modules.LoginSignup!==undefined){PPH.page.modules.LoginSignup.open()}$(".loginSignup input[name=next]").val(c)}function b(l){var c={};c[j.idVar]=l.data("id");if(j.activeVar.length>0){c[j.activeVar]=(l.hasClass("active"))?0:1}return c}function g(l){if(l.hasClass("disabled")){return null}var c=b(l);var m=l.hasClass("active");if(m){l.removeClass("active")}else{l.addClass("active")}if(j.beforeAjax.length>0){j.beforeAjax(l)}$.ajax({url:l.data("url")||j.url,data:$.extend(PPH.getCsrf(),c),type:"POST",success:function(r){if(typeof r[j.responseVar]=="undefined"){throw'Response has no variable with name "'+j.responseVar+'"'}var s=$('[data-url="'+l.data("url")+'"]').parent(".widget-star-item"),o;if(s.length>0){o=s.find("span.count-stars");l=s.find("a")}else{o=l.next("span.count-stars")}if(j.streamListView!=null&&j.streamListView){if(r[j.responseVar]&&!m){l.addClass("active fa-star").removeClass("fa-star-o");if(typeof PPH.page.modules.ExtRequester!="undefined"){var q=PPH.page.modules.ExtRequester.config.prefix;var p=l.parent("[data-"+q+"-active]");if(p.length>0){PPH.page.modules.ExtRequester.action(p)}}if(o){o.html(parseInt(o.html())+1)}}else{if(!r[j.responseVar]&&m){l.addClass("fa-star-o").removeClass("active fa-star");if(o){o.html(parseInt(o.html())-1)}}}}else{if(j.streamListView!=null&&!j.streamListView){if(r[j.responseVar]&&!m){l.addClass("active fa-heart").removeClass("fa-heart-o");if(typeof PPH.page.modules.ExtRequester!="undefined"){var q=PPH.page.modules.ExtRequester.config.prefix;var p=l.parent("[data-"+q+"-active]");if(p.length>0){PPH.page.modules.ExtRequester.action(p)}}if(o){o.html(parseInt(o.html())+1)}}else{if(!r[j.responseVar]&&m){l.addClass("fa-heart-o").removeClass("active fa-heart");if(o){o.html(parseInt(o.html())-1)}}}}}var n=(r[j.responseVar])?l.data("labelRemoveFromFav"):l.data("labelAddToFav");if(l.data("hasTooltip")){l.data("title",n);PPH.tip(l);l.tooltip("hide")}else{l.html($("<span></span>").text(n))}if(j.afterAjax.length>0){j.afterAjax(l,r)}f.trigger("starred",r)},error:function(n){alert("An Error occured while adding/removing from Favourites")}})}function e(c){if($(c).hasClass("active")){PPH.info("You have already &hearts; this "+$(c).attr("data-type"))}else{$(c).trigger("click")}$.bbq.removeState("Star")}function h(c){c.preventDefault();if($(this).data("isguest")){k($(this))}else{g($(this))}}f.init=function(){$(document).on("click",j.actionClass,h)};f.onHashChange=function(){if(f.getState("Star")==null){return}var c=$("#"+f.getState("Star").selector);if(c.length){e(c);return}$(document).on("ajaxDomReady",function(){c=$("#"+f.getState("Star").selector);e(c)})};return f};PPH.modules.MemberPrizes=function(b){var a={allPrizesUrl:"/member/prizes",dialogOptions:{},listViewOptions:{},selectors:{popup:"",popupTrigger:""},translations:{errorMessage:"Something went wrong"}};var e=PPH.Module($.extend({},a,b));var f=e.config;e.init=function(){if(PPH.modules.MemberPrizes.initialized){return true}PPH.modules.MemberPrizes.initialized=true;$(document).on("click",f.selectors.popupTrigger,e.showDialog)};e.showDialog=function(g){g.preventDefault();var c=$(this);if(c.hasClass("disabled")){return false}c.addClass("disabled");$.ajax({url:f.allPrizesUrl,dataType:"html",data:{id:c.data("id")},success:function(i){if(i===""){return PPH.error(f.translations.errorMessage)}var k=$("<div />");k.html(i);var j=$.extend(true,f.dialogOptions,{close:function(){k.dialog("destroy").remove()}});var h=k.find("div[data-title]:first");if(h.length){j.title=h.data("title")}k.dialog(j).dialog("open");$(f.selectors.popup).yiiListView(f.listViewOptions);c.removeClass("disabled")}})};return e};PPH.modules.VerifyMemberDetails=function(g){var m={emailUrl:"/member/activateEmail",publishHourlieUrl:"/hourlie/toggleActive",dialogOptions:{},emailVerify:{},completeProfile:{},jobDone:{}};var k=PPH.Module($.extend({},m,g));var n=k.config,i='[data-hook="verify-member-details-popup"]',p='[data-hook="verify-member-details-profile"]',l='[data-hook="verify-member-details-email"]',q='[data-hook="verify-member-details-ajax-action"]',e='[data-hook="verify-member-details-publish-hourlie"]',j='[data-hook="verify-member-details-step"]',h='[data-hook="verify-member-details-activate"]';function b(c){if(!c.hasClass("disabled")){c.addClass("disabled").html("sending");$.ajax({url:n.emailUrl,type:"GET",data:{},success:function(s){c.html(c.data("label"));if(s.success){if(typeof n.emailVerify.success!="undefined"){PPH.success(n.emailVerify.success)}else{c.removeClass("disabled")}}else{c.removeClass("disabled");if(typeof n.emailVerify.error!="undefined"){PPH.error(n.emailVerify.error)}}}})}else{if(typeof n.emailVerify.warning!="undefined"){PPH.warning(n.emailVerify.warning)}}}function a(c){c.addClass("disabled");$.ajax({url:n.publishHourlieUrl,type:"GET",data:{id:c.data("hourlie-id"),action:"resume"},success:function(s){c.removeClass("disabled");if(typeof s.passedVerification!="undefined"){PPH.error(s.message);o()}else{location.reload()}}})}function r(c){$(f($(this))).modal("show");o()}function f(u){var c=$(".js-verify-member-details-popup").parents(".modal.in:first");if(c.length){return c}var t=(u.data("dialog-id")!==undefined?("#"+u.data("dialog-id")):i),s=$(t).clone(),v=bootbox.dialog($.extend(true,{},n.dialogOptions,{className:"verify-member-details-pop-up js-verify-member-details-popup",keyboard:true,message:s.removeAttr("style")}));return v}function o(){var c=1;var s=$(i+" "+j+":visible");if(s.length>0){s.each(function(){$(this).html(c+".");c++})}}k.init=function(){k.bind("openVerifyMemberDetails",r);$(document).on("click",h,function(c){c.preventDefault();$(f($(this))).modal("show")});$(document).on("click",l+" a",function(c){c.preventDefault();b($(this))});$(document).on("click",e,function(c){c.preventDefault();a($(this))})};return k};PPH.modules.UpdateMemberStatus=function(b){var a={};var e=PPH.Module($.extend({},a,b));var g=e.config;var f="textarea[data-hook=new-status]";e.init=function(){$('a[data-hook="update-member-status"]').on("click",function(c){c.preventDefault();var h=$(this).attr("title");$.ajax({url:$(this).attr("href"),success:function(i){var j=$("<div></div>").html(i),k=j.find("form");bootbox.dialog({title:h,message:j,buttons:{success:{label:"Save",className:"call-to-action tall ",callback:function(m){var l=$(m.target);l.attr("disabled","disabled").text("Saving...");$.ajax({url:k.attr("action"),type:k.attr("method"),data:k.serialize(),success:function(n){if(typeof n.success!="undefined"){e.page.trigger("update-member-status",n.text_status);bootbox.hideAll()}else{if(typeof n.msg_text!="undefined"){PPH.error(n.msg_text[0])}}}});return false}}}}).on("shown.bs.modal",function(){$(f).on("keyup keydown",function(){var m=$(this).val();var l=$(this).attr("size");if(m.length>=l){$(this).val(m.substring(0,l))}})})}})})};return e};PPH.modules.Report=function(e){var a={};var f=PPH.Module($.extend({},a,e));var g=f.config;f.init=function(){$(document).on("click",'button[data-hook="report-violation-submit"]',b);$(document).on("click",'a[data-hook="report-item"]',function(k){k.preventDefault();if($(this).data("loading")===true){return false}var i=$(this).data("selected-option");var h=$(this).data("reference_model");var j=$(this).data("reference_id");var c=$(this);c.data("loading",true);var l="";if(typeof c.attr("title")!="undefined"&&c.attr("title")!==""){l=c.attr("title")}else{l="Send your feedback"}c.popover("hide");$.ajax({data:$.extend(PPH.getCsrf(),{reference_model:h,reference_id:j,referenceUrl:window.location.href}),type:"POST",url:$(this).attr("href"),success:function(o){c.data("loading",false);var n=$('<div id="error-report-dialog"></div>').html(o),p=n.find("form");var m=bootbox.dialog({title:l,backdrop:true,show:false,keyboard:true,message:n}).on("show.bs.modal",function(){n.find("input[type='submit']").hide();n.find(".js-button-container").show();if(!i){return}var q=p.find("select");q.val(i)}).on("hide.bs.modal",function(){$(".tooltip").remove()});m.modal("show")}})})};function b(k){if(k){k.preventDefault()}PPH.dom.error($(this),"close");var i=$("div#error-report-dialog"),j=$("form#error-report-form"),c=false,m=j.find("select"),h=j.find('input[type="radio"][name="ViolationReport[reason]"]'),l=j.find("textarea");if(m.val()===""){PPH.dom.error(m,m.data("validation-message"),{pos:"bottom",container:j});m.on("change",function(){PPH.dom.error(m,"close")});c=true}if(h&&!h.is(":checked")){PPH.dom.error(h.last().next(),h.eq(0).data("validation-message"),{pos:"bottom",zIndex:9999});h.siblings("label").on("click",function(){PPH.dom.error(h.last().next(),"close")});c=true}if($("input:radio[value='Other']").is(":checked")&&l.val()===""){PPH.dom.error(l,l.data("validation-message"),{pos:"bottom",zIndex:9999});l.on("focus",function(){PPH.dom.error(l,"close")});c=true}if(c){return false}$.ajax({url:j.attr("action"),type:j.attr("method"),data:j.serialize(),success:function(n){i.html(n);j=i.find("form");if(i.find("input[type='submit']").length){i.find("input[type='submit']").hide()}if($('div[data-hook="success"]').length){PPH.success($('div[data-hook="success"]').html());i.parents(".modal:first").modal("hide")}}})}return f};PPH.pages.MemberProfile=function(r){var b={allowedHashbangs:["reviews","purchases","endorsements"],showfeedback:true,activityHook:""};var e=PPH.Page($.extend(true,{},b,r));var o=e.config;var l='a[data-hook="stats-button"]';var f='div[data-hook="stats-tooltip"]';var s='a[data-hook="verify-email"]';var k="#verify-email";var q='a[data-hook="send-verify-email"]';var n="section.view-profile-right .summary";var i='a[data-hook="aboutMe-button"]';var p="#read-more-about-me";var g='q[data-hook="member-status"]';var j='a[data-hook="report-item"]';var m="input.activity-type";var a=".action-entity-star";e.init=function(){u();$('#members-widget-hourlies-portfolio a[data-toggle="tab"]').on("show.bs.tab",function(w){var v=$(this).attr("href");location.hash=v});$('.member-activity-tabs a[data-toggle="tab"]').on("show.bs.tab",function(x){var w=$("#activity-listing div.tab-content>.active").height();var v=$(this).attr("href");$(v).height(w);location.hash=v});$('.member-activity-tabs a[data-toggle="tab"]').on("shown.bs.tab",function(w){var v=$(this).attr("href");$(v).height("100%");$.fn.yiiListView.update("activity-list",{data:{activityType:$(this).attr("href").substr(1)}})});$("#activity-listing-accordion").on("show.bs.collapse show.bs.tab",".panel-collapse, a[data-toggle='tab']",function(v){$.fn.yiiListView.update("activity-list",{data:{activityType:$(this).attr("id").replace("-collapse","")}})});$(".js-open-video").on("click",function(x){var w=$(this),v=$("#video-pitch-player");if(!v.length){return false}v.modal("show")});$("#video-pitch-player").on("show.bs.modal",function(){var v=$(this).find("iframe");v.addClass("profile-video-loading").attr("src",v.data("src"));v.load(function(){v.removeClass("profile-video-loading")})}).on("hidden.bs.modal",function(){var v=$(this).find("iframe");v.removeAttr("src")});$(l).on("click",function(v){var w=$(this);v.preventDefault();if(w.hasClass("active")){$(l).tooltip("hide")}else{_statsTooltip($(l),$(f).html());w.addClass("active")}});$('[data-hook="certificate-tip"]').each(function(){$(this).on("click",function(v){v.preventDefault()});PPH.dom.help($(this),$("#"+$(this).data("id"),$('[data-hook="certificate-list"]')),{show:false,pos:"left",trigger:"hover"})});$('[data-hook="certificate-toggle"]').on("click",function(w){var v=$(this);w.preventDefault();$.get($(this).attr("href"),{},function(x){if(x.result){v.html(x.html)}})});e.bind("update-member-status",function(v){if($('.profile-completeness a[data-hook="completeness-member-status"]').length>0){window.location.reload()}$(g).html(v);if(v!=""){$(g).removeClass("hide");$('a[data-hook="update-member-status"]').html($(g).data("label-update")).removeClass("set-status")}else{$(g).addClass("hide");$('a[data-hook="update-member-status"]').html($(g).data("label-empty")).addClass("set-status")}});if(t()){$(a).removeClass("js-tooltip").tooltip("destroy")}$(".activity .project-list-item").on("mouseover",function(){$(this).find(".pie").removeClass("grey").addClass("green")}).on("mouseout",function(){$(this).find(".pie").removeClass("green").addClass("grey")});var c="#my-hourlies-collapse .js-listing-tile .image-container img[data-src], .has-lazy-img img";$(c).each(function(){var v=$(this);v.attr("src",v.data("src")).removeData("src")});if(o.showfeedback){h()}e.bind("showfeedback",h)};function u(){var c=window.location.href;var x=new RegExp("#(.+)");var w=c.match(x);var v={portfolio:"portfolio",offers:"offers",reviews:"reviews",purchases:"purchases",endorsements:"endorsements"};if(null!==w&&typeof undefined!==w[1]&&v.hasOwnProperty(w[1])){$('a[href="#'+v[w[1]]+'"]').tab("show")}}function t(){return"ontouchstart" in window||"onmsgesturechange" in window}function h(){var c=(o.activityHook.length)?'[data-hook="'+o.activityHook+'"]':"body";$(c).off("click.showmore").on("click.showmore",'[data-hook="feedbackPager"] a',function(x){x.preventDefault();var v=$(this),w=v.closest(".timeline").attr("id");v.html("Loading...");$.fn.yiiListView.settings[w]={loadingClass:"loading",ajaxUpdate:[w]};$.fn.yiiListView.update(w,{url:v.attr("href"),success:function(D,A){var C=$.fn.yiiListView.settings[w];d="<div>"+D+"</div>";$.each(C.ajaxUpdate,function(G,F){var I="#"+F,H=$(I+" .items-container",d).data("page");$(I+" .items-container").append($(I+" .items",d).attr("data-page",H))});var E="#"+w,z=$(E),y=$(E+"-pager"),B=y.height();y.replaceWith($(E+"-pager",d));if(C.afterAjaxUpdate!=undefined){C.afterAjaxUpdate(w,D)}}});return false})}return e};!function(b){var a=function(e,c){this.options=c;this.$tabs=b(e);this._accordionVisible=false;this._initAccordion();this._checkStateOnResize();this.checkState()};a.DEFAULTS={accordionClass:"visible-xs",tabsClass:"hidden-xs",accordionTemplate:function(f,c,g,e){return'<div class="panel panel-default">   <div class="panel-heading">      <h4 class="panel-title">        <a class="'+(e?"":"collapsed")+'" data-toggle="collapse" data-parent="#'+g+'" href="#'+c+'">           '+f+'        </a>      </h4>   </div>   <div id="'+c+'" class="panel-collapse collapse '+(e?"in":"")+'">       <div class="panel-body js-tabcollapse-panel-body">       </div>   </div></div>'}};a.prototype.checkState=function(){if(this.$tabs.is(":visible")&&this._accordionVisible){this.showTabs();this._accordionVisible=false}else{if(this.$accordion.is(":visible")&&!this._accordionVisible){this.showAccordion();this._accordionVisible=true}}};a.prototype.showTabs=function(){this.$tabs.trigger(b.Event("show-tabs.bs.tabcollapse"));var c=this.$accordion.find(".js-tabcollapse-panel-body");c.each(function(){var f=b(this),e=f.data("bs.tabcollapse.tabpane");e.append(f.children("*").detach())});this.$accordion.html("");this.$tabs.trigger(b.Event("shown-tabs.bs.tabcollapse"))};a.prototype.showAccordion=function(){this.$tabs.trigger(b.Event("show-accordion.bs.tabcollapse"));var e=this.$tabs.find('li:not(.dropdown) [data-toggle="tab"], li:not(.dropdown) [data-toggle="pill"]'),c=this;e.each(function(){var f=b(this);c.$accordion.append(c._createAccordionGroup(c.$accordion.attr("id"),f))});this.$tabs.trigger(b.Event("shown-accordion.bs.tabcollapse"))};a.prototype._checkStateOnResize=function(){var c=this;b(window).resize(function(){clearTimeout(c._resizeTimeout);c._resizeTimeout=setTimeout(function(){c.checkState()},100)})};a.prototype._initAccordion=function(){this.$accordion=b('<div class="panel-group '+this.options.accordionClass+'" id="'+this.$tabs.attr("id")+'-accordion"></div>');this.$tabs.after(this.$accordion);this.$tabs.addClass(this.options.tabsClass);this.$tabs.siblings(".tab-content").addClass(this.options.tabsClass)};a.prototype._createAccordionGroup=function(j,g){var f=g.attr("data-target"),h=g.parent().is(".active");if(!f){f=g.attr("href");f=f&&f.replace(/.*(?=#[^\s]*$)/,"")}var c=b(f),e=c.attr("id")+"-collapse",i=b(this.options.accordionTemplate(g.html(),e,j,h));i.find(".panel-body").append(c.children("*").detach()).data("bs.tabcollapse.tabpane",c);return i};b.fn.tabCollapse=function(c){return this.each(function(){var g=b(this);var f=g.data("bs.tabcollapse");var e=b.extend({},a.DEFAULTS,g.data(),typeof c=="object"&&c);if(!f){g.data("bs.tabcollapse",new a(this,e))}})};b.fn.tabCollapse.Constructor=a}(window.jQuery);PPH.modules.FbApi=function(b){var h={externalId:null,appId:null,namespace:null,autoLogin:false,statusCookie:"socialAutologinStatus",cookieVal:"abort",apiUrl:"//connect.facebook.net/en_US/all.js",tokenLoginUrl:"/site/loginByToken",prefixUi:"facebookui"};var g=PPH.Module($.extend({},h,b)),j=g.config,e,f=false,k=[];function a(c){$.getJSON(j.tokenLoginUrl,{name:"facebook",token:c},function(l){if(l.success){g.page.refresh()}})}function i(c){if(c!==undefined){$.cookie(j.statusCookie,j.cookieVal,{path:"/"})}return $.cookie(j.statusCookie)===j.cookieVal}_authRequest=function(c){g.load(function(){FB.getLoginStatus(function(l){if(typeof l.error!="undefined"){PPH.page.modules.ExtRequester.instantLog("error",l.error.message,"FbApi.authRequest")}else{if(l.status==="connected"){if(j.externalId===null||l.authResponse.userID==j.externalId){if(typeof(c)==="function"){c(l)}}else{PPH.page.modules.ExtRequester.instantLog("error","The user is logged in to Facebook using a different account than the integrated","FbApi.authRequest")}}else{if(l.status==="not_authorized"){PPH.page.modules.ExtRequester.instantLog("error","The user is logged in to Facebook but has not authenticated our app","FbApi.authRequest")}else{PPH.page.modules.ExtRequester.instantLog("error","The user isn't logged in to Facebook","FbApi.authRequest")}}}})})};g.load=function(c){if(window.FB===undefined){if(!f){f=true;$.getScript(j.apiUrl).done(function(){FB.init({appId:j.appId,status:true,cookie:true,xfbml:true,version:"v3.0"});if(typeof(c)==="function"){c()}f=false})}else{var l=setInterval(function(){if(f===false){clearInterval(l);if(typeof(c)==="function"){c()}}},300)}}else{if(typeof(c)==="function"){c()}}};g.checkLoginStatus=function(c){g.load(function(){window.FB.getLoginStatus(function(l){if(c!==undefined){c((l.status==="connected")?l.authResponse.accessToken:null)}})})};g.init=function(){if($("div#fb-root").length==0){$("body").append('<div id="fb-root"></div>')}$(window).load(function(){g.load()});if(j.autoLogin&&!i()){i(true);g.checkLoginStatus(a)}$("body").on("click","[data-"+j.prefixUi+"-method]",function(l){l.preventDefault();g.ui($(this))});$.each($('[data-hook="tile-selector"]'),function(l,m){g.initTileSelector($(this))});var c=$("[data-"+j.prefixUi+"-onload]");$.each(c,function(l,m){g.ui($(m))})};g.validateActionData=function(o){var m=PPH.page.modules.ExtRequester.config.prefix;var l="FbApi.validateActionData";if(typeof o[m+"Verb"]=="undefined"){PPH.page.modules.ExtRequester.instantLog("error","Verb is missing from element attributes",l);return false}else{if(typeof o[m+"ObjectType"]=="undefined"){PPH.page.modules.ExtRequester.instantLog("error","Object type is missing from element attributes",l);return false}else{if(typeof o[m+"ObjectId"]=="undefined"){PPH.page.modules.ExtRequester.instantLog("error","Object id is missing from element attributes",l);return false}else{if(typeof o[m+"ObjectUrl"]=="undefined"){PPH.page.modules.ExtRequester.instantLog("error","Object url is missing from element attributes",l);return false}else{if(typeof o[m+"Options"]=="undefined"){PPH.page.modules.ExtRequester.instantLog("error","Options are missing from element attributes",l);return false}}}}}var n=PPH.page.modules.ExtRequester.config.availableObjects;var c=PPH.page.modules.ExtRequester.config.availableActions;if(typeof o[m+"ObjectType"]=="undefined"||$.inArray(o[m+"ObjectType"],n)==-1){PPH.page.modules.ExtRequester.instantLog("error","Object not configured",l);return false}if(typeof c[o[m+"ObjectType"]]=="undefined"||$.inArray(o[m+"Verb"],c[o[m+"ObjectType"]])==-1){PPH.page.modules.ExtRequester.instantLog("error",'Action "'+o[m+"Verb"]+'" not configured',l);return false}return true};g.isDuplicateAction=function(l,c,m){var n=$.param({objectType:l,objectId:c,action:m});if($.inArray(n,k)!=-1){return true}else{k.push(n)}return false};g.action=function(n,r){if(typeof n.data==="function"){n=n.data()}if(!g.validateActionData(n)){return false}var o=PPH.page.modules.ExtRequester.config.prefix;var c=PPH.page.modules.ExtRequester.config.requestRetries;var m=n[o+"Verb"];var l=n[o+"ObjectType"];var p=n[o+"ObjectId"];var q="/me/"+j.namespace+":"+m;var s=typeof n[o+"Options"]=="object"&&(typeof n[o+"Options"].length=="undefined"||n[o+"Options"].length>0)?n[o+"Options"]:{};s[n[o+"ObjectType"]]=n[o+"ObjectUrl"];if(PPH.page.modules.ExtRequester.exceedsActionLimit(m)){PPH.page.modules.ExtRequester.instantLog("error","Action limit ("+PPH.page.modules.ExtRequester.config.actionLimit+") exceeded","FbApi.action");return false}if(g.isDuplicateAction(l,p,m)){PPH.page.modules.ExtRequester.instantLog("error","Duplicate action "+m+" on "+l+": "+p,"FbApi.action");return false}if(PPH.page.modules.ExtRequester.config.explicitlyShared){s["fb:explicitly_shared"]=true}if(typeof r=="undefined"||r===null){r=function(t){c--;if(typeof t.error=="undefined"){PPH.page.modules.ExtRequester.addLog("action",{objectType:l,objectId:p,action:m,options:s,result:true,extRef:t.id,message:null},"FbApi.action",true);PPH.page.modules.ExtRequester.triggerLog()}else{var u=t.error.message;if(typeof t.error.code!="undefined"){u+=" - code: "+t.error.code;if(t.error.code==1660002){u=u+" - Retry "+c+" more time(s)";setTimeout(function(){PPH.page.modules.FbApi.request(q,"post",s,r,c)},PPH.page.modules.ExtRequester.config.requestTimeout)}}PPH.page.modules.ExtRequester.addLog("action",{objectType:l,objectId:p,action:m,options:s,result:false,extRef:null,message:u},"FbApi.action");PPH.page.modules.ExtRequester.triggerLog()}}}g.request(q,"post",s,r,c)};g.request=function(m,o,l,n,c){if(typeof c!="undefined"&&c==0){PPH.page.modules.ExtRequester.instantLog("error","Tried to sent request "+PPH.page.modules.ExtRequester.config.requestRetries+" times, I'm giving up.","FbApi.request");PPH.page.modules.ExtRequester.triggerError();return false}if(typeof n=="undefined"||n===null){n=function(p){if(typeof p.error!="undefined"){PPH.page.modules.ExtRequester.addLog("request",{result:false,message:p.error.message},"FbApi.request")}PPH.page.modules.ExtRequester.triggerError()}}_authRequest(function(p){if(p){window.FB.api(m,o,l,n)}})};g.validateUiData=function(l){var c="FbApi.validateUiData";if(typeof l[j.prefixUi+"Method"]=="undefined"){PPH.page.modules.ExtRequester.instantLog("error","Method of UI is missing from element attributes",c);return false}else{if(typeof l[j.prefixUi+"Params"]=="undefined"){PPH.page.modules.ExtRequester.instantLog("error","Params are missing from element attributes",c);return false}}return true};g.ui=function(m,q){if(m.hasClass("disabled")){return false}if(typeof m.data==="function"){m=m.data()}if(!g.validateUiData(m)){return false}var p=m[j.prefixUi+"Method"];var n=m[j.prefixUi+"Params"];var o=((typeof m.to!="undefined")?m.to:false);var l=((typeof m[j.prefixUi+"Filters"]!="undefined")?m[j.prefixUi+"Filters"]:["all"]);var c=((typeof n.successMessage!="undefined")?n.successMessage:"You successfully invited");if(typeof q=="undefined"||q===null){q=function(s){var u;if(typeof s.error=="undefined"){u=((typeof s.to!="undefined")?s.to.join(","):null);var t=((typeof s.to!="undefined")?s.to.length:0);var r=((typeof s.request!="undefined")?s.request:null);PPH.page.modules.ExtRequester.addLog("dialog",{method:p,options:n,result:true,extRef:r,message:u,count:t},"FbApi.action",true);PPH.page.modules.ExtRequester.triggerLog();if(t>0){PPH.success(c+" "+t+" friend"+(t>1?"s":"")+"!")}}else{var u=s.error.message;if(typeof s.error.code!="undefined"){u+=" - code: "+s.error.code}PPH.page.modules.ExtRequester.addLog("dialog",{method:p,options:n,result:false,extRef:null,message:u},"FbApi.ui");PPH.page.modules.ExtRequester.triggerLog()}PPH.page.modules.ExtRequester.trigger("complete",s)}}_authRequest(function(r){if(r){n=$.extend({method:p,app_id:j.appId,filters:l},n);if(r.status=="connected"){n.access_token=r.authResponse.accessToken}if(o){n.to=o}window.FB.ui(n,q)}})};g.initTileSelector=function(p){var c=typeof p.data("button")!="undefined"?$(p.data("button")):p.find('[data-hook="tile-button"]');var s=p.find('[data-hook="tile-container"]');var r=p.find('[data-hook="tile-error"]');var m=p.data("limit");var o=s.legnth;var q=o<100?2:3;var l="";var n={};p.find('[data-hook="tile-container"]').each(function(){n[$(this).data("id")]={id:$(this).data("id"),term:$(this).data("searchTerm").toLowerCase()}});c.data("to",[]).addClass("disabled");p.find(".tile-collection").tinyscrollbar({size:330,sizethumb:50});p.on("click",'[data-hook="tile-container"]',function(){var w=$(this);var v=c.data("to");if(w.hasClass("selected")){w.removeClass("selected");var u=$.inArray(w.data("id"),v);if(u!=-1){v.splice(u,1)}}else{if(!m||v.length<m){w.addClass("selected");v.push(w.data("id"))}}t(v.length);if(m&&v.length>=m){r.html("- Limit reached")}c.data("to",v)}).on("click",'[data-hook="tile-select-all"],[data-hook="tile-unselect-all"]',function(z){z.preventDefault();var y=$(this);var x=y.data("hook")=="tile-select-all"?"select":"unselect";var w=c.data("to");var u=x=="select"?s.not(":hidden").not(".selected"):s.filter(".selected");if(x=="select"){var v=m-w.length;u.each(function(){if(v>0){w.push($(this).data("id"));$(this).addClass("selected");v--}else{return false}})}else{s.removeClass("selected").show();c.data("to",[])}t(w.length)}).on("click",'[data-hook="tile-show-selected"]',function(v){v.preventDefault();var u=s.filter(".selected");s.hide();u.show();t(u.length);$(this).hide();p.find('[data-hook="tile-show-all"]').show();p.find('[data-hook="tile-search"]').val("")}).on("click",'[data-hook="tile-show-all"]',function(v){v.preventDefault();var u=s.filter(".selected");s.show();t(u.length);$(this).hide();p.find('[data-hook="tile-show-selected"]').show();p.find('[data-hook="tile-search"]').val("")}).on("keyup",'[data-hook="tile-search"]',function(w){var v=$(this);var u=v.val().toLowerCase();if(l!=u){l=u;s.show();if(u.length>=q){$.each(n,function(x,y){var z=y.id;if(y.term.indexOf(u)==-1){s.filter('[data-id="'+z+'"]').hide()}})}t(s.not(":hidden").filter(".selected").length)}}).on("click",'[data-hook="tile-search-reset"]',function(u){p.find('[data-hook="tile-search"]').val("");s.show();t(s.filter(".selected"))}).on("click",'[data-hook="tile-button"]',function(z){z.preventDefault();var y=$(this);var w=c.data("to");var v=w.length;if(!y.hasClass("disabled")&&v>0&&(!limit||v<limit)){var u=p.data("url");var x=p.find('[data-hook="tile-message"]').val();$.ajax({url:u,data:$.extend(PPH.getCsrf(),{message:x,friends:w}),type:"POST",success:function(A){if(typeof A.result=="undefined"){throw"Result variable in response not defined"}console.log("response",A)},error:function(A){throw ("Error occured while senting log to server")}})}});function t(w){var v=s.not(":hidden").length;var u=s.filter(".selected").length;r.html("");p.find('[data-hook="tile-show-selected"]').show();p.find('[data-hook="tile-show-all"]').hide();if(w==0){p.find('[data-hook="tile-select-all"]').show();p.find('[data-hook="tile-unselect-all"]').hide()}else{if(w>=v){p.find('[data-hook="tile-select-all"]').hide();p.find('[data-hook="tile-unselect-all"]').show()}else{p.find('[data-hook="tile-select-all"]').show();p.find('[data-hook="tile-unselect-all"]').show()}}if(p.find('[data-hook="tile-search"]').val().length>0){p.find('[data-hook="tile-search-button"]').hide();p.find('[data-hook="tile-search-reset"]').show()}else{p.find('[data-hook="tile-search-button"]').show();p.find('[data-hook="tile-search-reset"]').hide()}if(u>0){c.removeClass("disabled")}else{c.addClass("disabled")}if(m){p.find('[data-hook="tile-label-left"]').html(u)}}};return g};PPH.modules.GooglePlusApi=function(b){var a={apiUrl:"//apis.google.com/js/plusone.js"};var e=PPH.Module($.extend({},a,b)),f=e.config;e.load=function(c){if(window.Google===undefined){(function(g,j,h){function i(){var m,l=j.getElementsByTagName(h)[0],k=function(n,p,o){if(j.getElementById(p)){return}m=j.createElement(h);m.src=n;m.id=p;$.getScript(n);window.Google=true};k(f.apiUrl,"loadGoogleplus")}if(g.addEventListener){g.addEventListener("load",i,false)}else{if(g.attachEvent){g.attachEvent("onload",i)}}}(window,document,"script"));if(typeof(c)==="function"){c()}}else{if(typeof(c)==="function"){c()}}};e.init=function(){e.load()};return e};